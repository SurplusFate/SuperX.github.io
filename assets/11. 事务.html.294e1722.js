import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,e as t}from"./app.db8d92f8.js";const p={},e=t(`<h1 id="_11-\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#_11-\u4E8B\u52A1" aria-hidden="true">#</a> 11. \u4E8B\u52A1</h1><h2 id="_1-\u4E8B\u52A1\u56DE\u987E" tabindex="-1"><a class="header-anchor" href="#_1-\u4E8B\u52A1\u56DE\u987E" aria-hidden="true">#</a> 1. \u4E8B\u52A1\u56DE\u987E</h2><ol><li><p>\u4EC0\u4E48\u662F\u4E8B\u52A1</p><ol><li>\u8BB2 mysql \u7684\u65F6\u5019,\u63D0\u51FA\u4E86\u4E8B\u52A1 \u4E8B\u52A1\u662F\u6307\u4E00\u7EC4 sql \u8BED\u53E5\u7684\u96C6\u5408</li><li>\u96C6\u5408\u4E2D\u6709\u591A\u6761 sql \u8BED\u53E5\u53EF\u80FD\u662F insert , update ,select ,delete</li><li><strong>\u6211\u4EEC\u5E0C\u671B\u8FD9\u4E9B\u591A\u4E2A sql \u8BED\u53E5\u90FD\u80FD\u6210\u529F, \u6216\u8005\u90FD\u5931\u8D25</strong>, \u8FD9\u4E9B sql \u8BED\u53E5\u7684\u6267\u884C\u662F\u4E00\u81F4\u7684,\u4F5C\u4E3A\u4E00\u4E2A\u6574\u4F53\u6267\u884C</li></ol></li><li><p>\u5728\u4EC0\u4E48\u65F6\u5019\u60F3\u5230\u4F7F\u7528\u4E8B\u52A1</p><ol><li><strong>\u5F53\u6211\u7684\u64CD\u4F5C,\u6D89\u53CA\u5F97\u5230\u591A\u4E2A\u8868,\u6216\u8005\u662F\u591A\u4E2A sql \u8BED\u53E5\u7684 insert,update,delete</strong></li><li>\u9700\u8981\u4FDD\u8BC1\u8FD9\u4E9B\u8BED\u53E5\u90FD\u662F\u6210\u529F\u624D\u80FD\u5B8C\u6210\u6211\u7684\u529F\u80FD,\u6216\u8005\u90FD\u5931\u8D25,\u4FDD\u8BC1\u64CD\u4F5C\u662F\u7B26\u5408\u8981\u6C42\u7684</li><li>\u5728 java \u4EE3\u7801\u4E2D\u5199\u7A0B\u5E8F,\u63A7\u5236\u4E8B\u52A1,\u6B64\u65F6\u4E8B\u52A1\u5E94\u8BE5\u653E\u5728\u90A3\u91CC\u5462\uFF1F</li></ol><ul><li>service \u7C7B\u7684\u4E1A\u52A1\u65B9\u6CD5\u4E0A,\u56E0\u4E3A\u4E1A\u52A1\u65B9\u6CD5\u4F1A\u8C03\u7528\u591A\u4E2A dao \u65B9\u6CD5,\u6267\u884C\u591A\u4E2A sql \u8BED\u53E5</li></ul></li><li><p>\u901A\u5E38\u4F7F\u7528 JDBC \u8BBF\u95EE\u6570\u636E\u5E93, \u8FD8\u662F mybatis \u8BBF\u95EE\u6570\u636E\u5E93\u600E\u4E48\u5904\u7406\u4E8B\u52A1?</p><ol><li>jdbc \u8BBF\u95EE\u6570\u636E\u5E93,\u5904\u7406\u4E8B\u52A1, <code>Connection conn ; conn.commit(); conn.rollback();</code></li><li>mybatis \u8BBF\u95EE\u6570\u636E\u5E93,\u5904\u7406\u4E8B\u52A1, <code>SqlSession.commit(); SqlSession.rollback();</code></li><li>hibernate \u8BBF\u95EE\u6570\u636E\u5E93,\u5904\u7406\u4E8B\u52A1, <code>Session.commit(); Session.rollback();</code></li></ol></li><li><p>3 \u95EE\u9898\u4E2D\u4E8B\u52A1\u7684\u5904\u7406\u65B9\u5F0F,\u6709\u4EC0\u4E48\u4E0D\u8DB3</p><ol><li>\u4E0D\u540C\u7684\u6570\u636E\u5E93\u8BBF\u95EE\u6280\u672F,\u5904\u7406\u4E8B\u52A1\u7684\u5BF9\u8C61,\u65B9\u6CD5\u4E0D\u540C</li><li>\u9700\u8981\u4E86\u89E3\u4E0D\u540C\u6570\u636E\u5E93\u8BBF\u95EE\u6280\u672F\u4F7F\u7528\u4E8B\u52A1\u7684\u539F\u7406</li><li>\u638C\u63E1\u591A\u79CD\u6570\u636E\u5E93\u4E2D\u4E8B\u52A1\u7684\u5904\u7406\u903B\u8F91\u4EC0\u4E48\u65F6\u5019\u63D0\u4EA4\u4E8B\u52A1,\u4EC0\u4E48\u65F6\u5019\u56DE\u987E\u4E8B\u52A1, \u5904\u7406\u4E8B\u52A1\u7684\u591A\u79CD\u65B9\u6CD5</li><li>\u603B\u7ED3: \u5C31\u662F\u591A\u79CD\u6570\u636E\u5E93\u7684\u8BBF\u95EE\u6280\u672F,\u6709\u4E0D\u540C\u7684\u4E8B\u52A1\u5904\u7406\u7684\u673A\u5236,\u5BF9\u8C61,\u65B9\u6CD5</li></ol></li></ol><h2 id="_2-spring-\u4E2D\u7684\u4E8B\u52A1\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_2-spring-\u4E2D\u7684\u4E8B\u52A1\u7BA1\u7406" aria-hidden="true">#</a> 2. Spring \u4E2D\u7684\u4E8B\u52A1\u7BA1\u7406</h2><ul><li><p>spring \u63D0\u4F9B\u4E00\u79CD\u5904\u7406\u4E8B\u52A1\u7684\u7EDF\u4E00\u6A21\u578B, \u80FD\u4F7F\u7528\u7EDF\u4E00\u6B65\u9AA4,\u65B9\u5F0F\u5B8C\u6210\u591A\u79CD\u4E0D\u540C\u6570\u636E\u5E93\u8BBF\u95EE\u6280\u672F\u7684\u4E8B\u52A1\u5904\u7406</p><ul><li>\u4F7F\u7528 spring \u7684\u4E8B\u52A1\u5904\u7406\u673A\u5236,\u53EF\u4EE5\u5B8C\u6210 mybatis \u8BBF\u95EE\u6570\u636E\u5E93\u7684\u4E8B\u52A1\u5904\u7406</li><li>\u4F7F\u7528 spring \u7684\u4E8B\u52A1\u5904\u7406\u673A\u5236,\u53EF\u4EE5\u5B8C\u6210 hibernate \u8BBF\u95EE\u6570\u636E\u5E93\u7684\u4E8B\u52A1\u5904\u7406</li></ul></li><li><p>\u5904\u7406\u4E8B\u52A1,\u9700\u8981\u600E\u4E48\u505A,\u505A\u4EC0\u4E48</p><ul><li><p>spring \u5904\u7406\u4E8B\u52A1\u7684\u6A21\u578B,\u4F7F\u7528\u7684\u6B65\u9AA4\u90FD\u662F\u56FA\u5B9A\u7684\u628A\u4E8B\u52A1\u4F7F\u7528\u7684\u4FE1\u606F\u63D0\u4F9B\u7ED9 spring \u5C31\u53EF\u4EE5\u4E86</p></li><li><p>\u4E8B\u52A1\u5185\u90E8\u63D0\u4EA4,\u56DE\u6EDA\u4E8B\u52A1,**\u4F7F\u7528\u7684****\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61**,\u4EE3\u66FF\u4F60\u5B8C\u6210 commit,rollback</p><ul><li><p>\u4E8B\u52A1\u7BA1\u7406\u5668\u662F\u4E00\u4E2A\u63A5\u53E3\u548C\u4ED6\u7684\u4F17\u591A\u5B9E\u73B0\u7C7B</p><ul><li><p>\u63A5\u53E3: PlatformTransactionManager ,\u5B9A\u4E49\u4E86\u4E8B\u52A1\u91CD\u8981\u65B9\u6CD5 commit ,rollback</p></li><li><p>\u5B9E\u73B0\u7C7B: spring \u628A\u6BCF\u4E00\u79CD\u6570\u636E\u5E93\u8BBF\u95EE\u6280\u672F\u5BF9\u5E94\u7684\u4E8B\u52A1\u5904\u7406\u7C7B\u90FD\u521B\u5EFA\u597D\u4E86</p><ul><li>mybatis \u8BBF\u95EE\u6570\u636E\u5E93---spring \u521B\u5EFA\u597D\u7684\u662F DataSourceTransactionManager</li><li>hibernate \u8BBF\u95EE\u6570\u636E\u5E93----spring \u521B\u5EFA\u7684\u662F HibernateTransactionManager</li></ul></li></ul></li></ul></li><li><p>\u600E\u4E48\u4F7F\u7528: <strong>\u4F60\u9700\u8981\u544A\u8BC9 spring \u4F60\u7528\u662F\u90A3\u79CD\u6570\u636E\u5E93\u7684\u8BBF\u95EE\u6280\u672F</strong>,\u600E\u4E48\u544A\u8BC9 spring \u5462\uFF1F</p><ul><li><p>\u58F0\u660E\u6570\u636E\u5E93\u8BBF\u95EE\u6280\u672F\u5BF9\u5E94\u7684\u4E8B\u52A1\u7BA1\u7406\u5668\u5B9E\u73B0\u7C7B, \u5728 spring \u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u4F7F\u7528<code>&lt;bean&gt;</code>\u58F0\u660E\u5C31\u53EF\u4EE5\u4E86</p></li><li><p>\u4F8B\u5982,\u4F60\u8981\u4F7F\u7528 mybatis \u8BBF\u95EE\u6570\u636E\u5E93,\u4F60\u5E94\u8BE5\u5728 xml \u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E<code>&lt;bean id=\u201Cxxx&quot; class=&quot;...DataSourceTransactionManager&quot;&gt;</code></p></li></ul></li><li><p>\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5\u9700\u8981\u4EC0\u4E48\u6837\u7684\u4E8B\u52A1,<strong>\u8BF4\u660E\u9700\u8981\u4E8B\u52A1\u7684\u7C7B\u578B</strong></p><ul><li><p>\u8BF4\u660E\u65B9\u6CD5\u9700\u8981\u7684\u4E8B\u52A1:</p><ul><li><p>\u4E8B\u52A1\u7684\u9694\u79BB\u7EA7\u522B: \u6709 4 \u4E2A\u503C</p><ul><li>DEFAULT: \u91C7\u7528 DB \u9ED8\u8BA4\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B MySql \u7684\u9ED8\u8BA4\u4E3A REPEATABLE_READ\uFF1B Oracle \u9ED8\u8BA4\u4E3A READ_COMMITTED</li><li>READ_UNCOMMITTED: \u8BFB\u672A\u63D0\u4EA4\u672A\u89E3\u51B3\u4EFB\u4F55\u5E76\u53D1\u95EE\u9898</li><li>READ_COMMITTED: \u8BFB\u5DF2\u63D0\u4EA4\u89E3\u51B3\u810F\u8BFB,\u5B58\u5728\u4E0D\u53EF\u91CD\u590D\u8BFB\u4E0E\u5E7B\u8BFB</li><li>REPEATABLE_READ: \u53EF\u91CD\u590D\u8BFB\u89E3\u51B3\u810F\u8BFB\u3001\u4E0D\u53EF\u91CD\u590D\u8BFB,\u5B58\u5728\u5E7B\u8BFB</li><li>SERIALIZABLE: \u4E32\u884C\u5316\u4E0D\u5B58\u5728\u5E76\u53D1\u95EE\u9898</li></ul></li></ul></li><li><p>\u4E8B\u52A1\u7684\u8D85\u65F6\u65F6\u95F4: \u8868\u793A\u4E00\u4E2A\u65B9\u6CD5\u6700\u957F\u7684\u6267\u884C\u65F6\u95F4,\u5982\u679C\u65B9\u6CD5\u6267\u884C\u65F6\u8D85\u8FC7\u4E86\u65F6\u95F4,\u4E8B\u52A1\u5C31\u56DE\u6EDA\u5355\u4F4D\u662F\u79D2, \u6574\u6570\u503C, \u9ED8\u8BA4\u662F -1.</p></li><li><p>\u4E8B\u52A1\u7684\u4F20\u64AD\u884C\u4E3A : \u63A7\u5236\u4E1A\u52A1\u65B9\u6CD5\u662F\u4E0D\u662F\u6709\u4E8B\u52A1\u7684, \u662F\u4EC0\u4E48\u6837\u7684\u4E8B\u52A1\u7684</p><ul><li>7 \u4E2A\u4F20\u64AD\u884C\u4E3A,\u8868\u793A\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5\u8C03\u7528\u65F6,\u4E8B\u52A1\u5728\u65B9\u6CD5\u4E4B\u95F4\u662F\u5982\u679C\u4F7F\u7528\u7684</li><li><strong>PROPAGATION_REQUIRED, PROPAGATION_REQUIRES_NEW, PROPAGATION_SUPPORTS(<strong>\u9700\u8981\u638C\u63E1</strong>)</strong></li><li>PROPAGATION_MANDATORY, PROPAGATION_NESTED, PROPAGATION_NEVER, PROPAGATION_NOT_SUPPORTED</li></ul></li></ul></li><li><p>\u63D0\u4EA4\u4E8B\u52A1,\u56DE\u6EDA\u4E8B\u52A1\u7684\u65F6\u673A</p><ul><li><p>\u5F53\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5,\u6267\u884C\u6210\u529F,\u6CA1\u6709\u5F02\u5E38\u629B\u51FA,\u5F53\u65B9\u6CD5\u6267\u884C\u5B8C\u6BD5,spring \u5728\u65B9\u6CD5\u6267\u884C\u540E\u63D0\u4EA4\u4E8B\u52A1\u4E8B\u52A1\u7BA1\u7406\u5668 commit</p></li><li><p>\u5F53\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5\u629B\u51FA\u8FD0\u884C\u65F6\u5F02\u5E38\u6216 ERROR, spring \u6267\u884C\u56DE\u6EDA,\u8C03\u7528\u4E8B\u52A1\u7BA1\u7406\u5668\u7684 rollback</p><ul><li>\u8FD0\u884C\u65F6\u5F02\u5E38\u7684\u5B9A\u4E49: RuntimeException \u548C\u4ED6\u7684\u5B50\u7C7B\u90FD\u662F\u8FD0\u884C\u65F6\u5F02\u5E38, \u4F8B\u5982 NullPointException , NumberFormatException</li></ul></li><li><p>\u5F53\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5\u629B\u51FA\u975E\u8FD0\u884C\u65F6\u5F02\u5E38, \u4E3B\u8981\u662F\u53D7\u67E5\u5F02\u5E38\u65F6,\u63D0\u4EA4\u4E8B\u52A1</p><ul><li>\u53D7\u67E5\u5F02\u5E38: \u5728\u4F60\u5199\u4EE3\u7801\u4E2D,\u5FC5\u987B\u5904\u7406\u7684\u5F02\u5E38\u4F8B\u5982 IOException, SQLException</li></ul></li></ul></li></ul></li><li><p>\u603B\u7ED3 spring \u7684\u4E8B\u52A1</p><ul><li><p>\u7BA1\u7406\u4E8B\u52A1\u7684\u662F \u4E8B\u52A1\u7BA1\u7406\u548C\u4ED6\u7684\u5B9E\u73B0\u7C7B</p></li><li><p>spring \u7684\u4E8B\u52A1\u662F\u4E00\u4E2A\u7EDF\u4E00\u6A21\u578B</p><ul><li>\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u4E8B\u52A1\u7BA1\u7406\u5668\u5B9E\u73B0\u7C7B,\u4F7F\u7528<code>&lt;bean&gt;</code></li><li>\u6307\u5B9A\u54EA\u4E9B\u7C7B,\u54EA\u4E9B\u65B9\u6CD5\u9700\u8981\u52A0\u5165\u4E8B\u52A1\u7684\u529F\u80FD</li><li>\u6307\u5B9A\u65B9\u6CD5\u9700\u8981\u7684\u9694\u79BB\u7EA7\u522B,\u4F20\u64AD\u884C\u4E3A,\u8D85\u65F6</li></ul></li></ul></li></ul><h2 id="_3-\u6A21\u62DF\u4E8B\u52A1\u73AF\u5883\u642D\u5EFA" tabindex="-1"><a class="header-anchor" href="#_3-\u6A21\u62DF\u4E8B\u52A1\u73AF\u5883\u642D\u5EFA" aria-hidden="true">#</a> 3. \u6A21\u62DF\u4E8B\u52A1\u73AF\u5883\u642D\u5EFA</h2><h3 id="_1-dao-\u5C42" tabindex="-1"><a class="header-anchor" href="#_1-dao-\u5C42" aria-hidden="true">#</a> 1. dao \u5C42</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GoodsDao</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u66F4\u65B0\u5E93\u5B58</span>
    <span class="token comment">// goods\u8868\u793A\u672C\u6B21\u7528\u6237\u8D2D\u4E70\u7684\u5546\u54C1\u4FE1\u606F, id, \u8D2D\u4E70\u6570\u91CF</span>
    <span class="token keyword">int</span> <span class="token function">updateGoods</span><span class="token punctuation">(</span><span class="token class-name">Goods</span> goods<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u67E5\u8BE2\u5546\u54C1\u7684\u4FE1\u606F</span>
    <span class="token class-name">Goods</span> <span class="token function">selectGoods</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.dao.GoodsDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoods<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.domain.Goods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id, name, amount, price
    from springtrans.goods
    where id = #{gid}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateGoods<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update springtrans.goods
    set amount = amount - #{amount}
    where id = #{id}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SaleDao</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u589E\u52A0\u9500\u552E\u8BB0\u5F55</span>
    <span class="token keyword">int</span> <span class="token function">insertSale</span><span class="token punctuation">(</span><span class="token class-name">Sale</span> sale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.dao.SaleDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertSale<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into springtrans.sale(gid, nums)
    values (#{gid}, #{nums})
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u5B9E\u4F53\u7C7B" tabindex="-1"><a class="header-anchor" href="#_2-\u5B9E\u4F53\u7C7B" aria-hidden="true">#</a> 2. \u5B9E\u4F53\u7C7B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> amount<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Float</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sale</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> nums<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-service-\u5C42" tabindex="-1"><a class="header-anchor" href="#_3-service-\u5C42" aria-hidden="true">#</a> 3. service \u5C42</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BuyGoodsService</span> <span class="token punctuation">{</span>

    <span class="token comment">// \u8D2D\u4E70\u5546\u54C1\u7684\u65B9\u6CD5, goodsId: \u8D2D\u4E70\u5546\u54C1\u7684\u7F16\u53F7, nums: \u8D2D\u4E70\u7684\u6570\u91CF</span>
    <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> goodsId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BuyGoodsServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BuyGoodsService</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">SaleDao</span> saleDao<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">GoodsDao</span> goodsDao<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> goodsId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5F00\u59CB====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8BB0\u5F55\u9500\u552E\u4FE1\u606F,\u5411sale\u8868\u6DFB\u52A0\u8BB0\u5F55</span>
    <span class="token class-name">Sale</span> sale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setGid</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setNums</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    saleDao<span class="token punctuation">.</span><span class="token function">insertSale</span><span class="token punctuation">(</span>sale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u66F4\u65B0\u5E93\u5B58</span>
    <span class="token class-name">Goods</span> goods <span class="token operator">=</span> goodsDao<span class="token punctuation">.</span><span class="token function">selectGoods</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>goods <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5546\u54C1\u4E0D\u5B58\u5728</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u4E0D\u5B58\u5728&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotEnoughException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4FEE\u6539\u5E93\u5B58\u4E86</span>
    <span class="token class-name">Goods</span> buyGoods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setAmount</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    goodsDao<span class="token punctuation">.</span><span class="token function">updateGoods</span><span class="token punctuation">(</span>buyGoods<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5B8C\u6210====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSaleDao</span><span class="token punctuation">(</span><span class="token class-name">SaleDao</span> saleDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>saleDao <span class="token operator">=</span> saleDao<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setGoodsDao</span><span class="token punctuation">(</span><span class="token class-name">GoodsDao</span> goodsDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>goodsDao <span class="token operator">=</span> goodsDao<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_4-\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 4. \u914D\u7F6E\u6587\u4EF6</h3><ol><li><p>jdbc.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/springtrans</span>
<span class="token key attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">jdbc.passwd</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">jdbc.max</span><span class="token punctuation">=</span><span class="token value attr-value">30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>mybatis.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u8BBE\u7F6E\u522B\u540D--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--name:\u5B9E\u4F53\u7C7B\u6240\u5728\u7684\u5305\u540D
            \u8868\u793Acom.bjpowernode.domain\u5305\u4E2D\u7684\u5217\u540D\u5C31\u662F\u522B\u540D
            \u4F60\u53EF\u4EE5\u4F7F\u7528Student\u8868\u793Acom.bjpowenrode.domain.Student
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.domain<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- sql mapper(sql\u6620\u5C04\u6587\u4EF6)\u7684\u4F4D\u7F6E--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
        name: \u662F\u5305\u540D, \u8FD9\u4E2A\u5305\u4E2D\u7684\u6240\u6709mapper.xml\u4E00\u6B21\u90FD\u80FD\u52A0\u8F7D
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>applicationContext.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context
                        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--
    \u628A\u6570\u636E\u5E93\u7684\u914D\u7F6E\u4FE1\u606F,\u5199\u5728\u4E00\u4E2A\u72EC\u7ACB\u7684\u6587\u4EF6,\u7F16\u8BD1\u4FEE\u6539\u6570\u636E\u5E93\u7684\u914D\u7F6E\u5185\u5BB9
    spring\u77E5\u9053jdbc.properties\u6587\u4EF6\u7684\u4F4D\u7F6E
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--\u58F0\u660E\u6570\u636E\u6E90DataSource, \u4F5C\u7528\u662F\u8FDE\u63A5\u6570\u636E\u5E93\u7684--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>init<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--set\u6CE8\u5165\u7ED9DruidDataSource\u63D0\u4F9B\u8FDE\u63A5\u6570\u636E\u5E93\u4FE1\u606F --&gt;</span>
    <span class="token comment">&lt;!--    \u4F7F\u7528\u5C5E\u6027\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u6570\u636E,\u8BED\u6CD5 \${key} --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--setUrl()--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.passwd}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.max}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--\u58F0\u660E\u7684\u662Fmybatis\u4E2D\u63D0\u4F9B\u7684SqlSessionFactoryBean\u7C7B,\u8FD9\u4E2A\u7C7B\u5185\u90E8\u521B\u5EFASqlSessionFactory\u7684
        SqlSessionFactory  sqlSessionFactory = new ..
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--set\u6CE8\u5165,\u628A\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4ED8\u7ED9\u4E86dataSource\u5C5E\u6027--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--mybatis\u4E3B\u914D\u7F6E\u6587\u4EF6\u7684\u4F4D\u7F6E
        configLocation\u5C5E\u6027\u662FResource\u7C7B\u578B,\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6
        \u5B83\u7684\u8D4B\u503C,\u4F7F\u7528value,\u6307\u5B9A\u6587\u4EF6\u7684\u8DEF\u5F84,\u4F7F\u7528classpath:\u8868\u793A\u6587\u4EF6\u7684\u4F4D\u7F6E
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>configLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:mybatis.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--\u521B\u5EFAdao\u5BF9\u8C61,\u4F7F\u7528SqlSession\u7684getMapper\uFF08StudentDao.class\uFF09
        MapperScannerConfigurer:\u5728\u5185\u90E8\u8C03\u7528getMapper()\u751F\u6210\u6BCF\u4E2Adao\u63A5\u53E3\u7684\u4EE3\u7406\u5BF9\u8C61
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u6307\u5B9ASqlSessionFactory\u5BF9\u8C61\u7684id--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--\u6307\u5B9A\u5305\u540D, \u5305\u540D\u662Fdao\u63A5\u53E3\u6240\u5728\u7684\u5305\u540D
            MapperScannerConfigurer\u4F1A\u626B\u63CF\u8FD9\u4E2A\u5305\u4E2D\u7684\u6240\u6709\u63A5\u53E3,\u628A\u6BCF\u4E2A\u63A5\u53E3\u90FD\u6267\u884C
            \u4E00\u6B21getMapper()\u65B9\u6CD5,\u5F97\u5230\u6BCF\u4E2A\u63A5\u53E3\u7684dao\u5BF9\u8C61
            \u521B\u5EFA\u597D\u7684dao\u5BF9\u8C61\u653E\u5165\u5230spring\u7684\u5BB9\u5668\u4E2D\u7684 dao\u5BF9\u8C61\u7684\u9ED8\u8BA4\u540D\u79F0\u662F \u63A5\u53E3\u540D\u9996\u5B57\u6BCD\u5C0F\u5199
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.dao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u58F0\u660Eservice--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buyService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.bjpowernode.service.impl.BuyGoodsServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saleDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saleDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_4-\u4E8B\u52A1\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_4-\u4E8B\u52A1\u5904\u7406" aria-hidden="true">#</a> 4. \u4E8B\u52A1\u5904\u7406</h2><h3 id="_1-spring-\u6846\u67B6\u4E2D\u63D0\u4F9B\u7684\u4E8B\u52A1\u5904\u7406\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#_1-spring-\u6846\u67B6\u4E2D\u63D0\u4F9B\u7684\u4E8B\u52A1\u5904\u7406\u65B9\u6848" aria-hidden="true">#</a> 1. spring \u6846\u67B6\u4E2D\u63D0\u4F9B\u7684\u4E8B\u52A1\u5904\u7406\u65B9\u6848</h3><ol><li>\u9002\u5408\u4E2D\u5C0F\u9879\u76EE\u4F7F\u7528\u7684, \u6CE8\u89E3\u65B9\u6848</li><li>spring \u6846\u67B6\u81EA\u5DF1\u7528 aop \u5B9E\u73B0\u7ED9\u4E1A\u52A1\u65B9\u6CD5\u589E\u52A0\u4E8B\u52A1\u7684\u529F\u80FD, \u4F7F\u7528<code>@Transactional</code>\u6CE8\u89E3\u589E\u52A0\u4E8B\u52A1</li><li><code>@Transactional</code>\u6CE8\u89E3\u662F spring \u6846\u67B6\u81EA\u5DF1\u6CE8\u89E3,\u653E\u5728 public \u65B9\u6CD5\u7684\u4E0A\u9762,\u8868\u793A\u5F53\u524D\u65B9\u6CD5\u5177\u6709\u4E8B\u52A1</li><li><strong>\u53EF\u4EE5\u7ED9\u6CE8\u89E3\u7684\u5C5E\u6027\u8D4B\u503C,\u8868\u793A\u5177\u4F53\u7684\u9694\u79BB\u7EA7\u522B,\u4F20\u64AD\u884C\u4E3A,\u5F02\u5E38\u4FE1\u606F\u7B49\u7B49</strong></li></ol><p>\u4F7F\u7528<code>@Transactional</code>\u7684\u6B65\u9AA4:</p><ul><li>\u9700\u8981\u58F0\u660E\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61<code>&lt;bean id=&quot;xx&quot; class=&quot;DataSourceTransactionManager&quot;&gt;</code></li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u4F7F\u7528spring\u7684\u4E8B\u52A1\u5904\u7406--&gt;</span>
<span class="token comment">&lt;!--1. \u58F0\u660E\u4E8B\u52A1\u7BA1\u7406\u5668--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u8FDE\u63A5\u7684\u6570\u636E\u5E93, \u6307\u5B9A\u6570\u636E\u6E90--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5F00\u542F\u4E8B\u52A1\u6CE8\u89E3\u9A71\u52A8, \u544A\u8BC9 spring \u6846\u67B6,\u6211\u8981\u4F7F\u7528\u6CE8\u89E3\u7684\u65B9\u5F0F\u7BA1\u7406\u4E8B\u52A1</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--2. \u5F00\u542F\u4E8B\u52A1\u6CE8\u89E3\u9A71\u52A8,\u544A\u8BC9spring\u4F7F\u7528\u6CE8\u89E3\u7BA1\u7406\u4E8B\u52A1,\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
           transaction-manager:\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61\u7684id
    --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>spring \u4F7F\u7528 aop \u673A\u5236,\u521B\u5EFA<code>@Transactional</code>\u6240\u5728\u7684\u7C7B\u4EE3\u7406\u5BF9\u8C61,\u7ED9\u65B9\u6CD5\u52A0\u5165\u4E8B\u52A1\u7684\u529F\u80FD</li></ul><p>spring \u7ED9\u4E1A\u52A1\u65B9\u6CD5\u52A0\u5165\u4E8B\u52A1:</p><ul><li>\u5728\u4F60\u7684\u4E1A\u52A1\u65B9\u6CD5\u6267\u884C\u4E4B\u524D,\u5148\u5F00\u542F\u4E8B\u52A1,\u5728\u4E1A\u52A1\u65B9\u6CD5\u4E4B\u540E\u63D0\u4EA4\u6216\u56DE\u6EDA\u4E8B\u52A1,\u4F7F\u7528 aop \u7684\u73AF\u7ED5\u901A\u77E5</li><li>\u5728\u4F60\u7684\u65B9\u6CD5\u7684\u4E0A\u9762\u52A0\u5165<code>@Trancational</code></li></ul><p>\u5728 applicationContext.xml \u4E2D\u58F0\u660E\u548C\u5F00\u542F\u4E8B\u52A1</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u4F7F\u7528spring\u7684\u4E8B\u52A1\u5904\u7406--&gt;</span>
<span class="token comment">&lt;!--1. \u58F0\u660E\u4E8B\u52A1\u7BA1\u7406\u5668--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u8FDE\u63A5\u7684\u6570\u636E\u5E93, \u6307\u5B9A\u6570\u636E\u6E90--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--2. \u5F00\u542F\u4E8B\u52A1\u6CE8\u89E3\u9A71\u52A8,\u544A\u8BC9spring\u4F7F\u7528\u6CE8\u89E3\u7BA1\u7406\u4E8B\u52A1,\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61
           transaction-manager:\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61\u7684id
    --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED9 BuyGoodsServiceImpl \u4E2D\u7684 buy()\u65B9\u6CD5\u6DFB\u52A0\u4E8B\u52A1\u63A7\u5236</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
   * rollbackFor:\u8868\u793A\u53D1\u751F\u6307\u5B9A\u7684\u5F02\u5E38\u4E00\u5B9A\u56DE\u6EDA. \u5904\u7406\u903B\u8F91\u662F:  1) spring\u6846\u67B6\u4F1A\u9996\u5148\u68C0\u67E5\u65B9\u6CD5\u629B\u51FA\u7684\u5F02\u5E38\u662F\u4E0D\u662F\u5728rollbackFor\u7684\u5C5E\u6027\u503C\u4E2D
   * \u5982\u679C\u5F02\u5E38\u5728rollbackFor\u5217\u8868\u4E2D,\u4E0D\u7BA1\u662F\u4EC0\u4E48\u7C7B\u578B\u7684\u5F02\u5E38,\u4E00\u5B9A\u56DE\u6EDA 2)
   * \u5982\u679C\u4F60\u7684\u629B\u51FA\u7684\u5F02\u5E38\u4E0D\u5728rollbackFor\u5217\u8868\u4E2D,spring\u4F1A\u5224\u65AD\u5F02\u5E38\u662F\u4E0D\u662FRuntimeException, \u5982\u679C\u662F\u4E00\u5B9A\u56DE\u6EDA
   */</span>
<span class="token comment">/* @Transactional(
          propagation = Propagation.REQUIRED,
          isolation = Isolation.DEFAULT,
          readOnly = false,
          rollbackFor = {
                  NullPointerException.class,  NotEnoughException.class
          }
  )*/</span>

<span class="token comment">// \u4F7F\u7528\u7684\u662F\u4E8B\u52A1\u63A7\u5236\u7684\u9ED8\u8BA4\u503C, \u9ED8\u8BA4\u7684\u4F20\u64AD\u884C\u4E3A\u662FREQUIRED,\u9ED8\u8BA4\u7684\u9694\u79BB\u7EA7\u522BDEFAULT</span>
<span class="token comment">// \u9ED8\u8BA4\u629B\u51FA\u8FD0\u884C\u65F6\u5F02\u5E38,\u56DE\u6EDA\u4E8B\u52A1</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> goodsId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5F00\u59CB====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8BB0\u5F55\u9500\u552E\u4FE1\u606F,\u5411sale\u8868\u6DFB\u52A0\u8BB0\u5F55</span>
    <span class="token class-name">Sale</span> sale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setGid</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setNums</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    saleDao<span class="token punctuation">.</span><span class="token function">insertSale</span><span class="token punctuation">(</span>sale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u66F4\u65B0\u5E93\u5B58</span>
    <span class="token class-name">Goods</span> goods <span class="token operator">=</span> goodsDao<span class="token punctuation">.</span><span class="token function">selectGoods</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>goods <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5546\u54C1\u4E0D\u5B58\u5728</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u4E0D\u5B58\u5728&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotEnoughException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4FEE\u6539\u5E93\u5B58\u4E86</span>
    <span class="token class-name">Goods</span> buyGoods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setAmount</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    goodsDao<span class="token punctuation">.</span><span class="token function">updateGoods</span><span class="token punctuation">(</span>buyGoods<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5B8C\u6210====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u4F7F\u7528-aspectj-\u7684-aop-\u914D\u7F6E\u7BA1\u7406\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#_2-\u4F7F\u7528-aspectj-\u7684-aop-\u914D\u7F6E\u7BA1\u7406\u4E8B\u52A1" aria-hidden="true">#</a> 2. \u4F7F\u7528 aspectj \u7684 aop \u914D\u7F6E\u7BA1\u7406\u4E8B\u52A1</h3><p>\u9002\u5408\u5927\u578B\u9879\u76EE,\u6709\u5F88\u591A\u7684\u7C7B,\u65B9\u6CD5,\u9700\u8981\u5927\u91CF\u7684\u914D\u7F6E\u4E8B\u52A1,\u4F7F\u7528 aspectj \u6846\u67B6\u529F\u80FD,\u5728 spring \u914D\u7F6E\u6587\u4EF6\u4E2D\u58F0\u660E\u7C7B,\u65B9\u6CD5\u9700\u8981\u7684\u4E8B\u52A1\u8FD9\u79CD\u65B9\u5F0F\u4E1A\u52A1\u65B9\u6CD5\u548C\u4E8B\u52A1\u914D\u7F6E\u5B8C\u5168\u5206\u79BB</p><p>\u5B9E\u73B0\u6B65\u9AA4: \u90FD\u662F\u5728 xml \u914D\u7F6E\u6587\u4EF6\u4E2D\u5B9E\u73B0</p><ol><li><p>\u8981\u4F7F\u7528\u7684\u662F aspectj \u6846\u67B6,\u9700\u8981\u52A0\u5165\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u58F0\u660E\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u58F0\u660E\u5F0F\u4E8B\u52A1\u5904\u7406: \u548C\u6E90\u4EE3\u7801\u5B8C\u5168\u5206\u79BB\u7684--&gt;</span>
<span class="token comment">&lt;!--1.\u58F0\u660E\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u58F0\u660E\u65B9\u6CD5\u9700\u8981\u7684\u4E8B\u52A1\u7C7B\u578B\uFF08\u914D\u7F6E\u65B9\u6CD5\u7684\u4E8B\u52A1\u5C5E\u6027\u3010\u9694\u79BB\u7EA7\u522B,\u4F20\u64AD\u884C\u4E3A,\u8D85\u65F6\u3011\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token comment">&lt;!--2.\u58F0\u660E\u4E1A\u52A1\u65B9\u6CD5\u5B83\u7684\u4E8B\u52A1\u5C5E\u6027\uFF08\u9694\u79BB\u7EA7\u522B,\u4F20\u64AD\u884C\u4E3A,\u8D85\u65F6\u65F6\u95F4\uFF09
        id:\u81EA\u5B9A\u4E49\u540D\u79F0,\u8868\u793A &lt;tx:advice&gt; \u548C &lt;/tx:advice&gt;\u4E4B\u95F4\u7684\u914D\u7F6E\u5185\u5BB9\u7684
        transaction-manager:\u4E8B\u52A1\u7BA1\u7406\u5668\u5BF9\u8C61\u7684id
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--tx:attributes: \u914D\u7F6E\u4E8B\u52A1\u5C5E\u6027--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--tx:method: \u7ED9\u5177\u4F53\u7684\u65B9\u6CD5\u914D\u7F6E\u4E8B\u52A1\u5C5E\u6027,method\u53EF\u4EE5\u6709\u591A\u4E2A,\u5206\u522B\u7ED9\u4E0D\u540C\u7684\u65B9\u6CD5\u8BBE\u7F6E\u4E8B\u52A1\u5C5E\u6027
                name:\u65B9\u6CD5\u540D\u79F0,1\uFF09\u5B8C\u6574\u7684\u65B9\u6CD5\u540D\u79F0,\u4E0D\u5E26\u6709\u5305\u548C\u7C7B
                            2\uFF09\u65B9\u6CD5\u53EF\u4EE5\u4F7F\u7528\u901A\u914D\u7B26,* \u8868\u793A\u4EFB\u610F\u5B57\u7B26
                propagation: \u4F20\u64AD\u884C\u4E3A,\u679A\u4E3E\u503C
                isolation: \u9694\u79BB\u7EA7\u522B
                rollback-for: \u4F60\u6307\u5B9A\u7684\u5F02\u5E38\u7C7B\u540D,\u5168\u9650\u5B9A\u7C7B\u540D \u53D1\u751F\u5F02\u5E38\u4E00\u5B9A\u56DE\u6EDA
            --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">isolation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DEFAULT<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.NullPointerException,com.bjpowernode.excep.NotEnoughException<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--\u4F7F\u7528\u901A\u914D\u7B26,\u6307\u5B9A\u5F88\u591A\u7684\u65B9\u6CD5--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRES_NEW<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--\u6307\u5B9A\u4FEE\u6539\u65B9\u6CD5--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modify*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--\u5220\u9664\u65B9\u6CD5--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remove*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--\u67E5\u8BE2\u65B9\u6CD5,query,search,find--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SUPPORTS<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u914D\u7F6E aop: \u6307\u5B9A\u54EA\u4E9B\u54EA\u7C7B\u8981\u521B\u5EFA\u4EE3\u7406</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u914D\u7F6Eaop--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--\u914D\u7F6E\u5207\u5165\u70B9\u8868\u8FBE\u5F0F: \u6307\u5B9A\u54EA\u4E9B\u5305\u4E2D\u7C7B,\u8981\u4F7F\u7528\u4E8B\u52A1
            id:\u5207\u5165\u70B9\u8868\u8FBE\u5F0F\u7684\u540D\u79F0,\u552F\u4E00\u503C
            expression: \u5207\u5165\u70B9\u8868\u8FBE\u5F0F,\u6307\u5B9A\u54EA\u4E9B\u7C7B\u8981\u4F7F\u7528\u4E8B\u52A1,aspectj\u4F1A\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61

            com.bjpowernode.service
            com.crm.service
            com.service
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..service..*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

 <span class="token comment">&lt;!--\u914D\u7F6E\u589E\u5F3A\u5668: \u5173\u8054adivce\u548Cpointcut
        advice-ref:\u901A\u77E5,\u4E0A\u9762tx:advice\u54EA\u91CC\u7684\u914D\u7F6E
        pointcut-ref: \u5207\u5165\u70B9\u8868\u8FBE\u5F0F\u7684id
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>servicePt<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>BuyGoodsServiceImpl \u4E2D\u7684 buy()\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buy</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> goodsId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5F00\u59CB====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8BB0\u5F55\u9500\u552E\u4FE1\u606F,\u5411sale\u8868\u6DFB\u52A0\u8BB0\u5F55</span>
    <span class="token class-name">Sale</span> sale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setGid</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sale<span class="token punctuation">.</span><span class="token function">setNums</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    saleDao<span class="token punctuation">.</span><span class="token function">insertSale</span><span class="token punctuation">(</span>sale<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u66F4\u65B0\u5E93\u5B58</span>
    <span class="token class-name">Goods</span> goods <span class="token operator">=</span> goodsDao<span class="token punctuation">.</span><span class="token function">selectGoods</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>goods <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5546\u54C1\u4E0D\u5B58\u5728</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u4E0D\u5B58\u5728&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotEnoughException</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F16\u53F7\u662F: &quot;</span> <span class="token operator">+</span> goodsId <span class="token operator">+</span> <span class="token string">&quot;,\u5546\u54C1\u5E93\u5B58\u4E0D\u8DB3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4FEE\u6539\u5E93\u5B58\u4E86</span>
    <span class="token class-name">Goods</span> buyGoods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Goods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>goodsId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    buyGoods<span class="token punctuation">.</span><span class="token function">setAmount</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
    goodsDao<span class="token punctuation">.</span><span class="token function">updateGoods</span><span class="token punctuation">(</span>buyGoods<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====buy\u65B9\u6CD5\u7684\u5B8C\u6210====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,38),o=[e];function l(c,i){return s(),a("div",null,o)}const k=n(p,[["render",l],["__file","11. \u4E8B\u52A1.html.vue"]]);export{k as default};
