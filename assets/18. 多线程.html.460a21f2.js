import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,e as p}from"./app.6cc3427f.js";const t={},e=p(`<h1 id="_18-\u591A\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#_18-\u591A\u7EBF\u7A0B" aria-hidden="true">#</a> 18. \u591A\u7EBF\u7A0B</h1><h2 id="\u7EBF\u7A0B\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u6982\u8FF0" aria-hidden="true">#</a> \u7EBF\u7A0B\u6982\u8FF0</h2><p>\u51E0\u4E4E\u6240\u6709\u7684\u64CD\u4F5C\u7CFB\u7EDF\u90FD\u652F\u6301\u540C\u65F6\u8FD0\u884C\u591A\u4E2A\u4EFB\u52A1\uFF0C\u4E00\u4E2A\u4EFB\u52A1\u901A\u5E38\u5C31\u662F\u4E00\u4E2A\u7A0B\u5E8F\uFF0C\u6BCF\u4E2A\u8FD0\u884C\u4E2D\u7684\u7A0B\u5E8F\u5C31\u662F\u4E00\u4E2A\u8FDB\u7A0B\u3002\u5F53\u4E00\u4E2A\u8FDB\u7A0B\u8FD0\u884C\u65F6\uFF0C\u5185\u90E8\u53EF\u80FD\u5305\u542B\u4E86\u591A\u4E2A\u987A\u5E8F\u6267\u884C\u6D41\uFF0C\u6BCF\u4E2A\u987A\u5E8F\u6267\u884C\u6D41\u5C31\u662F\u4E00\u4E2A\u7EBF\u7A0B\u3002</p><h3 id="\u7EBF\u7A0B\u548C\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u548C\u8FDB\u7A0B" aria-hidden="true">#</a> \u7EBF\u7A0B\u548C\u8FDB\u7A0B</h3><h4 id="\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B" aria-hidden="true">#</a> \u7EBF\u7A0B</h4><p>\u73B0\u4EE3\u64CD\u4F5C\u7CFB\u7EDF\uFF08Windows\uFF0CmacOS\uFF0CLinux\uFF09\u90FD\u53EF\u4EE5\u6267\u884C\u591A\u4EFB\u52A1\u3002\u591A\u4EFB\u52A1\u5C31\u662F\u540C\u65F6\u8FD0\u884C\u591A\u4E2A\u4EFB\u52A1\uFF0C\u4F8B\u5982\uFF1A\u6D4F\u89C8\u5668\u3001QQ\u3001\u97F3\u4E50\u3002</p><p>CPU \u6267\u884C\u4EE3\u7801\u90FD\u662F\u4E00\u6761\u4E00\u6761\u987A\u5E8F\u6267\u884C\u7684\uFF0C\u4F46\u662F\uFF0C\u5373\u4F7F\u662F\u5355\u6838 CPU\uFF0C\u4E5F\u53EF\u4EE5\u540C\u65F6\u8FD0\u884C\u591A\u4E2A\u4EFB\u52A1\u3002\u56E0\u4E3A\u64CD\u4F5C\u7CFB\u7EDF\u6267\u884C\u591A\u4EFB\u52A1\u5B9E\u9645\u4E0A\u5C31\u662F\u8BA9 CPU \u5BF9\u591A\u4E2A\u4EFB\u52A1\u8F6E\u6D41\u4EA4\u66FF\u6267\u884C\u3002</p><p>\u4F8B\u5982\uFF0C\u5047\u8BBE\u6211\u4EEC\u6709\u8BED\u6587\u3001\u6570\u5B66\u3001\u82F1\u8BED 3 \u95E8\u4F5C\u4E1A\u8981\u505A\uFF0C\u6BCF\u4E2A\u4F5C\u4E1A\u9700\u8981 30 \u5206\u949F\u3002\u6211\u4EEC\u628A\u8FD9 3 \u95E8\u4F5C\u4E1A\u770B\u6210\u662F 3 \u4E2A\u4EFB\u52A1\uFF0C\u53EF\u4EE5\u505A 1 \u5206\u949F\u8BED\u6587\u4F5C\u4E1A\uFF0C\u518D\u505A 1 \u5206\u949F\u6570\u5B66\u4F5C\u4E1A\uFF0C\u518D\u505A 1 \u5206\u949F\u82F1\u8BED\u4F5C\u4E1A\uFF1A\u8FD9\u6837\u8F6E\u6D41\u505A\u4E0B\u53BB\uFF0C\u5728\u67D0\u4E9B\u4EBA\u773C\u91CC\u770B\u6765\uFF0C\u505A\u4F5C\u4E1A\u7684\u901F\u5EA6\u5C31\u975E\u5E38\u5FEB\uFF0C\u770B\u4E0A\u53BB\u5C31\u50CF\u540C\u65F6\u5728\u505A 3 \u95E8\u4F5C\u4E1A\u4E00\u6837\u3002</p><p>\u7C7B\u4F3C\u7684\uFF0C\u64CD\u4F5C\u7CFB\u7EDF\u8F6E\u6D41\u8BA9\u591A\u4E2A\u4EFB\u52A1\u4EA4\u66FF\u6267\u884C\uFF0C\u4F8B\u5982\uFF0C\u8BA9\u6D4F\u89C8\u5668\u6267\u884C 0.001 \u79D2\uFF0C\u8BA9 QQ \u6267\u884C 0.001 \u79D2\uFF0C\u518D\u8BA9\u97F3\u4E50\u64AD\u653E\u5668\u6267\u884C 0.001 \u79D2\uFF0C\u5728\u4EBA\u770B\u6765\uFF0CCPU \u5C31\u662F\u5728\u540C\u65F6\u6267\u884C\u591A\u4E2A\u4EFB\u52A1\u3002</p><p>\u5373\u4F7F\u662F\u591A\u6838 CPU\uFF0C\u56E0\u4E3A\u901A\u5E38\u4EFB\u52A1\u7684\u6570\u91CF\u8FDC\u8FDC\u591A\u4E8E CPU \u7684\u6838\u6570\uFF0C\u6240\u4EE5\u4EFB\u52A1\u4E5F\u662F\u4EA4\u66FF\u6267\u884C\u7684\u3002</p><h4 id="\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u7A0B" aria-hidden="true">#</a> \u8FDB\u7A0B</h4><p>\u8BA1\u7B97\u673A\u4E2D\uFF0C\u6211\u4EEC\u628A\u4E00\u4E2A\u4EFB\u52A1\u79F0\u4E3A\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u6D4F\u89C8\u5668\u5C31\u662F\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u89C6\u9891\u64AD\u653E\u5668\u662F\u53E6\u4E00\u4E2A\u8FDB\u7A0B\uFF0C\u7C7B\u4F3C\u7684\uFF0C\u97F3\u4E50\u64AD\u653E\u5668\u548C Word \u90FD\u662F\u8FDB\u7A0B\u3002</p><p>\u67D0\u4E9B\u8FDB\u7A0B\u5185\u90E8\u8FD8\u9700\u8981\u540C\u65F6\u6267\u884C\u591A\u4E2A\u5B50\u4EFB\u52A1\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u5728\u4F7F\u7528 Word \u65F6\uFF0CWord \u53EF\u4EE5\u8BA9\u6211\u4EEC\u4E00\u8FB9\u6253\u5B57\uFF0C\u4E00\u8FB9\u8FDB\u884C\u62FC\u5199\u68C0\u67E5\uFF0C\u540C\u65F6\u8FD8\u53EF\u4EE5\u5728\u540E\u53F0\u8FDB\u884C\u6253\u5370\uFF0C\u6211\u4EEC\u628A\u5B50\u4EFB\u52A1\u79F0\u4E3A\u7EBF\u7A0B\u3002</p><p>\u8FDB\u7A0B\u548C\u7EBF\u7A0B\u7684\u5173\u7CFB\u5C31\u662F\uFF1A\u4E00\u4E2A\u8FDB\u7A0B\u53EF\u4EE5\u5305\u542B\u4E00\u4E2A\u6216\u591A\u4E2A\u7EBF\u7A0B\uFF0C\u4F46\u81F3\u5C11\u4F1A\u6709\u4E00\u4E2A\u7EBF\u7A0B\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>                        \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
                        \u2502Process   \u2502
                        \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
            \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502 Thread \u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
            \u2502Process   \u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502Process   \u2502
            \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502
\u2502Process   \u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502               Operating System               \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u64CD\u4F5C\u7CFB\u7EDF\u8C03\u5EA6\u7684\u6700\u5C0F\u4EFB\u52A1\u5355\u4F4D\u5176\u5B9E\u4E0D\u662F\u8FDB\u7A0B\uFF0C\u800C\u662F\u7EBF\u7A0B\u3002\u5E38\u7528\u7684 Windows\u3001Linux \u7B49\u64CD\u4F5C\u7CFB\u7EDF\u90FD\u91C7\u7528\u62A2\u5360\u5F0F\u591A\u4EFB\u52A1\uFF0C\u5982\u4F55\u8C03\u5EA6\u7EBF\u7A0B\u5B8C\u5168\u7531\u64CD\u4F5C\u7CFB\u7EDF\u51B3\u5B9A\uFF0C\u7A0B\u5E8F\u81EA\u5DF1\u4E0D\u80FD\u51B3\u5B9A\u4EC0\u4E48\u65F6\u5019\u6267\u884C\uFF0C\u4EE5\u53CA\u6267\u884C\u591A\u957F\u65F6\u95F4\u3002</p><p>\u56E0\u4E3A\u540C\u4E00\u4E2A\u5E94\u7528\u7A0B\u5E8F\uFF0C\u65E2\u53EF\u4EE5\u6709\u591A\u4E2A\u8FDB\u7A0B\uFF0C\u4E5F\u53EF\u4EE5\u6709\u591A\u4E2A\u7EBF\u7A0B\uFF0C\u56E0\u6B64\uFF0C\u5B9E\u73B0\u591A\u4EFB\u52A1\u7684\u65B9\u6CD5\uFF0C\u6709\u4EE5\u4E0B\u51E0\u79CD\uFF1A</p><p>\u591A\u8FDB\u7A0B\u6A21\u5F0F\uFF08\u6BCF\u4E2A\u8FDB\u7A0B\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\uFF09\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502Process   \u2502 \u2502Process   \u2502 \u2502Process   \u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502 \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502 \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502 \u2502\u2502 Thread \u2502\u2502 \u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502 \u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502 \u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u591A\u7EBF\u7A0B\u6A21\u5F0F\uFF08\u4E00\u4E2A\u8FDB\u7A0B\u6709\u591A\u4E2A\u7EBF\u7A0B\uFF09\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502Process             \u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u591A\u8FDB\u7A0B\uFF0B\u591A\u7EBF\u7A0B\u6A21\u5F0F\uFF08\u590D\u6742\u5EA6\u6700\u9AD8\uFF09\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502Process   \u2502\u2502Process   \u2502\u2502Process   \u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502\u2502\u2502 Thread \u2502\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u8FDB\u7A0B-vs-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u7A0B-vs-\u7EBF\u7A0B" aria-hidden="true">#</a> \u8FDB\u7A0B vs \u7EBF\u7A0B</h4><p>\u8FDB\u7A0B\u548C\u7EBF\u7A0B\u662F\u5305\u542B\u5173\u7CFB\uFF0C\u4F46\u662F\u591A\u4EFB\u52A1\u65E2\u53EF\u4EE5\u7531\u591A\u8FDB\u7A0B\u5B9E\u73B0\uFF0C\u4E5F\u53EF\u4EE5\u7531\u5355\u8FDB\u7A0B\u5185\u7684\u591A\u7EBF\u7A0B\u5B9E\u73B0\uFF0C\u8FD8\u53EF\u4EE5\u6DF7\u5408\u591A\u8FDB\u7A0B\uFF0B\u591A\u7EBF\u7A0B\u3002</p><p>\u5177\u4F53\u91C7\u7528\u54EA\u79CD\u65B9\u5F0F\uFF0C\u8981\u8003\u8651\u5230\u8FDB\u7A0B\u548C\u7EBF\u7A0B\u7684\u7279\u70B9\u3002</p><p>\u548C\u591A\u7EBF\u7A0B\u76F8\u6BD4\uFF0C\u591A\u8FDB\u7A0B\u7684\u7F3A\u70B9\u5728\u4E8E\uFF1A</p><ul><li>\u521B\u5EFA\u8FDB\u7A0B\u6BD4\u521B\u5EFA\u7EBF\u7A0B\u5F00\u9500\u5927\uFF0C\u5C24\u5176\u662F\u5728 Windows \u7CFB\u7EDF\u4E0A\uFF1B</li><li>\u8FDB\u7A0B\u95F4\u901A\u4FE1\u6BD4\u7EBF\u7A0B\u95F4\u901A\u4FE1\u8981\u6162\uFF0C\u56E0\u4E3A\u7EBF\u7A0B\u95F4\u901A\u4FE1\u5C31\u662F\u8BFB\u5199\u540C\u4E00\u4E2A\u53D8\u91CF\uFF0C\u901F\u5EA6\u5F88\u5FEB\u3002</li></ul><p>\u800C\u591A\u8FDB\u7A0B\u7684\u4F18\u70B9\u5728\u4E8E\uFF1A</p><p>\u591A\u8FDB\u7A0B\u7A33\u5B9A\u6027\u6BD4\u591A\u7EBF\u7A0B\u9AD8\uFF0C\u56E0\u4E3A\u5728\u591A\u8FDB\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E00\u4E2A\u8FDB\u7A0B\u5D29\u6E83\u4E0D\u4F1A\u5F71\u54CD\u5176\u4ED6\u8FDB\u7A0B\uFF0C\u800C\u5728\u591A\u7EBF\u7A0B\u7684\u60C5\u51B5\u4E0B\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7EBF\u7A0B\u5D29\u6E83\u4F1A\u76F4\u63A5\u5BFC\u81F4\u6574\u4E2A\u8FDB\u7A0B\u5D29\u6E83\u3002</p><h4 id="\u591A\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u591A\u7EBF\u7A0B" aria-hidden="true">#</a> \u591A\u7EBF\u7A0B</h4><p>Java \u8BED\u8A00\u5185\u7F6E\u4E86\u591A\u7EBF\u7A0B\u652F\u6301\uFF1A\u4E00\u4E2A Java \u7A0B\u5E8F\u5B9E\u9645\u4E0A\u662F\u4E00\u4E2A JVM \u8FDB\u7A0B\uFF0CJVM \u8FDB\u7A0B\u7528\u4E00\u4E2A\u4E3B\u7EBF\u7A0B\u6765\u6267\u884C<code>main()</code>\u65B9\u6CD5\uFF0C\u5728<code>main()</code>\u65B9\u6CD5\u5185\u90E8\uFF0C\u6211\u4EEC\u53C8\u53EF\u4EE5\u542F\u52A8\u591A\u4E2A\u7EBF\u7A0B\u3002\u6B64\u5916\uFF0CJVM \u8FD8\u6709\u8D1F\u8D23\u5783\u573E\u56DE\u6536\u7684\u5176\u4ED6\u5DE5\u4F5C\u7EBF\u7A0B\u7B49\u3002</p><p>\u56E0\u6B64\uFF0C\u5BF9\u4E8E\u5927\u591A\u6570 Java \u7A0B\u5E8F\u6765\u8BF4\uFF0C\u6211\u4EEC\u8BF4\u591A\u4EFB\u52A1\uFF0C\u5B9E\u9645\u4E0A\u662F\u8BF4\u5982\u4F55\u4F7F\u7528\u591A\u7EBF\u7A0B\u5B9E\u73B0\u591A\u4EFB\u52A1\u3002</p><p>\u548C\u5355\u7EBF\u7A0B\u76F8\u6BD4\uFF0C\u591A\u7EBF\u7A0B\u7F16\u7A0B\u7684\u7279\u70B9\u5728\u4E8E\uFF1A\u591A\u7EBF\u7A0B\u7ECF\u5E38\u9700\u8981\u8BFB\u5199\u5171\u4EAB\u6570\u636E\uFF0C\u5E76\u4E14\u9700\u8981\u540C\u6B65\u3002\u4F8B\u5982\uFF0C\u64AD\u653E\u7535\u5F71\u65F6\uFF0C\u5C31\u5FC5\u987B\u7531\u4E00\u4E2A\u7EBF\u7A0B\u64AD\u653E\u89C6\u9891\uFF0C\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u64AD\u653E\u97F3\u9891\uFF0C\u4E24\u4E2A\u7EBF\u7A0B\u9700\u8981\u534F\u8C03\u8FD0\u884C\uFF0C\u5426\u5219\u753B\u9762\u548C\u58F0\u97F3\u5C31\u4E0D\u540C\u6B65\u3002\u56E0\u6B64\uFF0C\u591A\u7EBF\u7A0B\u7F16\u7A0B\u7684\u590D\u6742\u5EA6\u9AD8\uFF0C\u8C03\u8BD5\u66F4\u56F0\u96BE\u3002</p><p>Java \u591A\u7EBF\u7A0B\u7F16\u7A0B\u7684\u7279\u70B9\u53C8\u5728\u4E8E\uFF1A</p><ul><li>\u591A\u7EBF\u7A0B\u6A21\u578B\u662F Java \u7A0B\u5E8F\u6700\u57FA\u672C\u7684\u5E76\u53D1\u6A21\u578B\uFF1B</li><li>\u540E\u7EED\u8BFB\u5199\u7F51\u7EDC\u3001\u6570\u636E\u5E93\u3001Web \u5F00\u53D1\u7B49\u90FD\u4F9D\u8D56 Java \u591A\u7EBF\u7A0B\u6A21\u578B\u3002</li></ul><h2 id="\u521B\u5EFA\u591A\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u591A\u7EBF\u7A0B" aria-hidden="true">#</a> \u521B\u5EFA\u591A\u7EBF\u7A0B</h2><p>Java \u8BED\u8A00\u5185\u7F6E\u4E86\u591A\u7EBF\u7A0B\u652F\u6301\u3002\u5F53 Java \u7A0B\u5E8F\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u5B9E\u9645\u4E0A\u662F\u542F\u52A8\u4E86\u4E00\u4E2A JVM \u8FDB\u7A0B\uFF0C\u7136\u540E\uFF0CJVM \u542F\u52A8\u4E3B\u7EBF\u7A0B\u6765\u6267\u884C<code>main()</code>\u65B9\u6CD5\u3002\u5728<code>main()</code>\u65B9\u6CD5\u4E2D\uFF0C\u6211\u4EEC\u53C8\u53EF\u4EE5\u542F\u52A8\u5176\u4ED6\u7EBF\u7A0B\u3002</p><h3 id="thread-\u7C7B\u521B\u5EFA\u7EBF\u7A0B\u7C7B" tabindex="-1"><a class="header-anchor" href="#thread-\u7C7B\u521B\u5EFA\u7EBF\u7A0B\u7C7B" aria-hidden="true">#</a> Thread \u7C7B\u521B\u5EFA\u7EBF\u7A0B\u7C7B</h3><p>\u901A\u8FC7\u7EE7\u627F<code>Thread</code>\u7C7B\u6765\u521B\u5EFA\u5E76\u542F\u52A8\u591A\u7EBF\u7A0B\u7684\u6B65\u9AA4\u5982\u4E0B\u3002</p><ol><li>\u5B9A\u4E49<code>Thread</code>\u7C7B\u7684\u5B50\u7C7B\uFF0C\u5E76\u91CD\u5199\u8BE5\u7C7B\u7684<code>run()</code>\u65B9\u6CD5\uFF0C\u8BE5<code>run()</code>\u65B9\u6CD5\u7684\u65B9\u6CD5\u4F53\u5C31\u4EE3\u8868\u4E86\u7EBF\u7A0B\u9700\u8981\u5B8C\u6210\u7684\u4EFB\u52A1\u3002\u56E0\u6B64\u628A<code>run()</code>\u65B9\u6CD5\u79F0\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\u3002</li><li>\u521B\u5EFA<code>Thread</code>\u5B50\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u5373\u521B\u5EFA\u4E86\u7EBF\u7A0B\u5BF9\u8C61\u3002</li><li>\u8C03\u7528\u7EBF\u7A0B\u5BF9\u8C61\u7684<code>start()</code>\u65B9\u6CD5\u6765\u542F\u52A8\u8BE5\u7EBF\u7A0B\u3002</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FirstThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8C03\u7528Thread\u7684currentThread()\u65B9\u6CD5\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u521B\u5EFA\u5E76\u542F\u52A8\u7B2C\u4E00\u4E2A\u7EBF\u7A0B</span>
        <span class="token keyword">new</span> <span class="token class-name">FirstThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u521B\u5EFA\u5E76\u542F\u52A8\u7B2C\u4E8C\u4E2A\u7EBF\u7A0B</span>
        <span class="token keyword">new</span> <span class="token class-name">FirstThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u91CD\u5199run()\u65B9\u6CD5\uFF0Crun()\u65B9\u6CD5\u7684\u65B9\u6CD5\u4F53\u5C31\u662F\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53\u7EBF\u7A0B\u7C7B\u7EE7\u627FThread\u7C7B\u65F6\uFF0C\u76F4\u63A5\u4F7F\u7528this\u5373\u53EF\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B</span>
      <span class="token comment">// Thread\u5BF9\u8C61\u7684getName()\u8FD4\u56DE\u5F53\u524D\u7EBF\u7A0B\u7684\u540D\u5B57</span>
      <span class="token comment">// \u56E0\u6B64\u53EF\u4EE5\u76F4\u63A5\u8C03\u7528getName()\u65B9\u6CD5\u8FD4\u56DE\u5F53\u524D\u7EBF\u7A0B\u7684\u540D\u5B57</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7A0B\u5E8F\u663E\u5F0F\u521B\u5EFA\u4E86 2 \u4E2A\u5B50\u7EBF\u7A0B\u548C\u4E3B\u7EBF\u7A0B\uFF0C<code>main()</code>\u65B9\u6CD5\u7684\u65B9\u6CD5\u4F53\u4EE3\u8868\u4E3B\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208201138582.png" alt="image-20220820104824187"></p><p>\u7A0B\u5E8F\u7528\u5230\u7684\u7EBF\u7A0B\u4E24\u4E2A\u65B9\u6CD5\u3002</p><p><code>Thread.currentThread()</code>\uFF1A<code>currentThread()</code>\u662F Thread \u7C7B\u7684\u9759\u6001\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u603B\u662F\u8FD4\u56DE\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u5BF9\u8C61\u3002</p><p><code>getName()</code>\uFF1A\u8BE5\u65B9\u6CD5\u662F Thread \u7C7B\u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u8FD4\u56DE\u8C03\u7528\u8BE5\u65B9\u6CD5\u7684\u7EBF\u7A0B\u540D\u5B57\u3002</p><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u7A0B\u5E8F\u53EF\u4EE5\u901A\u8FC7<code>setName(String name)</code>\u65B9\u6CD5\u4E3A\u7EBF\u7A0B\u8BBE\u7F6E\u540D\u5B57\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7<code>getName()</code>\u65B9\u6CD5\u8FD4\u56DE\u6307\u5B9A\u7EBF\u7A0B\u7684\u540D\u5B57\u3002</p><p>\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4E3B\u7EBF\u7A0B\u7684\u540D\u5B57\u4E3A<code>main</code>\uFF0C\u7528\u6237\u542F\u52A8\u7684\u591A\u4E2A\u7EBF\u7A0B\u7684\u540D\u5B57\u4F9D\u6B21\u4E3A<code>Thread-0</code>\u3001<code>Thread-1</code>\u3001<code>Thread-2</code>\u3001\u2026\u3001<code>Thread-n</code>\u7B49\u3002</p></div><p>\u901A\u8FC7\u5B9E\u4F8B\u5316\u4E00\u4E2A<code>Thread</code>\u5B9E\u4F8B\uFF0C\u7136\u540E\u8C03\u7528\u5B83\u7684<code>start()</code>\u65B9\u6CD5\u542F\u52A8\u591A\u7EBF\u7A0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u542F\u52A8\u65B0\u7EBF\u7A0B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u662F\u8FD9\u4E2A\u7EBF\u7A0B\u542F\u52A8\u540E\u5B9E\u9645\u4E0A\u4EC0\u4E48\u4E5F\u4E0D\u505A\u5C31\u7ACB\u523B\u7ED3\u675F\u4E86\u3002\u6211\u4EEC\u5E0C\u671B\u65B0\u7EBF\u7A0B\u80FD\u6267\u884C\u6307\u5B9A\u7684\u4EE3\u7801\uFF0C\u6709\u4EE5\u4E0B\u51E0\u79CD\u65B9\u6CD5\uFF1A</p><p>\u65B9\u6CD5\u4E00\uFF1A\u4ECE<code>Thread</code>\u6D3E\u751F\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7C7B\uFF0C\u7136\u540E\u8986\u5199<code>run()</code>\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u542F\u52A8\u65B0\u7EBF\u7A0B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start new thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u4E0A\u8FF0\u4EE3\u7801\uFF0C\u6CE8\u610F\u5230<code>start()</code>\u65B9\u6CD5\u4F1A\u5728\u5185\u90E8\u81EA\u52A8\u8C03\u7528\u5B9E\u4F8B\u7684<code>run()</code>\u65B9\u6CD5\u3002</p><p>\u65B9\u6CD5\u4E8C\uFF1A\u521B\u5EFA<code>Thread</code>\u5B9E\u4F8B\u65F6\uFF0C\u4F20\u5165\u4E00\u4E2A<code>Runnable</code>\u5B9E\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u542F\u52A8\u65B0\u7EBF\u7A0B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start new thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6216\u8005\u7528 Java8 \u5F15\u5165\u7684 lambda \u8BED\u6CD5\u8FDB\u4E00\u6B65\u7B80\u5199\u4E3A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start new thread!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u542F\u52A8\u65B0\u7EBF\u7A0B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u7EBF\u7A0B\u6267\u884C\u7684\u6253\u5370\u8BED\u53E5\uFF0C\u548C\u76F4\u63A5\u5728<code>main()</code>\u65B9\u6CD5\u6267\u884C\u7684\u533A\u522B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main start...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;thread run...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;thread end.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main end...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>main</code>\u7EBF\u7A0B\u6267\u884C\u7684\u4EE3\u7801\u6709 4 \u884C\uFF0C\u9996\u5148\u6253\u5370<code>main start</code>\uFF0C\u7136\u540E\u521B\u5EFA<code>Thread</code>\u5BF9\u8C61\uFF0C\u7D27\u63A5\u7740\u8C03\u7528<code>start()</code>\u542F\u52A8\u65B0\u7EBF\u7A0B\u3002\u5F53<code>start()</code>\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\uFF0CJVM \u5C31\u521B\u5EFA\u4E86\u4E00\u4E2A\u65B0\u7EBF\u7A0B\uFF0C\u901A\u8FC7\u5B9E\u4F8B\u53D8\u91CF<code>t</code>\u6765\u8868\u793A\u8FD9\u4E2A\u65B0\u7EBF\u7A0B\u5BF9\u8C61\uFF0C\u5E76\u5F00\u59CB\u6267\u884C\u3002</p><p>\u63A5\u7740\uFF0C<code>main</code>\u7EBF\u7A0B\u7EE7\u7EED\u6267\u884C\u6253\u5370<code>main end</code>\u8BED\u53E5\uFF0C\u800C<code>t</code>\u7EBF\u7A0B\u5728<code>main</code>\u7EBF\u7A0B\u6267\u884C\u7684\u540C\u65F6\u4F1A\u5E76\u53D1\u6267\u884C\uFF0C\u6253\u5370<code>thread run</code>\u548C<code>thread end</code>\u8BED\u53E5\u3002</p><p>\u5F53<code>run()</code>\u65B9\u6CD5\u7ED3\u675F\u65F6\uFF0C\u65B0\u7EBF\u7A0B\u5C31\u7ED3\u675F\u4E86\u3002\u800C<code>main()</code>\u65B9\u6CD5\u7ED3\u675F\u65F6\uFF0C\u4E3B\u7EBF\u7A0B\u4E5F\u7ED3\u675F\u4E86\u3002</p><p>\u7EBF\u7A0B\u7684\u6267\u884C\u987A\u5E8F\uFF1A</p><ol><li><code>main</code>\u7EBF\u7A0B\u80AF\u5B9A\u662F\u5148\u6253\u5370<code>main start</code>\uFF0C\u518D\u6253\u5370<code>main end</code>\uFF1B</li><li><code>t</code>\u7EBF\u7A0B\u80AF\u5B9A\u662F\u5148\u6253\u5370<code>thread run</code>\uFF0C\u518D\u6253\u5370<code>thread end</code>\u3002</li></ol><p>\u4F46\u662F\uFF0C\u9664\u4E86\u53EF\u4EE5\u80AF\u5B9A\uFF0C<code>main start</code>\u4F1A\u5148\u6253\u5370\u5916\uFF0C<code>main end</code>\u6253\u5370\u5728<code>thread run</code>\u4E4B\u524D\u3001<code>thread end</code>\u4E4B\u540E\u6216\u8005\u4E4B\u95F4\uFF0C\u90FD\u65E0\u6CD5\u786E\u5B9A\u3002\u56E0\u4E3A\u4ECE<code>t</code>\u7EBF\u7A0B\u5F00\u59CB\u8FD0\u884C\u4EE5\u540E\uFF0C\u4E24\u4E2A\u7EBF\u7A0B\u5C31\u5F00\u59CB\u540C\u65F6\u8FD0\u884C\u4E86\uFF0C\u5E76\u4E14\u7531\u64CD\u4F5C\u7CFB\u7EDF\u8C03\u5EA6\uFF0C\u7A0B\u5E8F\u672C\u8EAB\u65E0\u6CD5\u786E\u5B9A\u7EBF\u7A0B\u7684\u8C03\u5EA6\u987A\u5E8F\u3002</p><p>\u53EF\u4EE5\u5728\u7EBF\u7A0B\u4E2D\u8C03\u7528<code>Thread.sleep()</code>\uFF0C\u5F3A\u8FEB\u5F53\u524D\u7EBF\u7A0B\u6682\u505C\u4E00\u6BB5\u65F6\u95F4\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main start...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;thread run...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;thread end.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;main end...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>sleep()</code>\u4F20\u5165\u7684\u53C2\u6570\u662F\u6BEB\u79D2\u3002\u8C03\u6574\u6682\u505C\u65F6\u95F4\u7684\u5927\u5C0F\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230<code>main</code>\u7EBF\u7A0B\u548C<code>t</code>\u7EBF\u7A0B\u6267\u884C\u7684\u5148\u540E\u987A\u5E8F\u3002</p><p>\u8981\u7279\u522B\u6CE8\u610F\uFF1A\u76F4\u63A5\u8C03\u7528<code>Thread</code>\u5B9E\u4F8B\u7684<code>run()</code>\u65B9\u6CD5\u662F\u65E0\u6548\u7684\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u76F4\u63A5\u8C03\u7528<code>run()</code>\u65B9\u6CD5\uFF0C\u76F8\u5F53\u4E8E\u8C03\u7528\u4E86\u4E00\u4E2A\u666E\u901A\u7684 Java \u65B9\u6CD5\uFF0C\u5F53\u524D\u7EBF\u7A0B\u5E76\u6CA1\u6709\u4EFB\u4F55\u6539\u53D8\uFF0C\u4E5F\u4E0D\u4F1A\u542F\u52A8\u65B0\u7EBF\u7A0B\u3002\u4E0A\u8FF0\u4EE3\u7801\u5B9E\u9645\u4E0A\u662F\u5728<code>main()</code>\u65B9\u6CD5\u5185\u90E8\u53C8\u8C03\u7528\u4E86<code>run()</code>\u65B9\u6CD5\uFF0C\u6253\u5370<code>hello</code>\u8BED\u53E5\u662F\u5728<code>main</code>\u7EBF\u7A0B\u4E2D\u6267\u884C\u7684\uFF0C\u6CA1\u6709\u4EFB\u4F55\u65B0\u7EBF\u7A0B\u88AB\u521B\u5EFA\u3002</p><p>\u5FC5\u987B\u8C03\u7528<code>Thread</code>\u5B9E\u4F8B\u7684<code>start()</code>\u65B9\u6CD5\u624D\u80FD\u542F\u52A8\u65B0\u7EBF\u7A0B\uFF0C\u67E5\u770B<code>Thread</code>\u7C7B\u7684\u6E90\u4EE3\u7801\uFF0C\u4F1A\u770B\u5230<code>start()</code>\u65B9\u6CD5\u5185\u90E8\u8C03\u7528\u4E86\u4E00\u4E2A<code>private native void start0()</code>\u65B9\u6CD5\uFF0C<code>native</code>\u4FEE\u9970\u7B26\u8868\u793A\u8FD9\u4E2A\u65B9\u6CD5\u662F\u7531 JVM \u865A\u62DF\u673A\u5185\u90E8\u7684 C \u4EE3\u7801\u5B9E\u73B0\u7684\uFF0C\u4E0D\u662F\u7531 Java \u4EE3\u7801\u5B9E\u73B0\u7684\u3002</p><h3 id="\u5B9E\u73B0-runnable-\u63A5\u53E3\u521B\u5EFA\u7EBF\u7A0B\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0-runnable-\u63A5\u53E3\u521B\u5EFA\u7EBF\u7A0B\u7C7B" aria-hidden="true">#</a> \u5B9E\u73B0 Runnable \u63A5\u53E3\u521B\u5EFA\u7EBF\u7A0B\u7C7B</h3><p>\u5B9E\u73B0<code>Runnable</code>\u63A5\u53E3\u6765\u521B\u5EFA\u5E76\u542F\u52A8\u591A\u7EBF\u7A0B\u7684\u6B65\u9AA4\u5982\u4E0B\u3002</p><ol><li>\u5B9A\u4E49<code>Runnable</code>\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\uFF0C\u5E76\u91CD\u5199\u8BE5\u63A5\u53E3\u7684<code>run()</code>\u65B9\u6CD5\uFF0C\u8BE5<code>run()</code>\u65B9\u6CD5\u7684\u65B9\u6CD5\u4F53\u540C\u6837\u662F\u8BE5\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u3002</li><li>\u521B\u5EFA<code>Runnable</code>\u5B9E\u73B0\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u5E76\u4EE5\u6B64\u5B9E\u4F8B\u4F5C\u4E3A<code>Thread</code>\u7684<code>target</code>\u6765\u521B\u5EFA<code>Thread</code>\u5BF9\u8C61\uFF0C\u8BE5<code>Thread</code>\u5BF9\u8C61\u624D\u662F\u771F\u6B63\u7684\u7EBF\u7A0B\u5BF9\u8C61\u3002</li><li>\u8C03\u7528\u7EBF\u7A0B\u5BF9\u8C61\u7684<code>start()</code>\u65B9\u6CD5\u6765\u542F\u52A8\u8BE5\u7EBF\u7A0B\u3002</li></ol><p>\u4EE3\u7801\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecondThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// \u521B\u5EFARunnable\u5B9E\u73B0\u7C7B\u5BF9\u8C61</span>
        <span class="token class-name">SecondThread</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecondThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// \u2460</span>
        <span class="token comment">// \u901A\u8FC7new Thread(target , name)\u65B9\u6CD5\u521B\u5EFA\u65B0\u7EBF\u7A0B</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u53EF\u4EE5\u4E3A\u8BE5Thread\u5BF9\u8C61\u6307\u5B9A\u540D\u5B57</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> <span class="token string">&quot;\u65B0\u7EBF\u7A0B1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> <span class="token string">&quot;\u65B0\u7EBF\u7A0B2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// run()\u65B9\u6CD5\u540C\u6837\u662F\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53\u7EBF\u7A0B\u7C7B\u5B9E\u73B0Runnable\u63A5\u53E3\u65F6</span>
      <span class="token comment">// \u5982\u679C\u60F3\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B\uFF0C\u53EA\u80FD\u7528Thread.currentThread()\u65B9\u6CD5</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p><code>Runnable</code>\u5BF9\u8C61\u4EC5\u4EC5\u4F5C\u4E3A<code>Thread</code>\u5BF9\u8C61\u7684<code>target</code>\uFF0C<code>Runnable</code>\u5B9E\u73B0\u7C7B\u91CC\u5305\u542B\u7684<code>run()</code>\u65B9\u6CD5\u4EC5\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\u3002</p><p>\u800C\u5B9E\u9645\u7684\u7EBF\u7A0B\u5BF9\u8C61\u4F9D\u7136\u662F<code>Thread</code>\u5B9E\u4F8B\uFF0C\u53EA\u662F\u8BE5<code>Thread</code>\u7EBF\u7A0B\u8D1F\u8D23\u6267\u884C\u5176<code>target</code>\u7684<code>run()</code>\u65B9\u6CD5\u3002</p><p>\u901A\u8FC7\u5B9E\u73B0<code>Runnable</code>\u63A5\u53E3\u6765\u83B7\u5F97\u5F53\u524D\u7EBF\u7A0B\u5BF9\u8C61\uFF0C\u5219\u5FC5\u987B\u4F7F\u7528<code>Thread.currentThread()</code>\u65B9\u6CD5\u3002</p></div><p>\u7A0B\u5E8F\u6253\u5370\u51FA\u7684\u7ED3\u679C\u4E2D\uFF0C\u4E09\u4E2A\u5B50\u7EBF\u7A0B\u7684<code>i</code>\u53D8\u91CF\u7684\u503C\u662F\u8FDE\u7EED\u7684\uFF08\u4F46\u6709\u91CD\u590D\uFF09\uFF0C\u4E5F\u5C31\u662F\u91C7\u7528<code>Runnable</code>\u63A5\u53E3\u7684\u65B9\u5F0F\u521B\u5EFA\u7684\u591A\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5171\u4EAB\u7EBF\u7A0B\u7C7B\u7684\u5B9E\u4F8B\u5C5E\u6027\u3002\u8FD9\u662F\u56E0\u4E3A\u5728\u8FD9\u79CD\u65B9\u5F0F\u4E0B\uFF0C\u7A0B\u5E8F\u6240\u521B\u5EFA\u7684<code>Runnable</code>\u5BF9\u8C61\u53EA\u662F\u7EBF\u7A0B\u7684<code>target</code>\uFF0C\u800C\u591A\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5171\u4EAB\u540C\u4E00\u4E2A<code>target</code>\uFF0C\u6240\u4EE5\u591A\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5171\u4EAB\u540C\u4E00\u4E2A\u7EBF\u7A0B\u7C7B\uFF08\u5B9E\u9645\u4E0A\u5E94\u8BE5\u662F\u7EBF\u7A0B\u7684<code>target</code>\u7C7B\uFF09\u7684\u5B9E\u4F8B\u5C5E\u6027\u3002</p><h3 id="\u4F7F\u7528-callable-\u548C-future-\u521B\u5EFA\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-callable-\u548C-future-\u521B\u5EFA\u7EBF\u7A0B" aria-hidden="true">#</a> \u4F7F\u7528 Callable \u548C Future \u521B\u5EFA\u7EBF\u7A0B</h3><p>\u4ECE Java 5 \u5F00\u59CB\uFF0CJava \u63D0\u4F9B\u4E86<code>Callable</code>\u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u63D0\u4F9B\u4E86\u4E00\u4E2A<code>call()</code>\u65B9\u6CD5\u53EF\u4EE5\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\uFF0C\u4F46<code>call()</code>\u65B9\u6CD5\u6BD4<code>run()</code>\u65B9\u6CD5\u529F\u80FD\u66F4\u5F3A\u5927\u3002</p><ol><li><code>call()</code>\u65B9\u6CD5\u53EF\u4EE5\u6709\u8FD4\u56DE\u503C\u3002</li><li><code>call()</code>\u65B9\u6CD5\u53EF\u4EE5\u58F0\u660E\u629B\u51FA\u5F02\u5E38\u3002</li></ol><p><code>Callable</code>\u63A5\u53E3\u662F Java5 \u65B0\u589E\u7684\u63A5\u53E3\uFF0C\u800C\u4E14\u5B83\u4E0D\u662F<code>Runnable</code>\u63A5\u53E3\u7684\u5B50\u63A5\u53E3\uFF0C\u6240\u4EE5<code>Callable</code>\u5BF9\u8C61\u4E0D\u80FD\u76F4\u63A5\u4F5C\u4E3A<code>Thread</code>\u7684<code>target</code>\u3002Java 5 \u63D0\u4F9B\u4E86<code>Future</code>\u63A5\u53E3\u6765\u4EE3\u8868<code>Callable</code>\u63A5\u53E3\u91CC<code>call()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\uFF0C\u5E76\u4E3A<code>Future</code>\u63A5\u53E3\u63D0\u4F9B\u4E86\u4E00\u4E2A<code>FutureTask</code>\u5B9E\u73B0\u7C7B\uFF0C\u8BE5\u5B9E\u73B0\u7C7B\u5B9E\u73B0\u4E86<code>Future</code>\u63A5\u53E3\uFF0C\u5E76\u5B9E\u73B0\u4E86<code>Runnable</code>\u63A5\u53E3\u2014\u2014\u53EF\u4EE5\u4F5C\u4E3A<code>Thread</code>\u7C7B\u7684<code>target</code>\u3002</p><p>\u5728<code>Future</code>\u63A5\u53E3\u91CC\u5B9A\u4E49\u4E86\u5982\u4E0B\u51E0\u4E2A\u516C\u5171\u65B9\u6CD5\u6765\u63A7\u5236\u5B83\u5173\u8054\u7684<code>Callable</code>\u4EFB\u52A1\u3002</p><ol><li><code>boolean cancel(boolean mayInterruptIfRunning)</code>\uFF1A\u8BD5\u56FE\u53D6\u6D88\u8BE5<code>Future</code>\u91CC\u5173\u8054\u7684<code>Callable</code>\u4EFB\u52A1\u3002</li><li><code>V get()</code>\uFF1A\u8FD4\u56DE<code>Callable</code>\u4EFB\u52A1\u91CC<code>call()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u3002\u8C03\u7528\u8BE5\u65B9\u6CD5\u5C06\u5BFC\u81F4\u7A0B\u5E8F\u963B\u585E\uFF0C\u5FC5\u987B\u7B49\u5230\u5B50\u7EBF\u7A0B\u7ED3\u675F\u540E\u624D\u4F1A\u5F97\u5230\u8FD4\u56DE\u503C\u3002</li><li><code>V get(long timeout, TimeUnit unit)</code>\uFF1A\u8FD4\u56DE<code>Callable</code>\u4EFB\u52A1\u91CC<code>call()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u3002\u8BE5\u65B9\u6CD5\u8BA9\u7A0B\u5E8F\u6700\u591A\u963B\u585E<code>timeout</code>\u548C<code>unit</code>\u6307\u5B9A\u7684\u65F6\u95F4\uFF0C\u5982\u679C\u7ECF\u8FC7\u6307\u5B9A\u65F6\u95F4\u540E<code>Callable</code>\u4EFB\u52A1\u4F9D\u7136\u6CA1\u6709\u8FD4\u56DE\u503C\uFF0C\u5C06\u4F1A\u629B\u51FA<code>TimeoutException</code>\u5F02\u5E38\u3002</li><li><code>boolean isCancelled()</code>\uFF1A\u5982\u679C\u5728<code>Callable</code>\u4EFB\u52A1\u6B63\u5E38\u5B8C\u6210\u524D\u88AB\u53D6\u6D88\uFF0C\u5219\u8FD4\u56DE<code>true</code>\u3002</li><li><code>boolean isDone()</code>\uFF1A\u5982\u679C<code>Callable</code>\u4EFB\u52A1\u5DF2\u5B8C\u6210\uFF0C\u5219\u8FD4\u56DE<code>true</code>\u3002</li></ol><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p><code>Callable</code>\u63A5\u53E3\u6709\u6CDB\u578B\u9650\u5236\uFF0C<code>Callable</code>\u63A5\u53E3\u91CC\u7684\u6CDB\u578B\u5F62\u53C2\u7C7B\u578B\u4E0E<code>call()</code>\u65B9\u6CD5\u8FD4\u56DE\u503C\u7C7B\u578B\u76F8\u540C\u3002</p></div><p>\u521B\u5EFA\u5E76\u542F\u52A8\u6709\u8FD4\u56DE\u503C\u7684\u7EBF\u7A0B\u7684\u6B65\u9AA4\u5982\u4E0B\u3002</p><ol><li>\u521B\u5EFA<code>Callable</code>\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\uFF0C\u5E76\u5B9E\u73B0<code>call()</code>\u65B9\u6CD5\uFF0C\u8BE5<code>call()</code>\u65B9\u6CD5\u5C06\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\uFF0C\u4E14\u8BE5<code>call()</code>\u65B9\u6CD5\u6709\u8FD4\u56DE\u503C\u3002</li><li>\u521B\u5EFA<code>Callable</code>\u5B9E\u73B0\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4F7F\u7528<code>FutureTask</code>\u7C7B\u6765\u5305\u88C5<code>Callable</code>\u5BF9\u8C61\uFF0C\u8BE5<code>FutureTask</code>\u5BF9\u8C61\u5C01\u88C5\u4E86\u8BE5<code>Callable</code>\u5BF9\u8C61\u7684<code>call()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u3002</li><li>\u4F7F\u7528<code>FutureTask</code>\u5BF9\u8C61\u4F5C\u4E3A<code>Thread</code>\u5BF9\u8C61\u7684<code>target</code>\u521B\u5EFA\u5E76\u542F\u52A8\u65B0\u7EBF\u7A0B\u3002</li><li>\u8C03\u7528<code>FutureTask</code>\u5BF9\u8C61\u7684<code>get()</code>\u65B9\u6CD5\u6765\u83B7\u5F97\u5B50\u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u540E\u7684\u8FD4\u56DE\u503C\u3002</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThirdThread</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFACallable\u5BF9\u8C61</span>
    <span class="token class-name">ThirdThread</span> rt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThirdThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u4F7F\u7528FutureTask\u6765\u5305\u88C5Callable\u5BF9\u8C61</span>
    <span class="token class-name">FutureTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token punctuation">(</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u7684\u5FAA\u73AF\u53D8\u91CFi\u7684\u503C\uFF1A&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5B9E\u8D28\u8FD8\u662F\u4EE5Callable\u5BF9\u8C61\u6765\u521B\u5EFA\u5E76\u542F\u52A8\u7EBF\u7A0B</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token string">&quot;\u6709\u8FD4\u56DE\u503C\u7684\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u83B7\u53D6\u7EBF\u7A0B\u8FD4\u56DE\u503C</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B50\u7EBF\u7A0B\u7684\u8FD4\u56DE\u503C\uFF1A&quot;</span> <span class="token operator">+</span> task<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5B9E\u73B0call()\u65B9\u6CD5\uFF0C\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u7684\u5FAA\u73AF\u53D8\u91CFi\u7684\u503C\uFF1A&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// call()\u65B9\u6CD5\u53EF\u4EE5\u6709\u8FD4\u56DE\u503C</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u521B\u5EFA\u7EBF\u7A0B\u7684\u4E09\u79CD\u65B9\u5F0F\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u7EBF\u7A0B\u7684\u4E09\u79CD\u65B9\u5F0F\u5BF9\u6BD4" aria-hidden="true">#</a> \u521B\u5EFA\u7EBF\u7A0B\u7684\u4E09\u79CD\u65B9\u5F0F\u5BF9\u6BD4</h3><p>\u5B9E\u73B0<code>Runnable</code>\u63A5\u53E3\u4E0E\u5B9E\u73B0<code>Callable</code>\u63A5\u53E3\u7684\u65B9\u5F0F\u57FA\u672C\u76F8\u540C\uFF0C\u56E0\u6B64\u53EF\u4EE5\u5C06\u5B9E\u73B0<code>Runnable</code>\u63A5\u53E3\u548C\u5B9E\u73B0<code>Callable</code>\u63A5\u53E3\u5F52\u4E3A\u4E00\u79CD\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4E0E\u7EE7\u627F<code>Thread</code>\u65B9\u5F0F\u4E4B\u95F4\u7684\u4E3B\u8981\u5DEE\u522B\u5982\u4E0B\u3002</p><p>\u91C7\u7528\u5B9E\u73B0<code>Runnable</code>\u3001<code>Callable</code>\u63A5\u53E3\u7684\u65B9\u5F0F\u521B\u5EFA\u591A\u7EBF\u7A0B\uFF1A</p><ul><li>\u7EBF\u7A0B\u7C7B\u53EA\u662F\u5B9E\u73B0\u4E86<code>Runnable</code>\u63A5\u53E3\u6216<code>Callable</code>\u63A5\u53E3\uFF0C\u8FD8\u53EF\u4EE5\u7EE7\u627F\u5176\u4ED6\u7C7B\u3002</li><li>\u5728\u8FD9\u79CD\u65B9\u5F0F\u4E0B\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5171\u4EAB\u540C\u4E00\u4E2A<code>target</code>\u5BF9\u8C61\uFF0C\u6240\u4EE5\u975E\u5E38\u9002\u5408\u591A\u4E2A\u76F8\u540C\u7EBF\u7A0B\u6765\u5904\u7406\u540C\u4E00\u4EFD\u8D44\u6E90\u7684\u60C5\u51B5\uFF0C\u4ECE\u800C\u53EF\u4EE5\u5C06 CPU\u3001\u4EE3\u7801\u548C\u6570\u636E\u5206\u5F00\uFF0C\u5F62\u6210\u6E05\u6670\u7684\u6A21\u578B\uFF0C\u8F83\u597D\u5730\u4F53\u73B0\u4E86\u9762\u5411\u5BF9\u8C61\u7684\u601D\u60F3\u3002</li><li>\u52A3\u52BF\u662F\uFF1A\u7F16\u7A0B\u7A0D\u7A0D\u590D\u6742\uFF0C\u5982\u679C\u9700\u8981\u8BBF\u95EE\u5F53\u524D\u7EBF\u7A0B\uFF0C\u5219\u5FC5\u987B\u4F7F\u7528<code>Thread.currentThread()</code>\u65B9\u6CD5\u3002</li></ul><p>\u91C7\u7528\u7EE7\u627F<code>Thread</code>\u7C7B\u7684\u65B9\u5F0F\u521B\u5EFA\u591A\u7EBF\u7A0B\uFF1A</p><ul><li>\u52A3\u52BF\u662F\uFF1A\u56E0\u4E3A\u7EBF\u7A0B\u7C7B\u5DF2\u7ECF\u7EE7\u627F\u4E86<code>Thread</code>\u7C7B\uFF0C\u6240\u4EE5\u4E0D\u80FD\u518D\u7EE7\u627F\u5176\u4ED6\u7236\u7C7B\u3002</li><li>\u4F18\u52BF\u662F\uFF1A\u7F16\u5199\u7B80\u5355\uFF0C\u5982\u679C\u9700\u8981\u8BBF\u95EE\u5F53\u524D\u7EBF\u7A0B\uFF0C\u5219\u65E0\u987B\u4F7F\u7528<code>Thread.currentThread()</code>\u65B9\u6CD5\uFF0C\u76F4\u63A5\u4F7F\u7528<code>this</code>\u5373\u53EF\u83B7\u5F97\u5F53\u524D\u7EBF\u7A0B\u3002</li></ul><p>\u4E00\u822C\u63A8\u8350\u91C7\u7528\u5B9E\u73B0<code>Runnable</code>\u63A5\u53E3\u3001<code>Callable</code>\u63A5\u53E3\u7684\u65B9\u5F0F\u6765\u521B\u5EFA\u591A\u7EBF\u7A0B\u3002</p><h2 id="\u7EBF\u7A0B\u7684\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> \u7EBF\u7A0B\u7684\u751F\u547D\u5468\u671F</h2><p>\u5728\u7EBF\u7A0B\u7684\u751F\u547D\u5468\u671F\u4E2D\uFF0C\u5B83\u8981\u7ECF\u8FC7\u65B0\u5EFA\uFF08<code>New</code>\uFF09\u3001\u5C31\u7EEA\uFF08<code>Runnable</code>\uFF09\u3001\u8FD0\u884C\uFF08<code>Running</code>\uFF09\u3001\u963B\u585E\uFF08<code>Blocked</code>\uFF09\u548C\u6B7B\u4EA1\uFF08<code>Dead</code>\uFF09 5 \u79CD\u72B6\u6001\u3002</p><p>\u7528\u4E00\u4E2A\u72B6\u6001\u8F6C\u79FB\u56FE\u8868\u793A\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>         \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
         \u2502     New     \u2502
         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                \u2502
                \u25BC
\u250C \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2510
 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502\u2502  Running    \u2502 \u2502   Blocked   \u2502\u2502
 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
\u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
 \u2502   Waiting   \u2502 \u2502Timed Waiting\u2502
\u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500 \u2500
                \u2502
                \u25BC
         \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
         \u2502 Terminated  \u2502
         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u7EBF\u7A0B\u542F\u52A8\u540E\uFF0C\u5B83\u53EF\u4EE5\u5728 <code>Running</code>\u3001<code>Blocked</code>\u3001<code>Waiting</code> \u548C <code>Timed Waiting</code> \u8FD9\u51E0\u4E2A\u72B6\u6001\u4E4B\u95F4\u5207\u6362\uFF0C\u76F4\u5230\u6700\u540E\u53D8\u6210 <code>Terminated</code> \u72B6\u6001\uFF0C\u7EBF\u7A0B\u7EC8\u6B62\u3002</p><h3 id="\u65B0\u5EFA\u548C\u5C31\u7EEA\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#\u65B0\u5EFA\u548C\u5C31\u7EEA\u72B6\u6001" aria-hidden="true">#</a> \u65B0\u5EFA\u548C\u5C31\u7EEA\u72B6\u6001</h3><p>\u5F53\u7A0B\u5E8F\u4F7F\u7528<code>new</code>\u5173\u952E\u5B57\u521B\u5EFA\u4E86\u4E00\u4E2A\u7EBF\u7A0B\u4E4B\u540E\uFF0C\u8BE5\u7EBF\u7A0B\u5C31\u5904\u4E8E\u65B0\u5EFA\u72B6\u6001\uFF0C\u6B64\u65F6\u5B83\u548C\u5176\u4ED6\u7684 Java \u5BF9\u8C61\u4E00\u6837\uFF0C\u4EC5\u4EC5\u7531 Java \u865A\u62DF\u673A\u4E3A\u5176\u5206\u914D\u5185\u5B58\uFF0C\u5E76\u521D\u59CB\u5316\u5176\u6210\u5458\u53D8\u91CF\u7684\u503C\u3002</p><p>\u5F53\u7EBF\u7A0B\u5BF9\u8C61\u8C03\u7528\u4E86<code>start()</code>\u65B9\u6CD5\u4E4B\u540E\uFF0C\u8BE5\u7EBF\u7A0B\u5904\u4E8E\u5C31\u7EEA\u72B6\u6001\uFF0CJava \u865A\u62DF\u673A\u4F1A\u4E3A\u5176\u521B\u5EFA\u65B9\u6CD5\u8C03\u7528\u6808\u548C\u7A0B\u5E8F\u8BA1\u6570\u5668\uFF0C\u5904\u4E8E\u8FD9\u4E2A\u72B6\u6001\u4E2D\u7684\u7EBF\u7A0B\u5E76\u6CA1\u6709\u5F00\u59CB\u8FD0\u884C\uFF0C\u53EA\u662F\u8868\u793A\u8BE5\u7EBF\u7A0B\u53EF\u4EE5\u8FD0\u884C\u4E86\u3002\u53EF\u4EE5\u901A\u8FC7\u518D\u6B21\u8FD0\u884C<code>FirstThread</code>\u6216<code>SecondThread</code>\u6765\u8BC1\u660E\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208201713228.png" alt="image-20220820171342935"></p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u53EA\u80FD\u5BF9\u5904\u4E8E\u65B0\u5EFA\u72B6\u6001\u7684\u7EBF\u7A0B\u8C03\u7528<code>start()</code>\u65B9\u6CD5\uFF0C\u5426\u5219\u5C06\u5F15\u53D1<code>IllegalThreadStateException</code>\u5F02\u5E38\u3002</p></div><h3 id="\u8FD0\u884C\u548C\u963B\u585E\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#\u8FD0\u884C\u548C\u963B\u585E\u72B6\u6001" aria-hidden="true">#</a> \u8FD0\u884C\u548C\u963B\u585E\u72B6\u6001</h3><p>\u5F53\u5904\u4E8E\u5C31\u7EEA\u72B6\u6001\u7684\u7EBF\u7A0B\u83B7\u5F97\u4E86 CPU \u5F00\u59CB\u6267\u884C<code>run()</code>\u65B9\u6CD5\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\uFF0C\u5982\u679C\u8BA1\u7B97\u673A\u53EA\u6709\u4E00\u4E2A CPU\uFF0C\u90A3\u4E48\u5728\u4EFB\u4F55\u65F6\u523B\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\u3002\u5F53\u7136\uFF0C\u5728\u4E00\u4E2A\u591A\u5904\u7406\u5668\u7684\u673A\u5668\u4E0A\uFF0C\u5C06\u4F1A\u6709\u591A\u4E2A\u7EBF\u7A0B\u5E76\u884C\uFF08\u6CE8\u610F\u662F\u5E76\u884C\uFF1Aparallel\uFF09\u6267\u884C\uFF1B\u5F53\u7EBF\u7A0B\u6570\u5927\u4E8E\u5904\u7406\u5668\u6570\u65F6\uFF0C\u4F9D\u7136\u4F1A\u5B58\u5728\u591A\u4E2A\u7EBF\u7A0B\u5728\u540C\u4E00\u4E2A CPU \u4E0A\u8F6E\u6362\u7684\u73B0\u8C61\u3002</p><p>\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u5F00\u59CB\u8FD0\u884C\u540E\uFF0C\u5B83\u4E0D\u53EF\u80FD\u4E00\u76F4\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\uFF08\u9664\u975E\u5B83\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u8DB3\u591F\u77ED\uFF0C\u77AC\u95F4\u5C31\u6267\u884C\u7ED3\u675F\u4E86\uFF09\uFF0C\u7EBF\u7A0B\u5728\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u9700\u8981\u88AB\u4E2D\u65AD\uFF0C\u76EE\u7684\u662F\u4F7F\u5176\u4ED6\u7EBF\u7A0B\u83B7\u5F97\u6267\u884C\u7684\u673A\u4F1A\uFF0C\u7EBF\u7A0B\u8C03\u5EA6\u7684\u7EC6\u8282\u53D6\u51B3\u4E8E\u5E95\u5C42\u5E73\u53F0\u6240\u91C7\u7528\u7684\u7B56\u7565\u3002</p><p>\u5BF9\u4E8E\u91C7\u7528\u62A2\u5360\u5F0F\u7B56\u7565\u7684\u7CFB\u7EDF\u800C\u8A00\uFF0C\u7CFB\u7EDF\u4F1A\u7ED9\u6BCF\u4E2A\u53EF\u6267\u884C\u7684\u7EBF\u7A0B\u4E00\u4E2A\u5C0F\u65F6\u95F4\u6BB5\u6765\u5904\u7406\u4EFB\u52A1\uFF1B\u5F53\u8BE5\u65F6\u95F4\u6BB5\u7528\u5B8C\u540E\uFF0C\u7CFB\u7EDF\u5C31\u4F1A\u5265\u593A\u8BE5\u7EBF\u7A0B\u6240\u5360\u7528\u7684\u8D44\u6E90\uFF0C\u8BA9\u5176\u4ED6\u7EBF\u7A0B\u83B7\u5F97\u6267\u884C\u7684\u673A\u4F1A\u3002\u5728\u9009\u62E9\u4E0B\u4E00\u4E2A\u7EBF\u7A0B\u65F6\uFF0C\u7CFB\u7EDF\u4F1A\u8003\u8651\u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7\u3002</p><p>\u5F53\u53D1\u751F\u5982\u4E0B\u60C5\u51B5\u65F6\uFF0C\u7EBF\u7A0B\u5C06\u4F1A\u8FDB\u5165\u963B\u585E\u72B6\u6001\u3002</p><ul><li>\u7EBF\u7A0B\u8C03\u7528<code>sleep()</code>\u65B9\u6CD5\u4E3B\u52A8\u653E\u5F03\u6240\u5360\u7528\u7684\u5904\u7406\u5668\u8D44\u6E90\u3002</li><li>\u7EBF\u7A0B\u8C03\u7528\u4E86\u4E00\u4E2A\u963B\u585E\u5F0F<code>IO</code>\u65B9\u6CD5\uFF0C\u5728\u8BE5\u65B9\u6CD5\u8FD4\u56DE\u4E4B\u524D\uFF0C\u8BE5\u7EBF\u7A0B\u88AB\u963B\u585E\u3002</li><li>\u7EBF\u7A0B\u8BD5\u56FE\u83B7\u5F97\u4E00\u4E2A\u540C\u6B65\u76D1\u89C6\u5668\uFF0C\u4F46\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u6B63\u88AB\u5176\u4ED6\u7EBF\u7A0B\u6240\u6301\u6709\u3002\u5173\u4E8E\u540C\u6B65\u76D1\u89C6\u5668\u7684\u77E5\u8BC6\u3001\u540E\u9762\u5C06\u6709\u66F4\u6DF1\u5165\u7684\u4ECB\u7ECD\u3002</li><li>\u7EBF\u7A0B\u5728\u7B49\u5F85\u67D0\u4E2A\u901A\u77E5\uFF08notify\uFF09\u3002</li><li>\u7A0B\u5E8F\u8C03\u7528\u4E86\u7EBF\u7A0B\u7684<code>suspend()</code>\u65B9\u6CD5\u5C06\u8BE5\u7EBF\u7A0B\u6302\u8D77\u3002\u4F46\u8FD9\u4E2A\u65B9\u6CD5\u5BB9\u6613\u5BFC\u81F4\u6B7B\u9501\uFF0C\u6240\u4EE5\u5E94\u8BE5\u5C3D\u91CF\u907F\u514D\u4F7F\u7528\u8BE5\u65B9\u6CD5\u3002</li></ul><p>\u5F53\u53D1\u751F\u5982\u4E0B\u7279\u5B9A\u7684\u60C5\u51B5\u65F6\u53EF\u4EE5\u89E3\u9664\u4E0A\u9762\u7684\u963B\u585E\uFF0C\u8BA9\u8BE5\u7EBF\u7A0B\u91CD\u65B0\u8FDB\u5165\u5C31\u7EEA\u72B6\u6001\u3002</p><ul><li>\u8C03\u7528<code>sleep()</code>\u65B9\u6CD5\u7684\u7EBF\u7A0B\u7ECF\u8FC7\u4E86\u6307\u5B9A\u65F6\u95F4\u3002</li><li>\u7EBF\u7A0B\u8C03\u7528\u7684\u963B\u585E\u5F0F<code>IO</code>\u65B9\u6CD5\u5DF2\u7ECF\u8FD4\u56DE\u3002</li><li>\u7EBF\u7A0B\u6210\u529F\u5730\u83B7\u5F97\u4E86\u8BD5\u56FE\u53D6\u5F97\u7684\u540C\u6B65\u76D1\u89C6\u5668\u3002</li><li>\u7EBF\u7A0B\u6B63\u5728\u7B49\u5F85\u67D0\u4E2A\u901A\u77E5\u65F6\uFF0C\u5176\u4ED6\u7EBF\u7A0B\u53D1\u51FA\u4E86\u4E00\u4E2A\u901A\u77E5\u3002</li><li>\u5904\u4E8E\u6302\u8D77\u72B6\u6001\u7684\u7EBF\u7A0B\u88AB\u8C03\u7528\u4E86<code>resume()</code>\u6062\u590D\u65B9\u6CD5\u3002</li></ul><p>\u7EBF\u7A0B\u72B6\u6001\u8F6C\u6362\u56FE\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208201853226.jpeg" alt="epub_681336_2144"></p><p>\u7EBF\u7A0B\u4ECE\u963B\u585E\u72B6\u6001\u53EA\u80FD\u8FDB\u5165\u5C31\u7EEA\u72B6\u6001\uFF0C\u65E0\u6CD5\u76F4\u63A5\u8FDB\u5165\u8FD0\u884C\u72B6\u6001\u3002\u800C\u5C31\u7EEA\u548C\u8FD0\u884C\u72B6\u6001\u4E4B\u95F4\u7684\u8F6C\u6362\u901A\u5E38\u4E0D\u53D7\u7A0B\u5E8F\u63A7\u5236\uFF0C\u800C\u662F\u7531\u7CFB\u7EDF\u7EBF\u7A0B\u8C03\u5EA6\u6240\u51B3\u5B9A\uFF0C\u5F53\u5904\u4E8E\u5C31\u7EEA\u72B6\u6001\u7684\u7EBF\u7A0B\u83B7\u5F97\u5904\u7406\u5668\u8D44\u6E90\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u8FDB\u5165\u8FD0\u884C\u72B6\u6001\uFF1B\u5F53\u5904\u4E8E\u8FD0\u884C\u72B6\u6001\u7684\u7EBF\u7A0B\u5931\u53BB\u5904\u7406\u5668\u8D44\u6E90\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u8FDB\u5165\u5C31\u7EEA\u72B6\u6001\u3002</p><p>\u76F4\u63A5\u8C03\u7528<code>yield()</code>\u65B9\u6CD5\u4E5F\u53EF\u4EE5\u8BA9\u8FD0\u884C\u72B6\u6001\u7684\u7EBF\u7A0B\u8F6C\u5165\u5C31\u7EEA\u72B6\u6001\u3002</p><h3 id="\u7EBF\u7A0B\u6B7B\u4EA1" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u6B7B\u4EA1" aria-hidden="true">#</a> \u7EBF\u7A0B\u6B7B\u4EA1</h3><p>\u7EBF\u7A0B\u4F1A\u4EE5\u5982\u4E0B 3 \u79CD\u65B9\u5F0F\u7ED3\u675F\uFF0C\u7ED3\u675F\u540E\u5C31\u5904\u4E8E\u6B7B\u4EA1\u72B6\u6001\u3002</p><ul><li><code>run()</code>\u6216<code>call()</code>\u65B9\u6CD5\u6267\u884C\u5B8C\u6210\uFF0C\u7EBF\u7A0B\u6B63\u5E38\u7ED3\u675F\u3002</li><li>\u7EBF\u7A0B\u629B\u51FA\u4E00\u4E2A\u672A\u6355\u83B7\u7684<code>Exception</code>\u6216<code>Error</code>\u3002</li><li>\u76F4\u63A5\u8C03\u7528\u8BE5\u7EBF\u7A0B\u7684<code>stop()</code>\u65B9\u6CD5\u6765\u7ED3\u675F\u8BE5\u7EBF\u7A0B\u2014\u2014\u8BE5\u65B9\u6CD5\u5BB9\u6613\u5BFC\u81F4\u6B7B\u9501\uFF0C\u901A\u5E38\u4E0D\u63A8\u8350\u4F7F\u7528\u3002</li></ul><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u5F53\u4E3B\u7EBF\u7A0B\u7ED3\u675F\u65F6\uFF0C\u5176\u4ED6\u7EBF\u7A0B\u4E0D\u53D7\u4EFB\u4F55\u5F71\u54CD\uFF0C\u5E76\u4E0D\u4F1A\u968F\u4E4B\u7ED3\u675F\u3002\u4E00\u65E6\u5B50\u7EBF\u7A0B\u542F\u52A8\u8D77\u6765\u540E\uFF0C\u5B83\u5C31\u62E5\u6709\u548C\u4E3B\u7EBF\u7A0B\u76F8\u540C\u7684\u5730\u4F4D\uFF0C\u5B83\u4E0D\u4F1A\u53D7\u4E3B\u7EBF\u7A0B\u7684\u5F71\u54CD\u3002</p></div><p>\u5F53\u7EBF\u7A0B\u5904\u4E8E\u5C31\u7EEA\u3001\u8FD0\u884C\u3001\u963B\u585E 3 \u79CD\u72B6\u6001\u65F6\uFF0C\u53EF\u4EE5\u8C03\u7528\u7EBF\u7A0B\u5BF9\u8C61\u7684<code>isAlive()</code>\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5C06\u8FD4\u56DE true\uFF1B\u5F53\u7EBF\u7A0B\u5904\u4E8E\u65B0\u5EFA\u3001\u6B7B\u4EA1 2 \u79CD\u72B6\u6001\u65F6\uFF0C\u8BE5\u65B9\u6CD5\u5C06\u8FD4\u56DE false\u3002</p><p>\u5C1D\u8BD5\u5BF9\u5904\u4E8E\u6B7B\u4EA1\u72B6\u6001\u7684\u7EBF\u7A0B\u518D\u6B21\u8C03\u7528<code>start()</code>\u65B9\u6CD5\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StartDead</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFA\u7EBF\u7A0B\u5BF9\u8C61</span>
    <span class="token class-name">StartDead</span> sd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StartDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8C03\u7528Thread\u7684currentThread()\u65B9\u6CD5\u83B7\u53D6\u5F53\u524D\u7EBF\u7A0B</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u542F\u52A8\u7EBF\u7A0B</span>
        sd<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5224\u65AD\u542F\u52A8\u540E\u7EBF\u7A0B\u7684isAlive()\u503C\uFF0C\u8F93\u51FAtrue</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sd<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// \u5F53\u7EBF\u7A0B\u5904\u4E8E\u65B0\u5EFA\u3001\u6B7B\u4EA1\u4E24\u79CD\u72B6\u6001\u65F6\uFF0CisAlive()\u65B9\u6CD5\u8FD4\u56DEfalse</span>
      <span class="token comment">// \u5F53i &gt; 20\u65F6\uFF0C\u8BE5\u7EBF\u7A0B\u80AF\u5B9A\u5DF2\u7ECF\u542F\u52A8\u8FC7\u4E86\uFF0C\u5982\u679Csd.isAlive()\u4E3A\u5047\u65F6\uFF0C</span>
      <span class="token comment">// \u90A3\u5C31\u662F\u6B7B\u4EA1\u72B6\u6001\u4E86</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sd<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u8BD5\u56FE\u518D\u6B21\u542F\u52A8\u8BE5\u7EBF\u7A0B</span>
        sd<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u91CD\u5199run()\u65B9\u6CD5\uFF0Crun()\u65B9\u6CD5\u7684\u65B9\u6CD5\u4F53\u5C31\u662F\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u4E0A\u9762\u7A0B\u5E8F\uFF0C\u5C06\u5F15\u53D1<code>IllegalThreadStateException</code>\u5F02\u5E38\u3002</p><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u5982\u679C\u5B50\u7EBF\u7A0B\u5728\u4E3B\u7EBF\u7A0B\u4E4B\u540E\u7ED3\u675F\u5219\u7A0B\u5E8F\u4F1A\u6B63\u5E38\u6267\u884C\uFF0C\u53EF\u4EE5\u5C06\u5B50\u7EBF\u7A0B\u7684\u5FAA\u73AF\u6253\u5370\u6B21\u6570\u589E\u52A0\u81F3\u548C\u4E3B\u7EBF\u7A0B\u4E00\u6837\u589E\u52A0\u8FD9\u79CD\u6982\u7387\u3002</p></div><h2 id="\u63A7\u5236\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u63A7\u5236\u7EBF\u7A0B" aria-hidden="true">#</a> \u63A7\u5236\u7EBF\u7A0B</h2><p>Java \u7684\u7EBF\u7A0B\u652F\u6301\u63D0\u4F9B\u4E86\u4E00\u4E9B\u4FBF\u6377\u7684\u5DE5\u5177\u65B9\u6CD5\uFF0C\u901A\u8FC7\u8FD9\u4E9B\u4FBF\u6377\u7684\u5DE5\u5177\u65B9\u6CD5\u53EF\u4EE5\u5F88\u597D\u5730\u63A7\u5236\u7EBF\u7A0B\u7684\u6267\u884C\u3002</p><h3 id="join-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#join-\u7EBF\u7A0B" aria-hidden="true">#</a> join \u7EBF\u7A0B</h3><p>\u5F53\u5728\u67D0\u4E2A\u7A0B\u5E8F\u6267\u884C\u6D41\u4E2D\u8C03\u7528\u5176\u4ED6\u7EBF\u7A0B\u7684<code>join()</code>\u65B9\u6CD5\u65F6\uFF0C\u8C03\u7528\u7EBF\u7A0B\u5C06\u88AB\u963B\u585E\uFF0C\u76F4\u5230\u88AB<code>join()</code>\u65B9\u6CD5\u52A0\u5165\u7684<code>join</code>\u7EBF\u7A0B\u6267\u884C\u5B8C\u4E3A\u6B62\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u63D0\u4F9B\u4E00\u4E2A\u6709\u53C2\u6570\u7684\u6784\u9020\u5668\uFF0C\u7528\u4E8E\u8BBE\u7F6E\u8BE5\u7EBF\u7A0B\u7684\u540D\u5B57</span>
  <span class="token keyword">public</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u542F\u52A8\u5B50\u7EBF\u7A0B</span>
    <span class="token keyword">new</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B0\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JoinThread</span> jt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u88ABJoin\u7684\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jt<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// main\u7EBF\u7A0B\u8C03\u7528\u4E86jt\u7EBF\u7A0B\u7684join()\u65B9\u6CD5\uFF0Cmain\u7EBF\u7A0B</span>
        <span class="token comment">// \u5FC5\u987B\u7B49jt\u6267\u884C\u7ED3\u675F\u624D\u4F1A\u5411\u4E0B\u6267\u884C</span>
        jt<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u91CD\u5199run()\u65B9\u6CD5\uFF0C\u5B9A\u4E49\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u201C\u88AB Join \u7684\u7EBF\u7A0B\u201D\u7684\u7EBF\u7A0B\uFF0C\u8BE5\u7EBF\u7A0B\u4E0D\u4F1A\u548C<code>main</code>\u7EBF\u7A0B\u5E76\u53D1\u6267\u884C\uFF0C<code>main</code>\u7EBF\u7A0B\u5FC5\u987B\u7B49\u8BE5\u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u540E\u624D\u53EF\u4EE5\u5411\u4E0B\u6267\u884C\u3002\u201C\u88AB Join \u7684\u7EBF\u7A0B\u201D\u7684\u7EBF\u7A0B\u6267\u884C\u65F6\uFF0C\u5B9E\u9645\u4E0A\u53EA\u6709 2 \u4E2A\u5B50\u7EBF\u7A0B\u5E76\u53D1\u6267\u884C\uFF0C\u4E3B\u7EBF\u7A0B\u5904\u4E8E\u7B49\u5F85\u72B6\u6001\u3002</p><p><code>join()</code>\u65B9\u6CD5\u6709\u5982\u4E0B 3 \u79CD\u91CD\u8F7D\u5F62\u5F0F\u3002</p><ul><li><code>join()</code>\uFF1A\u7B49\u5F85\u88AB<code>join</code>\u7684\u7EBF\u7A0B\u6267\u884C\u5B8C\u6210\u3002</li><li><code>join(long millis)</code>\uFF1A\u7B49\u5F85\u88AB<code>join</code>\u7684\u7EBF\u7A0B\u7684\u65F6\u95F4\u6700\u957F\u4E3A<code>millis</code>\u6BEB\u79D2\u3002\u5982\u679C\u5728<code>millis</code>\u6BEB\u79D2\u5185\u88AB<code>join</code>\u7684\u7EBF\u7A0B\u8FD8\u6CA1\u6709\u6267\u884C\u7ED3\u675F\uFF0C\u5219\u4E0D\u518D\u7B49\u5F85\u3002</li><li><code>join(long millis, int nanos)</code>\uFF1A\u7B49\u5F85\u88AB<code>join</code>\u7684\u7EBF\u7A0B\u7684\u65F6\u95F4\u6700\u957F\u4E3A<code>millis</code>\u6BEB\u79D2 + <code>nanos</code>\u6BEB\u5FAE\u79D2\u3002</li></ul><h3 id="\u540E\u53F0\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u540E\u53F0\u7EBF\u7A0B" aria-hidden="true">#</a> \u540E\u53F0\u7EBF\u7A0B</h3><p>\u6709\u4E00\u79CD\u7EBF\u7A0B\uFF0C\u5B83\u662F\u5728\u540E\u53F0\u8FD0\u884C\u7684\uFF0C\u5B83\u7684\u4EFB\u52A1\u662F\u4E3A\u5176\u4ED6\u7684\u7EBF\u7A0B\u63D0\u4F9B\u670D\u52A1\uFF0C\u8FD9\u79CD\u7EBF\u7A0B\u88AB\u79F0\u4E3A\u201C\u540E\u53F0\u7EBF\u7A0B\uFF08Daemon Thread\uFF09\u201D\uFF0C\u53C8\u79F0\u4E3A\u201C\u5B88\u62A4\u7EBF\u7A0B\u201D\u6216\u201C\u7CBE\u7075\u7EBF\u7A0B\u201D\u3002</p><p>\u540E\u53F0\u7EBF\u7A0B\u6709\u4E2A\u7279\u5F81\uFF1A\u5982\u679C\u6240\u6709\u7684\u524D\u53F0\u7EBF\u7A0B\u90FD\u6B7B\u4EA1\uFF0C\u540E\u53F0\u7EBF\u7A0B\u4F1A\u81EA\u52A8\u6B7B\u4EA1\u3002</p><p>\u8C03\u7528<code>Thread</code>\u5BF9\u8C61\u7684<code>setDaemon(true)</code>\u65B9\u6CD5\u53EF\u5C06\u6307\u5B9A\u7EBF\u7A0B\u8BBE\u7F6E\u6210\u540E\u53F0\u7EBF\u7A0B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DaemonThread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DaemonThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5C06\u6B64\u7EBF\u7A0B\u8BBE\u7F6E\u6210\u540E\u53F0\u7EBF\u7A0B</span>
    t<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u542F\u52A8\u540E\u53F0\u7EBF\u7A0B</span>
    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// -----\u7A0B\u5E8F\u6267\u884C\u5230\u6B64\u5904\uFF0C\u524D\u53F0\u7EBF\u7A0B\uFF08main\u7EBF\u7A0B\uFF09\u7ED3\u675F------</span>
    <span class="token comment">// \u540E\u53F0\u7EBF\u7A0B\u4E5F\u5E94\u8BE5\u968F\u4E4B\u7ED3\u675F</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5B9A\u4E49\u540E\u53F0\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u4E0E\u666E\u901A\u7EBF\u7A0B\u6CA1\u6709\u4EFB\u4F55\u533A\u522B</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thread \u7C7B\u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E2A<code>isDaemon()</code>\u65B9\u6CD5\uFF0C\u7528\u4E8E\u5224\u65AD\u6307\u5B9A\u7EBF\u7A0B\u662F\u5426\u4E3A\u540E\u53F0\u7EBF\u7A0B\u3002</p><p>\u8981\u5C06\u67D0\u4E2A\u7EBF\u7A0B\u8BBE\u7F6E\u4E3A\u540E\u53F0\u7EBF\u7A0B\uFF0C\u5FC5\u987B\u5728\u8BE5\u7EBF\u7A0B\u542F\u52A8\u4E4B\u524D\u8BBE\u7F6E\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C <code>setDaemon(true)</code>\u5FC5\u987B\u5728<code>start()</code>\u65B9\u6CD5\u4E4B\u524D\u8C03\u7528\uFF0C\u5426\u5219\u4F1A\u5F15\u53D1<code>IllegalThreadStateException</code>\u5F02\u5E38\u3002</p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u5728\u5B88\u62A4\u7EBF\u7A0B\u4E2D\uFF0C\u7F16\u5199\u4EE3\u7801\u8981\u6CE8\u610F\uFF1A\u5B88\u62A4\u7EBF\u7A0B\u4E0D\u80FD\u6301\u6709\u4EFB\u4F55\u9700\u8981\u5173\u95ED\u7684\u8D44\u6E90\uFF0C\u4F8B\u5982\u6253\u5F00\u6587\u4EF6\u7B49\uFF0C\u56E0\u4E3A\u865A\u62DF\u673A\u9000\u51FA\u65F6\uFF0C\u5B88\u62A4\u7EBF\u7A0B\u6CA1\u6709\u4EFB\u4F55\u673A\u4F1A\u6765\u5173\u95ED\u6587\u4EF6\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931\u3002</p></div><h3 id="\u7EBF\u7A0B\u7761\u7720-sleep" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u7761\u7720-sleep" aria-hidden="true">#</a> \u7EBF\u7A0B\u7761\u7720\uFF1Asleep</h3><p>\u5982\u679C\u9700\u8981\u8BA9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u6682\u505C\u4E00\u6BB5\u65F6\u95F4\uFF0C\u5E76\u8FDB\u5165\u963B\u585E\u72B6\u6001\uFF0C\u5219\u53EF\u4EE5\u901A\u8FC7\u8C03\u7528<code>Thread</code>\u7C7B\u7684\u9759\u6001<code>sleep()</code>\u65B9\u6CD5\u6765\u5B9E\u73B0\u3002<code>sleep()</code>\u65B9\u6CD5\u6709\u4E24\u79CD\u91CD\u8F7D\u5F62\u5F0F\u3002</p><ul><li><code>static void sleep(long millis)</code>\uFF1A\u8BA9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u6682\u505C<code>millis</code>\u6BEB\u79D2\uFF0C\u5E76\u8FDB\u5165\u963B\u585E\u72B6\u6001\uFF0C\u8BE5\u65B9\u6CD5\u53D7\u5230\u7CFB\u7EDF\u8BA1\u65F6\u5668\u548C\u7EBF\u7A0B\u8C03\u5EA6\u5668\u7684\u7CBE\u5EA6\u4E0E\u51C6\u786E\u5EA6\u7684\u5F71\u54CD\u3002</li><li><code>static void sleep(long millis, int nanos)</code>\uFF1A\u8BA9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u6682\u505C<code>millis</code>\u6BEB\u79D2 + <code>nanos</code>\u6BEB\u5FAE\u79D2\uFF0C\u5E76\u8FDB\u5165\u963B\u585E\u72B6\u6001\uFF0C\u8BE5\u65B9\u6CD5\u53D7\u5230\u7CFB\u7EDF\u8BA1\u65F6\u5668\u548C\u7EBF\u7A0B\u8C03\u5EA6\u5668\u7684\u7CBE\u5EA6\u4E0E\u51C6\u786E\u5EA6\u7684\u5F71\u54CD\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SleepTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u65F6\u95F4: &quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u8C03\u7528sleep()\u65B9\u6CD5\u8BA9\u5F53\u524D\u7EBF\u7A0B\u6682\u505C1s</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7EBF\u7A0B\u8BA9\u6B65-yield" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u8BA9\u6B65-yield" aria-hidden="true">#</a> \u7EBF\u7A0B\u8BA9\u6B65\uFF1Ayield</h3><p><code>yield()</code>\u65B9\u6CD5\u662F\u4E00\u4E2A\u548C<code>sleep()</code>\u65B9\u6CD5\u6709\u70B9\u76F8\u4F3C\u7684\u65B9\u6CD5\uFF0C\u5B83\u4E5F\u662F<code>Thread</code>\u7C7B\u63D0\u4F9B\u7684\u4E00\u4E2A\u9759\u6001\u65B9\u6CD5\uFF0C\u5B83\u4E5F\u53EF\u4EE5\u8BA9\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684\u7EBF\u7A0B\u6682\u505C\uFF0C\u4F46\u5B83\u4E0D\u4F1A\u963B\u585E\u8BE5\u7EBF\u7A0B\uFF0C\u5B83\u53EA\u662F\u5C06\u8BE5\u7EBF\u7A0B\u8F6C\u5165\u5C31\u7EEA\u72B6\u6001\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YieldTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u542F\u52A8\u4E24\u4E2A\u5E76\u53D1\u7EBF\u7A0B</span>
    <span class="token class-name">YieldTest</span> yt1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token string">&quot;\u9AD8\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5C06yt1\u7EBF\u7A0B\u8BBE\u7F6E\u6210\u6700\u9AD8\u4F18\u5148\u7EA7</span>
    <span class="token comment">// yt1.setPriority(Thread.MAX_PRIORITY);</span>
    yt1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">YieldTest</span> yt2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YieldTest</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F4E\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5C06yt2\u7EBF\u7A0B\u8BBE\u7F6E\u6210\u6700\u4F4E\u4F18\u5148\u7EA7</span>
    <span class="token comment">// yt2.setPriority(Thread.MIN_PRIORITY);</span>
    yt2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5B9A\u4E49run()\u65B9\u6CD5\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u5F53i\u7B49\u4E8E20\u65F6\uFF0C\u4F7F\u7528yield()\u65B9\u6CD5\u8BA9\u5F53\u524D\u7EBF\u7A0B\u8BA9\u6B65</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>yield()</code>\u53EA\u662F\u8BA9\u5F53\u524D\u7EBF\u7A0B\u6682\u505C\u4E00\u4E0B\uFF0C\u8BA9\u7CFB\u7EDF\u7684\u7EBF\u7A0B\u8C03\u5EA6\u5668\u91CD\u65B0\u8C03\u5EA6\u4E00\u6B21\uFF0C\u5B8C\u5168\u53EF\u80FD\u7684\u60C5\u51B5\u662F\uFF1A\u5F53\u67D0\u4E2A\u7EBF\u7A0B\u8C03\u7528\u4E86<code>yield()</code>\u65B9\u6CD5\u6682\u505C\u4E4B\u540E\uFF0C\u7EBF\u7A0B\u8C03\u5EA6\u5668\u53C8\u5C06\u5176\u8C03\u5EA6\u51FA\u6765\u91CD\u65B0\u6267\u884C\u3002</p><p>\u5F53\u67D0\u4E2A\u7EBF\u7A0B\u8C03\u7528\u4E86<code>yield()</code>\u65B9\u6CD5\u6682\u505C\u4E4B\u540E\uFF0C\u53EA\u6709\u4F18\u5148\u7EA7\u4E0E\u5F53\u524D\u7EBF\u7A0B\u76F8\u540C\uFF0C\u6216\u8005\u4F18\u5148\u7EA7\u6BD4\u5F53\u524D\u7EBF\u7A0B\u66F4\u9AD8\u7684\u5904\u4E8E\u5C31\u7EEA\u72B6\u6001\u7684\u7EBF\u7A0B\u624D\u4F1A\u83B7\u5F97\u6267\u884C\u7684\u673A\u4F1A\u3002</p><p><code>sleep()</code>\u65B9\u6CD5\u548C<code>yield()</code>\u65B9\u6CD5\u7684\u533A\u522B\u5982\u4E0B\u3002</p><ul><li><code>sleep()</code>\u65B9\u6CD5\u6682\u505C\u5F53\u524D\u7EBF\u7A0B\u540E\uFF0C\u4F1A\u7ED9\u5176\u4ED6\u7EBF\u7A0B\u6267\u884C\u673A\u4F1A\uFF0C\u4E0D\u4F1A\u7406\u4F1A\u5176\u4ED6\u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7\uFF1B\u4F46<code>yield()</code>\u65B9\u6CD5\u53EA\u4F1A\u7ED9\u4F18\u5148\u7EA7\u76F8\u540C\uFF0C\u6216\u4F18\u5148\u7EA7\u66F4\u9AD8\u7684\u7EBF\u7A0B\u6267\u884C\u673A\u4F1A\u3002</li><li><code>sleep()</code>\u65B9\u6CD5\u4F1A\u5C06\u7EBF\u7A0B\u8F6C\u5165\u963B\u585E\u72B6\u6001\uFF0C\u76F4\u5230\u7ECF\u8FC7\u963B\u585E\u65F6\u95F4\u624D\u4F1A\u8F6C\u5165\u5C31\u7EEA\u72B6\u6001\uFF1B\u800C<code>yield()</code>\u4E0D\u4F1A\u5C06\u7EBF\u7A0B\u8F6C\u5165\u963B\u585E\u72B6\u6001\uFF0C\u5B83\u53EA\u662F\u5F3A\u5236\u5F53\u524D\u7EBF\u7A0B\u8FDB\u5165\u5C31\u7EEA\u72B6\u6001\u3002\u56E0\u6B64\u5B8C\u5168\u6709\u53EF\u80FD\u67D0\u4E2A\u7EBF\u7A0B\u8C03\u7528<code>yield()</code>\u65B9\u6CD5\u6682\u505C\u4E4B\u540E\uFF0C\u7ACB\u5373\u518D\u6B21\u83B7\u5F97\u5904\u7406\u5668\u8D44\u6E90\u88AB\u6267\u884C\u3002</li><li><code>sleep()</code>\u65B9\u6CD5\u58F0\u660E\u629B\u51FA\u4E86<code>InterruptedException</code>\u5F02\u5E38\uFF0C\u6240\u4EE5\u8C03\u7528<code>sleep()</code>\u65B9\u6CD5\u65F6\u8981\u4E48\u6355\u6349\u8BE5\u5F02\u5E38\uFF0C\u8981\u4E48\u663E\u5F0F\u58F0\u660E\u629B\u51FA\u8BE5\u5F02\u5E38\uFF1B\u800C<code>yield()</code>\u65B9\u6CD5\u5219\u6CA1\u6709\u58F0\u660E\u629B\u51FA\u4EFB\u4F55\u5F02\u5E38\u3002</li><li><code>sleep()</code>\u65B9\u6CD5\u6BD4<code>yield()</code>\u65B9\u6CD5\u6709\u66F4\u597D\u7684\u53EF\u79FB\u690D\u6027\uFF0C\u901A\u5E38\u4E0D\u5EFA\u8BAE\u4F7F\u7528<code>yield()</code>\u65B9\u6CD5\u6765\u63A7\u5236\u5E76\u53D1\u7EBF\u7A0B\u7684\u6267\u884C\u3002</li></ul><h3 id="\u6539\u53D8\u7EBF\u7A0B\u4F18\u5148\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u6539\u53D8\u7EBF\u7A0B\u4F18\u5148\u7EA7" aria-hidden="true">#</a> \u6539\u53D8\u7EBF\u7A0B\u4F18\u5148\u7EA7</h3><p>\u6BCF\u4E2A\u7EBF\u7A0B\u6267\u884C\u65F6\u90FD\u5177\u6709\u4E00\u5B9A\u7684\u4F18\u5148\u7EA7\uFF0C\u4F18\u5148\u7EA7\u9AD8\u7684\u7EBF\u7A0B\u83B7\u5F97\u8F83\u591A\u7684\u6267\u884C\u673A\u4F1A\uFF0C\u800C\u4F18\u5148\u7EA7\u4F4E\u7684\u7EBF\u7A0B\u5219\u83B7\u5F97\u8F83\u5C11\u7684\u6267\u884C\u673A\u4F1A\u3002</p><p>\u6BCF\u4E2A\u7EBF\u7A0B\u9ED8\u8BA4\u7684\u4F18\u5148\u7EA7\u90FD\u4E0E\u521B\u5EFA\u5B83\u7684\u7236\u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7\u76F8\u540C\uFF0C\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>main</code>\u7EBF\u7A0B\u5177\u6709\u666E\u901A\u4F18\u5148\u7EA7\uFF0C\u7531<code>main</code>\u7EBF\u7A0B\u521B\u5EFA\u7684\u5B50\u7EBF\u7A0B\u4E5F\u5177\u6709\u666E\u901A\u4F18\u5148\u7EA7\u3002</p><p><code>Thread</code>\u7C7B\u63D0\u4F9B\u4E86<code>setPriority(int newPriority)</code>\u3001<code>getPriority()</code>\u65B9\u6CD5\u6765\u8BBE\u7F6E\u548C\u8FD4\u56DE\u6307\u5B9A\u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7\uFF0C\u5176\u4E2D<code>setPriority()</code>\u65B9\u6CD5\u7684\u53C2\u6570\u53EF\u4EE5\u662F\u4E00\u4E2A\u6574\u6570\uFF0C\u8303\u56F4\u662F 1 \uFF5E 10 \u4E4B\u95F4\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528<code>Thread</code>\u7C7B\u7684\u5982\u4E0B 3 \u4E2A\u9759\u6001\u5E38\u91CF\u3002</p><ul><li>MAX_PRIORITY\uFF1A\u5176\u503C\u662F 10\u3002</li><li>MIN_PRIORITY\uFF1A\u5176\u503C\u662F 1\u3002</li><li>NORM_PRIORITY\uFF1A\u5176\u503C\u662F 5\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PriorityTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u6709\u53C2\u6570\u7684\u6784\u9020\u5668\uFF0C\u7528\u4E8E\u521B\u5EFA\u7EBF\u7A0B\u65F6\u6307\u5B9Aname</span>
  <span class="token keyword">public</span> <span class="token class-name">PriorityTest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6539\u53D8\u4E3B\u7EBF\u7A0B\u7684\u4F18\u5148\u7EA7</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PriorityTest</span> low <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityTest</span><span class="token punctuation">(</span><span class="token string">&quot;\u4F4E\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        low<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u521B\u5EFA\u4E4B\u521D\u7684\u4F18\u5148\u7EA7:&quot;</span> <span class="token operator">+</span> low<span class="token punctuation">.</span><span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u8BBE\u7F6E\u8BE5\u7EBF\u7A0B\u4E3A\u6700\u4F4E\u4F18\u5148\u7EA7</span>
        low<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MIN_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PriorityTest</span> high <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityTest</span><span class="token punctuation">(</span><span class="token string">&quot;\u9AD8\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        high<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u521B\u5EFA\u4E4B\u521D\u7684\u4F18\u5148\u7EA7:&quot;</span>
            <span class="token operator">+</span> high<span class="token punctuation">.</span><span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u8BBE\u7F6E\u8BE5\u7EBF\u7A0B\u4E3A\u6700\u9AD8\u4F18\u5148\u7EA7</span>
        high<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MAX_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,\u5176\u4F18\u5148\u7EA7\u662F\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token function">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,\u5FAA\u73AF\u53D8\u91CF\u7684\u503C\u4E3A:&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">\u76F8\u5173\u4FE1\u606F</p><p>\u867D\u7136 Java \u63D0\u4F9B\u4E86 10 \u4E2A\u4F18\u5148\u7EA7\u7EA7\u522B\uFF0C\u4F46\u8FD9\u4E9B\u4F18\u5148\u7EA7\u7EA7\u522B\u9700\u8981\u64CD\u4F5C\u7CFB\u7EDF\u7684\u652F\u6301\u3002\u9057\u61BE\u7684\u662F\uFF0C\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u7684\u4F18\u5148\u7EA7\u5E76\u4E0D\u76F8\u540C\uFF0C\u800C\u4E14\u4E5F\u4E0D\u80FD\u5F88\u597D\u5730\u548C Java \u7684 10 \u4E2A\u4F18\u5148\u7EA7\u5BF9\u5E94\uFF0C\u4F8B\u5982 Windows 2000 \u4EC5\u63D0\u4F9B\u4E86 7 \u4E2A\u4F18\u5148\u7EA7\u3002</p><p>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5E94\u8BE5\u5C3D\u91CF\u907F\u514D\u76F4\u63A5\u4E3A\u7EBF\u7A0B\u6307\u5B9A\u4F18\u5148\u7EA7\uFF0C\u800C\u5E94\u8BE5\u4F7F\u7528 MAX_PRIORITY\u3001MIN_PRIORITY \u548C NORM_PRIORITY \u4E09\u4E2A\u9759\u6001\u5E38\u91CF\u6765\u8BBE\u7F6E\u4F18\u5148\u7EA7\uFF0C\u8FD9\u6837\u624D\u53EF\u4EE5\u4FDD\u8BC1\u7A0B\u5E8F\u5177\u6709\u6700\u597D\u7684\u53EF\u79FB\u690D\u6027\u3002</p></div><h2 id="\u7EBF\u7A0B\u540C\u6B65" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u540C\u6B65" aria-hidden="true">#</a> \u7EBF\u7A0B\u540C\u6B65</h2><p>\u5F53\u591A\u4E2A\u7EBF\u7A0B\u540C\u65F6\u8FD0\u884C\u65F6\uFF0C\u7EBF\u7A0B\u7684\u8C03\u5EA6\u7531\u64CD\u4F5C\u7CFB\u7EDF\u51B3\u5B9A\uFF0C\u7A0B\u5E8F\u672C\u8EAB\u65E0\u6CD5\u51B3\u5B9A\u3002\u56E0\u6B64\uFF0C\u4EFB\u4F55\u4E00\u4E2A\u7EBF\u7A0B\u90FD\u6709\u53EF\u80FD\u5728\u4EFB\u4F55\u6307\u4EE4\u5904\u88AB\u64CD\u4F5C\u7CFB\u7EDF\u6682\u505C\uFF0C\u7136\u540E\u5728\u67D0\u4E2A\u65F6\u95F4\u6BB5\u540E\u7EE7\u7EED\u6267\u884C\u3002</p><p>\u8FD9\u4E2A\u65F6\u5019\uFF0C\u6709\u4E2A\u5355\u7EBF\u7A0B\u6A21\u578B\u4E0B\u4E0D\u5B58\u5728\u7684\u95EE\u9898\u5C31\u6765\u4E86\uFF1A\u5982\u679C\u591A\u4E2A\u7EBF\u7A0B\u540C\u65F6\u8BFB\u5199\u5171\u4EAB\u53D8\u91CF\uFF0C\u4F1A\u51FA\u73B0\u6570\u636E\u4E0D\u4E00\u81F4\u7684\u95EE\u9898\u3002</p><h3 id="\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898" aria-hidden="true">#</a> \u7EBF\u7A0B\u5B89\u5168\u95EE\u9898</h3><p>\u5173\u4E8E\u7EBF\u7A0B\u5B89\u5168\u7684\u4E00\u4E2A\u7ECF\u5178\u95EE\u9898\u2014\u2014\u94F6\u884C\u53D6\u94B1\u3002\u94F6\u884C\u53D6\u94B1\u7684\u57FA\u672C\u6D41\u7A0B\u57FA\u672C\u4E0A\u53EF\u4EE5\u5206\u4E3A\u5982\u4E0B\u51E0\u4E2A\u6B65\u9AA4\u3002</p><ol><li>\u7528\u6237\u8F93\u5165\u8D26\u6237\u3001\u5BC6\u7801\uFF0C\u7CFB\u7EDF\u5224\u65AD\u7528\u6237\u7684\u8D26\u6237\u3001\u5BC6\u7801\u662F\u5426\u5339\u914D\u3002</li><li>\u7528\u6237\u8F93\u5165\u53D6\u6B3E\u91D1\u989D\u3002</li><li>\u7CFB\u7EDF\u5224\u65AD\u8D26\u6237\u4F59\u989D\u662F\u5426\u5927\u4E8E\u53D6\u6B3E\u91D1\u989D\u3002</li><li>\u5982\u679C\u4F59\u989D\u5927\u4E8E\u53D6\u6B3E\u91D1\u989D\uFF0C\u5219\u53D6\u6B3E\u6210\u529F\uFF1B\u5982\u679C\u4F59\u989D\u5C0F\u4E8E\u53D6\u6B3E\u91D1\u989D\uFF0C\u5219\u53D6\u6B3E\u5931\u8D25\u3002</li></ol><p>\u4F7F\u7528\u4E24\u4E2A\u7EBF\u7A0B\u6765\u6A21\u62DF\u53D6\u94B1\u64CD\u4F5C\uFF0C\u6A21\u62DF\u4E24\u4E2A\u4EBA\u4F7F\u7528\u540C\u4E00\u4E2A\u8D26\u6237\u5E76\u53D1\u53D6\u94B1\u7684\u95EE\u9898\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5C01\u88C5\u8D26\u6237\u7F16\u53F7\u3001\u8D26\u6237\u4F59\u989D\u4E24\u4E2AField</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> accountNo<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">String</span> accountNo<span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accountNo <span class="token operator">=</span> accountNo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\u6839\u636EaccountNo\u6765\u91CD\u5199hashCode()\u548Cequals()\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accountNo<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Account</span> target <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">getAccountNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>accountNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53D6\u94B1\u7684\u7EBF\u7A0B\u7C7B\uFF0C\u8BE5\u7EBF\u7A0B\u7C7B\u6839\u636E\u6267\u884C\u8D26\u6237\u3001\u53D6\u94B1\u6570\u91CF\u8FDB\u884C\u53D6\u94B1\u64CD\u4F5C\uFF0C\u53D6\u94B1\u7684\u903B\u8F91\u662F\u5F53\u5176\u4F59\u989D\u4E0D\u8DB3\u65F6\u65E0\u6CD5\u63D0\u53D6\u73B0\u91D1\uFF0C\u5F53\u4F59\u989D\u8DB3\u591F\u65F6\u7CFB\u7EDF\u5410\u51FA\u949E\u7968\uFF0C\u4F59\u989D\u51CF\u5C11\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DrawThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6A21\u62DF\u7528\u6237\u8D26\u6237</span>
  <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>
  <span class="token comment">// \u5F53\u524D\u53D6\u94B1\u7EBF\u7A0B\u6240\u5E0C\u671B\u53D6\u7684\u94B1\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Account</span> account
      <span class="token punctuation">,</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>drawAmount <span class="token operator">=</span> drawAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5F53\u591A\u4E2A\u7EBF\u7A0B\u4FEE\u6539\u540C\u4E00\u4E2A\u5171\u4EAB\u6570\u636E\u65F6\uFF0C\u5C06\u6D89\u53CA\u6570\u636E\u5B89\u5168\u95EE\u9898</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8D26\u6237\u4F59\u989D\u5927\u4E8E\u53D6\u94B1\u6570\u76EE</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5410\u51FA\u949E\u7968</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u6210\u529F\uFF01\u5410\u51FA\u949E\u7968:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u4FEE\u6539\u4F59\u989D</span>
      account<span class="token punctuation">.</span><span class="token function">setBalance</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4F59\u989D\u4E3A: &quot;</span> <span class="token operator">+</span> account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u5931\u8D25\uFF01\u4F59\u989D\u4E0D\u8DB3\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E00\u4E2A\u8D26\u6237\uFF0C\u5E76\u542F\u52A8\u4E24\u4E2A\u7EBF\u7A0B\u4ECE\u8BE5\u8D26\u6237\u4E2D\u53D6\u94B1\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DrawTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u8D26\u6237</span>
    <span class="token class-name">Account</span> acct <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token string">&quot;1234567&quot;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u6A21\u62DF\u4E24\u4E2A\u7EBF\u7A0B\u5BF9\u540C\u4E00\u4E2A\u8D26\u6237\u53D6\u94B1</span>
    <span class="token keyword">new</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u7532&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E59&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u591A\u6B21\u8FD0\u884C\u4E0A\u9762\u7A0B\u5E8F\uFF0C\u5F88\u6709\u53EF\u80FD\u90FD\u4F1A\u770B\u5230\u5982\u56FE\u6240\u793A\u7684\u9519\u8BEF\u7ED3\u679C\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208201910336.png" alt="image-20220820191008047"></p><h3 id="\u540C\u6B65\u4EE3\u7801\u5757" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65\u4EE3\u7801\u5757" aria-hidden="true">#</a> \u540C\u6B65\u4EE3\u7801\u5757</h3><p>\u4E3A\u4E86\u89E3\u51B3\u540C\u6B65\u95EE\u9898\uFF0CJava \u7684\u591A\u7EBF\u7A0B\u652F\u6301\u5F15\u5165\u4E86\u540C\u6B65\u76D1\u89C6\u5668\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u4F7F\u7528\u540C\u6B65\u76D1\u89C6\u5668\u7684\u901A\u7528\u65B9\u6CD5\u5C31\u662F\u540C\u6B65\u4EE3\u7801\u5757\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">synchronized</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">//\u6B64\u5904\u7684\u4EE3\u7801\u5C31\u662F\u540C\u6B65\u4EE3\u7801\u5757</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>synchronized</code>\u540E\u62EC\u53F7\u91CC\u7684<code>obj</code>\u5C31\u662F\u540C\u6B65\u76D1\u89C6\u5668\uFF0C\u4E0A\u9762\u4EE3\u7801\u7684\u542B\u4E49\u662F\uFF1A\u7EBF\u7A0B\u5F00\u59CB\u6267\u884C\u540C\u6B65\u4EE3\u7801\u5757\u4E4B\u524D\uFF0C\u5FC5\u987B\u5148\u83B7\u5F97\u5BF9\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u3002</p><p>\u4EFB\u4F55\u65F6\u523B\u53EA\u80FD\u6709\u4E00\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u83B7\u5F97\u5BF9\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\uFF0C\u5F53\u540C\u6B65\u4EE3\u7801\u5757\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u8BE5\u7EBF\u7A0B\u4F1A\u91CA\u653E\u5BF9\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u3002</p><p>\u901A\u5E38\u63A8\u8350\u4F7F\u7528\u53EF\u80FD\u88AB\u5E76\u53D1\u8BBF\u95EE\u7684\u5171\u4EAB\u8D44\u6E90\u5145\u5F53\u540C\u6B65\u76D1\u89C6\u5668\u3002</p><p>\u5BF9\u4E8E\u4E0A\u9762\u7684\u53D6\u94B1\u6A21\u62DF\u7A0B\u5E8F\uFF0C\u4F7F\u7528\u8D26\u6237\uFF08<code>account</code>\uFF09\u4F5C\u4E3A\u540C\u6B65\u76D1\u89C6\u5668\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DrawThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6A21\u62DF\u7528\u6237\u8D26\u6237</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>
  <span class="token comment">// \u5F53\u524D\u53D6\u94B1\u7EBF\u7A0B\u6240\u5E0C\u671B\u53D6\u7684\u94B1\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Account</span> account
      <span class="token punctuation">,</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>drawAmount <span class="token operator">=</span> drawAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u5F53\u591A\u4E2A\u7EBF\u7A0B\u4FEE\u6539\u540C\u4E00\u4E2A\u5171\u4EAB\u6570\u636E\u65F6\uFF0C\u5C06\u6D89\u53CA\u6570\u636E\u5B89\u5168\u95EE\u9898</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u4F7F\u7528account\u4F5C\u4E3A\u540C\u6B65\u76D1\u89C6\u5668\uFF0C\u4EFB\u4F55\u7EBF\u7A0B\u8FDB\u5165\u4E0B\u9762\u540C\u6B65\u4EE3\u7801\u5757\u4E4B\u524D</span>
    <span class="token comment">// \u5FC5\u987B\u5148\u83B7\u5F97\u5BF9account\u8D26\u6237\u7684\u9501\u5B9A\u2014\u2014\u5176\u4ED6\u7EBF\u7A0B\u65E0\u6CD5\u83B7\u5F97\u9501\uFF0C\u4E5F\u5C31\u65E0\u6CD5\u4FEE\u6539\u5B83</span>
    <span class="token comment">// \u8FD9\u79CD\u505A\u6CD5\u7B26\u5408\uFF1A\u201C\u52A0\u9501 \u2192 \u4FEE\u6539 \u2192 \u91CA\u653E\u9501\u201D\u7684\u903B\u8F91</span>
    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>account<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8D26\u6237\u4F59\u989D\u5927\u4E8E\u53D6\u94B1\u6570\u76EE</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5410\u51FA\u949E\u7968</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u6210\u529F\uFF01\u5410\u51FA\u949E\u7968:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// \u4FEE\u6539\u4F59\u989D</span>
        account<span class="token punctuation">.</span><span class="token function">setBalance</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4F59\u989D\u4E3A: &quot;</span> <span class="token operator">+</span> account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u5931\u8D25\uFF01\u4F59\u989D\u4E0D\u8DB3\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u540C\u6B65\u4EE3\u7801\u5757\u7ED3\u675F\uFF0C\u8BE5\u7EBF\u7A0B\u91CA\u653E\u540C\u6B65\u9501</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u540C\u6B65\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65\u65B9\u6CD5" aria-hidden="true">#</a> \u540C\u6B65\u65B9\u6CD5</h3><p>\u540C\u6B65\u65B9\u6CD5\u5C31\u662F\u4F7F\u7528<code>synchronized</code>\u5173\u952E\u5B57\u6765\u4FEE\u9970\u67D0\u4E2A\u65B9\u6CD5\uFF0C\u5219\u8BE5\u65B9\u6CD5\u79F0\u4E3A\u540C\u6B65\u65B9\u6CD5\u3002\u5BF9\u4E8E\u540C\u6B65\u65B9\u6CD5\u800C\u8A00\uFF0C\u65E0\u987B\u663E\u5F0F\u6307\u5B9A\u540C\u6B65\u76D1\u89C6\u5668\uFF0C\u540C\u6B65\u65B9\u6CD5\u7684\u540C\u6B65\u76D1\u89C6\u5668\u662F<code>this</code>\uFF0C\u4E5F\u5C31\u662F\u8BE5\u5BF9\u8C61\u672C\u8EAB\u3002</p><p>\u901A\u8FC7\u4F7F\u7528\u540C\u6B65\u65B9\u6CD5\u53EF\u4EE5\u975E\u5E38\u65B9\u4FBF\u5730\u5B9E\u73B0\u7EBF\u7A0B\u5B89\u5168\u7684\u7C7B\uFF0C\u7EBF\u7A0B\u5B89\u5168\u7684\u7C7B\u5177\u6709\u5982\u4E0B\u7279\u5F81\u3002</p><ul><li>\u8BE5\u7C7B\u7684\u5BF9\u8C61\u53EF\u4EE5\u88AB\u591A\u4E2A\u7EBF\u7A0B\u5B89\u5168\u5730\u8BBF\u95EE\u3002</li><li>\u6BCF\u4E2A\u7EBF\u7A0B\u8C03\u7528\u8BE5\u5BF9\u8C61\u7684\u4EFB\u610F\u65B9\u6CD5\u4E4B\u540E\u90FD\u5C06\u5F97\u5230\u6B63\u786E\u7ED3\u679C\u3002</li><li>\u6BCF\u4E2A\u7EBF\u7A0B\u8C03\u7528\u8BE5\u5BF9\u8C61\u7684\u4EFB\u610F\u65B9\u6CD5\u4E4B\u540E\uFF0C\u8BE5\u5BF9\u8C61\u72B6\u6001\u4F9D\u7136\u4FDD\u6301\u5408\u7406\u72B6\u6001\u3002</li></ul><p>\u5C06<code>Account</code>\u7C7B\u5BF9<code>balance</code>\u7684\u8BBF\u95EE\u8BBE\u7F6E\u6210\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u628A<code>balance</code>\u7684\u65B9\u6CD5\u4FEE\u6539\u6210\u540C\u6B65\u65B9\u6CD5\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5C01\u88C5\u8D26\u6237\u7F16\u53F7\u3001\u8D26\u6237\u4F59\u989D\u4E24\u4E2AField</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> accountNo<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">String</span> accountNo<span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accountNo <span class="token operator">=</span> accountNo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u56E0\u4E3A\u8D26\u6237\u4F59\u989D\u4E0D\u5141\u8BB8\u968F\u4FBF\u4FEE\u6539\uFF0C\u6240\u4EE5\u53EA\u4E3Abalance\u63D0\u4F9Bgetter\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u63D0\u4F9B\u4E00\u4E2A\u7EBF\u7A0B\u5B89\u5168\u7684draw()\u65B9\u6CD5\u6765\u5B8C\u6210\u53D6\u94B1\u64CD\u4F5C</span>
  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8D26\u6237\u4F59\u989D\u5927\u4E8E\u53D6\u94B1\u6570\u76EE</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;=</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5410\u51FA\u949E\u7968</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u6210\u529F\uFF01\u5410\u51FA\u949E\u7968:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// \u4FEE\u6539\u4F59\u989D</span>
      balance <span class="token operator">-=</span> drawAmount<span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4F59\u989D\u4E3A: &quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u5931\u8D25\uFF01\u4F59\u989D\u4E0D\u8DB3\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\u6839\u636EaccountNo\u6765\u91CD\u5199hashCode()\u548Cequals()\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accountNo<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Account</span> target <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">getAccountNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>accountNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FEE\u6539<code>DrawThread</code>\u7EBF\u7A0B\u7C7B\uFF0C\u8BE5\u7EBF\u7A0B\u7C7B\u7684<code>run()</code>\u65B9\u6CD5\u53EA\u8981\u8C03\u7528<code>Account</code>\u5BF9\u8C61\u7684<code>draw()</code>\u65B9\u6CD5\u5373\u53EF\u6267\u884C\u53D6\u94B1\u64CD\u4F5C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u76F4\u63A5\u8C03\u7528account\u5BF9\u8C61\u7684draw()\u65B9\u6CD5\u6765\u6267\u884C\u53D6\u94B1\u64CD\u4F5C</span>
  <span class="token comment">// \u540C\u6B65\u65B9\u6CD5\u7684\u540C\u6B65\u76D1\u89C6\u5668\u662Fthis\uFF0Cthis\u4EE3\u8868\u8C03\u7528draw()\u65B9\u6CD5\u7684\u5BF9\u8C61</span>
  <span class="token comment">// \u4E5F\u5C31\u662F\u8BF4\uFF0C\u7EBF\u7A0B\u8FDB\u5165draw()\u65B9\u6CD5\u4E4B\u524D\uFF0C\u5FC5\u987B\u5148\u5BF9account\u5BF9\u8C61\u52A0\u9501</span>
  account<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u53D8\u7C7B\u7684\u7EBF\u7A0B\u5B89\u5168\u662F\u4EE5\u964D\u4F4E\u7A0B\u5E8F\u7684\u8FD0\u884C\u6548\u7387\u4F5C\u4E3A\u4EE3\u4EF7\u7684\uFF0C\u4E3A\u4E86\u51CF\u5C11\u7EBF\u7A0B\u5B89\u5168\u6240\u5E26\u6765\u7684\u8D1F\u9762\u5F71\u54CD\uFF0C\u7A0B\u5E8F\u53EF\u4EE5\u91C7\u7528\u5982\u4E0B\u7B56\u7565\u3002</p><ul><li>\u4E0D\u8981\u5BF9\u7EBF\u7A0B\u5B89\u5168\u7C7B\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u8FDB\u884C\u540C\u6B65\uFF0C\u53EA\u5BF9\u90A3\u4E9B\u4F1A\u662F\u5171\u4EAB\u8D44\u6E90\u7684\u65B9\u6CD5\u8FDB\u884C\u540C\u6B65\u3002\u4F8B\u5982\u4E0A\u9762<code>Account</code>\u7C7B\u4E2D\u7684<code>accountNo</code>\u5C5E\u6027\u5C31\u65E0\u987B\u540C\u6B65\uFF0C\u6240\u4EE5\u7A0B\u5E8F\u53EA\u5BF9<code>draw()</code>\u65B9\u6CD5\u8FDB\u884C\u4E86\u540C\u6B65\u63A7\u5236\u3002</li><li>\u5982\u679C\u53EF\u53D8\u7C7B\u6709\u4E24\u79CD\u8FD0\u884C\u73AF\u5883\uFF1A\u5355\u7EBF\u7A0B\u73AF\u5883\u548C\u591A\u7EBF\u7A0B\u73AF\u5883\uFF0C\u5219\u5E94\u8BE5\u4E3A\u8BE5\u53EF\u53D8\u7C7B\u63D0\u4F9B\u4E24\u79CD\u7248\u672C\uFF0C\u5373\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7248\u672C\u548C\u7EBF\u7A0B\u5B89\u5168\u7248\u672C\u3002\u5728\u5355\u7EBF\u7A0B\u73AF\u5883\u4E2D\u4F7F\u7528\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7248\u672C\u4EE5\u4FDD\u8BC1\u6027\u80FD\uFF0C\u5728\u591A\u7EBF\u7A0B\u73AF\u5883\u4E2D\u4F7F\u7528\u7EBF\u7A0B\u5B89\u5168\u7248\u672C\u3002</li></ul><h3 id="\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A" aria-hidden="true">#</a> \u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A</h3><p>\u7A0B\u5E8F\u65E0\u6CD5\u663E\u5F0F\u91CA\u653E\u5BF9\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\uFF0C\u7EBF\u7A0B\u4F1A\u5728\u5982\u4E0B\u51E0\u79CD\u60C5\u51B5\u4E0B\u91CA\u653E\u5BF9\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u3002</p><ol><li>\u5F53\u524D\u7EBF\u7A0B\u7684\u540C\u6B65\u65B9\u6CD5\u3001\u540C\u6B65\u4EE3\u7801\u5757\u6267\u884C\u7ED3\u675F\uFF0C\u5F53\u524D\u7EBF\u7A0B\u5373\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</li><li>\u5F53\u524D\u7EBF\u7A0B\u5728\u540C\u6B65\u4EE3\u7801\u5757\u3001\u540C\u6B65\u65B9\u6CD5\u4E2D\u9047\u5230<code>break</code>\u3001<code>return</code>\u7EC8\u6B62\u4E86\u8BE5\u4EE3\u7801\u5757\u3001\u8BE5\u65B9\u6CD5\u7684\u7EE7\u7EED\u6267\u884C\uFF0C\u5F53\u524D\u7EBF\u7A0B\u5C06\u4F1A\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</li><li>\u5F53\u524D\u7EBF\u7A0B\u5728\u540C\u6B65\u4EE3\u7801\u5757\u3001\u540C\u6B65\u65B9\u6CD5\u4E2D\u51FA\u73B0\u4E86\u672A\u5904\u7406\u7684<code>Error</code>\u6216<code>Exception</code>\uFF0C\u5BFC\u81F4\u4E86\u8BE5\u4EE3\u7801\u5757\u3001\u8BE5\u65B9\u6CD5\u5F02\u5E38\u7ED3\u675F\u65F6\uFF0C\u5F53\u524D\u7EBF\u7A0B\u5C06\u4F1A\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</li><li>\u5F53\u524D\u7EBF\u7A0B\u6267\u884C\u540C\u6B65\u4EE3\u7801\u5757\u6216\u540C\u6B65\u65B9\u6CD5\u65F6\uFF0C\u7A0B\u5E8F\u6267\u884C\u4E86\u540C\u6B65\u76D1\u89C6\u5668\u5BF9\u8C61\u7684<code>wait()</code>\u65B9\u6CD5\uFF0C\u5219\u5F53\u524D\u7EBF\u7A0B\u6682\u505C\uFF0C\u5E76\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</li></ol><p>\u5728\u5982\u4E0B\u6240\u793A\u7684\u60C5\u51B5\u4E0B\uFF0C\u7EBF\u7A0B\u4E0D\u4F1A\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</p><ul><li>\u7EBF\u7A0B\u6267\u884C\u540C\u6B65\u4EE3\u7801\u5757\u6216\u540C\u6B65\u65B9\u6CD5\u65F6\uFF0C\u7A0B\u5E8F\u8C03\u7528<code>Thread.sleep()</code>\u3001<code>Thread.yield()</code>\u65B9\u6CD5\u6765\u6682\u505C\u5F53\u524D\u7EBF\u7A0B\u7684\u6267\u884C\uFF0C\u5F53\u524D\u7EBF\u7A0B\u4E0D\u4F1A\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</li><li>\u7EBF\u7A0B\u6267\u884C\u540C\u6B65\u4EE3\u7801\u5757\u65F6\uFF0C\u5176\u4ED6\u7EBF\u7A0B\u8C03\u7528\u4E86\u8BE5\u7EBF\u7A0B\u7684<code>suspend()</code>\u65B9\u6CD5\u5C06\u8BE5\u7EBF\u7A0B\u6302\u8D77\uFF0C\u8BE5\u7EBF\u7A0B\u4E0D\u4F1A\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002\u5C3D\u91CF\u907F\u514D\u4F7F\u7528<code>suspend()</code>\u548C<code>resume()</code>\u65B9\u6CD5\u6765\u63A7\u5236\u7EBF\u7A0B\u3002</li></ul><h3 id="\u540C\u6B65\u9501-lock" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65\u9501-lock" aria-hidden="true">#</a> \u540C\u6B65\u9501\uFF08Lock\uFF09</h3><p>\u4ECE Java 5 \u5F00\u59CB\uFF0CJava \u63D0\u4F9B\u4E86\u4E00\u79CD\u529F\u80FD\u66F4\u5F3A\u5927\u7684\u7EBF\u7A0B\u540C\u6B65\u673A\u5236\u2014\u2014\u901A\u8FC7\u663E\u5F0F\u5B9A\u4E49\u540C\u6B65\u9501\u5BF9\u8C61\u6765\u5B9E\u73B0\u540C\u6B65\uFF0C\u5728\u8FD9\u79CD\u673A\u5236\u4E0B\uFF0C\u540C\u6B65\u9501\u4F7F\u7528<code>Lock</code>\u5BF9\u8C61\u5145\u5F53\u3002</p><p><code>Lock</code>\u63D0\u4F9B\u4E86\u6BD4<code>synchronized</code>\u65B9\u6CD5\u548C<code>synchronized</code>\u4EE3\u7801\u5757\u66F4\u5E7F\u6CDB\u7684\u9501\u5B9A\u64CD\u4F5C\uFF0C<code>Lock</code>\u5B9E\u73B0\u5141\u8BB8\u66F4\u7075\u6D3B\u7684\u7ED3\u6784\uFF0C\u53EF\u4EE5\u5177\u6709\u5DEE\u522B\u5F88\u5927\u7684\u5C5E\u6027\uFF0C\u5E76\u4E14\u652F\u6301\u591A\u4E2A\u76F8\u5173\u7684<code>Condition</code>\u5BF9\u8C61\u3002<code>Lock</code>\u662F\u63A7\u5236\u591A\u4E2A\u7EBF\u7A0B\u5BF9\u5171\u4EAB\u8D44\u6E90\u8FDB\u884C\u8BBF\u95EE\u7684\u5DE5\u5177\u3002</p><p>\u901A\u5E38\uFF0C\u9501\u63D0\u4F9B\u4E86\u5BF9\u5171\u4EAB\u8D44\u6E90\u7684\u72EC\u5360\u8BBF\u95EE\uFF0C\u6BCF\u6B21\u53EA\u80FD\u6709\u4E00\u4E2A\u7EBF\u7A0B\u5BF9<code>Lock</code>\u5BF9\u8C61\u52A0\u9501\uFF0C\u7EBF\u7A0B\u5F00\u59CB\u8BBF\u95EE\u5171\u4EAB\u8D44\u6E90\u4E4B\u524D\u5E94\u5148\u83B7\u5F97<code>Lock</code>\u5BF9\u8C61\u3002</p><p>\u67D0\u4E9B\u9501\u53EF\u80FD\u5141\u8BB8\u5BF9\u5171\u4EAB\u8D44\u6E90\u5E76\u53D1\u8BBF\u95EE\uFF0C\u5982<code>ReadWriteLock</code>\uFF08\u8BFB\u5199\u9501\uFF09\uFF0C<code>Lock</code>\u3001<code>ReadWriteLock</code>\u662F Java5 \u65B0\u63D0\u4F9B\u7684\u4E24\u4E2A\u6839\u63A5\u53E3\uFF0C\u5E76\u4E3A<code>Lock</code>\u63D0\u4F9B\u4E86<code>ReentrantLock</code>\uFF08\u53EF\u91CD\u5165\u9501\uFF09\u5B9E\u73B0\u7C7B\uFF1B\u4E3A<code>ReadWriteLock</code>\u63D0\u4F9B\u4E86<code>ReentrantReadWriteLock</code>\u5B9E\u73B0\u7C7B\u3002</p><p>\u4F7F\u7528\u8BE5<code>Lock</code>\u5BF9\u8C61\u53EF\u4EE5\u663E\u5F0F\u5730\u52A0\u9501\u3001\u91CA\u653E\u9501\uFF0C\u901A\u5E38\u4F7F\u7528<code>ReentrantLock</code>\u7684\u4EE3\u7801\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">X</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5B9A\u4E49\u9501\u5BF9\u8C61</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
  <span class="token comment">// \u5B9A\u4E49\u9700\u8981\u4FDD\u8BC1\u7EBF\u7A0B\u5B89\u5168\u7684\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u52A0\u9501</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u9700\u8981\u4FDD\u8BC1\u7EBF\u7A0B\u5B89\u5168\u7684\u4EE3\u7801</span>
      <span class="token comment">// ... method body</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4F7F\u7528finally\u5757\u6765\u4FDD\u8BC1\u91CA\u653E\u9501</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528<code>ReentrantLock</code>\u5BF9\u8C61\u6765\u8FDB\u884C\u540C\u6B65\uFF0C\u52A0\u9501\u548C\u91CA\u653E\u9501\u51FA\u73B0\u5728\u4E0D\u540C\u7684\u4F5C\u7528\u8303\u56F4\u5185\u65F6\uFF0C\u901A\u5E38\u5EFA\u8BAE\u4F7F\u7528<code>finally</code>\u5757\u6765\u786E\u4FDD\u5728\u5FC5\u8981\u65F6\u91CA\u653E\u9501\u3002</p><p>\u901A\u8FC7\u4F7F\u7528<code>ReentrantLock</code>\u5BF9\u8C61\u4FEE\u6539<code>Account</code>\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5B9A\u4E49\u9501\u5BF9\u8C61</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5C01\u88C5\u8D26\u6237\u7F16\u53F7\u3001\u8D26\u6237\u4F59\u989D\u4E24\u4E2AField</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> accountNo<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">String</span> accountNo<span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accountNo <span class="token operator">=</span> accountNo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u56E0\u4E3A\u8D26\u6237\u4F59\u989D\u4E0D\u5141\u8BB8\u968F\u4FBF\u4FEE\u6539\uFF0C\u6240\u4EE5\u53EA\u4E3Abalance\u63D0\u4F9Bgetter\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u63D0\u4F9B\u4E00\u4E2A\u7EBF\u7A0B\u5B89\u5168\u7684draw()\u65B9\u6CD5\u6765\u5B8C\u6210\u53D6\u94B1\u64CD\u4F5C</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u52A0\u9501</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u8D26\u6237\u4F59\u989D\u5927\u4E8E\u53D6\u94B1\u6570\u76EE</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>balance <span class="token operator">&gt;=</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5410\u51FA\u949E\u7968</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u6210\u529F\uFF01\u5410\u51FA\u949E\u7968:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// \u4FEE\u6539\u4F59\u989D</span>
        balance <span class="token operator">-=</span> drawAmount<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\t\u4F59\u989D\u4E3A: &quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token string">&quot;\u53D6\u94B1\u5931\u8D25\uFF01\u4F59\u989D\u4E0D\u8DB3\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u4FEE\u6539\u5B8C\u6210\uFF0C\u91CA\u653E\u9501</span>
      lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\u6839\u636EaccountNo\u6765\u91CD\u5199hashCode()\u548Cequals()\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accountNo<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Account</span> target <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">getAccountNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>accountNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Lock</code>\u63D0\u4F9B\u4E86\u540C\u6B65\u65B9\u6CD5\u548C\u540C\u6B65\u4EE3\u7801\u5757\u6240\u6CA1\u6709\u7684\u5176\u4ED6\u529F\u80FD\uFF0C\u5305\u62EC\u7528\u4E8E\u975E\u5757\u7ED3\u6784\u7684<code>tryLock()</code>\u65B9\u6CD5\uFF0C\u4EE5\u53CA\u8BD5\u56FE\u83B7\u53D6\u53EF\u4E2D\u65AD\u9501\u7684<code>lockInterruptibly()</code>\u65B9\u6CD5\uFF0C\u8FD8\u6709\u83B7\u53D6\u8D85\u65F6\u5931\u6548\u9501\u7684<code>tryLock(long, TimeUnit)</code>\u65B9\u6CD5\u3002</p><p><code>ReentrantLock</code>\u9501\u5177\u6709\u53EF\u91CD\u5165\u6027\uFF0C\u4E00\u4E2A\u7EBF\u7A0B\u53EF\u4EE5\u5BF9\u5DF2\u88AB\u52A0\u9501\u7684<code>ReentrantLock</code>\u9501\u518D\u6B21\u52A0\u9501\uFF0C <code>ReentrantLock</code>\u5BF9\u8C61\u4F1A\u7EF4\u6301\u4E00\u4E2A\u8BA1\u6570\u5668\u6765\u8FFD\u8E2A<code>lock()</code>\u65B9\u6CD5\u7684\u5D4C\u5957\u8C03\u7528\uFF0C\u7EBF\u7A0B\u5728\u6BCF\u6B21\u8C03\u7528<code>lock()</code>\u52A0\u9501\u540E\uFF0C\u5FC5\u987B\u663E\u5F0F\u8C03\u7528<code>unlock()</code>\u6765\u91CA\u653E\u9501\uFF0C\u6240\u4EE5\u4E00\u6BB5\u88AB\u9501\u4FDD\u62A4\u7684\u4EE3\u7801\u53EF\u4EE5\u8C03\u7528\u53E6\u4E00\u4E2A\u88AB\u76F8\u540C\u9501\u4FDD\u62A4\u7684\u65B9\u6CD5\u3002</p><h3 id="\u6B7B\u9501" tabindex="-1"><a class="header-anchor" href="#\u6B7B\u9501" aria-hidden="true">#</a> \u6B7B\u9501</h3><p>\u5F53\u4E24\u4E2A\u7EBF\u7A0B\u76F8\u4E92\u7B49\u5F85\u5BF9\u65B9\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u65F6\u5C31\u4F1A\u53D1\u751F\u6B7B\u9501\uFF0C\u4E00\u65E6\u51FA\u73B0\u6B7B\u9501\uFF0C\u6574\u4E2A\u7A0B\u5E8F\u65E2\u4E0D\u4F1A\u53D1\u751F\u4EFB\u4F55\u5F02\u5E38\uFF0C\u4E5F\u4E0D\u4F1A\u7ED9\u51FA\u4EFB\u4F55\u63D0\u793A\uFF0C\u53EA\u662F\u6240\u6709\u7EBF\u7A0B\u5904\u4E8E\u963B\u585E\u72B6\u6001\uFF0C\u65E0\u6CD5\u7EE7\u7EED\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token class-name">B</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\u540D: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">+</span> <span class="token string">&quot; \u8FDB\u5165\u4E86A\u5B9E\u4F8B\u7684foo\u65B9\u6CD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//\u2460</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\u540D: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">+</span> <span class="token string">&quot; \u4F01\u56FE\u8C03\u7528B\u5B9E\u4F8B\u7684last\u65B9\u6CD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//\u2462</span>
    b<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u4E86A\u7C7B\u7684last\u65B9\u6CD5\u5185\u90E8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token class-name">A</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\u540D: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">+</span> <span class="token string">&quot; \u8FDB\u5165\u4E86B\u5B9E\u4F8B\u7684bar\u65B9\u6CD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//\u2461</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u7EBF\u7A0B\u540D: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">+</span> <span class="token string">&quot; \u4F01\u56FE\u8C03\u7528A\u5B9E\u4F8B\u7684last\u65B9\u6CD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//\u2463</span>
    a<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u4E86B\u7C7B\u7684last\u65B9\u6CD5\u5185\u90E8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadLock</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

  <span class="token class-name">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DeadLock</span> dl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u4EE5dl\u4E3Atarget\u542F\u52A8\u65B0\u7EBF\u7A0B</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8C03\u7528init()\u65B9\u6CD5</span>
    dl<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8C03\u7528a\u5BF9\u8C61\u7684foo()\u65B9\u6CD5</span>
    a<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u4E86\u4E3B\u7EBF\u7A0B\u4E4B\u540E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u526F\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u8C03\u7528b\u5BF9\u8C61\u7684bar()\u65B9\u6CD5</span>
    b<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u4E86\u526F\u7EBF\u7A0B\u4E4B\u540E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7A0B\u5E8F\u65E2\u65E0\u6CD5\u5411\u4E0B\u6267\u884C\uFF0C\u4E5F\u4E0D\u4F1A\u629B\u51FA\u4EFB\u4F55\u5F02\u5E38\u3002</p><p>\u7A0B\u5E8F\u4E2D<code>A</code>\u5BF9\u8C61\u548C<code>B</code>\u5BF9\u8C61\u90FD\u662F\u540C\u6B65\u9501\u3002\u7A0B\u5E8F\u4E2D\u4E24\u4E2A\u7EBF\u7A0B\u6267\u884C\uFF0C\u4E00\u4E2A\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u662F<code>DeadLock</code>\u7C7B\u7684<code>run()</code>\u65B9\u6CD5\uFF0C\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6267\u884C\u4F53\u662F<code>DeadLock</code>\u7684<code>init()</code>\u65B9\u6CD5\uFF08\u4E3B\u7EBF\u7A0B\u8C03\u7528\u4E86<code>init()</code>\u65B9\u6CD5\uFF09\u3002</p><p>\u5176\u4E2D<code>run()</code>\u65B9\u6CD5\u4E2D\u8BA9<code>B</code>\u5BF9\u8C61\u8C03\u7528<code>bar()</code>\u65B9\u6CD5\uFF0C\u800C<code>init()</code>\u65B9\u6CD5\u8BA9<code>A</code>\u5BF9\u8C61\u8C03\u7528<code>foo()</code>\u65B9\u6CD5\u3002</p><ul><li><code>init()</code>\u65B9\u6CD5\u5148\u6267\u884C\uFF0C\u8C03\u7528\u4E86<code>A</code>\u5BF9\u8C61\u7684<code>foo()</code>\u65B9\u6CD5\uFF0C\u8FDB\u5165<code>foo()</code>\u65B9\u6CD5\u4E4B\u524D\uFF0C\u8BE5\u7EBF\u7A0B\u5BF9<code>A</code>\u5BF9\u8C61\u52A0\u9501\u2014\u2014\u5F53\u7A0B\u5E8F\u6267\u884C\u5230 \u2460 \u53F7\u4EE3\u7801\u65F6\uFF0C\u4E3B\u7EBF\u7A0B\u6682\u505C 200ms\uFF1B</li><li>CPU \u5207\u6362\u5230\u6267\u884C\u53E6\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u8BA9<code>B</code>\u5BF9\u8C61\u6267\u884C<code>bar()</code>\u65B9\u6CD5\uFF0C\u8FDB\u5165<code>bar()</code>\u65B9\u6CD5\u4E4B\u524D\uFF0C\u8BE5\u7EBF\u7A0B\u5BF9<code>B</code>\u5BF9\u8C61\u52A0\u9501\u2014\u2014\u5F53\u7A0B\u5E8F\u6267\u884C\u5230 \u2461 \u53F7\u4EE3\u7801\u65F6\uFF0C\u526F\u7EBF\u7A0B\u4E5F\u6682\u505C 200ms\uFF1B</li><li>\u63A5\u4E0B\u6765\u4E3B\u7EBF\u7A0B\u4F1A\u5148\u9192\u8FC7\u6765\uFF0C\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\uFF0C\u76F4\u5230 \u2462 \u53F7\u4EE3\u7801\u5904\u5E0C\u671B\u8C03\u7528<code>B</code>\u5BF9\u8C61\u7684<code>last()</code>\u65B9\u6CD5\u2014\u2014\u6267\u884C\u8BE5\u65B9\u6CD5\u4E4B\u524D\u5FC5\u987B\u5148\u5BF9<code>B</code>\u5BF9\u8C61\u52A0\u9501\uFF0C\u4F46\u6B64\u65F6\u526F\u7EBF\u7A0B\u6B63\u4FDD\u6301\u7740<code>B</code>\u5BF9\u8C61\u7684\u9501\uFF0C\u6240\u4EE5\u4E3B\u7EBF\u7A0B\u963B\u585E\uFF1B</li><li>\u63A5\u4E0B\u6765\u526F\u7EBF\u7A0B\u5E94\u8BE5\u4E5F\u9192\u8FC7\u6765\u4E86\uFF0C\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\uFF0C\u76F4\u5230 \u2463 \u53F7\u4EE3\u7801\u5904\u5E0C\u671B\u8C03\u7528<code>A</code>\u5BF9\u8C61\u7684<code>last()</code>\u65B9\u6CD5\u2014\u2014\u6267\u884C\u8BE5\u65B9\u6CD5\u4E4B\u524D\u5FC5\u987B\u5148\u5BF9<code>A</code>\u5BF9\u8C61\u52A0\u9501\uFF0C\u4F46\u6B64\u65F6\u4E3B\u7EBF\u7A0B\u6CA1\u6709\u91CA\u653E\u5BF9<code>A</code>\u5BF9\u8C61\u7684\u9501\u2014\u2014\u81F3\u6B64\uFF0C\u5C31\u51FA\u73B0\u4E86\u4E3B\u7EBF\u7A0B\u4FDD\u6301\u7740<code>A</code>\u5BF9\u8C61\u7684\u9501\uFF0C\u7B49\u5F85\u5BF9<code>B</code>\u5BF9\u8C61\u52A0\u9501\uFF0C\u800C\u526F\u7EBF\u7A0B\u4FDD\u6301\u7740<code>B</code>\u5BF9\u8C61\u7684\u9501\uFF0C\u7B49\u5F85\u5BF9<code>A</code>\u5BF9\u8C61\u52A0\u9501\uFF0C\u4E24\u4E2A\u7EBF\u7A0B\u4E92\u76F8\u7B49\u5F85\u5BF9\u65B9\u5148\u91CA\u653E\uFF0C\u6240\u4EE5\u5C31\u51FA\u73B0\u4E86\u6B7B\u9501\u3002</li></ul><h2 id="\u7EBF\u7A0B\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u901A\u4FE1" aria-hidden="true">#</a> \u7EBF\u7A0B\u901A\u4FE1</h2><p>\u5F53\u7EBF\u7A0B\u5728\u7CFB\u7EDF\u5185\u8FD0\u884C\u65F6\uFF0C\u7EBF\u7A0B\u7684\u8C03\u5EA6\u5177\u6709\u4E00\u5B9A\u7684\u900F\u660E\u6027\uFF0C\u7A0B\u5E8F\u901A\u5E38\u65E0\u6CD5\u51C6\u786E\u63A7\u5236\u7EBF\u7A0B\u7684\u8F6E\u6362\u6267\u884C\uFF0C\u4F46\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E9B\u673A\u5236\u6765\u4FDD\u8BC1\u7EBF\u7A0B\u534F\u8C03\u8FD0\u884C\u3002</p><h3 id="\u4F20\u7EDF\u7684\u7EBF\u7A0B\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#\u4F20\u7EDF\u7684\u7EBF\u7A0B\u901A\u4FE1" aria-hidden="true">#</a> \u4F20\u7EDF\u7684\u7EBF\u7A0B\u901A\u4FE1</h3><p>\u5047\u8BBE\u73B0\u5728\u7CFB\u7EDF\u4E2D\u6709\u4E24\u4E2A\u7EBF\u7A0B\uFF0C\u8FD9\u4E24\u4E2A\u7EBF\u7A0B\u5206\u522B\u4EE3\u8868\u5B58\u6B3E\u8005\u548C\u53D6\u94B1\u8005\u2014\u2014\u73B0\u5728\u5047\u8BBE\u7CFB\u7EDF\u6709\u4E00\u79CD\u7279\u6B8A\u7684\u8981\u6C42\uFF0C\u7CFB\u7EDF\u8981\u6C42\u5B58\u6B3E\u8005\u548C\u53D6\u94B1\u8005\u4E0D\u65AD\u5730\u91CD\u590D\u5B58\u6B3E\u3001\u53D6\u94B1\u7684\u52A8\u4F5C\uFF0C\u800C\u4E14\u8981\u6C42\u6BCF\u5F53\u5B58\u6B3E\u8005\u5C06\u94B1\u5B58\u5165\u6307\u5B9A\u8D26\u6237\u540E\uFF0C\u53D6\u94B1\u8005\u5C31\u7ACB\u5373\u53D6\u51FA\u8BE5\u7B14\u94B1\u3002\u4E0D\u5141\u8BB8\u5B58\u6B3E\u8005\u8FDE\u7EED\u4E24\u6B21\u5B58\u94B1\uFF0C\u4E5F\u4E0D\u5141\u8BB8\u53D6\u94B1\u8005\u8FDE\u7EED\u4E24\u6B21\u53D6\u94B1\u3002</p><p><code>Object</code>\u7C7B\u7684 3 \u4E2A\u65B9\u6CD5\uFF1A</p><p><code>wait()</code>\uFF1A\u5BFC\u81F4\u5F53\u524D\u7EBF\u7A0B\u7B49\u5F85\uFF0C\u76F4\u5230\u5176\u4ED6\u7EBF\u7A0B\u8C03\u7528\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u7684<code>notify()</code>\u65B9\u6CD5\u6216<code>notifyAll()</code>\u65B9\u6CD5\u6765\u5524\u9192\u8BE5\u7EBF\u7A0B\u3002\u8BE5<code>wait()</code>\u65B9\u6CD5\u6709 3 \u79CD\u5F62\u5F0F\u2014\u2014\u65E0\u65F6\u95F4\u53C2\u6570\u7684<code>wait</code>\uFF08\u4E00\u76F4\u7B49\u5F85\uFF0C\u76F4\u5230\u5176\u4ED6\u7EBF\u7A0B\u901A\u77E5\uFF09\uFF0C\u5E26\u6BEB\u79D2\u53C2\u6570\u7684<code>wait</code>\u548C\u5E26\u6BEB\u79D2\u3001\u6BEB\u5FAE\u79D2\u53C2\u6570\u7684<code>wait</code>\uFF08\u8FD9\u4E24\u79CD\u65B9\u6CD5\u90FD\u662F\u7B49\u5F85\u6307\u5B9A\u65F6\u95F4\u540E\u81EA\u52A8\u82CF\u9192\uFF09\u3002\u8C03\u7528<code>wait()</code>\u65B9\u6CD5\u7684\u5F53\u524D\u7EBF\u7A0B\u4F1A\u91CA\u653E\u5BF9\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u3002</p><p><code>notify()</code>\uFF1A\u5524\u9192\u5728\u6B64\u540C\u6B65\u76D1\u89C6\u5668\u4E0A\u7B49\u5F85\u7684\u5355\u4E2A\u7EBF\u7A0B\u3002\u5982\u679C\u6240\u6709\u7EBF\u7A0B\u90FD\u5728\u6B64\u540C\u6B65\u76D1\u89C6\u5668\u4E0A\u7B49\u5F85\uFF0C\u5219\u4F1A\u9009\u62E9\u5524\u9192\u5176\u4E2D\u4E00\u4E2A\u7EBF\u7A0B\u3002\u9009\u62E9\u662F\u4EFB\u610F\u6027\u7684\u3002\u53EA\u6709\u5F53\u524D\u7EBF\u7A0B\u653E\u5F03\u5BF9\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u540E\uFF08\u4F7F\u7528<code>wait()</code>\u65B9\u6CD5\uFF09\uFF0C\u624D\u53EF\u4EE5\u6267\u884C\u88AB\u5524\u9192\u7684\u7EBF\u7A0B\u3002</p><p><code>notifyAll()</code>\uFF1A\u5524\u9192\u5728\u6B64\u540C\u6B65\u76D1\u89C6\u5668\u4E0A\u7B49\u5F85\u7684\u6240\u6709\u7EBF\u7A0B\u3002\u53EA\u6709\u5F53\u524D\u7EBF\u7A0B\u653E\u5F03\u5BF9\u8BE5\u540C\u6B65\u76D1\u89C6\u5668\u7684\u9501\u5B9A\u540E\uFF0C\u624D\u53EF\u4EE5\u6267\u884C\u88AB\u5524\u9192\u7684\u7EBF\u7A0B\u3002</p><p>\u4F46\u8FD9 3 \u4E2A\u65B9\u6CD5\u5FC5\u987B\u7531\u540C\u6B65\u76D1\u89C6\u5668\u5BF9\u8C61\u6765\u8C03\u7528\uFF0C\u8FD9\u53EF\u5206\u6210\u4EE5\u4E0B\u4E24\u79CD\u60C5\u51B5\u3002</p><ul><li>\u5BF9\u4E8E\u4F7F\u7528<code>synchronized</code>\u4FEE\u9970\u7684\u540C\u6B65\u65B9\u6CD5\uFF0C\u56E0\u4E3A\u8BE5\u7C7B\u7684\u9ED8\u8BA4\u5B9E\u4F8B\uFF08<code>this</code>\uFF09\u5C31\u662F\u540C\u6B65\u76D1\u89C6\u5668\uFF0C\u6240\u4EE5\u53EF\u4EE5\u5728\u540C\u6B65\u65B9\u6CD5\u4E2D\u76F4\u63A5\u8C03\u7528\u8FD9 3 \u4E2A\u65B9\u6CD5\u3002</li><li>\u5BF9\u4E8E\u4F7F\u7528<code>synchronized</code>\u4FEE\u9970\u7684\u540C\u6B65\u4EE3\u7801\u5757\uFF0C\u540C\u6B65\u76D1\u89C6\u5668\u662F<code>synchronized</code>\u540E\u62EC\u53F7\u91CC\u7684\u5BF9\u8C61\uFF0C\u6240\u4EE5\u5FC5\u987B\u4F7F\u7528\u8BE5\u5BF9\u8C61\u8C03\u7528\u8FD9 3 \u4E2A\u65B9\u6CD5\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5C01\u88C5\u8D26\u6237\u7F16\u53F7\u3001\u8D26\u6237\u4F59\u989D\u4E24\u4E2AField</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> accountNo<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>
  <span class="token comment">// \u6807\u8BC6\u8D26\u6237\u4E2D\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">String</span> accountNo<span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accountNo <span class="token operator">=</span> accountNo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u56E0\u4E3A\u8D26\u6237\u4F59\u989D\u4E0D\u5141\u8BB8\u968F\u4FBF\u4FEE\u6539\uFF0C\u6240\u4EE5\u53EA\u4E3Abalance\u63D0\u4F9Bgetter\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679Cflag\u4E3A\u5047\uFF0C\u8868\u660E\u8D26\u6237\u4E2D\u8FD8\u6CA1\u6709\u4EBA\u5B58\u94B1\u8FDB\u53BB\uFF0C\u53D6\u94B1\u65B9\u6CD5\u963B\u585E</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6267\u884C\u53D6\u94B1\u64CD\u4F5C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u53D6\u94B1:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        balance <span class="token operator">-=</span> drawAmount<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D26\u6237\u4F59\u989D\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C06\u6807\u8BC6\u8D26\u6237\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807\u8BBE\u4E3Afalse</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5524\u9192\u5176\u4ED6\u7EBF\u7A0B</span>
        <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> depositAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679Cflag\u4E3A\u771F\uFF0C\u8868\u660E\u8D26\u6237\u4E2D\u5DF2\u6709\u4EBA\u5B58\u94B1\u8FDB\u53BB\uFF0C\u5B58\u94B1\u65B9\u6CD5\u963B\u585E</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>           <span class="token comment">//\u2460</span>
      <span class="token punctuation">{</span>
        <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6267\u884C\u5B58\u6B3E\u64CD\u4F5C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u5B58\u6B3E:&quot;</span> <span class="token operator">+</span> depositAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        balance <span class="token operator">+=</span> depositAmount<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D26\u6237\u4F59\u989D\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C06\u8868\u793A\u8D26\u6237\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807\u8BBE\u4E3Atrue</span>
        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5524\u9192\u5176\u4ED6\u7EBF\u7A0B</span>
        <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\u6839\u636EaccountNo\u6765\u91CD\u5199hashCode()\u548Cequals()\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accountNo<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Account</span> target <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">getAccountNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>accountNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7A0B\u5E8F\u4E2D\u7684\u5B58\u6B3E\u8005\u7EBF\u7A0B\u5FAA\u73AF 100 \u6B21\u91CD\u590D\u5B58\u6B3E\uFF0C\u800C\u53D6\u94B1\u8005\u7EBF\u7A0B\u5219\u5FAA\u73AF 100 \u6B21\u91CD\u590D\u53D6\u94B1\uFF0C\u5B58\u6B3E\u8005\u7EBF\u7A0B\u548C\u53D6\u94B1\u8005\u7EBF\u7A0B\u5206\u522B\u8C03\u7528<code>Account</code>\u5BF9\u8C61\u7684<code>deposit()</code>\u3001<code>draw()</code>\u65B9\u6CD5\u6765\u5B9E\u73B0\u3002</p><p>\u53D6\u94B1\u8D26\u6237\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DrawThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6A21\u62DF\u7528\u6237\u8D26\u6237</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>
  <span class="token comment">// \u5F53\u524D\u53D6\u94B1\u7EBF\u7A0B\u6240\u5E0C\u671B\u53D6\u7684\u94B1\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>drawAmount <span class="token operator">=</span> drawAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u91CD\u590D100\u6B21\u6267\u884C\u53D6\u94B1\u64CD\u4F5C</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      account<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B58\u94B1\u8D26\u6237\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DepositThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6A21\u62DF\u7528\u6237\u8D26\u6237</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>
  <span class="token comment">// \u5F53\u524D\u5B58\u6B3E\u7EBF\u7A0B\u6240\u5E0C\u671B\u5B58\u7684\u94B1\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> depositAmount<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">DepositThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> depositAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>depositAmount <span class="token operator">=</span> depositAmount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u91CD\u590D100\u6B21\u6267\u884C\u5B58\u6B3E\u64CD\u4F5C</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      account<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span>depositAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3B\u7A0B\u5E8F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DrawTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u8D26\u6237</span>
    <span class="token class-name">Account</span> acct <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token string">&quot;1234567&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DrawThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u53D6\u94B1\u8005&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DepositThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B58\u6B3E\u8005\u7532&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DepositThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B58\u6B3E\u8005\u4E59&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">DepositThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B58\u6B3E\u8005\u4E19&quot;</span><span class="token punctuation">,</span> acct<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u8BE5\u7A0B\u5E8F\uFF0C\u4F1A\u770B\u5230\u5982\u56FE\u6240\u793A\u7684\u7ED3\u679C\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208202048023.png" alt="image-20220820204844705"></p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u963B\u585E\u5E76\u4E0D\u662F\u6B7B\u9501\uFF0C\u5BF9\u4E8E\u8FD9\u79CD\u60C5\u51B5\uFF0C\u53D6\u94B1\u8005\u7EBF\u7A0B\u5DF2\u7ECF\u6267\u884C\u7ED3\u675F\uFF0C\u800C\u5B58\u6B3E\u8005\u7EBF\u7A0B\u53EA\u662F\u5728\u7B49\u5F85\u5176\u4ED6\u7EBF\u7A0B\u6765\u53D6\u94B1\u800C\u5DF2\uFF0C\u5E76\u4E0D\u662F\u7B49\u5F85\u5176\u4ED6\u7EBF\u7A0B\u91CA\u653E\u540C\u6B65\u76D1\u89C6\u5668\u3002</p></div><h3 id="\u4F7F\u7528-condition-\u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-condition-\u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1" aria-hidden="true">#</a> \u4F7F\u7528 Condition \u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1</h3><p>\u5F53\u4F7F\u7528<code>Lock</code>\u5BF9\u8C61\u6765\u4FDD\u8BC1\u540C\u6B65\u65F6\uFF0CJava \u63D0\u4F9B\u4E86\u4E00\u4E2A<code>Condition</code>\u7C7B\u6765\u4FDD\u6301\u534F\u8C03\uFF0C\u4F7F\u7528<code>Condition</code>\u53EF\u4EE5\u8BA9\u90A3\u4E9B\u5DF2\u7ECF\u5F97\u5230 Lock \u5BF9\u8C61\u5374\u65E0\u6CD5\u7EE7\u7EED\u6267\u884C\u7684\u7EBF\u7A0B\u91CA\u653E<code>Lock</code>\u5BF9\u8C61\uFF0C<code>Condition</code>\u5BF9\u8C61\u4E5F\u53EF\u4EE5\u5524\u9192\u5176\u4ED6\u5904\u4E8E\u7B49\u5F85\u7684\u7EBF\u7A0B\u3002</p><p><code>Condition</code>\u5B9E\u4F8B\u88AB\u7ED1\u5B9A\u5728\u4E00\u4E2A<code>Lock</code>\u5BF9\u8C61\u4E0A\u3002\u8981\u83B7\u5F97\u7279\u5B9A<code>Lock</code>\u5B9E\u4F8B\u7684<code>Condition</code>\u5B9E\u4F8B\uFF0C\u8C03\u7528<code>Lock</code>\u5BF9\u8C61\u7684<code>newCondition()</code>\u65B9\u6CD5\u5373\u53EF\u3002<code>Condition</code>\u7C7B\u63D0\u4F9B\u4E86\u5982\u4E0B 3 \u4E2A\u65B9\u6CD5\u3002</p><ul><li><code>await()</code>\uFF1A\u7C7B\u4F3C\u4E8E\u9690\u5F0F\u540C\u6B65\u76D1\u89C6\u5668\u4E0A\u7684<code>wait()</code>\u65B9\u6CD5\uFF0C\u5BFC\u81F4\u5F53\u524D\u7EBF\u7A0B\u7B49\u5F85\uFF0C\u76F4\u5230\u5176\u4ED6\u7EBF\u7A0B\u8C03\u7528\u8BE5<code>Condition\u7684signal()</code>\u65B9\u6CD5\u6216<code>signalAll()</code>\u65B9\u6CD5\u6765\u5524\u9192\u8BE5\u7EBF\u7A0B\u3002\u8BE5<code>await()</code>\u65B9\u6CD5\u6709\u66F4\u591A\u53D8\u4F53\uFF0C\u5982<code>long awaitNanos(long nanosTimeout)</code>\u3001<code>void awaitUninterruptibly()</code>\u3001<code>awaitUntil(Date deadline)</code>\u7B49\uFF0C\u53EF\u4EE5\u5B8C\u6210\u66F4\u4E30\u5BCC\u7684\u7B49\u5F85\u64CD\u4F5C\u3002</li><li><code>signal()</code>\uFF1A\u5524\u9192\u5728\u6B64 Lock \u5BF9\u8C61\u4E0A\u7B49\u5F85\u7684\u5355\u4E2A\u7EBF\u7A0B\u3002\u5982\u679C\u6240\u6709\u7EBF\u7A0B\u90FD\u5728\u8BE5<code>Lock</code>\u5BF9\u8C61\u4E0A\u7B49\u5F85\uFF0C\u5219\u4F1A\u9009\u62E9\u5524\u9192\u5176\u4E2D\u4E00\u4E2A\u7EBF\u7A0B\u3002\u9009\u62E9\u662F\u4EFB\u610F\u6027\u7684\u3002\u53EA\u6709\u5F53\u524D\u7EBF\u7A0B\u653E\u5F03\u5BF9\u8BE5<code>Lock</code>\u5BF9\u8C61\u7684\u9501\u5B9A\u540E\uFF08\u4F7F\u7528<code>await()</code>\u65B9\u6CD5\uFF09\uFF0C\u624D\u53EF\u4EE5\u6267\u884C\u88AB\u5524\u9192\u7684\u7EBF\u7A0B\u3002</li><li><code>signalAll()</code>\uFF1A\u5524\u9192\u5728\u6B64 Lock \u5BF9\u8C61\u4E0A\u7B49\u5F85\u7684\u6240\u6709\u7EBF\u7A0B\u3002\u53EA\u6709\u5F53\u524D\u7EBF\u7A0B\u653E\u5F03\u5BF9\u8BE5<code>Lock</code>\u5BF9\u8C61\u7684\u9501\u5B9A\u540E\uFF0C\u624D\u53EF\u4EE5\u6267\u884C\u88AB\u5524\u9192\u7684\u7EBF\u7A0B\u3002</li></ul><p>\u4FEE\u6539<code>Account</code>\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u663E\u5F0F\u5B9A\u4E49Lock\u5BF9\u8C61</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u83B7\u5F97\u6307\u5B9ALock\u5BF9\u8C61\u5BF9\u5E94\u7684Condition</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Condition</span> cond <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5C01\u88C5\u8D26\u6237\u7F16\u53F7\u3001\u8D26\u6237\u4F59\u989D\u4E24\u4E2AField</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> accountNo<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>
  <span class="token comment">// \u6807\u8BC6\u8D26\u6237\u4E2D\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token class-name">String</span> accountNo<span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>accountNo <span class="token operator">=</span> accountNo<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>balance <span class="token operator">=</span> balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u56E0\u4E3A\u8D26\u6237\u4F59\u989D\u4E0D\u5141\u8BB8\u968F\u4FBF\u4FEE\u6539\uFF0C\u6240\u4EE5\u53EA\u4E3Abalance\u63D0\u4F9Bgetter\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">double</span> drawAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u52A0\u9501</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679Cflag\u4E3A\u5047\uFF0C\u8868\u660E\u8D26\u6237\u4E2D\u8FD8\u6CA1\u6709\u4EBA\u5B58\u94B1\u8FDB\u53BB\uFF0C\u53D6\u94B1\u65B9\u6CD5\u963B\u585E</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cond<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6267\u884C\u53D6\u94B1\u64CD\u4F5C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u53D6\u94B1:&quot;</span> <span class="token operator">+</span> drawAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        balance <span class="token operator">-=</span> drawAmount<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D26\u6237\u4F59\u989D\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C06\u6807\u8BC6\u8D26\u6237\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807\u8BBE\u4E3Afalse</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5524\u9192\u5176\u4ED6\u7EBF\u7A0B</span>
        cond<span class="token punctuation">.</span><span class="token function">signalAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4F7F\u7528finally\u5757\u6765\u91CA\u653E\u9501</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> depositAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5982\u679Cflag\u4E3A\u771F\uFF0C\u8868\u660E\u8D26\u6237\u4E2D\u5DF2\u6709\u4EBA\u5B58\u94B1\u8FDB\u53BB\uFF0C\u5B58\u94B1\u65B9\u6CD5\u963B\u585E</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>           <span class="token comment">//\u2460</span>
      <span class="token punctuation">{</span>
        cond<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6267\u884C\u5B58\u6B3E\u64CD\u4F5C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u5B58\u6B3E:&quot;</span> <span class="token operator">+</span> depositAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        balance <span class="token operator">+=</span> depositAmount<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D26\u6237\u4F59\u989D\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C06\u8868\u793A\u8D26\u6237\u662F\u5426\u5DF2\u6709\u5B58\u6B3E\u7684\u65D7\u6807\u8BBE\u4E3Atrue</span>
        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5524\u9192\u5176\u4ED6\u7EBF\u7A0B</span>
        cond<span class="token punctuation">.</span><span class="token function">signalAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u4F7F\u7528finally\u5757\u6765\u91CA\u653E\u9501</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// \u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\u6839\u636EaccountNo\u6765\u91CD\u5199hashCode()\u548Cequals()\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accountNo<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Account</span> target <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>
      <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">getAccountNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>accountNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u8BE5\u7A0B\u5E8F\u7684\u6548\u679C\u4E0E\u524D\u4E00\u4E2A\u793A\u4F8B\u7A0B\u5E8F\u7684\u8FD0\u884C\u6548\u679C\u5B8C\u5168\u4E00\u6837\u3002</p><p><code>Condition</code>\u5C06\u540C\u6B65\u76D1\u89C6\u5668\u65B9\u6CD5\uFF08<code>wait()</code>\u3001<code>notify()</code>\u548C<code>notifyAll()</code>\uFF09\u5206\u89E3\u6210\u622A\u7136\u4E0D\u540C\u7684\u5BF9\u8C61\uFF0C\u4EE5\u4FBF\u901A\u8FC7\u5C06\u8FD9\u4E9B\u5BF9\u8C61\u4E0E<code>Lock</code>\u5BF9\u8C61\u7EC4\u5408\u4F7F\u7528\uFF0C\u4E3A\u6BCF\u4E2A\u5BF9\u8C61\u63D0\u4F9B\u591A\u4E2A\u7B49\u5F85\u96C6\uFF08<code>wait-set</code>\uFF09\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C<code>Lock</code>\u66FF\u4EE3\u4E86\u540C\u6B65\u65B9\u6CD5\u6216\u540C\u6B65\u4EE3\u7801\u5757\uFF0C<code>Condition</code>\u66FF\u4EE3\u4E86\u540C\u6B65\u76D1\u89C6\u5668\u7684\u529F\u80FD\u3002</p><h3 id="\u4F7F\u7528\u963B\u585E\u961F\u5217-blockingqueue-\u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u963B\u585E\u961F\u5217-blockingqueue-\u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1" aria-hidden="true">#</a> \u4F7F\u7528\u963B\u585E\u961F\u5217\uFF08<code>BlockingQueue</code>\uFF09\u63A7\u5236\u7EBF\u7A0B\u901A\u4FE1</h3><p>Java 5 \u63D0\u4F9B\u4E86\u4E00\u4E2A<code>BlockingQueue</code>\u63A5\u53E3\uFF0C\u867D\u7136<code>BlockingQueue</code>\u4E5F\u662F<code>Queue</code>\u7684\u5B50\u63A5\u53E3\uFF0C\u4F46\u5B83\u7684\u4E3B\u8981\u7528\u9014\u5E76\u4E0D\u662F\u4F5C\u4E3A\u5BB9\u5668\uFF0C\u800C\u662F\u4F5C\u4E3A\u7EBF\u7A0B\u540C\u6B65\u7684\u5DE5\u5177\u3002</p><p><code>BlockingQueue</code>\u5177\u6709\u4E00\u4E2A\u7279\u5F81\uFF1A\u5F53\u751F\u4EA7\u8005\u7EBF\u7A0B\u8BD5\u56FE\u5411<code>BlockingQueue</code>\u4E2D\u653E\u5165\u5143\u7D20\u65F6\uFF0C\u5982\u679C\u8BE5\u961F\u5217\u5DF2\u6EE1\uFF0C\u5219\u8BE5\u7EBF\u7A0B\u88AB\u963B\u585E\uFF1B\u5F53\u6D88\u8D39\u8005\u7EBF\u7A0B\u8BD5\u56FE\u4ECE<code>BlockingQueue</code>\u4E2D\u53D6\u51FA\u5143\u7D20\u65F6\uFF0C\u5982\u679C\u8BE5\u961F\u5217\u5DF2\u7A7A\uFF0C\u5219\u8BE5\u7EBF\u7A0B\u88AB\u963B\u585E\u3002</p><p><code>BlockingQueue</code>\u63D0\u4F9B\u5982\u4E0B\u4E24\u4E2A\u652F\u6301\u963B\u585E\u7684\u65B9\u6CD5\u3002</p><ul><li><code>put(E e)</code>\uFF1A\u5C1D\u8BD5\u628A<code>E</code>\u5143\u7D20\u653E\u5165<code>BlockingQueue</code>\u4E2D\uFF0C\u5982\u679C\u8BE5\u961F\u5217\u7684\u5143\u7D20\u5DF2\u6EE1\uFF0C\u5219\u963B\u585E\u8BE5\u7EBF\u7A0B\u3002</li><li><code>take()</code>\uFF1A\u5C1D\u8BD5\u4ECE<code>BlockingQueue</code>\u7684\u5934\u90E8\u53D6\u51FA\u5143\u7D20\uFF0C\u5982\u679C\u8BE5\u961F\u5217\u7684\u5143\u7D20\u5DF2\u7A7A\uFF0C\u5219\u963B\u585E\u8BE5\u7EBF\u7A0B\u3002</li></ul><p><code>BlockingQueue</code>\u7EE7\u627F\u4E86<code>Queue</code>\u63A5\u53E3\uFF0C\u53EF\u4F7F\u7528<code>Queue</code>\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u3002\u8FD9\u4E9B\u65B9\u6CD5\u5F52\u7EB3\u8D77\u6765\u53EF\u5206\u4E3A\u5982\u4E0B 3 \u7EC4\u3002</p><ul><li>\u5728\u961F\u5217\u5C3E\u90E8\u63D2\u5165\u5143\u7D20\u3002\u5305\u62EC<code>add(E e)</code>\u3001<code>offer(E e)</code>\u548C<code>put(E e)</code>\u65B9\u6CD5\uFF0C\u5F53\u8BE5\u961F\u5217\u5DF2\u6EE1\u65F6\uFF0C\u8FD9 3 \u4E2A\u65B9\u6CD5\u5206\u522B\u4F1A\u629B\u51FA\u5F02\u5E38\u3001\u8FD4\u56DE<code>false</code>\u3001\u963B\u585E\u961F\u5217\u3002</li><li>\u5728\u961F\u5217\u5934\u90E8\u5220\u9664\u5E76\u8FD4\u56DE\u5220\u9664\u7684\u5143\u7D20\u3002\u5305\u62EC<code>remove()</code>\u3001<code>poll()</code>\u548C<code>take()</code>\u65B9\u6CD5\u3002\u5F53\u8BE5\u961F\u5217\u5DF2\u7A7A\u65F6\uFF0C\u8FD9 3 \u4E2A\u65B9\u6CD5\u5206\u522B\u4F1A\u629B\u51FA\u5F02\u5E38\u3001\u8FD4\u56DE<code>false</code>\u3001\u963B\u585E\u961F\u5217\u3002</li><li>\u5728\u961F\u5217\u5934\u90E8\u53D6\u51FA\u4F46\u4E0D\u5220\u9664\u5143\u7D20\u3002\u5305\u62EC<code>element()</code>\u548C<code>peek()</code>\u65B9\u6CD5\uFF0C\u5F53\u961F\u5217\u5DF2\u7A7A\u65F6\uFF0C\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u5206\u522B\u629B\u51FA\u5F02\u5E38\u3001\u8FD4\u56DE<code>false</code>\u3002</li></ul><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208202104417.jpeg" alt="epub_681336_2209"></p><p><code>BlockingQueue</code>\u4E0E\u5176\u5B9E\u73B0\u7C7B\uFF1A</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208202102081.jpeg" alt="epub_681336_2207"></p><p>\u4EE5\u9ED1\u8272\u65B9\u6846\u6846\u51FA\u7684\u90FD\u662F Java 7 \u65B0\u589E\u7684\u963B\u585E\u961F\u5217\u3002</p><p><code>BlockingQueue</code>\u5305\u542B\u7684 5 \u4E2A\u5B9E\u73B0\u7C7B\u3002</p><ul><li><p><code>ArrayBlockingQueue</code>\uFF1A\u57FA\u4E8E\u6570\u7EC4\u5B9E\u73B0\u7684<code>BlockingQueue</code>\u961F\u5217\u3002</p></li><li><p><code>LinkedBlockingQueue</code>\uFF1A\u57FA\u4E8E\u94FE\u8868\u5B9E\u73B0\u7684<code>BlockingQueue</code>\u961F\u5217\u3002</p></li><li><p><code>PriorityBlockingQueue</code>\uFF1A\u5B83\u5E76\u4E0D\u662F\u6807\u51C6\u7684\u963B\u585E\u961F\u5217\u3002</p><p>\u4E0E<code>PriorityQueue</code>\u7C7B\u4F3C\uFF0C\u8BE5\u961F\u5217\u8C03\u7528<code>remove()</code>\u3001<code>poll()</code>\u3001<code>take()</code>\u7B49\u65B9\u6CD5\u53D6\u51FA\u5143\u7D20\u65F6\uFF0C\u5E76\u4E0D\u662F\u53D6\u51FA\u961F\u5217\u4E2D\u5B58\u5728\u65F6\u95F4\u6700\u957F\u7684\u5143\u7D20\uFF0C\u800C\u662F\u961F\u5217\u4E2D\u6700\u5C0F\u7684\u5143\u7D20\u3002</p><p><code>PriorityBlockingQueue</code>\u5224\u65AD\u5143\u7D20\u7684\u5927\u5C0F\u5373\u53EF\u6839\u636E\u5143\u7D20\uFF08\u5B9E\u73B0<code>Comparable</code>\u63A5\u53E3\uFF09\u7684\u672C\u8EAB\u5927\u5C0F\u6765\u81EA\u7136\u6392\u5E8F\uFF0C\u4E5F\u53EF\u4F7F\u7528<code>Comparator</code>\u8FDB\u884C\u5B9A\u5236\u6392\u5E8F\u3002</p></li><li><p><code>SynchronousQueue</code>\uFF1A\u540C\u6B65\u961F\u5217\u3002\u5BF9\u8BE5\u961F\u5217\u7684\u5B58\u3001\u53D6\u64CD\u4F5C\u5FC5\u987B\u4EA4\u66FF\u8FDB\u884C\u3002</p></li><li><p><code>DelayQueue</code>\uFF1A\u5B83\u662F\u4E00\u4E2A\u7279\u6B8A\u7684<code>BlockingQueue</code>\uFF0C\u5E95\u5C42\u57FA\u4E8E<code>PriorityBlockingQueue</code>\u5B9E\u73B0\u3002</p><p>\u4E0D\u8FC7\uFF0C <code>DelayQueue</code>\u8981\u6C42\u96C6\u5408\u5143\u7D20\u90FD\u5B9E\u73B0<code>Delay</code>\u63A5\u53E3\uFF08\u8BE5\u63A5\u53E3\u91CC\u53EA\u6709\u4E00\u4E2A<code>long getDelay()</code>\u65B9\u6CD5\uFF09\uFF0C <code>DelayQueue</code>\u6839\u636E\u96C6\u5408\u5143\u7D20\u7684<code>getDalay()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u8FDB\u884C\u6392\u5E8F\u3002</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlockingQueueTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u957F\u5EA6\u4E3A2\u7684\u963B\u585E\u961F\u5217</span>
    <span class="token class-name">BlockingQueue</span> bq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4E0Ebq.add(&quot;Java&quot;\u3001bq.offer(&quot;Java&quot;)\u76F8\u540C</span>
    bq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u4E0Ebq.add(&quot;Java&quot;\u3001bq.offer(&quot;Java&quot;)\u76F8\u540C</span>
    bq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u2460 \u963B\u585E\u7EBF\u7A0B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5229\u7528<code>BlockingQueue</code>\u6765\u5B9E\u73B0\u7EBF\u7A0B\u901A\u4FE1\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bq<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span><span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bq <span class="token operator">=</span> bq<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Struts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Spring&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">999999999</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u751F\u4EA7\u8005\u51C6\u5907\u751F\u4EA7\u96C6\u5408\u5143\u7D20\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C1D\u8BD5\u653E\u5165\u5143\u7D20\uFF0C\u5982\u679C\u961F\u5217\u5DF2\u6EE1\uFF0C\u5219\u7EBF\u7A0B\u88AB\u963B\u585E</span>
        bq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>strArr<span class="token punctuation">[</span>i <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u751F\u4EA7\u5B8C\u6210\uFF1A&quot;</span> <span class="token operator">+</span> bq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bq<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span><span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bq <span class="token operator">=</span> bq<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u6D88\u8D39\u8005\u51C6\u5907\u6D88\u8D39\u96C6\u5408\u5143\u7D20\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5C1D\u8BD5\u53D6\u51FA\u5143\u7D20\uFF0C\u5982\u679C\u961F\u5217\u5DF2\u7A7A\uFF0C\u5219\u7EBF\u7A0B\u88AB\u963B\u585E</span>
        bq<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\u6D88\u8D39\u5B8C\u6210\uFF1A&quot;</span> <span class="token operator">+</span> bq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlockingQueueTest2</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u5BB9\u91CF\u4E3A1\u7684BlockingQueue</span>
    <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> bq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u542F\u52A83\u4E2A\u751F\u4EA7\u8005\u7EBF\u7A0B</span>
    <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>bq<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>bq<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Producer</span><span class="token punctuation">(</span>bq<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u542F\u52A8\u4E00\u4E2A\u6D88\u8D39\u8005\u7EBF\u7A0B</span>
    <span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token punctuation">(</span>bq<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7EBF\u7A0B\u7EC4\u548C\u672A\u5904\u7406\u7684\u5F02\u5E38" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u7EC4\u548C\u672A\u5904\u7406\u7684\u5F02\u5E38" aria-hidden="true">#</a> \u7EBF\u7A0B\u7EC4\u548C\u672A\u5904\u7406\u7684\u5F02\u5E38</h2><p>Java \u4F7F\u7528<code>ThreadGroup</code>\u6765\u8868\u793A\u7EBF\u7A0B\u7EC4\uFF0C\u5B83\u53EF\u4EE5\u5BF9\u4E00\u6279\u7EBF\u7A0B\u8FDB\u884C\u5206\u7C7B\u7BA1\u7406\uFF0CJava \u5141\u8BB8\u7A0B\u5E8F\u76F4\u63A5\u5BF9\u7EBF\u7A0B\u7EC4\u8FDB\u884C\u63A7\u5236\u3002</p><p>\u5BF9\u7EBF\u7A0B\u7EC4\u7684\u63A7\u5236\u76F8\u5F53\u4E8E\u540C\u65F6\u63A7\u5236\u8FD9\u6279\u7EBF\u7A0B\u3002\u7528\u6237\u521B\u5EFA\u7684\u6240\u6709\u7EBF\u7A0B\u90FD\u5C5E\u4E8E\u6307\u5B9A\u7EBF\u7A0B\u7EC4\uFF0C\u5982\u679C\u7A0B\u5E8F\u6CA1\u6709\u663E\u5F0F\u6307\u5B9A\u7EBF\u7A0B\u5C5E\u4E8E\u54EA\u4E2A\u7EBF\u7A0B\u7EC4\uFF0C\u5219\u8BE5\u7EBF\u7A0B\u5C5E\u4E8E\u9ED8\u8BA4\u7EBF\u7A0B\u7EC4\u3002</p><p>\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B50\u7EBF\u7A0B\u548C\u521B\u5EFA\u5B83\u7684\u7236\u7EBF\u7A0B\u5904\u4E8E\u540C\u4E00\u4E2A\u7EBF\u7A0B\u7EC4\u5185\uFF0C\u4F8B\u5982 A \u7EBF\u7A0B\u521B\u5EFA\u4E86 B \u7EBF\u7A0B\uFF0C\u5E76\u4E14\u6CA1\u6709\u6307\u5B9A B \u7EBF\u7A0B\u7684\u7EBF\u7A0B\u7EC4\uFF0C\u5219 B \u7EBF\u7A0B\u5C5E\u4E8E A \u7EBF\u7A0B\u6240\u5728\u7684\u7EBF\u7A0B\u7EC4\u3002</p><p>\u4E00\u65E6\u67D0\u4E2A\u7EBF\u7A0B\u52A0\u5165\u4E86\u6307\u5B9A\u7EBF\u7A0B\u7EC4\u4E4B\u540E\uFF0C\u8BE5\u7EBF\u7A0B\u5C06\u4E00\u76F4\u5C5E\u4E8E\u8BE5\u7EBF\u7A0B\u7EC4\uFF0C\u76F4\u5230\u8BE5\u7EBF\u7A0B\u6B7B\u4EA1\uFF0C\u7EBF\u7A0B\u8FD0\u884C\u4E2D\u9014\u4E0D\u80FD\u6539\u53D8\u5B83\u6240\u5C5E\u7684\u7EBF\u7A0B\u7EC4\u3002</p><p><code>Thread</code>\u7C7B\u63D0\u4F9B\u4E86\u5982\u4E0B\u51E0\u4E2A\u6784\u9020\u5668\u6765\u8BBE\u7F6E\u65B0\u521B\u5EFA\u7684\u7EBF\u7A0B\u5C5E\u4E8E\u54EA\u4E2A\u7EBF\u7A0B\u7EC4\u3002</p><ul><li><code>Thread(ThreadGroup group, Runnable target)</code>\uFF1A\u4EE5<code>target</code>\u7684<code>run()</code>\u65B9\u6CD5\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\u521B\u5EFA\u65B0\u7EBF\u7A0B\uFF0C\u5C5E\u4E8E<code>group</code>\u7EBF\u7A0B\u7EC4\u3002</li><li><code>Thread(ThreadGroup group, Runnable target, String name)</code>\uFF1A\u4EE5<code>target</code>\u7684<code>run()</code>\u65B9\u6CD5\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4F53\u521B\u5EFA\u65B0\u7EBF\u7A0B\uFF0C\u8BE5\u7EBF\u7A0B\u5C5E\u4E8E<code>group</code>\u7EBF\u7A0B\u7EC4\uFF0C\u4E14\u7EBF\u7A0B\u540D\u4E3A<code>name</code>\u3002</li><li><code>Thread(ThreadGroup group, String name)</code>\uFF1A\u521B\u5EFA\u65B0\u7EBF\u7A0B\uFF0C\u65B0\u7EBF\u7A0B\u540D\u4E3A<code>name</code>\uFF0C\u5C5E\u4E8E<code>group</code>\u7EBF\u7A0B\u7EC4\u3002</li></ul><p><code>Thread</code>\u7C7B\u6CA1\u6709\u63D0\u4F9B\u4E86\u4E00\u4E2A<code>getThreadGroup()</code>\u65B9\u6CD5\u6765\u8FD4\u56DE\u8BE5\u7EBF\u7A0B\u6240\u5C5E\u7684\u7EBF\u7A0B\u7EC4\uFF0C<code>getThreadGroup()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u662F<code>ThreadGroup</code>\u5BF9\u8C61\uFF0C\u8868\u793A\u4E00\u4E2A\u7EBF\u7A0B\u7EC4\u3002<code>ThreadGroup</code>\u7C7B\u63D0\u4F9B\u4E86\u5982\u4E0B\u4E24\u4E2A\u7B80\u5355\u7684\u6784\u9020\u5668\u6765\u521B\u5EFA\u5B9E\u4F8B\u3002</p><ul><li><code>ThreadGroup(String name)</code>\uFF1A\u4EE5\u6307\u5B9A\u7684\u7EBF\u7A0B\u7EC4\u540D\u5B57\u6765\u521B\u5EFA\u65B0\u7684\u7EBF\u7A0B\u7EC4\u3002</li><li><code>ThreadGroup(ThreadGroup parent, String name)</code>\uFF1A\u4EE5\u6307\u5B9A\u7684\u540D\u5B57\u3001\u6307\u5B9A\u7684\u7236\u7EBF\u7A0B\u7EC4\u521B\u5EFA\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u7EC4\u3002</li></ul><p>\u7EBF\u7A0B\u7EC4\u901A\u8FC7\u8C03\u7528<code>ThreadGroup</code>\u7684<code>getName()</code>\u65B9\u6CD5\u6765\u83B7\u53D6\u540D\u5B57\uFF0C\u4F46\u4E0D\u5141\u8BB8\u6539\u53D8\u7EBF\u7A0B\u7EC4\u7684\u540D\u5B57\u3002</p><p><code>ThreadGroup</code>\u7C7B\u63D0\u4F9B\u4E86\u5982\u4E0B\u51E0\u4E2A\u5E38\u7528\u7684\u65B9\u6CD5\u6765\u64CD\u4F5C\u6574\u4E2A\u7EBF\u7A0B\u7EC4\u91CC\u7684\u6240\u6709\u7EBF\u7A0B\u3002</p><ul><li><p><code>int activeCount()</code>\uFF1A\u8FD4\u56DE\u6B64\u7EBF\u7A0B\u7EC4\u4E2D\u6D3B\u52A8\u7EBF\u7A0B\u7684\u6570\u76EE\u3002</p></li><li><p><code>interrupt()</code>\uFF1A\u4E2D\u65AD\u6B64\u7EBF\u7A0B\u7EC4\u4E2D\u7684\u6240\u6709\u7EBF\u7A0B\u3002</p></li><li><p><code>isDaemon()</code>\uFF1A\u5224\u65AD\u8BE5\u7EBF\u7A0B\u7EC4\u662F\u5426\u662F\u540E\u53F0\u7EBF\u7A0B\u7EC4\u3002</p></li><li><p><code>setDaemon(boolean daemon)</code>\uFF1A\u628A\u8BE5\u7EBF\u7A0B\u7EC4\u8BBE\u7F6E\u6210\u540E\u53F0\u7EBF\u7A0B\u7EC4\u3002</p><p>\u540E\u53F0\u7EBF\u7A0B\u7EC4\u5177\u6709\u4E00\u4E2A\u7279\u5F81\u2014\u2014\u5F53\u540E\u53F0\u7EBF\u7A0B\u7EC4\u7684\u6700\u540E\u4E00\u4E2A\u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u6216\u6700\u540E\u4E00\u4E2A\u7EBF\u7A0B\u88AB\u9500\u6BC1\u540E\uFF0C\u540E\u53F0\u7EBF\u7A0B\u7EC4\u5C06\u81EA\u52A8\u9500\u6BC1\u3002</p></li><li><p><code>setMaxPriority(int pri)</code>\uFF1A\u8BBE\u7F6E\u7EBF\u7A0B\u7EC4\u7684\u6700\u9AD8\u4F18\u5148\u7EA7\u3002</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u63D0\u4F9B\u6307\u5B9A\u7EBF\u7A0B\u540D\u7684\u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u63D0\u4F9B\u6307\u5B9A\u7EBF\u7A0B\u540D\u3001\u7EBF\u7A0B\u7EC4\u7684\u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token class-name">ThreadGroup</span> group<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; \u7EBF\u7A0B\u7684i\u53D8\u91CF&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadGroupTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u83B7\u53D6\u4E3B\u7EBF\u7A0B\u6240\u5728\u7684\u7EBF\u7A0B\u7EC4\uFF0C\u8FD9\u662F\u6240\u6709\u7EBF\u7A0B\u9ED8\u8BA4\u7684\u7EBF\u7A0B\u7EC4</span>
    <span class="token class-name">ThreadGroup</span> mainGroup <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getThreadGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B\u7EC4\u7684\u540D\u5B57\uFF1A&quot;</span>
        <span class="token operator">+</span> mainGroup<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B\u7EC4\u662F\u5426\u662F\u540E\u53F0\u7EBF\u7A0B\u7EC4\uFF1A&quot;</span>
        <span class="token operator">+</span> mainGroup<span class="token punctuation">.</span><span class="token function">isDaemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E3B\u7EBF\u7A0B\u7EC4\u7684\u7EBF\u7A0B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ThreadGroup</span> tg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadGroup</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B0\u7EBF\u7A0B\u7EC4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tg<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;tg\u7EBF\u7A0B\u7EC4\u662F\u5426\u662F\u540E\u53F0\u7EBF\u7A0B\u7EC4\uFF1A&quot;</span>
        <span class="token operator">+</span> tg<span class="token punctuation">.</span><span class="token function">isDaemon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MyThread</span> tt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>tg<span class="token punctuation">,</span> <span class="token string">&quot;tg\u7EC4\u7684\u7EBF\u7A0B\u7532&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tt<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span>tg<span class="token punctuation">,</span> <span class="token string">&quot;tg\u7EC4\u7684\u7EBF\u7A0B\u4E59&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4ECE Java 5 \u5F00\u59CB\uFF0CJava \u52A0\u5F3A\u4E86\u7EBF\u7A0B\u7684\u5F02\u5E38\u5904\u7406\uFF0C\u5982\u679C\u7EBF\u7A0B\u6267\u884C\u8FC7\u7A0B\u4E2D\u629B\u51FA\u4E86\u4E00\u4E2A\u672A\u5904\u7406\u5F02\u5E38\uFF0CJVM \u5728\u7ED3\u675F\u8BE5\u7EBF\u7A0B\u4E4B\u524D\u4F1A\u81EA\u52A8\u67E5\u627E\u662F\u5426\u6709\u5BF9\u5E94\u7684<code>Thread.UncaughtExceptionHandler</code>\u5BF9\u8C61\uFF0C\u5982\u679C\u627E\u5230\u8BE5\u5904\u7406\u5668\u5BF9\u8C61\uFF0C\u5219\u4F1A\u8C03\u7528\u8BE5\u5BF9\u8C61\u7684<code>uncaughtException(Thread t, Throwable e)</code>\u65B9\u6CD5\u6765\u5904\u7406\u8BE5\u5F02\u5E38\u3002</p><p><code>Thread.UncaughtExceptionHandler</code>\u662F<code>Thread</code>\u7C7B\u7684\u4E00\u4E2A\u9759\u6001\u5185\u90E8\u63A5\u53E3\uFF0C\u8BE5\u63A5\u53E3\u5185\u53EA\u6709\u4E00\u4E2A\u65B9\u6CD5\uFF1A<code>void uncaughtException(Thread t, Throwable e)</code>\uFF0C\u8BE5\u65B9\u6CD5\u4E2D\u7684<code>t</code>\u4EE3\u8868\u51FA\u73B0\u5F02\u5E38\u7684\u7EBF\u7A0B\uFF0C\u800C<code>e</code>\u4EE3\u8868\u8BE5\u7EBF\u7A0B\u629B\u51FA\u7684\u5F02\u5E38\u3002</p><p><code>Thread</code>\u7C7B\u63D0\u4F9B\u4E86\u5982\u4E0B\u4E24\u4E2A\u65B9\u6CD5\u6765\u8BBE\u7F6E\u5F02\u5E38\u5904\u7406\u5668\u3002</p><ul><li><code>static setDefaultUncaughtExceptionHandler(Thread.UncaughtExceptionHandler eh)</code>\uFF1A\u4E3A\u8BE5\u7EBF\u7A0B\u7C7B\u7684\u6240\u6709\u7EBF\u7A0B\u5B9E\u4F8B\u8BBE\u7F6E\u9ED8\u8BA4\u7684\u5F02\u5E38\u5904\u7406\u5668\u3002</li><li><code>setUncaughtExceptionHandler(Thread.UncaughtExceptionHandler eh)</code>\uFF1A\u4E3A\u6307\u5B9A\u7684\u7EBF\u7A0B\u5B9E\u4F8B\u8BBE\u7F6E\u5F02\u5E38\u5904\u7406\u5668\u3002</li></ul><p><code>ThreadGroup</code>\u7C7B\u5B9E\u73B0\u4E86<code>Thread.UncaughtExceptionHandler</code>\u63A5\u53E3\uFF0C\u6240\u4EE5\u6BCF\u4E2A\u7EBF\u7A0B\u6240\u5C5E\u7684\u7EBF\u7A0B\u7EC4\u5C06\u4F1A\u4F5C\u4E3A\u9ED8\u8BA4\u7684\u5F02\u5E38\u5904\u7406\u5668\u3002</p><p>\u5F53\u4E00\u4E2A\u7EBF\u7A0B\u629B\u51FA\u672A\u5904\u7406\u5F02\u5E38\u65F6\uFF0CJVM \u4F1A\u9996\u5148\u67E5\u627E\u8BE5\u5F02\u5E38\u5BF9\u5E94\u7684\u5F02\u5E38\u5904\u7406\u5668\uFF08<code>setUncaughtExceptionHandler()</code>\u65B9\u6CD5\u8BBE\u7F6E\u7684\u5F02\u5E38\u5904\u7406\u5668\uFF09\uFF0C\u5982\u679C\u627E\u5230\u8BE5\u5F02\u5E38\u5904\u7406\u5668\uFF0C\u5219\u5C06\u8C03\u7528\u8BE5\u5F02\u5E38\u5904\u7406\u5668\u5904\u7406\u8BE5\u5F02\u5E38\uFF1B\u5426\u5219\uFF0CJVM \u5C06\u4F1A\u8C03\u7528\u8BE5\u7EBF\u7A0B\u6240\u5C5E\u7684\u7EBF\u7A0B\u7EC4\u5BF9\u8C61\u7684<code>uncaughtException()</code>\u65B9\u6CD5\u6765\u5904\u7406\u8BE5\u5F02\u5E38\u3002</p><p>\u7EBF\u7A0B\u7EC4\u5904\u7406\u5F02\u5E38\u7684\u9ED8\u8BA4\u6D41\u7A0B\u5982\u4E0B\u3002</p><ol><li>\u5982\u679C\u8BE5\u7EBF\u7A0B\u7EC4\u6709\u7236\u7EBF\u7A0B\u7EC4\uFF0C\u5219\u8C03\u7528\u7236\u7EBF\u7A0B\u7EC4\u7684<code>uncaughtException()</code>\u65B9\u6CD5\u6765\u5904\u7406\u8BE5\u5F02\u5E38\u3002</li><li>\u5982\u679C\u8BE5\u7EBF\u7A0B\u5B9E\u4F8B\u6240\u5C5E\u7684\u7EBF\u7A0B\u7C7B\u6709\u9ED8\u8BA4\u7684\u5F02\u5E38\u5904\u7406\u5668\uFF08\u7531<code>setDefaultUncaughtExceptionHandler()</code>\u65B9\u6CD5\u8BBE\u7F6E\u7684\u5F02\u5E38\u5904\u7406\u5668\uFF09\uFF0C\u90A3\u4E48\u5C31\u8C03\u7528\u8BE5\u5F02\u5E38\u5904\u7406\u5668\u6765\u5904\u7406\u8BE5\u5F02\u5E38\u3002</li><li>\u5982\u679C\u8BE5\u5F02\u5E38\u5BF9\u8C61\u662F<code>ThreadDeath</code>\u7684\u5BF9\u8C61\uFF0C\u5219\u4E0D\u505A\u4EFB\u4F55\u5904\u7406\uFF1B\u5426\u5219\uFF0C\u5C06\u5F02\u5E38\u8DDF\u8E2A\u6808\u7684\u4FE1\u606F\u6253\u5370\u5230<code>System.err</code>\u9519\u8BEF\u8F93\u51FA\u6D41\uFF0C\u5E76\u7ED3\u675F\u8BE5\u7EBF\u7A0B\u3002</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyExHandler</span> <span class="token keyword">implements</span> <span class="token class-name">Thread<span class="token punctuation">.</span>UncaughtExceptionHandler</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5B9E\u73B0uncaughtException()\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5C06\u5904\u7406\u7EBF\u7A0B\u7684\u672A\u5904\u7406\u5F02\u5E38</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">uncaughtException</span><span class="token punctuation">(</span><span class="token class-name">Thread</span> t<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t <span class="token operator">+</span> <span class="token string">&quot; \u7EBF\u7A0B\u51FA\u73B0\u4E86\u5F02\u5E38\uFF1A&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExHandler</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BBE\u7F6E\u4E3B\u7EBF\u7A0B\u7684\u5F02\u5E38\u5904\u7406\u5668</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUncaughtExceptionHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyExHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token comment">//\u2460</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7A0B\u5E8F\u6B63\u5E38\u7ED3\u675F\uFF01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u8BE5\u7A0B\u5E8F\uFF0C\u4F1A\u770B\u5230\u5982\u4E0B\u8F93\u51FA\uFF1A</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208221323663.png" alt="image-20220822132326025"></p><p>\u867D\u7136\u7A0B\u5E8F\u4E2D\u6307\u5B9A\u4E86\u5F02\u5E38\u5904\u7406\u5668\u5BF9\u672A\u6355\u83B7\u7684\u5F02\u5E38\u8FDB\u884C\u5904\u7406\uFF0C\u800C\u4E14\u8BE5\u5F02\u5E38\u5904\u7406\u5668\u4E5F\u786E\u5B9E\u8D77\u4F5C\u7528\u4E86\uFF0C\u4F46\u7A0B\u5E8F\u4F9D\u7136\u4E0D\u4F1A\u6B63\u5E38\u7ED3\u675F\u3002\u8FD9\u8BF4\u660E\u5F02\u5E38\u5904\u7406\u5668\u4E0E\u901A\u8FC7 catch \u6355\u83B7\u5F02\u5E38\u662F\u4E0D\u540C\u7684\u2014\u2014\u5F53\u4F7F\u7528 catch \u6355\u83B7\u5F02\u5E38\u65F6\uFF0C\u5F02\u5E38\u4E0D\u4F1A\u5411\u4E0A\u4F20\u64AD\u7ED9\u4E0A\u4E00\u7EA7\u8C03\u7528\u8005\uFF1B\u4F46\u4F7F\u7528\u5F02\u5E38\u5904\u7406\u5668\u5BF9\u5F02\u5E38\u8FDB\u884C\u5904\u7406\u4E4B\u540E\uFF0C\u5F02\u5E38\u4F9D\u7136\u4F1A\u4F20\u64AD\u7ED9\u4E0A\u4E00\u7EA7\u8C03\u7528\u8005\u3002</p><h2 id="\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> \u7EBF\u7A0B\u6C60</h2><p>Java \u8BED\u8A00\u867D\u7136\u5185\u7F6E\u4E86\u591A\u7EBF\u7A0B\u652F\u6301\uFF0C\u542F\u52A8\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u975E\u5E38\u65B9\u4FBF\uFF0C\u4F46\u662F\uFF0C\u521B\u5EFA\u7EBF\u7A0B\u9700\u8981\u64CD\u4F5C\u7CFB\u7EDF\u8D44\u6E90\uFF08\u7EBF\u7A0B\u8D44\u6E90\uFF0C\u6808\u7A7A\u95F4\u7B49\uFF09\uFF0C\u9891\u7E41\u521B\u5EFA\u548C\u9500\u6BC1\u5927\u91CF\u7EBF\u7A0B\u9700\u8981\u6D88\u8017\u5927\u91CF\u65F6\u95F4\u3002</p><p>\u5982\u679C\u53EF\u4EE5\u590D\u7528\u4E00\u7EC4\u7EBF\u7A0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u250C\u2500\u2500\u2500\u2500\u2500\u2510 execute  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502Task1\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500<span class="token operator">&gt;</span>\u2502ThreadPool        \u2502
\u251C\u2500\u2500\u2500\u2500\u2500\u2524          \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u2502Task2\u2502          \u2502\u2502Thread1\u2502\u2502Thread2\u2502\u2502
\u251C\u2500\u2500\u2500\u2500\u2500\u2524          \u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u2502Task3\u2502          \u2502\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502
\u251C\u2500\u2500\u2500\u2500\u2500\u2524          \u2502\u2502Thread3\u2502\u2502Thread4\u2502\u2502
\u2502Task4\u2502          \u2502\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502
\u251C\u2500\u2500\u2500\u2500\u2500\u2524          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
\u2502Task5\u2502
\u251C\u2500\u2500\u2500\u2500\u2500\u2524
\u2502Task6\u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2518
  <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u90A3\u4E48\u6211\u4EEC\u5C31\u53EF\u4EE5\u628A\u5F88\u591A\u5C0F\u4EFB\u52A1\u8BA9\u4E00\u7EC4\u7EBF\u7A0B\u6765\u6267\u884C\uFF0C\u800C\u4E0D\u662F\u4E00\u4E2A\u4EFB\u52A1\u5BF9\u5E94\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u3002\u8FD9\u79CD\u80FD\u63A5\u6536\u5927\u91CF\u5C0F\u4EFB\u52A1\u5E76\u8FDB\u884C\u5206\u53D1\u5904\u7406\u7684\u5C31\u662F\u7EBF\u7A0B\u6C60\u3002</p><p>\u7B80\u5355\u5730\u8BF4\uFF0C\u7EBF\u7A0B\u6C60\u5185\u90E8\u7EF4\u62A4\u4E86\u82E5\u5E72\u4E2A\u7EBF\u7A0B\uFF0C\u6CA1\u6709\u4EFB\u52A1\u7684\u65F6\u5019\uFF0C\u8FD9\u4E9B\u7EBF\u7A0B\u90FD\u5904\u4E8E\u7B49\u5F85\u72B6\u6001\u3002\u5982\u679C\u6709\u65B0\u4EFB\u52A1\uFF0C\u5C31\u5206\u914D\u4E00\u4E2A\u7A7A\u95F2\u7EBF\u7A0B\u6267\u884C\u3002\u5982\u679C\u6240\u6709\u7EBF\u7A0B\u90FD\u5904\u4E8E\u5FD9\u788C\u72B6\u6001\uFF0C\u65B0\u4EFB\u52A1\u8981\u4E48\u653E\u5165\u961F\u5217\u7B49\u5F85\uFF0C\u8981\u4E48\u589E\u52A0\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u8FDB\u884C\u5904\u7406\u3002</p><h3 id="\u5B9E\u73B0\u7684\u7EBF\u7A0B\u6C60" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u7684\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> \u5B9E\u73B0\u7684\u7EBF\u7A0B\u6C60</h3><p>Java 5 \u65B0\u589E\u4E86\u4E00\u4E2A<code>Executors</code>\u5DE5\u5382\u7C7B\u6765\u4EA7\u751F\u7EBF\u7A0B\u6C60\uFF0C\u8BE5\u5DE5\u5382\u7C7B\u5305\u542B\u5982\u4E0B\u51E0\u4E2A\u9759\u6001\u5DE5\u5382\u65B9\u6CD5\u6765\u521B\u5EFA\u7EBF\u7A0B\u6C60\u3002</p><ul><li><p><code>newCachedThreadPool()</code>\uFF1A\u521B\u5EFA\u4E00\u4E2A\u5177\u6709\u7F13\u5B58\u529F\u80FD\u7684\u7EBF\u7A0B\u6C60\uFF0C\u7CFB\u7EDF\u6839\u636E\u9700\u8981\u521B\u5EFA\u7EBF\u7A0B\uFF0C\u8FD9\u4E9B\u7EBF\u7A0B\u5C06\u4F1A\u88AB\u7F13\u5B58\u5728\u7EBF\u7A0B\u6C60\u4E2D\u3002</p></li><li><p><code>newFixedThreadPool(int nThreads)</code>\uFF1A\u521B\u5EFA\u4E00\u4E2A\u53EF\u91CD\u7528\u7684\u3001\u5177\u6709\u56FA\u5B9A\u7EBF\u7A0B\u6570\u7684\u7EBF\u7A0B\u6C60\u3002</p></li><li><p><code>newSingleThreadExecutor()</code>\uFF1A\u521B\u5EFA\u4E00\u4E2A\u53EA\u6709\u5355\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u76F8\u5F53\u4E8E\u8C03\u7528<code>newFixedThread Pool()</code>\u65B9\u6CD5\u65F6\u4F20\u5165\u53C2\u6570\u4E3A 1\u3002</p></li><li><p><code>newScheduledThreadPool(int corePoolSize)</code>\uFF1A\u521B\u5EFA\u5177\u6709\u6307\u5B9A\u7EBF\u7A0B\u6570\u7684\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u53EF\u4EE5\u5728\u6307\u5B9A\u5EF6\u8FDF\u540E\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\u3002</p><p><code>corePoolSize</code>\u6307\u6C60\u4E2D\u6240\u4FDD\u5B58\u7684\u7EBF\u7A0B\u6570\uFF0C\u5373\u4F7F\u7EBF\u7A0B\u662F\u7A7A\u95F2\u7684\u4E5F\u88AB\u4FDD\u5B58\u5728\u7EBF\u7A0B\u6C60\u5185\u3002</p></li><li><p><code>newSingleThreadScheduledExecutor()</code>\uFF1A\u521B\u5EFA\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u53EF\u4EE5\u5728\u6307\u5B9A\u5EF6\u8FDF\u540E\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\u3002</p></li></ul><blockquote><p>\u524D 3 \u4E2A\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A<code>ExecutorService</code>\u5BF9\u8C61\uFF0C\u8BE5\u5BF9\u8C61\u4EE3\u8868\u4E00\u4E2A\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u53EF\u4EE5\u6267\u884C<code>Runnable</code>\u5BF9\u8C61\u6216<code>Callable</code>\u5BF9\u8C61\u6240\u4EE3\u8868\u7684\u7EBF\u7A0B\uFF1B</p><p>\u800C\u540E 2 \u4E2A\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A<code>ScheduledExecutorService</code>\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u662F<code>ExecutorService</code>\u7684\u5B50\u7C7B\uFF0C\u5B83\u53EF\u4EE5\u5728\u6307\u5B9A\u5EF6\u8FDF\u540E\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\u3002</p></blockquote><p><code>ExecutorService</code>\u4EE3\u8868\u5C3D\u5FEB\u6267\u884C\u7EBF\u7A0B\u7684\u7EBF\u7A0B\u6C60\uFF08\u53EA\u8981\u7EBF\u7A0B\u6C60\u4E2D\u6709\u7A7A\u95F2\u7EBF\u7A0B\uFF0C\u5C31\u7ACB\u5373\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\uFF09\uFF0C\u7A0B\u5E8F\u53EA\u8981\u5C06\u4E00\u4E2A<code>Runnable</code>\u5BF9\u8C61\u6216<code>Callable</code>\u5BF9\u8C61\uFF08\u4EE3\u8868\u7EBF\u7A0B\u4EFB\u52A1\uFF09\u63D0\u4EA4\u7ED9\u8BE5\u7EBF\u7A0B\u6C60\uFF0C\u8BE5\u7EBF\u7A0B\u6C60\u5C31\u4F1A\u5C3D\u5FEB\u6267\u884C\u8BE5\u4EFB\u52A1\u3002<code>ExecutorService</code>\u91CC\u63D0\u4F9B\u4E86\u5982\u4E0B 3 \u4E2A\u65B9\u6CD5\u3002</p><ul><li><p><code>Future&lt;?&gt; submit(Runnable task)</code>\uFF1A\u5C06\u4E00\u4E2A<code>Runnable</code>\u5BF9\u8C61\u63D0\u4EA4\u7ED9\u6307\u5B9A\u7684\u7EBF\u7A0B\u6C60\uFF0C\u7EBF\u7A0B\u6C60\u5C06\u5728\u6709\u7A7A\u95F2\u7EBF\u7A0B\u65F6\u6267\u884C<code>Runnable</code>\u5BF9\u8C61\u4EE3\u8868\u7684\u4EFB\u52A1\u3002</p><p>\u5176\u4E2D<code>Future</code>\u5BF9\u8C61\u4EE3\u8868<code>Runnable</code>\u4EFB\u52A1\u7684\u8FD4\u56DE\u503C\u2014\u2014\u4F46<code>run()</code>\u65B9\u6CD5\u6CA1\u6709\u8FD4\u56DE\u503C\uFF0C\u6240\u4EE5<code>Future</code>\u5BF9\u8C61\u5C06\u5728<code>run()</code>\u65B9\u6CD5\u6267\u884C\u7ED3\u675F\u540E\u8FD4\u56DE<code>null</code>\u3002</p><p>\u4F46\u53EF\u4EE5\u8C03\u7528<code>Future</code>\u7684<code>isDone()</code>\u3001<code>isCancelled()</code>\u65B9\u6CD5\u6765\u83B7\u5F97<code>Runnable</code>\u5BF9\u8C61\u7684\u6267\u884C\u72B6\u6001\u3002</p></li><li><p><code>&lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result)</code>\uFF1A\u5C06\u4E00\u4E2A<code>Runnable</code>\u5BF9\u8C61\u63D0\u4EA4\u7ED9\u6307\u5B9A\u7684\u7EBF\u7A0B\u6C60\uFF0C\u7EBF\u7A0B\u6C60\u5C06\u5728\u6709\u7A7A\u95F2\u7EBF\u7A0B\u65F6\u6267\u884C<code>Runnable</code>\u5BF9\u8C61\u4EE3\u8868\u7684\u4EFB\u52A1\u3002</p><p>\u5176\u4E2D<code>result</code>\u663E\u5F0F\u6307\u5B9A\u7EBF\u7A0B\u6267\u884C\u7ED3\u675F\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u6240\u4EE5<code>Future</code>\u5BF9\u8C61\u5C06\u5728<code>run()</code>\u65B9\u6CD5\u6267\u884C\u7ED3\u675F\u540E\u8FD4\u56DE<code>result</code>\u3002</p></li><li><p><code>&lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task)</code>\uFF1A\u5C06\u4E00\u4E2A<code>Callable</code>\u5BF9\u8C61\u63D0\u4EA4\u7ED9\u6307\u5B9A\u7684\u7EBF\u7A0B\u6C60\uFF0C\u7EBF\u7A0B\u6C60\u5C06\u5728\u6709\u7A7A\u95F2\u7EBF\u7A0B\u65F6\u6267\u884C<code>Callable</code>\u5BF9\u8C61\u4EE3\u8868\u7684\u4EFB\u52A1\u3002</p><p>\u5176\u4E2D<code>Future</code>\u4EE3\u8868<code>Callable</code>\u5BF9\u8C61\u91CC<code>call()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u3002</p></li></ul><p><code>ScheduledExecutorService</code>\u4EE3\u8868\u53EF\u5728\u6307\u5B9A\u5EF6\u8FDF\u540E\u6216\u5468\u671F\u6027\u5730\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\u7684\u7EBF\u7A0B\u6C60\uFF0C\u5B83\u63D0\u4F9B\u4E86\u5982\u4E0B 4 \u4E2A\u65B9\u6CD5\u3002</p><ul><li><p><code>ScheduledFuture&lt;?&gt; schedule(Runnable command, long delay,TimeUnit unit)</code>\uFF1A\u6307\u5B9A<code>command</code>\u4EFB\u52A1\u5C06\u5728<code>delay</code>\u5EF6\u8FDF\u540E\u6267\u884C\u3002</p></li><li><p><code>ScheduledFuture&lt;?&gt; scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)</code>\uFF1A\u6307\u5B9A<code>command</code>\u4EFB\u52A1\u5C06\u5728<code>delay</code>\u5EF6\u8FDF\u540E\u6267\u884C\uFF0C\u800C\u4E14\u4EE5\u8BBE\u5B9A\u9891\u7387\u91CD\u590D\u6267\u884C\u3002</p><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5728<code>initialDelay</code>\u540E\u5F00\u59CB\u6267\u884C\uFF0C\u4F9D\u6B21\u5728<code>initialDelay+period</code>\u3001<code>initialDelay+2 * period\u2026</code>\u5904\u91CD\u590D\u6267\u884C\uFF0C\u4F9D\u6B64\u7C7B\u63A8\u3002</p></li><li><p><code>ScheduledFuture&lt;?&gt; scheduleWithFixedDelay(Runnable command,long initialDelay, long delay,TimeUnit unit)</code>\uFF1A\u521B\u5EFA\u5E76\u6267\u884C\u4E00\u4E2A\u5728\u7ED9\u5B9A\u521D\u59CB\u5EF6\u8FDF\u540E\u9996\u6B21\u542F\u7528\u7684\u5B9A\u671F\u64CD\u4F5C\uFF0C\u968F\u540E\u5728\u6BCF\u4E00\u6B21\u6267\u884C\u7EC8\u6B62\u548C\u4E0B\u4E00\u6B21\u6267\u884C\u5F00\u59CB\u4E4B\u95F4\u90FD\u5B58\u5728\u7ED9\u5B9A\u7684\u5EF6\u8FDF\u3002</p><p>\u5982\u679C\u4EFB\u52A1\u5728\u4EFB\u4E00\u6B21\u6267\u884C\u65F6\u9047\u5230\u5F02\u5E38\uFF0C\u5C31\u4F1A\u53D6\u6D88\u540E\u7EED\u6267\u884C\uFF1B\u5426\u5219\uFF0C\u53EA\u80FD\u901A\u8FC7\u7A0B\u5E8F\u6765\u663E\u5F0F\u53D6\u6D88\u6216\u7EC8\u6B62\u8BE5\u4EFB\u52A1\u3002</p></li></ul><p>\u5F53\u7528\u5B8C\u4E00\u4E2A\u7EBF\u7A0B\u6C60\u540E\uFF0C\u5E94\u8BE5\u8C03\u7528\u8BE5\u7EBF\u7A0B\u6C60\u7684<code>shutdown()</code>\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5C06\u542F\u52A8\u7EBF\u7A0B\u6C60\u7684\u5173\u95ED\u5E8F\u5217\uFF0C\u8C03\u7528<code>shutdown()</code>\u65B9\u6CD5\u540E\u7684\u7EBF\u7A0B\u6C60\u4E0D\u518D\u63A5\u6536\u65B0\u4EFB\u52A1\uFF0C\u4F46\u4F1A\u5C06\u4EE5\u524D\u6240\u6709\u5DF2\u63D0\u4EA4\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u3002</p><p>\u5F53\u7EBF\u7A0B\u6C60\u4E2D\u7684\u6240\u6709\u4EFB\u52A1\u90FD\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u6C60\u4E2D\u7684\u6240\u6709\u7EBF\u7A0B\u90FD\u4F1A\u6B7B\u4EA1\uFF1B\u53E6\u5916\u4E5F\u53EF\u4EE5\u8C03\u7528\u7EBF\u7A0B\u6C60\u7684<code>shutdownNow()</code>\u65B9\u6CD5\u6765\u5173\u95ED\u7EBF\u7A0B\u6C60\uFF0C\u8BE5\u65B9\u6CD5\u8BD5\u56FE\u505C\u6B62\u6240\u6709\u6B63\u5728\u6267\u884C\u7684\u6D3B\u52A8\u4EFB\u52A1\uFF0C\u6682\u505C\u5904\u7406\u6B63\u5728\u7B49\u5F85\u7684\u4EFB\u52A1\uFF0C\u5E76\u8FD4\u56DE\u7B49\u5F85\u6267\u884C\u7684\u4EFB\u52A1\u5217\u8868\u3002</p><p>\u4F7F\u7528\u7EBF\u7A0B\u6C60\u6765\u6267\u884C\u7EBF\u7A0B\u4EFB\u52A1\u7684\u6B65\u9AA4\u5982\u4E0B\u3002</p><ol><li>\u8C03\u7528<code>Executors</code>\u7C7B\u7684\u9759\u6001\u5DE5\u5382\u65B9\u6CD5\u521B\u5EFA\u4E00\u4E2A<code>ExecutorService</code>\u5BF9\u8C61\uFF0C\u8BE5\u5BF9\u8C61\u4EE3\u8868\u4E00\u4E2A\u7EBF\u7A0B\u6C60\u3002</li><li>\u521B\u5EFA<code>Runnable</code>\u5B9E\u73B0\u7C7B\u6216<code>Callable</code>\u5B9E\u73B0\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u4F5C\u4E3A\u7EBF\u7A0B\u6267\u884C\u4EFB\u52A1\u3002</li><li>\u8C03\u7528<code>ExecutorService</code>\u5BF9\u8C61\u7684<code>submit()</code>\u65B9\u6CD5\u6765\u63D0\u4EA4<code>Runnable</code>\u5B9E\u4F8B\u6216<code>Callable</code>\u5B9E\u4F8B\u3002</li><li>\u5F53\u4E0D\u60F3\u63D0\u4EA4\u4EFB\u4F55\u4EFB\u52A1\u65F6\uFF0C\u8C03\u7528<code>ExecutorService</code>\u5BF9\u8C61\u7684<code>shutdown()</code>\u65B9\u6CD5\u6765\u5173\u95ED\u7EBF\u7A0B\u6C60\u3002</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u56FA\u5B9A\u5927\u5C0F\u7684\u7EBF\u7A0B\u6C60:</span>
    <span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      es<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u5173\u95ED\u7EBF\u7A0B\u6C60:</span>
    es<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;start task &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;end task &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u89C2\u5BDF\u6267\u884C\u7ED3\u679C\uFF0C\u4E00\u6B21\u6027\u653E\u5165 6 \u4E2A\u4EFB\u52A1\uFF0C\u7531\u4E8E\u7EBF\u7A0B\u6C60\u53EA\u6709\u56FA\u5B9A\u7684 4 \u4E2A\u7EBF\u7A0B\uFF0C\u56E0\u6B64\uFF0C\u524D 4 \u4E2A\u4EFB\u52A1\u4F1A\u540C\u65F6\u6267\u884C\uFF0C\u7B49\u5230\u6709\u7EBF\u7A0B\u7A7A\u95F2\u540E\uFF0C\u624D\u4F1A\u6267\u884C\u540E\u9762\u7684\u4E24\u4E2A\u4EFB\u52A1\u3002</p><p>\u7EBF\u7A0B\u6C60\u5728\u7A0B\u5E8F\u7ED3\u675F\u7684\u65F6\u5019\u8981\u5173\u95ED\u3002\u4F7F\u7528<code>shutdown()</code>\u65B9\u6CD5\u5173\u95ED\u7EBF\u7A0B\u6C60\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u7B49\u5F85\u6B63\u5728\u6267\u884C\u7684\u4EFB\u52A1\u5148\u5B8C\u6210\uFF0C\u7136\u540E\u518D\u5173\u95ED\u3002<code>shutdownNow()</code>\u4F1A\u7ACB\u523B\u505C\u6B62\u6B63\u5728\u6267\u884C\u7684\u4EFB\u52A1\uFF0C<code>awaitTermination()</code>\u5219\u4F1A\u7B49\u5F85\u6307\u5B9A\u7684\u65F6\u95F4\u8BA9\u7EBF\u7A0B\u6C60\u5173\u95ED\u3002</p><p>\u5982\u679C\u628A\u7EBF\u7A0B\u6C60\u6539\u4E3A<code>CachedThreadPool</code>\uFF0C\u7531\u4E8E\u8FD9\u4E2A\u7EBF\u7A0B\u6C60\u7684\u5B9E\u73B0\u4F1A\u6839\u636E\u4EFB\u52A1\u6570\u91CF\u52A8\u6001\u8C03\u6574\u7EBF\u7A0B\u6C60\u7684\u5927\u5C0F\uFF0C\u6240\u4EE5 6 \u4E2A\u4EFB\u52A1\u53EF\u4E00\u6B21\u6027\u5168\u90E8\u540C\u65F6\u6267\u884C\u3002</p><p>\u5982\u679C\u60F3\u628A\u7EBF\u7A0B\u6C60\u7684\u5927\u5C0F\u9650\u5236\u5728 4 \uFF5E 10 \u4E2A\u4E4B\u95F4\u52A8\u6001\u8C03\u6574\u600E\u4E48\u529E\uFF1F\u6211\u4EEC\u67E5\u770B<code>Executors.newCachedThreadPool()</code>\u65B9\u6CD5\u7684\u6E90\u7801\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> <span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">,</span>
                                    <span class="token number">60L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>
                                    <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56E0\u6B64\uFF0C\u60F3\u521B\u5EFA\u6307\u5B9A\u52A8\u6001\u8303\u56F4\u7684\u7EBF\u7A0B\u6C60\uFF0C\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> min <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">ExecutorService</span> es <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">,</span>
        <span class="token number">60L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="forkjoinpool" tabindex="-1"><a class="header-anchor" href="#forkjoinpool" aria-hidden="true">#</a> ForkJoinPool</h3><p>Java7 \u63D0\u4F9B\u4E86<code>ForkJoinPool</code>\u6765\u652F\u6301\u5C06\u4E00\u4E2A\u4EFB\u52A1\u62C6\u5206\u6210\u591A\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\u5E76\u884C\u8BA1\u7B97\uFF0C\u518D\u628A\u591A\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\u7684\u7ED3\u679C\u5408\u5E76\u6210\u603B\u7684\u8BA1\u7B97\u7ED3\u679C\u3002<code>ForkJoinPool</code>\u662F<code>ExecutorService</code>\u7684\u5B9E\u73B0\u7C7B\uFF0C\u56E0\u6B64\u662F\u4E00\u79CD\u7279\u6B8A\u7684\u7EBF\u7A0B\u6C60\u3002<code>ForkJoinPool</code>\u63D0\u4F9B\u4E86\u5982\u4E0B\u4E24\u4E2A\u5E38\u7528\u7684\u6784\u9020\u5668\u3002</p><ul><li><code>ForkJoinPool(int parallelism)</code>\uFF1A\u521B\u5EFA\u4E00\u4E2A\u5305\u542B<code>parallelism</code>\u4E2A\u5E76\u884C\u7EBF\u7A0B\u7684<code>ForkJoinPool</code>\u3002</li><li><code>ForkJoinPool()</code>\uFF1A\u4EE5<code>Runtime.availableProcessors()</code>\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u4F5C\u4E3A<code>parallelism</code>\u53C2\u6570\u6765\u521B\u5EFA<code>ForkJoinPool</code>\u3002</li></ul><p>\u521B\u5EFA\u4E86<code>ForkJoinPool</code>\u5B9E\u4F8B\u4E4B\u540E\uFF0C\u5C31\u53EF\u8C03\u7528<code>ForkJoinPool</code>\u7684<code>submit(ForkJoinTask task)</code>\u6216<code>invoke (ForkJoinTask task)</code>\u65B9\u6CD5\u6765\u6267\u884C\u6307\u5B9A\u4EFB\u52A1\u4E86\u3002</p><p>\u5176\u4E2D<code>ForkJoinTask</code>\u4EE3\u8868\u4E00\u4E2A\u53EF\u4EE5\u5E76\u884C\u3001\u5408\u5E76\u7684\u4EFB\u52A1\u3002</p><p><code>ForkJoinTask</code>\u662F\u4E00\u4E2A\u62BD\u8C61\u7C7B\uFF0C\u5B83\u8FD8\u6709\u4E24\u4E2A\u62BD\u8C61\u5B50\u7C7B\uFF1A<code>RecursiveAction</code>\u548C<code>RecursiveTask</code>\u3002</p><p>\u5176\u4E2D<code>RecursiveTask</code>\u4EE3\u8868\u6709\u8FD4\u56DE\u503C\u7684\u4EFB\u52A1\uFF0C\u800C<code>RecursiveAction</code>\u4EE3\u8868\u6CA1\u6709\u8FD4\u56DE\u503C\u7684\u4EFB\u52A1\u3002</p><p><code>ForkJoinPool</code>\u3001<code>ForkJoinTask</code>\u7B49\u7C7B\u7684\u7C7B\u56FE\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208221441392.jpeg" alt="epub_681336_2244"></p><p>\u4E0B\u9762\u4EE5\u6267\u884C\u6CA1\u6709\u8FD4\u56DE\u503C\u7684\u201C\u5927\u4EFB\u52A1\u201D\uFF08\u7B80\u5355\u5730\u6253\u5370 0~300 \u7684\u6570\u503C\uFF09\u4E3A\u4F8B\uFF0C\u7A0B\u5E8F\u5C06\u4E00\u4E2A\u201C\u5927\u4EFB\u52A1\u201D\u62C6\u5206\u6210\u591A\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\uFF0C\u5E76\u5C06\u4EFB\u52A1\u4EA4\u7ED9<code>ForkJoinPool</code>\u6765\u6267\u884C\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">PrintTask</span> <span class="token keyword">extends</span> <span class="token class-name">RecursiveAction</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6BCF\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\u6700\u591A\u53EA\u6253\u537050\u4E2A\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">THRESHOLD</span> <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> start<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> end<span class="token punctuation">;</span>

  <span class="token comment">// \u6253\u5370\u4ECEstart\u5230end\u7684\u4EFB\u52A1</span>
  <span class="token keyword">public</span> <span class="token class-name">PrintTask</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> end<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5F53end\u4E0Estart\u4E4B\u95F4\u7684\u5DEE\u5C0F\u4E8ETHRESHOLD\u65F6\uFF0C\u5F00\u59CB\u6253\u5370</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start <span class="token operator">&lt;</span> <span class="token constant">THRESHOLD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token string">&quot;\u7684i\u503C\uFF1A&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53end\u4E0Estart\u4E4B\u95F4\u7684\u5DEE\u5927\u4E8ETHRESHOLD\uFF0C\u5373\u8981\u6253\u5370\u7684\u6570\u8D85\u8FC750\u4E2A\u65F6</span>
      <span class="token comment">// \u5C06\u5927\u4EFB\u52A1\u5206\u89E3\u6210\u4E24\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D</span>
      <span class="token keyword">int</span> middle <span class="token operator">=</span> <span class="token punctuation">(</span>start <span class="token operator">+</span> end<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token class-name">PrintTask</span> left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintTask</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> middle<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">PrintTask</span> right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintTask</span><span class="token punctuation">(</span>middle<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u5E76\u884C\u6267\u884C\u4E24\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D</span>
      left<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      right<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForkJoinPoolTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">ForkJoinPool</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u63D0\u4EA4\u53EF\u5206\u89E3\u7684PrintTask\u4EFB\u52A1</span>
    pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintTask</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pool<span class="token punctuation">.</span><span class="token function">awaitTermination</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5173\u95ED\u7EBF\u7A0B\u6C60</span>
    pool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7A0B\u5E8F\u867D\u7136\u6253\u5370\u4E86 0 \uFF5E 299 \u8FD9 300 \u4E2A\u6570\u5B57\uFF0C\u4F46\u5E76\u4E0D\u662F\u8FDE\u7EED\u6253\u5370\u7684\uFF0C\u8FD9\u662F\u56E0\u4E3A\u7A0B\u5E8F\u5C06\u8FD9\u4E2A\u6253\u5370\u4EFB\u52A1\u8FDB\u884C\u4E86\u5206\u89E3\uFF0C\u5206\u89E3\u540E\u7684\u4EFB\u52A1\u4F1A\u5E76\u884C\u6267\u884C\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u6309\u987A\u5E8F\u4ECE 0 \u6253\u5370\u5230 299\u3002</p><p>\u4E0A\u9762\u5B9A\u4E49\u7684\u4EFB\u52A1\u662F\u4E00\u4E2A\u6CA1\u6709\u8FD4\u56DE\u503C\u7684\u6253\u5370\u4EFB\u52A1\uFF0C\u5982\u679C\u4EFB\u52A1\u662F\u6709\u8FD4\u56DE\u503C\u7684\u4EFB\u52A1\uFF0C\u5219\u53EF\u4EE5\u8BA9\u4EFB\u52A1\u7EE7\u627F<code>RecursiveTask&lt;T&gt;</code>\uFF0C\u5176\u4E2D\u6CDB\u578B\u53C2\u6570<code>T</code>\u5C31\u4EE3\u8868\u4E86\u8BE5\u4EFB\u52A1\u7684\u8FD4\u56DE\u503C\u7C7B\u578B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">CalTask</span> <span class="token keyword">extends</span> <span class="token class-name">RecursiveTask</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u6BCF\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\u6700\u591A\u53EA\u7D2F\u52A020\u4E2A\u6570</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">THRESHOLD</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> start<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> end<span class="token punctuation">;</span>

  <span class="token comment">// \u7D2F\u52A0\u4ECEstart\u5230end\u7684\u6570\u7EC4\u5143\u7D20</span>
  <span class="token keyword">public</span> <span class="token class-name">CalTask</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> arr<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> start<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> end<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token class-name">Integer</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5F53end\u4E0Estart\u4E4B\u95F4\u7684\u5DEE\u5C0F\u4E8ETHRESHOLD\u65F6\uFF0C\u5F00\u59CB\u8FDB\u884C\u5B9E\u9645\u7D2F\u52A0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start <span class="token operator">&lt;</span> <span class="token constant">THRESHOLD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53end\u4E0Estart\u4E4B\u95F4\u7684\u5DEE\u5927\u4E8ETHRESHOLD\uFF0C\u5373\u8981\u6253\u5370\u7684\u6570\u8D85\u8FC720\u4E2A\u65F6</span>
      <span class="token comment">// \u5C06\u5927\u4EFB\u52A1\u5206\u89E3\u6210\u4E24\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D</span>
      <span class="token keyword">int</span> middle <span class="token operator">=</span> <span class="token punctuation">(</span>start <span class="token operator">+</span> end<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token class-name">CalTask</span> left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalTask</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span> middle<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">CalTask</span> right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalTask</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> middle<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u5E76\u884C\u6267\u884C\u4E24\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D</span>
      left<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      right<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u628A\u4E24\u4E2A\u201C\u5C0F\u4EFB\u52A1\u201D\u7D2F\u52A0\u7684\u7ED3\u679C\u5408\u5E76\u8D77\u6765</span>
      <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>
          right<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//\u2460</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sum</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// \u521D\u59CB\u5316100\u4E2A\u6570\u5B57\u5143\u7D20</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> tmp <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u5BF9\u6570\u7EC4\u5143\u7D20\u8D4B\u503C\uFF0C\u5E76\u5C06\u6570\u7EC4\u5143\u7D20\u7684\u503C\u6DFB\u52A0\u5230total\u603B\u548C\u4E2D</span>
      total <span class="token operator">+=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ForkJoinPool</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ForkJoinPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u63D0\u4EA4\u53EF\u5206\u89E3\u7684CalTask\u4EFB\u52A1</span>
    <span class="token class-name">Future</span> future <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CalTask</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u5173\u95ED\u7EBF\u7A0B\u6C60</span>
    pool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7EBF\u7A0B\u76F8\u5173\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u76F8\u5173\u7C7B" aria-hidden="true">#</a> \u7EBF\u7A0B\u76F8\u5173\u7C7B</h2><p>Java \u8FD8\u4E3A\u7EBF\u7A0B\u5B89\u5168\u63D0\u4F9B\u4E86\u4E00\u4E9B\u5DE5\u5177\u7C7B\uFF0C\u5982<code>ThreadLocal</code>\u7C7B\uFF0C\u5B83\u4EE3\u8868\u4E00\u4E2A\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\uFF0C\u901A\u8FC7\u628A\u6570\u636E\u653E\u5728<code>ThreadLocal</code>\u4E2D\u5C31\u53EF\u4EE5\u8BA9\u6BCF\u4E2A\u7EBF\u7A0B\u521B\u5EFA\u4E00\u4E2A\u8BE5\u53D8\u91CF\u7684\u526F\u672C\uFF0C\u4ECE\u800C\u907F\u514D\u5E76\u53D1\u8BBF\u95EE\u7684\u7EBF\u7A0B\u5B89\u5168\u95EE\u9898\u3002\u9664\u6B64\u4E4B\u5916\uFF0CJava 5 \u8FD8\u65B0\u589E\u4E86\u5927\u91CF\u7684\u7EBF\u7A0B\u5B89\u5168\u7C7B\u3002</p><h3 id="threadlocal" tabindex="-1"><a class="header-anchor" href="#threadlocal" aria-hidden="true">#</a> ThreadLocal</h3><p><code>ThreadLocal</code>\uFF0C\u662F Thread Local Variable\uFF08\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\uFF09\u7684\u610F\u601D\u3002\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\uFF08<code>ThreadLocal</code>\uFF09\u7684\u529F\u7528\u5176\u5B9E\u975E\u5E38\u7B80\u5355\uFF0C\u5C31\u662F\u4E3A\u6BCF\u4E00\u4E2A\u4F7F\u7528\u8BE5\u53D8\u91CF\u7684\u7EBF\u7A0B\u90FD\u63D0\u4F9B\u4E00\u4E2A\u53D8\u91CF\u503C\u7684\u526F\u672C\uFF0C\u4F7F\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u90FD\u53EF\u4EE5\u72EC\u7ACB\u5730\u6539\u53D8\u81EA\u5DF1\u7684\u526F\u672C\uFF0C\u800C\u4E0D\u4F1A\u548C\u5176\u4ED6\u7EBF\u7A0B\u7684\u526F\u672C\u51B2\u7A81\u3002</p><p>\u4ECE\u7EBF\u7A0B\u7684\u89D2\u5EA6\u770B\uFF0C\u5C31\u597D\u50CF\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u90FD\u5B8C\u5168\u62E5\u6709\u8BE5\u53D8\u91CF\u4E00\u6837\u3002</p><p><code>ThreadLocal</code>\u7C7B\u7684\u7528\u6CD5\u975E\u5E38\u7B80\u5355\uFF0C\u5B83\u53EA\u63D0\u4F9B\u4E86\u5982\u4E0B 3 \u4E2A<code>public</code>\u65B9\u6CD5\u3002</p><ul><li><code>T get()</code>\uFF1A\u8FD4\u56DE\u6B64\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\u4E2D\u5F53\u524D\u7EBF\u7A0B\u526F\u672C\u4E2D\u7684\u503C\u3002</li><li><code>void remove()</code>\uFF1A\u5220\u9664\u6B64\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\u4E2D\u5F53\u524D\u7EBF\u7A0B\u7684\u503C\u3002</li><li><code>void set(T value)</code>\uFF1A\u8BBE\u7F6E\u6B64\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\u4E2D\u5F53\u524D\u7EBF\u7A0B\u526F\u672C\u4E2D\u7684\u503C\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Account2</span> <span class="token punctuation">{</span>

  <span class="token comment">/* \u5B9A\u4E49\u4E00\u4E2AThreadLocal\u7C7B\u578B\u7684\u53D8\u91CF\uFF0C\u8BE5\u53D8\u91CF\u5C06\u662F\u4E00\u4E2A\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF
  \u6BCF\u4E2A\u7EBF\u7A0B\u90FD\u4F1A\u4FDD\u7559\u8BE5\u53D8\u91CF\u7684\u4E00\u4E2A\u526F\u672C */</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2A\u521D\u59CB\u5316name\u5C5E\u6027\u7684\u6784\u9020\u5668</span>
  <span class="token keyword">public</span> <span class="token class-name">Account2</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u4E0B\u9762\u4EE3\u7801\u7528\u4E8E\u8BBF\u95EE\u5F53\u524D\u7EBF\u7A0B\u7684name\u526F\u672C\u7684\u503C</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// name\u7684setter\u548Cgetter\u65B9\u6CD5</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>

  <span class="token comment">// \u5B9A\u4E49\u4E00\u4E2AAccount\u5C5E\u6027</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Account2</span> account2<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">MyTest</span><span class="token punctuation">(</span><span class="token class-name">Account2</span> account2<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>account2 <span class="token operator">=</span> account2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5FAA\u73AF10\u6B21</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u5F53i==6\u65F6\u8F93\u51FA\u5C06\u8D26\u6237\u540D\u66FF\u6362\u6210\u5F53\u524D\u7EBF\u7A0B\u540D</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        account2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// \u8F93\u51FA\u540C\u4E00\u4E2A\u8D26\u6237\u7684\u8D26\u6237\u540D\u548C\u5FAA\u73AF\u53D8\u91CF</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token operator">+</span> <span class="token string">&quot; \u8D26\u6237\u7684i\u503C\uFF1A&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadLocalTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u542F\u52A8\u4E24\u4E2A\u7EBF\u7A0B\uFF0C\u4E24\u4E2A\u7EBF\u7A0B\u5171\u4EAB\u540C\u4E00\u4E2AAccount</span>
    <span class="token class-name">Account2</span> at <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account2</span><span class="token punctuation">(</span><span class="token string">&quot;\u521D\u59CB\u540D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token comment">/*
                  \u867D\u7136\u4E24\u4E2A\u7EBF\u7A0B\u5171\u4EAB\u540C\u4E00\u4E2A\u8D26\u6237\uFF0C\u5373\u53EA\u6709\u4E00\u4E2A\u8D26\u6237\u540D
                  \u4F46\u7531\u4E8E\u8D26\u6237\u540D\u662FThreadLocal\u7C7B\u578B\u7684\uFF0C\u6240\u4EE5\u6BCF\u4E2A\u7EBF\u7A0B
                  \u90FD\u5B8C\u5168\u62E5\u6709\u5404\u81EA\u7684\u8D26\u6237\u540D\u526F\u672C\uFF0C\u56E0\u6B64\u5728i==6\u4E4B\u540E\uFF0C\u5C06\u770B\u5230\u4E24\u4E2A
                  \u7EBF\u7A0B\u8BBF\u95EE\u540C\u4E00\u4E2A\u8D26\u6237\u65F6\u51FA\u73B0\u4E0D\u540C\u7684\u8D26\u6237\u540D
                  */</span>
    <span class="token keyword">new</span> <span class="token class-name">MyTest</span><span class="token punctuation">(</span>at<span class="token punctuation">,</span> <span class="token string">&quot;\u7EBF\u7A0B\u7532&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">MyTest</span><span class="token punctuation">(</span>at<span class="token punctuation">,</span> <span class="token string">&quot;\u7EBF\u7A0B\u4E59&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762<code>Account</code>\u7C7B\u4E2D\u7684\u4EE3\u7801\u5206\u522B\u5B8C\u6210\u4E86\u521B\u5EFA<code>ThreadLocal</code>\u5BF9\u8C61\u3001\u4ECE<code>ThreadLocal</code>\u4E2D\u53D6\u51FA\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\u3001\u4FEE\u6539\u7EBF\u7A0B\u5C40\u90E8\u53D8\u91CF\u7684\u64CD\u4F5C\u3002</p><p>\u7531\u4E8E\u7A0B\u5E8F\u4E2D\u7684\u8D26\u6237\u540D\u662F\u4E00\u4E2A<code>ThreadLocal</code>\u53D8\u91CF\uFF0C\u6240\u4EE5\u867D\u7136\u7A0B\u5E8F\u4E2D\u53EA\u6709\u4E00\u4E2A<code>Account</code>\u5BF9\u8C61\uFF0C\u4F46\u4E24\u4E2A\u5B50\u7EBF\u7A0B\u5C06\u4F1A\u4EA7\u751F\u4E24\u4E2A\u8D26\u6237\u540D\uFF08\u4E3B\u7EBF\u7A0B\u4E5F\u6301\u6709\u4E00\u4E2A\u8D26\u6237\u540D\u7684\u526F\u672C\uFF09\u3002</p><p>\u4E24\u4E2A\u7EBF\u7A0B\u8FDB\u884C\u5FAA\u73AF\u65F6\u90FD\u4F1A\u5728<code>i == 6</code>\u65F6\u5C06\u8D26\u6237\u540D\u6539\u4E3A\u4E0E\u7EBF\u7A0B\u540D\u76F8\u540C\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u770B\u5230\u4E24\u4E2A\u7EBF\u7A0B\u62E5\u6709\u4E24\u4E2A\u8D26\u6237\u540D\u7684\u60C5\u5F62\uFF0C\u5982\u56FE\u6240\u793A\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208221513112.png" alt="image-20220822151334474"></p><p>\u5982\u679C\u591A\u4E2A\u7EBF\u7A0B\u4E4B\u95F4\u9700\u8981\u5171\u4EAB\u8D44\u6E90\uFF0C\u4EE5\u8FBE\u5230\u7EBF\u7A0B\u4E4B\u95F4\u7684\u901A\u4FE1\u529F\u80FD\uFF0C\u5C31\u4F7F\u7528\u540C\u6B65\u673A\u5236\uFF1B\u5982\u679C\u4EC5\u4EC5\u9700\u8981\u9694\u79BB\u591A\u4E2A\u7EBF\u7A0B\u4E4B\u95F4\u7684\u5171\u4EAB\u51B2\u7A81\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528<code>ThreadLocal</code>\u3002</p><h3 id="\u5305\u88C5\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u5305\u88C5\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\u96C6\u5408" aria-hidden="true">#</a> \u5305\u88C5\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\u96C6\u5408</h3><p><code>ArrayList</code>\u3001<code>LinkedList</code>\u3001<code>HashSet</code>\u3001<code>TreeSet</code>\u3001<code>HashMap</code>\u3001<code>TreeMap</code>\u7B49\u90FD\u662F\u7EBF\u7A0B\u4E0D\u5B89\u5168\u7684\uFF0C\u5F53\u591A\u4E2A\u5E76\u53D1\u7EBF\u7A0B\u5411\u8FD9\u4E9B\u96C6\u5408\u4E2D\u5B58\u3001\u53D6\u5143\u7D20\u65F6\uFF0C\u5C31\u53EF\u80FD\u4F1A\u7834\u574F\u8FD9\u4E9B\u96C6\u5408\u7684\u6570\u636E\u5B8C\u6574\u6027\u3002</p><p>\u4F7F\u7528<code>Collections</code>\u63D0\u4F9B\u7684\u9759\u6001\u65B9\u6CD5\u628A\u8FD9\u4E9B\u96C6\u5408\u5305\u88C5\u6210\u7EBF\u7A0B\u5B89\u5168\u7684\u96C6\u5408\u3002<code>Collections</code>\u63D0\u4F9B\u4E86\u5982\u4E0B\u51E0\u4E2A\u9759\u6001\u65B9\u6CD5\u3002</p><ul><li><code>&lt;T&gt; Collection&lt;T&gt; synchronizedCollection(Collection&lt;T&gt; c)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>collection</code>\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684<code>collection</code>\u3002</li><li><code>static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>List</code>\u5BF9\u8C61\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684<code>List</code>\u5BF9\u8C61\u3002</li><li><code>static &lt;K,V&gt; Map&lt;K,V&gt; synchronizedMap(Map&lt;K,V&gt; m)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>Map</code>\u5BF9\u8C61\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684<code>Map</code>\u5BF9\u8C61\u3002</li><li><code>static &lt;T&gt; Set&lt;T&gt; synchronizedSet(Set&lt;T&gt; s)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>Set</code>\u5BF9\u8C61\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684 Set<code>\u5BF9\u8C61</code>\u3002</li><li><code>static &lt;K,V&gt; SortedMap&lt;K,V&gt;synchronizedSortedMap(SortedMap&lt;K,V&gt; m)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>SortedMap</code>\u5BF9\u8C61\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684<code>SortedMap</code>\u5BF9\u8C61\u3002</li><li><code>static &lt;T&gt; SortedSet&lt;T&gt; synchronizedSortedSet(SortedSet&lt;T&gt; s)</code>\uFF1A\u8FD4\u56DE\u6307\u5B9A<code>SortedSet</code>\u5BF9\u8C61\u5BF9\u5E94\u7684\u7EBF\u7A0B\u5B89\u5168\u7684<code>SortedSet</code>\u5BF9\u8C61\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4F7F\u7528Collections\u7684synchronizedMap\u65B9\u6CD5\u5C06\u4E00\u4E2A\u666E\u901A\u7684HashMap\u5305\u88C5\u6210\u7EBF\u7A0B\u5B89\u5168\u7684\u7C7B</span>
<span class="token class-name">HashMap</span> m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HashMap</span><span class="token punctuation">)</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7EBF\u7A0B\u5B89\u5168\u7684\u96C6\u5408\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u7A0B\u5B89\u5168\u7684\u96C6\u5408\u7C7B" aria-hidden="true">#</a> \u7EBF\u7A0B\u5B89\u5168\u7684\u96C6\u5408\u7C7B</h3><p>Java 5 \u5F00\u59CB\uFF0C\u5728<code>java.util.concurrent</code>\u5305\u4E0B\u63D0\u4F9B\u4E86\u5927\u91CF\u652F\u6301\u9AD8\u6548\u5E76\u53D1\u8BBF\u95EE\u7684\u96C6\u5408\u63A5\u53E3\u548C\u5B9E\u73B0\u7C7B\u3002</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208221529804.jpeg" alt="epub_681336_2259"></p><p>\u8FD9\u4E9B\u7EBF\u7A0B\u5B89\u5168\u7684\u96C6\u5408\u7C7B\u53EF\u5206\u4E3A\u5982\u4E0B\u4E24\u7C7B\u3002</p><ul><li>\u4EE5<code>Concurrent</code>\u5F00\u5934\u7684\u96C6\u5408\u7C7B\uFF0C\u5982<code>ConcurrentHashMap</code>\u3001<code>ConcurrentSkipListMap</code>\u3001<code>ConcurrentSkipListSet</code>\u3001<code>ConcurrentLinkedQueue</code>\u548C<code>ConcurrentLinkedDeque</code>\u3002</li><li>\u4EE5<code>CopyOnWrite</code>\u5F00\u5934\u7684\u96C6\u5408\u7C7B\uFF0C\u5982<code>CopyOnWriteArrayList</code>\u3001<code>CopyOnWriteArraySet</code>\u3002</li></ul><p>\u4EE5<code>Concurrent</code>\u5F00\u5934\u7684\u96C6\u5408\u7C7B\u4EE3\u8868\u4E86\u652F\u6301\u5E76\u53D1\u8BBF\u95EE\u7684\u96C6\u5408\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u652F\u6301\u591A\u4E2A\u7EBF\u7A0B\u5E76\u53D1\u5199\u5165\u8BBF\u95EE\uFF0C\u8FD9\u4E9B\u5199\u5165\u7EBF\u7A0B\u7684\u6240\u6709\u64CD\u4F5C\u90FD\u662F\u7EBF\u7A0B\u5B89\u5168\u7684\uFF0C\u4F46\u8BFB\u53D6\u64CD\u4F5C\u4E0D\u5FC5\u9501\u5B9A\u3002</p><p>\u4EE5<code>Concurrent</code>\u5F00\u5934\u7684\u96C6\u5408\u7C7B\u91C7\u7528\u4E86\u66F4\u590D\u6742\u7684\u7B97\u6CD5\u6765\u4FDD\u8BC1\u6C38\u8FDC\u4E0D\u4F1A\u9501\u4F4F\u6574\u4E2A\u96C6\u5408\uFF0C\u56E0\u6B64\u5728\u5E76\u53D1\u5199\u5165\u65F6\u6709\u8F83\u597D\u7684\u6027\u80FD\u3002</p><p>\u5F53\u591A\u4E2A\u7EBF\u7A0B\u5171\u4EAB\u8BBF\u95EE\u4E00\u4E2A\u516C\u5171\u96C6\u5408\u65F6\uFF0C<code>ConcurrentLinkedQueue</code>\u662F\u4E00\u4E2A\u6070\u5F53\u7684\u9009\u62E9\u3002<code>ConcurrentLinkedQueue</code>\u4E0D\u5141\u8BB8\u4F7F\u7528 null \u5143\u7D20\u3002</p><p><code>ConcurrentLinkedQueue</code>\u5B9E\u73B0\u4E86\u591A\u7EBF\u7A0B\u7684\u9AD8\u6548\u8BBF\u95EE\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u8BBF\u95EE<code>ConcurrentLinkedQueue</code>\u96C6\u5408\u65F6\u65E0\u987B\u7B49\u5F85\u3002</p><p>\u5728\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C<code>ConcurrentHashMap</code>\u652F\u6301 16 \u4E2A\u7EBF\u7A0B\u5E76\u53D1\u5199\u5165\uFF0C\u5F53\u6709\u8D85\u8FC7 16 \u4E2A\u7EBF\u7A0B\u5E76\u53D1\u5411\u8BE5<code>Map</code>\u4E2D\u5199\u5165\u6570\u636E\u65F6\uFF0C\u53EF\u80FD\u6709\u4E00\u4E9B\u7EBF\u7A0B\u9700\u8981\u7B49\u5F85\u3002</p><p>\u5B9E\u9645\u4E0A\uFF0C\u7A0B\u5E8F\u901A\u8FC7\u8BBE\u7F6E<code>concurrencyLevel</code>\u6784\u9020\u53C2\u6570\uFF08\u9ED8\u8BA4\u503C\u4E3A 16\uFF09\u6765\u652F\u6301\u66F4\u591A\u7684\u5E76\u53D1\u5199\u5165\u7EBF\u7A0B\u3002</p><p>\u4E0E<code>HashMap</code>\u548C\u666E\u901A\u96C6\u5408\u4E0D\u540C\u7684\u662F\uFF0C\u56E0\u4E3A<code>ConcurrentLinkedQueue</code>\u548C<code>ConcurrentHashMap</code>\u652F\u6301\u591A\u7EBF\u7A0B\u5E76\u53D1\u8BBF\u95EE\uFF0C\u6240\u4EE5\u5F53\u4F7F\u7528\u8FED\u4EE3\u5668\u6765\u904D\u5386\u96C6\u5408\u5143\u7D20\u65F6\uFF0C\u8BE5\u8FED\u4EE3\u5668\u53EF\u80FD\u4E0D\u80FD\u53CD\u6620\u51FA\u521B\u5EFA\u8FED\u4EE3\u5668\u4E4B\u540E\u6240\u505A\u7684\u4FEE\u6539\uFF0C\u4F46\u7A0B\u5E8F\u4E0D\u4F1A\u629B\u51FA\u4EFB\u4F55\u5F02\u5E38\u3002</p><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u4F7F\u7528<code>java.util</code>\u5305\u4E0B\u7684<code>Collection</code>\u4F5C\u4E3A\u96C6\u5408\u5BF9\u8C61\u65F6\uFF0C\u5982\u679C\u8BE5\u96C6\u5408\u5BF9\u8C61\u521B\u5EFA\u8FED\u4EE3\u5668\u540E\u96C6\u5408\u5143\u7D20\u53D1\u751F\u6539\u53D8\uFF0C\u5219\u4F1A\u5F15\u53D1<code>ConcurrentModificationException</code>\u5F02\u5E38\u3002</p></div>`,359),c=[e];function o(l,i){return s(),a("div",null,c)}const k=n(t,[["render",o],["__file","18. \u591A\u7EBF\u7A0B.html.vue"]]);export{k as default};
