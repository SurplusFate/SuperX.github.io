<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://SurplusFate.github.io/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html"><meta property="og:site_name" content="ç©º~"><meta property="og:title" content="14. å‡½æ•°å¼ç¼–ç¨‹"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-27T13:40:49.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="2022-08-12T00:00:00.000Z"><meta property="article:modified_time" content="2022-10-27T13:40:49.000Z"><link rel="icon" href="/logo.png"><script type="text/javascript" src="/base.js"></script><link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/c/font_3721935_vu3qq5p7wsp.css"><title>14. å‡½æ•°å¼ç¼–ç¨‹ | ç©º~</title><meta name="description" content="å­¦ä¹ è®°å½•">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.ff301603.css" as="style" /><link rel="stylesheet" href="/assets/style.ff301603.css" />
    <link rel="modulepreload" href="/assets/app.69c911d5.js"><link rel="modulepreload" href="/assets/14. å‡½æ•°å¼ç¼–ç¨‹.html.ffd345c3.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/14. å‡½æ•°å¼ç¼–ç¨‹.html.b3445c56.js"><link rel="prefetch" href="/assets/index.html.0e3547c1.js" as="script" /><link rel="prefetch" href="/assets/1. Dubbo æ¡†æ¶.html.92754ef7.js" as="script" /><link rel="prefetch" href="/assets/2. ç›´è¿æ–¹å¼.html.8374d862.js" as="script" /><link rel="prefetch" href="/assets/3. æ”¹é€  Dubbo é¡¹ç›®.html.a2e95a90.js" as="script" /><link rel="prefetch" href="/assets/4. å¸¸ç”¨æ ‡ç­¾.html.13238c4f.js" as="script" /><link rel="prefetch" href="/assets/5. æ³¨å†Œä¸­å¿ƒ-Zookeeper.html.7645693f.js" as="script" /><link rel="prefetch" href="/assets/6. ä½¿ç”¨ Zookeeper.html.4673d731.js" as="script" /><link rel="prefetch" href="/assets/7. Dubbo çš„é…ç½®.html.a6478fa5.js" as="script" /><link rel="prefetch" href="/assets/8. ç›‘æ§ä¸­å¿ƒ.html.04dee71c.js" as="script" /><link rel="prefetch" href="/assets/index.html.0af87853.js" as="script" /><link rel="prefetch" href="/assets/index.html.4322f7d8.js" as="script" /><link rel="prefetch" href="/assets/1. Javaè¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ.html.52ed6b2f.js" as="script" /><link rel="prefetch" href="/assets/10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰.html.3d3a0fe8.js" as="script" /><link rel="prefetch" href="/assets/11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’.html.cb8fdce5.js" as="script" /><link rel="prefetch" href="/assets/12. Javaé›†åˆ.html.609aab68.js" as="script" /><link rel="prefetch" href="/assets/13. æ³›å‹.html.59a4f62a.js" as="script" /><link rel="prefetch" href="/assets/15. å¼‚å¸¸å¤„ç†.html.7d50f802.js" as="script" /><link rel="prefetch" href="/assets/16. æ³¨è§£.html.3f96b0c6.js" as="script" /><link rel="prefetch" href="/assets/17. IOæµ.html.36453993.js" as="script" /><link rel="prefetch" href="/assets/18. å¤šçº¿ç¨‹.html.13af2cc6.js" as="script" /><link rel="prefetch" href="/assets/19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„.html.075dedb9.js" as="script" /><link rel="prefetch" href="/assets/2. ç¬¬ä¸€ä¸ªjavaç¨‹åº.html.d4c59790.js" as="script" /><link rel="prefetch" href="/assets/3. Javaç¨‹åºçš„åŸºæœ¬è§„åˆ™.html.f3b03ffc.js" as="script" /><link rel="prefetch" href="/assets/4. æ•°æ®ç±»å‹.html.6387e416.js" as="script" /><link rel="prefetch" href="/assets/5. è¿ç®—ç¬¦.html.de055abd.js" as="script" /><link rel="prefetch" href="/assets/6. æµç¨‹æ§åˆ¶.html.1626c798.js" as="script" /><link rel="prefetch" href="/assets/7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰.html.bf0e40e3.js" as="script" /><link rel="prefetch" href="/assets/8. æ•°ç»„.html.114216b4.js" as="script" /><link rel="prefetch" href="/assets/9. æ•°ç»„çš„å¸¸è§ç®—æ³•.html.14bbcf95.js" as="script" /><link rel="prefetch" href="/assets/1. VMware.html.9331a7f9.js" as="script" /><link rel="prefetch" href="/assets/2. æ–‡ä»¶ç®¡ç†.html.c0cea89f.js" as="script" /><link rel="prefetch" href="/assets/3. ç³»ç»Ÿç®¡ç†.html.5ad3b3fa.js" as="script" /><link rel="prefetch" href="/assets/4. ç”¨æˆ·å’Œç»„.html.93a45eef.js" as="script" /><link rel="prefetch" href="/assets/5. è½¯ä»¶åŒ…ç®¡ç†.html.602c3e52.js" as="script" /><link rel="prefetch" href="/assets/6. JavaEEç¯å¢ƒæ­å»º.html.2f4dd371.js" as="script" /><link rel="prefetch" href="/assets/index.html.35f1d957.js" as="script" /><link rel="prefetch" href="/assets/1. åˆ›å»ºä¸ç®¡ç†æ•°æ®åº“.html.be813f81.js" as="script" /><link rel="prefetch" href="/assets/2. åˆ›å»ºä¸ç®¡ç†æ•°æ®è¡¨.html.6aae59ee.js" as="script" /><link rel="prefetch" href="/assets/3. çº¦æŸç®¡ç†.html.937e756f.js" as="script" /><link rel="prefetch" href="/assets/4. æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ.html.9ef4ca43.js" as="script" /><link rel="prefetch" href="/assets/5. è§†å›¾.html.49d2aaca.js" as="script" /><link rel="prefetch" href="/assets/6. ç´¢å¼•.html.9f8e78a0.js" as="script" /><link rel="prefetch" href="/assets/7. äº‹åŠ¡.html.fe23f983.js" as="script" /><link rel="prefetch" href="/assets/1. å‡†å¤‡.html.51d9158d.js" as="script" /><link rel="prefetch" href="/assets/10. æ³¨è§£.html.c5847fbe.js" as="script" /><link rel="prefetch" href="/assets/11. å¤æ‚æŸ¥è¯¢ç¯å¢ƒæ­å»º.html.c4385df3.js" as="script" /><link rel="prefetch" href="/assets/12. åŠ¨æ€ SQL.html.64073815.js" as="script" /><link rel="prefetch" href="/assets/2. ä½¿ç”¨.html.a12f8c82.js" as="script" /><link rel="prefetch" href="/assets/3. ä¸»è¦ç±»ä»‹ç».html.495d676c.js" as="script" /><link rel="prefetch" href="/assets/4. é…ç½®æ–‡ä»¶è¯¦è§£.html.050a881b.js" as="script" /><link rel="prefetch" href="/assets/5. CRUD.html.ac65a8e6.js" as="script" /><link rel="prefetch" href="/assets/6. é…ç½® environments.html.57b86290.js" as="script" /><link rel="prefetch" href="/assets/7. ResultMap ç»“æœé›†æ˜ å°„.html.0daa1932.js" as="script" /><link rel="prefetch" href="/assets/8. æ—¥å¿—.html.e4e6af2a.js" as="script" /><link rel="prefetch" href="/assets/9. åˆ†é¡µ.html.a75ef80a.js" as="script" /><link rel="prefetch" href="/assets/index.html.1378d8f0.js" as="script" /><link rel="prefetch" href="/assets/1. Vue æ ¸å¿ƒ.html.897b9340.js" as="script" /><link rel="prefetch" href="/assets/2. ç»„ä»¶åŒ–ç¼–ç¨‹.html.a40a8955.js" as="script" /><link rel="prefetch" href="/assets/3. è„šæ‰‹æ¶.html.14171007.js" as="script" /><link rel="prefetch" href="/assets/index.html.9580dc3f.js" as="script" /><link rel="prefetch" href="/assets/index.html.936b03cc.js" as="script" /><link rel="prefetch" href="/assets/0. Maven.html.d586cccf.js" as="script" /><link rel="prefetch" href="/assets/1. HTML.html.e03ce7ef.js" as="script" /><link rel="prefetch" href="/assets/10. JavaBean.html.86c77912.js" as="script" /><link rel="prefetch" href="/assets/11. MVC æ¨¡å¼ä¸ä¸‰å±‚æ¶æ„çš„åŒºåˆ«.html.2f01f6f7.js" as="script" /><link rel="prefetch" href="/assets/12. Filter.html.7396bdb6.js" as="script" /><link rel="prefetch" href="/assets/13. ç›‘å¬å™¨.html.d78434f6.js" as="script" /><link rel="prefetch" href="/assets/14. JDBC.html.a045057e.js" as="script" /><link rel="prefetch" href="/assets/15. Ajax.html.1eb3a77a.js" as="script" /><link rel="prefetch" href="/assets/2. CSS.html.1cca7498.js" as="script" /><link rel="prefetch" href="/assets/3. JavaScript.html.7fd2af7e.js" as="script" /><link rel="prefetch" href="/assets/4. jQuery.html.893c1fc3.js" as="script" /><link rel="prefetch" href="/assets/5. xml å’Œ json.html.7403dc03.js" as="script" /><link rel="prefetch" href="/assets/6. tomcat.html.0dca1d95.js" as="script" /><link rel="prefetch" href="/assets/7. Servlet.html.8737c0da.js" as="script" /><link rel="prefetch" href="/assets/8. Cookie å’Œ Session.html.e713076f.js" as="script" /><link rel="prefetch" href="/assets/9. JSP.html.944ec6db.js" as="script" /><link rel="prefetch" href="/assets/Cookie å­˜ JSON.html.474f2ced.js" as="script" /><link rel="prefetch" href="/assets/SSMç¯å¢ƒæ­å»º.html.dd4974c1.js" as="script" /><link rel="prefetch" href="/assets/TypeReference è·å–æ³›å‹å±æ€§.html.c7838b41.js" as="script" /><link rel="prefetch" href="/assets/XXmappingæ³¨è§£.html.3bb9d232.js" as="script" /><link rel="prefetch" href="/assets/index.html.851eb02e.js" as="script" /><link rel="prefetch" href="/assets/åŸæ¥ @Autowired æ³¨è§£è¿˜å¯ä»¥è¿™ä¹ˆç©ï¼Ÿ.html.353c2766.js" as="script" /><link rel="prefetch" href="/assets/å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.64e1c9da.js" as="script" /><link rel="prefetch" href="/assets/è¯·æ±‚è½¬å‘ä¸è¯·æ±‚é‡å®šå‘.html.c6182f64.js" as="script" /><link rel="prefetch" href="/assets/ç”¨æˆ·ä¸­å¿ƒ.html.9e210a1a.js" as="script" /><link rel="prefetch" href="/assets/1. Redis å¸¸è§å‘½ä»¤.html.d3a5c5e7.js" as="script" /><link rel="prefetch" href="/assets/2. Redis çš„ Java å®¢æˆ·ç«¯.html.ade96c62.js" as="script" /><link rel="prefetch" href="/assets/index.html.b2424a5f.js" as="script" /><link rel="prefetch" href="/assets/1. çŸ­ä¿¡ç™»å½•.html.9dd1618b.js" as="script" /><link rel="prefetch" href="/assets/10. ç”¨æˆ·ç­¾åˆ°.html.95710012.js" as="script" /><link rel="prefetch" href="/assets/11. UVç»Ÿè®¡.html.df53bc01.js" as="script" /><link rel="prefetch" href="/assets/2. å•†æˆ·æŸ¥è¯¢ç¼“å­˜.html.8b90cdc9.js" as="script" /><link rel="prefetch" href="/assets/3. ä¼˜æƒ åˆ¸ç§’æ€.html.d2b36f00.js" as="script" /><link rel="prefetch" href="/assets/4. åˆ†å¸ƒå¼é”.html.6eb51135.js" as="script" /><link rel="prefetch" href="/assets/5. ç§’æ€ä¼˜åŒ–.html.e29f9325.js" as="script" /><link rel="prefetch" href="/assets/6. Redis æ¶ˆæ¯é˜Ÿåˆ—.html.58b11081.js" as="script" /><link rel="prefetch" href="/assets/7. è¾¾äººæ¢åº—.html.15283fb3.js" as="script" /><link rel="prefetch" href="/assets/8. å¥½å‹å…³æ³¨.html.ca2bf578.js" as="script" /><link rel="prefetch" href="/assets/9. é™„è¿‘å•†æˆ·.html.1390ee4b.js" as="script" /><link rel="prefetch" href="/assets/1. IOC.html.87228202.js" as="script" /><link rel="prefetch" href="/assets/10. æ•´åˆ Mybatis.html.7d6738ea.js" as="script" /><link rel="prefetch" href="/assets/11. äº‹åŠ¡.html.43bb8b71.js" as="script" /><link rel="prefetch" href="/assets/12.  web é¡¹ç›®ä¸­ä½¿ç”¨å®¹å™¨å¯¹è±¡.html.a8c1a8bf.js" as="script" /><link rel="prefetch" href="/assets/2. Springåˆ›å»ºå¯¹è±¡.html.1360790c.js" as="script" /><link rel="prefetch" href="/assets/3. DI ä¾èµ–æ³¨å…¥.html.d4418271.js" as="script" /><link rel="prefetch" href="/assets/4. Spring é…ç½®.html.0998fb85.js" as="script" /><link rel="prefetch" href="/assets/5. Bean è‡ªåŠ¨è£…é….html.fe499b6e.js" as="script" /><link rel="prefetch" href="/assets/6. ä½¿ç”¨æ³¨è§£å¼€å‘.html.eb5099a7.js" as="script" /><link rel="prefetch" href="/assets/7. ä½¿ç”¨ java æ–¹å¼é…ç½® Spring.html.b042261d.js" as="script" /><link rel="prefetch" href="/assets/8. ä»£ç†æ¨¡å¼.html.c923854c.js" as="script" /><link rel="prefetch" href="/assets/9. Spring AOP.html.fad06f5f.js" as="script" /><link rel="prefetch" href="/assets/1. SpringBoot.html.35e21656.js" as="script" /><link rel="prefetch" href="/assets/2. JavaConfig.html.bee42eb0.js" as="script" /><link rel="prefetch" href="/assets/3. Webç»„ä»¶.html.8abc0ea2.js" as="script" /><link rel="prefetch" href="/assets/4. ORM æ“ä½œ MySQL.html.864a691e.js" as="script" /><link rel="prefetch" href="/assets/5. RESTful.html.dbc1c1f0.js" as="script" /><link rel="prefetch" href="/assets/6. æ€»ç»“.html.0be788f3.js" as="script" /><link rel="prefetch" href="/assets/index.html.c9458b88.js" as="script" /><link rel="prefetch" href="/assets/1. è®¤è¯†å¾®æœåŠ¡.html.68ea8df6.js" as="script" /><link rel="prefetch" href="/assets/10. Centos 7 å®‰è£… Docker.html.77476495.js" as="script" /><link rel="prefetch" href="/assets/2. æœåŠ¡çš„è¿œç¨‹è°ƒç”¨.html.0c18f0c3.js" as="script" /><link rel="prefetch" href="/assets/3. Eureka æ³¨å†Œä¸­å¿ƒ.html.d389c1f9.js" as="script" /><link rel="prefetch" href="/assets/4. Ribbon è´Ÿè½½å‡è¡¡.html.16696ae7.js" as="script" /><link rel="prefetch" href="/assets/5. Nacos æ³¨å†Œä¸­å¿ƒ.html.14f5edfc.js" as="script" /><link rel="prefetch" href="/assets/6. Nacos é…ç½®ç®¡ç†.html.6bf1775b.js" as="script" /><link rel="prefetch" href="/assets/7. Nacos é›†ç¾¤æ­å»º.html.c1e59a93.js" as="script" /><link rel="prefetch" href="/assets/8. Feign è¿œç¨‹è°ƒç”¨.html.12750ff0.js" as="script" /><link rel="prefetch" href="/assets/9. Gateway æœåŠ¡ç½‘å…³.html.9c02b87e.js" as="script" /><link rel="prefetch" href="/assets/1. ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº.html.11d96af4.js" as="script" /><link rel="prefetch" href="/assets/10. æ‹¦æˆªå™¨.html.aef5aec4.js" as="script" /><link rel="prefetch" href="/assets/2. é…ç½®è§†å›¾è§£æå™¨.html.c08e152f.js" as="script" /><link rel="prefetch" href="/assets/3. æ§åˆ¶è¯·æ±‚æ–¹å¼.html.2e3fbab4.js" as="script" /><link rel="prefetch" href="/assets/4. å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°.html.53854fdf.js" as="script" /><link rel="prefetch" href="/assets/5. å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.23b3d636.js" as="script" /><link rel="prefetch" href="/assets/6. url-pattern.html.6ba5e6af.js" as="script" /><link rel="prefetch" href="/assets/7. SSMæ•´åˆ.html.3659fdb0.js" as="script" /><link rel="prefetch" href="/assets/8. è¯·æ±‚é‡å®šå‘å’Œè½¬å‘.html.b0723fca.js" as="script" /><link rel="prefetch" href="/assets/9. å¼‚å¸¸å¤„ç†.html.cc763a84.js" as="script" /><link rel="prefetch" href="/assets/index.html.87086d12.js" as="script" /><link rel="prefetch" href="/assets/404.html.326b14c4.js" as="script" /><link rel="prefetch" href="/assets/index.html.1a3b71b5.js" as="script" /><link rel="prefetch" href="/assets/index.html.1b974156.js" as="script" /><link rel="prefetch" href="/assets/index.html.651691e2.js" as="script" /><link rel="prefetch" href="/assets/index.html.e2606eb8.js" as="script" /><link rel="prefetch" href="/assets/index.html.735c2dab.js" as="script" /><link rel="prefetch" href="/assets/index.html.89fb31a6.js" as="script" /><link rel="prefetch" href="/assets/index.html.bc3d2b77.js" as="script" /><link rel="prefetch" href="/assets/index.html.25880373.js" as="script" /><link rel="prefetch" href="/assets/index.html.4072d6ac.js" as="script" /><link rel="prefetch" href="/assets/index.html.1e23b2a6.js" as="script" /><link rel="prefetch" href="/assets/index.html.7ac11d6e.js" as="script" /><link rel="prefetch" href="/assets/index.html.019f9158.js" as="script" /><link rel="prefetch" href="/assets/index.html.db5e3287.js" as="script" /><link rel="prefetch" href="/assets/index.html.d70ec3fa.js" as="script" /><link rel="prefetch" href="/assets/index.html.4722db9f.js" as="script" /><link rel="prefetch" href="/assets/index.html.940fce9f.js" as="script" /><link rel="prefetch" href="/assets/index.html.b1c40ad6.js" as="script" /><link rel="prefetch" href="/assets/index.html.f0db9e83.js" as="script" /><link rel="prefetch" href="/assets/index.html.c363841e.js" as="script" /><link rel="prefetch" href="/assets/index.html.5dc734dc.js" as="script" /><link rel="prefetch" href="/assets/index.html.565f195f.js" as="script" /><link rel="prefetch" href="/assets/index.html.f7bfce5a.js" as="script" /><link rel="prefetch" href="/assets/1. Dubbo æ¡†æ¶.html.ac214f8d.js" as="script" /><link rel="prefetch" href="/assets/2. ç›´è¿æ–¹å¼.html.4136c01f.js" as="script" /><link rel="prefetch" href="/assets/3. æ”¹é€  Dubbo é¡¹ç›®.html.0b6c2675.js" as="script" /><link rel="prefetch" href="/assets/4. å¸¸ç”¨æ ‡ç­¾.html.fe6e2e27.js" as="script" /><link rel="prefetch" href="/assets/5. æ³¨å†Œä¸­å¿ƒ-Zookeeper.html.576ef3a9.js" as="script" /><link rel="prefetch" href="/assets/6. ä½¿ç”¨ Zookeeper.html.50174a1b.js" as="script" /><link rel="prefetch" href="/assets/7. Dubbo çš„é…ç½®.html.33ca2449.js" as="script" /><link rel="prefetch" href="/assets/8. ç›‘æ§ä¸­å¿ƒ.html.3516ac6e.js" as="script" /><link rel="prefetch" href="/assets/index.html.3a365ab1.js" as="script" /><link rel="prefetch" href="/assets/index.html.acca85f2.js" as="script" /><link rel="prefetch" href="/assets/1. Javaè¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ.html.fdcde645.js" as="script" /><link rel="prefetch" href="/assets/10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰.html.4bf0eb24.js" as="script" /><link rel="prefetch" href="/assets/11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’.html.10f0c363.js" as="script" /><link rel="prefetch" href="/assets/12. Javaé›†åˆ.html.c828ad52.js" as="script" /><link rel="prefetch" href="/assets/13. æ³›å‹.html.2f627977.js" as="script" /><link rel="prefetch" href="/assets/15. å¼‚å¸¸å¤„ç†.html.83d6e750.js" as="script" /><link rel="prefetch" href="/assets/16. æ³¨è§£.html.8882de80.js" as="script" /><link rel="prefetch" href="/assets/17. IOæµ.html.b0e5a732.js" as="script" /><link rel="prefetch" href="/assets/18. å¤šçº¿ç¨‹.html.8dda849c.js" as="script" /><link rel="prefetch" href="/assets/19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„.html.f440ee53.js" as="script" /><link rel="prefetch" href="/assets/2. ç¬¬ä¸€ä¸ªjavaç¨‹åº.html.4d5888b0.js" as="script" /><link rel="prefetch" href="/assets/3. Javaç¨‹åºçš„åŸºæœ¬è§„åˆ™.html.306412d8.js" as="script" /><link rel="prefetch" href="/assets/4. æ•°æ®ç±»å‹.html.edaddd9c.js" as="script" /><link rel="prefetch" href="/assets/5. è¿ç®—ç¬¦.html.d1b31958.js" as="script" /><link rel="prefetch" href="/assets/6. æµç¨‹æ§åˆ¶.html.fd436845.js" as="script" /><link rel="prefetch" href="/assets/7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰.html.3ac82253.js" as="script" /><link rel="prefetch" href="/assets/8. æ•°ç»„.html.2fd69664.js" as="script" /><link rel="prefetch" href="/assets/9. æ•°ç»„çš„å¸¸è§ç®—æ³•.html.1988d7a2.js" as="script" /><link rel="prefetch" href="/assets/1. VMware.html.25ec58cf.js" as="script" /><link rel="prefetch" href="/assets/2. æ–‡ä»¶ç®¡ç†.html.0dbba633.js" as="script" /><link rel="prefetch" href="/assets/3. ç³»ç»Ÿç®¡ç†.html.f19e4d0b.js" as="script" /><link rel="prefetch" href="/assets/4. ç”¨æˆ·å’Œç»„.html.b0b410ec.js" as="script" /><link rel="prefetch" href="/assets/5. è½¯ä»¶åŒ…ç®¡ç†.html.ef35bcc6.js" as="script" /><link rel="prefetch" href="/assets/6. JavaEEç¯å¢ƒæ­å»º.html.b7f43458.js" as="script" /><link rel="prefetch" href="/assets/index.html.c5f52143.js" as="script" /><link rel="prefetch" href="/assets/1. åˆ›å»ºä¸ç®¡ç†æ•°æ®åº“.html.e769ce5c.js" as="script" /><link rel="prefetch" href="/assets/2. åˆ›å»ºä¸ç®¡ç†æ•°æ®è¡¨.html.c2b0a048.js" as="script" /><link rel="prefetch" href="/assets/3. çº¦æŸç®¡ç†.html.62f86be8.js" as="script" /><link rel="prefetch" href="/assets/4. æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ.html.7b261bdf.js" as="script" /><link rel="prefetch" href="/assets/5. è§†å›¾.html.f9e2dc15.js" as="script" /><link rel="prefetch" href="/assets/6. ç´¢å¼•.html.69b1dd8d.js" as="script" /><link rel="prefetch" href="/assets/7. äº‹åŠ¡.html.018e1abb.js" as="script" /><link rel="prefetch" href="/assets/1. å‡†å¤‡.html.ef43d826.js" as="script" /><link rel="prefetch" href="/assets/10. æ³¨è§£.html.a71233f1.js" as="script" /><link rel="prefetch" href="/assets/11. å¤æ‚æŸ¥è¯¢ç¯å¢ƒæ­å»º.html.51216423.js" as="script" /><link rel="prefetch" href="/assets/12. åŠ¨æ€ SQL.html.1d1eb47f.js" as="script" /><link rel="prefetch" href="/assets/2. ä½¿ç”¨.html.fd6a592b.js" as="script" /><link rel="prefetch" href="/assets/3. ä¸»è¦ç±»ä»‹ç».html.272c343f.js" as="script" /><link rel="prefetch" href="/assets/4. é…ç½®æ–‡ä»¶è¯¦è§£.html.738bc186.js" as="script" /><link rel="prefetch" href="/assets/5. CRUD.html.1d816e40.js" as="script" /><link rel="prefetch" href="/assets/6. é…ç½® environments.html.589d469f.js" as="script" /><link rel="prefetch" href="/assets/7. ResultMap ç»“æœé›†æ˜ å°„.html.19139273.js" as="script" /><link rel="prefetch" href="/assets/8. æ—¥å¿—.html.d7c1d7e0.js" as="script" /><link rel="prefetch" href="/assets/9. åˆ†é¡µ.html.b07c60b0.js" as="script" /><link rel="prefetch" href="/assets/index.html.5fc10028.js" as="script" /><link rel="prefetch" href="/assets/1. Vue æ ¸å¿ƒ.html.7721c6cf.js" as="script" /><link rel="prefetch" href="/assets/2. ç»„ä»¶åŒ–ç¼–ç¨‹.html.531b0eb5.js" as="script" /><link rel="prefetch" href="/assets/3. è„šæ‰‹æ¶.html.abf15a9c.js" as="script" /><link rel="prefetch" href="/assets/index.html.522752ee.js" as="script" /><link rel="prefetch" href="/assets/index.html.f252215a.js" as="script" /><link rel="prefetch" href="/assets/0. Maven.html.34ba55b5.js" as="script" /><link rel="prefetch" href="/assets/1. HTML.html.134d99c1.js" as="script" /><link rel="prefetch" href="/assets/10. JavaBean.html.2b4b33a9.js" as="script" /><link rel="prefetch" href="/assets/11. MVC æ¨¡å¼ä¸ä¸‰å±‚æ¶æ„çš„åŒºåˆ«.html.75fee57e.js" as="script" /><link rel="prefetch" href="/assets/12. Filter.html.9b9ec498.js" as="script" /><link rel="prefetch" href="/assets/13. ç›‘å¬å™¨.html.aa810094.js" as="script" /><link rel="prefetch" href="/assets/14. JDBC.html.34c68d47.js" as="script" /><link rel="prefetch" href="/assets/15. Ajax.html.784bbc42.js" as="script" /><link rel="prefetch" href="/assets/2. CSS.html.949944e4.js" as="script" /><link rel="prefetch" href="/assets/3. JavaScript.html.88980faa.js" as="script" /><link rel="prefetch" href="/assets/4. jQuery.html.51945955.js" as="script" /><link rel="prefetch" href="/assets/5. xml å’Œ json.html.b98ea30d.js" as="script" /><link rel="prefetch" href="/assets/6. tomcat.html.cdae1f76.js" as="script" /><link rel="prefetch" href="/assets/7. Servlet.html.6aab1241.js" as="script" /><link rel="prefetch" href="/assets/8. Cookie å’Œ Session.html.4324af14.js" as="script" /><link rel="prefetch" href="/assets/9. JSP.html.58eff6e5.js" as="script" /><link rel="prefetch" href="/assets/Cookie å­˜ JSON.html.dd5b3f81.js" as="script" /><link rel="prefetch" href="/assets/SSMç¯å¢ƒæ­å»º.html.33b88024.js" as="script" /><link rel="prefetch" href="/assets/TypeReference è·å–æ³›å‹å±æ€§.html.e915b511.js" as="script" /><link rel="prefetch" href="/assets/XXmappingæ³¨è§£.html.86da8221.js" as="script" /><link rel="prefetch" href="/assets/index.html.f9f99722.js" as="script" /><link rel="prefetch" href="/assets/åŸæ¥ @Autowired æ³¨è§£è¿˜å¯ä»¥è¿™ä¹ˆç©ï¼Ÿ.html.0ee3a156.js" as="script" /><link rel="prefetch" href="/assets/å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.63ddcc2c.js" as="script" /><link rel="prefetch" href="/assets/è¯·æ±‚è½¬å‘ä¸è¯·æ±‚é‡å®šå‘.html.9b686039.js" as="script" /><link rel="prefetch" href="/assets/ç”¨æˆ·ä¸­å¿ƒ.html.400b8cf1.js" as="script" /><link rel="prefetch" href="/assets/1. Redis å¸¸è§å‘½ä»¤.html.cb274302.js" as="script" /><link rel="prefetch" href="/assets/2. Redis çš„ Java å®¢æˆ·ç«¯.html.5ffa34ff.js" as="script" /><link rel="prefetch" href="/assets/index.html.55da6cf1.js" as="script" /><link rel="prefetch" href="/assets/1. çŸ­ä¿¡ç™»å½•.html.1203debb.js" as="script" /><link rel="prefetch" href="/assets/10. ç”¨æˆ·ç­¾åˆ°.html.0c177bf1.js" as="script" /><link rel="prefetch" href="/assets/11. UVç»Ÿè®¡.html.3a379063.js" as="script" /><link rel="prefetch" href="/assets/2. å•†æˆ·æŸ¥è¯¢ç¼“å­˜.html.f1e37f28.js" as="script" /><link rel="prefetch" href="/assets/3. ä¼˜æƒ åˆ¸ç§’æ€.html.d320e298.js" as="script" /><link rel="prefetch" href="/assets/4. åˆ†å¸ƒå¼é”.html.021cb987.js" as="script" /><link rel="prefetch" href="/assets/5. ç§’æ€ä¼˜åŒ–.html.60280668.js" as="script" /><link rel="prefetch" href="/assets/6. Redis æ¶ˆæ¯é˜Ÿåˆ—.html.c0893e35.js" as="script" /><link rel="prefetch" href="/assets/7. è¾¾äººæ¢åº—.html.def44fc7.js" as="script" /><link rel="prefetch" href="/assets/8. å¥½å‹å…³æ³¨.html.0847ce84.js" as="script" /><link rel="prefetch" href="/assets/9. é™„è¿‘å•†æˆ·.html.e429db41.js" as="script" /><link rel="prefetch" href="/assets/1. IOC.html.3d46827a.js" as="script" /><link rel="prefetch" href="/assets/10. æ•´åˆ Mybatis.html.5411b209.js" as="script" /><link rel="prefetch" href="/assets/11. äº‹åŠ¡.html.d6bbb613.js" as="script" /><link rel="prefetch" href="/assets/12.  web é¡¹ç›®ä¸­ä½¿ç”¨å®¹å™¨å¯¹è±¡.html.8ae3d8f3.js" as="script" /><link rel="prefetch" href="/assets/2. Springåˆ›å»ºå¯¹è±¡.html.379c882c.js" as="script" /><link rel="prefetch" href="/assets/3. DI ä¾èµ–æ³¨å…¥.html.4f2d5a86.js" as="script" /><link rel="prefetch" href="/assets/4. Spring é…ç½®.html.bd00f267.js" as="script" /><link rel="prefetch" href="/assets/5. Bean è‡ªåŠ¨è£…é….html.7b346e01.js" as="script" /><link rel="prefetch" href="/assets/6. ä½¿ç”¨æ³¨è§£å¼€å‘.html.cb106be3.js" as="script" /><link rel="prefetch" href="/assets/7. ä½¿ç”¨ java æ–¹å¼é…ç½® Spring.html.e09412fb.js" as="script" /><link rel="prefetch" href="/assets/8. ä»£ç†æ¨¡å¼.html.fcdf1e39.js" as="script" /><link rel="prefetch" href="/assets/9. Spring AOP.html.7f02dffe.js" as="script" /><link rel="prefetch" href="/assets/1. SpringBoot.html.3c26564c.js" as="script" /><link rel="prefetch" href="/assets/2. JavaConfig.html.9fe2a758.js" as="script" /><link rel="prefetch" href="/assets/3. Webç»„ä»¶.html.5aba1fbc.js" as="script" /><link rel="prefetch" href="/assets/4. ORM æ“ä½œ MySQL.html.b3dbc733.js" as="script" /><link rel="prefetch" href="/assets/5. RESTful.html.965c6940.js" as="script" /><link rel="prefetch" href="/assets/6. æ€»ç»“.html.aaddc831.js" as="script" /><link rel="prefetch" href="/assets/index.html.8f11810c.js" as="script" /><link rel="prefetch" href="/assets/1. è®¤è¯†å¾®æœåŠ¡.html.09d8f7d0.js" as="script" /><link rel="prefetch" href="/assets/10. Centos 7 å®‰è£… Docker.html.366e7db4.js" as="script" /><link rel="prefetch" href="/assets/2. æœåŠ¡çš„è¿œç¨‹è°ƒç”¨.html.62359fa4.js" as="script" /><link rel="prefetch" href="/assets/3. Eureka æ³¨å†Œä¸­å¿ƒ.html.366d4cc8.js" as="script" /><link rel="prefetch" href="/assets/4. Ribbon è´Ÿè½½å‡è¡¡.html.a08033f1.js" as="script" /><link rel="prefetch" href="/assets/5. Nacos æ³¨å†Œä¸­å¿ƒ.html.3d499365.js" as="script" /><link rel="prefetch" href="/assets/6. Nacos é…ç½®ç®¡ç†.html.fafdd7f6.js" as="script" /><link rel="prefetch" href="/assets/7. Nacos é›†ç¾¤æ­å»º.html.186b712e.js" as="script" /><link rel="prefetch" href="/assets/8. Feign è¿œç¨‹è°ƒç”¨.html.f0a79673.js" as="script" /><link rel="prefetch" href="/assets/9. Gateway æœåŠ¡ç½‘å…³.html.c8729b49.js" as="script" /><link rel="prefetch" href="/assets/1. ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº.html.0f3b6dc8.js" as="script" /><link rel="prefetch" href="/assets/10. æ‹¦æˆªå™¨.html.c52b4788.js" as="script" /><link rel="prefetch" href="/assets/2. é…ç½®è§†å›¾è§£æå™¨.html.004c988f.js" as="script" /><link rel="prefetch" href="/assets/3. æ§åˆ¶è¯·æ±‚æ–¹å¼.html.f704dfe4.js" as="script" /><link rel="prefetch" href="/assets/4. å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°.html.ed1207f9.js" as="script" /><link rel="prefetch" href="/assets/5. å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.187eb4f5.js" as="script" /><link rel="prefetch" href="/assets/6. url-pattern.html.6be47fea.js" as="script" /><link rel="prefetch" href="/assets/7. SSMæ•´åˆ.html.a486db99.js" as="script" /><link rel="prefetch" href="/assets/8. è¯·æ±‚é‡å®šå‘å’Œè½¬å‘.html.1cd66135.js" as="script" /><link rel="prefetch" href="/assets/9. å¼‚å¸¸å¤„ç†.html.60fe3a11.js" as="script" /><link rel="prefetch" href="/assets/index.html.2baa3530.js" as="script" /><link rel="prefetch" href="/assets/404.html.f1747c34.js" as="script" /><link rel="prefetch" href="/assets/index.html.06489db0.js" as="script" /><link rel="prefetch" href="/assets/index.html.47142c97.js" as="script" /><link rel="prefetch" href="/assets/index.html.f33db423.js" as="script" /><link rel="prefetch" href="/assets/index.html.b2f89528.js" as="script" /><link rel="prefetch" href="/assets/index.html.0f47a976.js" as="script" /><link rel="prefetch" href="/assets/index.html.cdc037f5.js" as="script" /><link rel="prefetch" href="/assets/index.html.ba05bb2e.js" as="script" /><link rel="prefetch" href="/assets/index.html.d982bd29.js" as="script" /><link rel="prefetch" href="/assets/index.html.1442ed94.js" as="script" /><link rel="prefetch" href="/assets/index.html.addb3ec1.js" as="script" /><link rel="prefetch" href="/assets/index.html.3e068d34.js" as="script" /><link rel="prefetch" href="/assets/index.html.45b86719.js" as="script" /><link rel="prefetch" href="/assets/index.html.4faf26a9.js" as="script" /><link rel="prefetch" href="/assets/index.html.9c5c63fa.js" as="script" /><link rel="prefetch" href="/assets/index.html.6e483b05.js" as="script" /><link rel="prefetch" href="/assets/index.html.997d6222.js" as="script" /><link rel="prefetch" href="/assets/index.html.3afd33ef.js" as="script" /><link rel="prefetch" href="/assets/index.html.6ef0e95c.js" as="script" /><link rel="prefetch" href="/assets/index.html.6577f1c1.js" as="script" /><link rel="prefetch" href="/assets/index.html.98e4facd.js" as="script" /><link rel="prefetch" href="/assets/index.html.2cf56b06.js" as="script" /><link rel="prefetch" href="/assets/photoswipe.esm.09e03fed.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="ç©º~"><!----><span class="site-name hide-in-pad">ç©º~</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/guide/" class="nav-link" aria-label="å­¦ä¹ æŒ‡å—"><span class="icon iconfont icon-creative"></span>å­¦ä¹ æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Java/1.%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" class="nav-link" aria-label="JavaSE"><span class="icon iconfont icon-java"></span>JavaSE<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/MySQL/1.%20%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="nav-link" aria-label="MySQL"><span class="icon iconfont icon-mysql"></span>MySQL<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/javaWeb/0.%20Maven.html" class="nav-link" aria-label="JavaWeb"><span class="icon iconfont icon-Apache"></span>JavaWeb<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Mybatis/" class="nav-link" aria-label="Mybatis"><span class="icon iconfont icon-stack"></span>Mybatis<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Springç³»åˆ—"><span class="title"><span class="icon iconfont icon-stack"></span>Springç³»åˆ—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/Spring/1.%20IOC.html" class="nav-link" aria-label="Spring"><span class="icon iconfont icon-module"></span>Spring<!----></a></li><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/SpringMVC/" class="nav-link" aria-label="SpringMVC"><span class="icon iconfont icon-module"></span>SpringMVC<!----></a></li><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/SpringBoot/" class="nav-link" aria-label="SpringBoot"><span class="icon iconfont icon-module"></span>SpringBoot<!----></a></li><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/SpringCloud/1.%20%E8%AE%A4%E8%AF%86%E5%BE%AE%E6%9C%8D%E5%8A%A1.html" class="nav-link" aria-label="SpringCloud"><span class="icon iconfont icon-module"></span>SpringCloud<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/docs/Git/" class="nav-link" aria-label="Git"><span class="icon iconfont icon-git"></span>Git<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Vue/" class="nav-link" aria-label="Vue"><span class="icon iconfont icon-vue"></span>Vue<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Linux/" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-linux"></span>Linux<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Redis"><span class="title"><span class="icon iconfont icon-redis"></span>Redis</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/docs/Redis/Redis%20%E5%9F%BA%E7%A1%80/" class="nav-link" aria-label="Redis åŸºç¡€"><span class="icon iconfont icon-redis"></span>Redis åŸºç¡€<!----></a></li><li class="dropdown-item"><a href="/docs/Redis/Redis%20%E5%AE%9E%E6%88%98/1.%20%E7%9F%AD%E4%BF%A1%E7%99%BB%E5%BD%95.html" class="nav-link" aria-label="Redis å®æˆ˜"><span class="icon iconfont icon-redis"></span>Redis å®æˆ˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/docs/Dubbo/" class="nav-link" aria-label="Dubbo"><span class="icon iconfont icon-tool"></span>Dubbo<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/%E5%B0%8F%E8%AE%B0/" class="nav-link" aria-label="å°è®°"><span class="icon iconfont icon-write"></span>å°è®°<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/SurplusFate/SurplusFate.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/docs/Java/1.%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" class="nav-link sidebar-link sidebar-page" aria-label="1. Java è¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ"><span class="icon iconfont icon-note"></span>1. Java è¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/2.%20%E7%AC%AC%E4%B8%80%E4%B8%AAjava%E7%A8%8B%E5%BA%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="2. ç¬¬ä¸€ä¸ª java ç¨‹åº"><span class="icon iconfont icon-note"></span>2. ç¬¬ä¸€ä¸ª java ç¨‹åº<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/3.%20Java%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E5%88%99.html" class="nav-link sidebar-link sidebar-page" aria-label="3. Java ç¨‹åºçš„åŸºæœ¬è§„åˆ™"><span class="icon iconfont icon-note"></span>3. Java ç¨‹åºçš„åŸºæœ¬è§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/4.%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="4. æ•°æ®ç±»å‹"><span class="icon iconfont icon-note"></span>4. æ•°æ®ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/5.%20%E8%BF%90%E7%AE%97%E7%AC%A6.html" class="nav-link sidebar-link sidebar-page" aria-label="5. è¿ç®—ç¬¦"><span class="icon iconfont icon-note"></span>5. è¿ç®—ç¬¦<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/6.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="6. æµç¨‹æ§åˆ¶"><span class="icon iconfont icon-note"></span>6. æµç¨‹æ§åˆ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/7.%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8A%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰"><span class="icon iconfont icon-note"></span>7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/8.%20%E6%95%B0%E7%BB%84.html" class="nav-link sidebar-link sidebar-page" aria-label="8. æ•°ç»„"><span class="icon iconfont icon-note"></span>8. æ•°ç»„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/9.%20%E6%95%B0%E7%BB%84%E7%9A%84%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="9. æ•°ç»„çš„å¸¸è§ç®—æ³•"><span class="icon iconfont icon-note"></span>9. æ•°ç»„çš„å¸¸è§ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/10.%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰"><span class="icon iconfont icon-note"></span>10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/11.%20%E4%B8%8E%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E4%BA%A4%E4%BA%92.html" class="nav-link sidebar-link sidebar-page" aria-label="11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’"><span class="icon iconfont icon-note"></span>11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/12.%20Java%E9%9B%86%E5%90%88.html" class="nav-link sidebar-link sidebar-page" aria-label="12. Java é›†åˆ"><span class="icon iconfont icon-note"></span>12. Java é›†åˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/13.%20%E6%B3%9B%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="13. æ³›å‹"><span class="icon iconfont icon-note"></span>13. æ³›å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="14. å‡½æ•°å¼ç¼–ç¨‹"><span class="icon iconfont icon-note"></span>14. å‡½æ•°å¼ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#lambda-è¡¨è¾¾å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Lambda è¡¨è¾¾å¼"><!---->Lambda è¡¨è¾¾å¼<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é€’å½’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é€’å½’"><!---->é€’å½’<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æ–¹æ³•å¼•ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–¹æ³•å¼•ç”¨"><!---->æ–¹æ³•å¼•ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#runnable-æ¥å£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Runnable æ¥å£"><!---->Runnable æ¥å£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨"><!---->æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æ„é€ å‡½æ•°å¼•ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ„é€ å‡½æ•°å¼•ç”¨"><!---->æ„é€ å‡½æ•°å¼•ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å‡½æ•°å¼æ¥å£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å‡½æ•°å¼æ¥å£"><!---->å‡½æ•°å¼æ¥å£<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å¤šå‚æ•°å‡½æ•°å¼æ¥å£" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤šå‚æ•°å‡½æ•°å¼æ¥å£"><!---->å¤šå‚æ•°å‡½æ•°å¼æ¥å£<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°"><!---->ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é«˜é˜¶å‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é«˜é˜¶å‡½æ•°"><!---->é«˜é˜¶å‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é—­åŒ…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é—­åŒ…"><!---->é—­åŒ…<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»"><!---->ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å‡½æ•°ç»„åˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å‡½æ•°ç»„åˆ"><!---->å‡½æ•°ç»„åˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æµå¼ç¼–ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æµå¼ç¼–ç¨‹"><!---->æµå¼ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#åˆ›å»ºæµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºæµ"><!---->åˆ›å»ºæµ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ä¸­é—´æ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸­é—´æ“ä½œ"><!---->ä¸­é—´æ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#optional-ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Optional ç±»"><!---->Optional ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ç»ˆç«¯æ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»ˆç«¯æ“ä½œ"><!---->ç»ˆç«¯æ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/docs/Java/15.%20%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" class="nav-link sidebar-link sidebar-page" aria-label="15. å¼‚å¸¸å¤„ç†"><span class="icon iconfont icon-note"></span>15. å¼‚å¸¸å¤„ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/16.%20%E6%B3%A8%E8%A7%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="16. æ³¨è§£"><span class="icon iconfont icon-note"></span>16. æ³¨è§£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/17.%20IO%E6%B5%81.html" class="nav-link sidebar-link sidebar-page" aria-label="17. IO æµ"><span class="icon iconfont icon-note"></span>17. IO æµ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/18.%20%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="18. å¤šçº¿ç¨‹"><span class="icon iconfont icon-note"></span>18. å¤šçº¿ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/19.%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%8F%8D%E5%B0%84.html" class="nav-link sidebar-link sidebar-page" aria-label="19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„"><span class="icon iconfont icon-note"></span>19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-note"></span>14. å‡½æ•°å¼ç¼–ç¨‹</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://SurplusFate.github.io" target="_blank" rel="noopener noreferrer">ç©º~</a></span><span property="author" content="ç©º~"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´8æœˆ12æ—¥</span><meta property="datePublished" content="2022-08-12T00:00:00.000Z"></span><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category6 clickable" role="navigation">java</span></li></ul><meta property="articleSection" content="java"></span><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 45 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT45M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#lambda-è¡¨è¾¾å¼" class="router-link-active router-link-exact-active toc-link level2">Lambda è¡¨è¾¾å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é€’å½’" class="router-link-active router-link-exact-active toc-link level3">é€’å½’</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æ–¹æ³•å¼•ç”¨" class="router-link-active router-link-exact-active toc-link level2">æ–¹æ³•å¼•ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#runnable-æ¥å£" class="router-link-active router-link-exact-active toc-link level3">Runnable æ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨" class="router-link-active router-link-exact-active toc-link level3">æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æ„é€ å‡½æ•°å¼•ç”¨" class="router-link-active router-link-exact-active toc-link level3">æ„é€ å‡½æ•°å¼•ç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å‡½æ•°å¼æ¥å£" class="router-link-active router-link-exact-active toc-link level2">å‡½æ•°å¼æ¥å£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å¤šå‚æ•°å‡½æ•°å¼æ¥å£" class="router-link-active router-link-exact-active toc-link level3">å¤šå‚æ•°å‡½æ•°å¼æ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°" class="router-link-active router-link-exact-active toc-link level3">ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é«˜é˜¶å‡½æ•°" class="router-link-active router-link-exact-active toc-link level2">é«˜é˜¶å‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#é—­åŒ…" class="router-link-active router-link-exact-active toc-link level2">é—­åŒ…</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»" class="router-link-active router-link-exact-active toc-link level3">ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#å‡½æ•°ç»„åˆ" class="router-link-active router-link-exact-active toc-link level2">å‡½æ•°ç»„åˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#æµå¼ç¼–ç¨‹" class="router-link-active router-link-exact-active toc-link level2">æµå¼ç¼–ç¨‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#åˆ›å»ºæµ" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºæµ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ä¸­é—´æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">ä¸­é—´æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#optional-ç±»" class="router-link-active router-link-exact-active toc-link level3">Optional ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html#ç»ˆç«¯æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">ç»ˆç«¯æ“ä½œ</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="_14-å‡½æ•°å¼ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#_14-å‡½æ•°å¼ç¼–ç¨‹" aria-hidden="true">#</a> 14. å‡½æ•°å¼ç¼–ç¨‹</h1><h2 id="lambda-è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#lambda-è¡¨è¾¾å¼" aria-hidden="true">#</a> Lambda è¡¨è¾¾å¼</h2><blockquote><p>lambdaè¡¨è¾¾å¼ç”¨äºç®€åŒ–åŒ¿åå†…éƒ¨ç±»çš„å®ç°ï¼Œåªä½œç”¨äºæ¥å£ï¼ŒæŠ½è±¡æ–¹æ³•æ— æ³•ä½¿ç”¨ã€‚</p></blockquote><p>Lambda è¡¨è¾¾å¼æ˜¯ä½¿ç”¨<strong>æœ€å°å¯èƒ½</strong>è¯­æ³•ç¼–å†™çš„å‡½æ•°å®šä¹‰ï¼š</p><ol><li>Lambda ä½œç”¨äºå‡½æ•°å¼æ¥å£ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼‰ã€‚</li><li>Lambda è¡¨è¾¾å¼äº§ç”Ÿå‡½æ•°ï¼Œè€Œä¸æ˜¯ç±»ã€‚ è™½ç„¶åœ¨ JVMï¼ˆJava Virtual Machineï¼ŒJava è™šæ‹Ÿæœºï¼‰ä¸Šï¼Œä¸€åˆ‡éƒ½æ˜¯ç±»ï¼Œä½†æ˜¯å¹•åæœ‰å„ç§æ“ä½œæ‰§è¡Œè®© Lambda çœ‹èµ·æ¥åƒå‡½æ•° â€”â€” ä½œä¸ºç¨‹åºå‘˜ï¼Œä½ å¯ä»¥é«˜å…´åœ°å‡è£…å®ƒä»¬â€œå°±æ˜¯å‡½æ•°â€ã€‚</li><li>Lambda è¯­æ³•å°½å¯èƒ½å°‘ï¼Œè¿™æ­£æ˜¯ä¸ºäº†ä½¿ Lambda æ˜“äºç¼–å†™å’Œä½¿ç”¨ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">Description</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">brief</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Body</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">detailed</span><span class="token punctuation">(</span><span class="token class-name">String</span> head<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Multi</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">twoArg</span><span class="token punctuation">(</span><span class="token class-name">String</span> head<span class="token punctuation">,</span> <span class="token class-name">Double</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaExpressions</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token class-name">Body</span> bod <span class="token operator">=</span> h <span class="token operator">-&gt;</span> h <span class="token operator">+</span> <span class="token string">&quot; No Parens!&quot;</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>

  <span class="token keyword">static</span> <span class="token class-name">Body</span> bod2 <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> h <span class="token operator">+</span> <span class="token string">&quot; More details&quot;</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>

  <span class="token keyword">static</span> <span class="token class-name">Description</span> desc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Short info&quot;</span><span class="token punctuation">;</span> <span class="token comment">// [3]</span>

  <span class="token keyword">static</span> <span class="token class-name">Multi</span> mult <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> h <span class="token operator">+</span> n<span class="token punctuation">;</span> <span class="token comment">// [4]</span>

  <span class="token keyword">static</span> <span class="token class-name">Description</span> moreLines <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// [5]</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;moreLines()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;from moreLines()&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bod<span class="token punctuation">.</span><span class="token function">detailed</span><span class="token punctuation">(</span><span class="token string">&quot;Oh!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bod2<span class="token punctuation">.</span><span class="token function">detailed</span><span class="token punctuation">(</span><span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>desc<span class="token punctuation">.</span><span class="token function">brief</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mult<span class="token punctuation">.</span><span class="token function">twoArg</span><span class="token punctuation">(</span><span class="token string">&quot;Pi! &quot;</span><span class="token punctuation">,</span> <span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>moreLines<span class="token punctuation">.</span><span class="token function">brief</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
    Oh! No Parens!
    Hi! More details
    Short info
    Pi! 3.14159
    moreLines()
    from moreLines()
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»»ä½• Lambda è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><ol><li>å‚æ•°<code>(parameters)</code>ï¼Œæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•çš„å®å‚åˆ—è¡¨ã€‚</li><li>æ¥ç€ <code>-&gt;</code>ï¼Œlambda æ“ä½œç¬¦æˆ–ç®­å¤´å‡½æ•°ã€‚</li><li><code>-&gt;</code> ä¹‹åçš„å†…å®¹éƒ½æ˜¯æ–¹æ³•ä½“<code>{ statements; }</code>ã€‚</li></ol><ul><li><strong>[1]</strong> å½“åªç”¨ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¸éœ€è¦æ‹¬å· <code>()</code>ã€‚</li><li><strong>[2]</strong> æ­£å¸¸æƒ…å†µä½¿ç”¨æ‹¬å· <code>()</code> åŒ…è£¹å‚æ•°ã€‚</li><li><strong>[3]</strong> å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ‹¬å· <code>()</code> è¡¨ç¤ºç©ºå‚æ•°åˆ—è¡¨ã€‚</li><li><strong>[4]</strong> å¯¹äºå¤šä¸ªå‚æ•°ï¼Œå°†å®å‚åˆ—è¡¨æ”¾åœ¨æ‹¬å· <code>()</code> ä¸­ã€‚</li></ul><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰ Lambda è¡¨è¾¾å¼æ–¹æ³•ä½“éƒ½æ˜¯å•è¡Œã€‚ è¯¥è¡¨è¾¾å¼çš„ç»“æœè‡ªåŠ¨æˆä¸º Lambda è¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œåœ¨æ­¤å¤„ä½¿ç”¨ <strong>return</strong> å…³é”®å­—æ˜¯éæ³•çš„ã€‚ è¿™æ˜¯ Lambda è¡¨è¾¾å¼ç®€åŒ–ç›¸åº”è¯­æ³•çš„å¦ä¸€ç§æ–¹å¼ã€‚</p><p><strong>[5]</strong> å¦‚æœåœ¨ Lambda è¡¨è¾¾å¼ä¸­ç¡®å®éœ€è¦å¤šè¡Œï¼Œåˆ™å¿…é¡»å°†è¿™äº›è¡Œæ”¾åœ¨èŠ±æ‹¬å·ä¸­ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦ä½¿ç”¨ <strong>return</strong>ã€‚</p><p>Lambda è¡¨è¾¾å¼é€šå¸¸æ¯”<strong>åŒ¿åå†…éƒ¨ç±»</strong>äº§ç”Ÿæ›´æ˜“è¯»çš„ä»£ç ã€‚</p><h3 id="é€’å½’" tabindex="-1"><a class="header-anchor" href="#é€’å½’" aria-hidden="true">#</a> é€’å½’</h3><p>é€’å½’å‡½æ•°æ˜¯ä¸€ä¸ªè‡ªæˆ‘è°ƒç”¨çš„å‡½æ•°ã€‚å¯ä»¥ç¼–å†™é€’å½’çš„ Lambda è¡¨è¾¾å¼ï¼Œä½†éœ€è¦æ³¨æ„ï¼šé€’å½’æ–¹æ³•å¿…é¡»æ˜¯å®ä¾‹å˜é‡æˆ–é™æ€å˜é‡ï¼Œå¦åˆ™ä¼šå‡ºç°ç¼–è¯‘æ—¶é”™è¯¯ã€‚ æˆ‘ä»¬å°†ä¸ºæ¯ä¸ªæ¡ˆä¾‹åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ã€‚</p><p>è¿™ä¸¤ä¸ªç¤ºä¾‹éƒ½éœ€è¦ä¸€ä¸ªæ¥å— <strong>int</strong> å‹å‚æ•°å¹¶ç”Ÿæˆ <strong>int</strong> çš„æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">IntCall</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•´æ•° n çš„é˜¶ä¹˜å°†æ‰€æœ‰å°äºæˆ–ç­‰äº n çš„æ­£æ•´æ•°ç›¸ä¹˜ã€‚ é˜¶ä¹˜å‡½æ•°æ˜¯ä¸€ä¸ªå¸¸è§çš„é€’å½’ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RecursiveFactorial</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">IntCall</span> fact<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fact <span class="token operator">=</span> n <span class="token operator">-&gt;</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> n <span class="token operator">*</span> fact<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fact<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
1
1
2
6
24
120
720
5040
40320
362880
3628800
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>fact</code> æ˜¯ä¸€ä¸ªé™æ€å˜é‡ã€‚ æ³¨æ„ä½¿ç”¨ä¸‰å…ƒ <strong>if-else</strong>ã€‚ é€’å½’å‡½æ•°å°†ä¸€ç›´è°ƒç”¨è‡ªå·±ï¼Œç›´åˆ° <code>i == 0</code>ã€‚æ‰€æœ‰é€’å½’å‡½æ•°éƒ½æœ‰â€œåœæ­¢æ¡ä»¶â€ï¼Œå¦åˆ™å°†æ— é™é€’å½’å¹¶äº§ç”Ÿå¼‚å¸¸ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°† <code>Fibonacci</code> åºåˆ—ç”¨é€’å½’çš„ Lambda è¡¨è¾¾å¼æ¥å®ç°ï¼Œè¿™æ¬¡ä½¿ç”¨å®ä¾‹å˜é‡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RecursiveFibonacci</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntCall</span> fib<span class="token punctuation">;</span>

  <span class="token class-name">RecursiveFibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fib <span class="token operator">=</span> n <span class="token operator">-&gt;</span> n <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span>
               n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span>
               fib<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> fib<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">int</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> fib<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RecursiveFibonacci</span> rf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecursiveFibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rf<span class="token punctuation">.</span><span class="token function">fibonacci</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
0
1
1
2
3
5
8
13
21
34
55
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°† <code>Fibonacci</code> åºåˆ—ä¸­çš„æœ€åä¸¤ä¸ªå…ƒç´ æ±‚å’Œæ¥äº§ç”Ÿä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p><h2 id="æ–¹æ³•å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•å¼•ç”¨" aria-hidden="true">#</a> æ–¹æ³•å¼•ç”¨</h2><p>Java 8 æ–¹æ³•å¼•ç”¨æ²¡æœ‰å†å²åŒ…è¢±ã€‚æ–¹æ³•å¼•ç”¨ç»„æˆï¼š<code>ç±»åæˆ–å¯¹è±¡å :: æ–¹æ³•åç§°</code>ã€‚</p><blockquote><ol><li>ä½¿ç”¨åœºæ™¯ï¼šå½“éœ€è¦ä¼ é€’ç»™ <code>lambda</code> ä½“çš„æ“ä½œï¼Œå·²ç»æœ‰æ»¡è¶³ç»“æ„è¦æ±‚çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ã€‚</li><li><code>lambda</code> è¡¨è¾¾å¼æ˜¯å¯¹åŒ¿åå†…éƒ¨ç±»çš„ç®€å†™ï¼Œæ–¹æ³•å¼•ç”¨å°±æ˜¯æ‹¿å…¶å®ƒç±»çš„æ–¹æ³•æ¥å®ç°è‡ªå·±æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li>è¢«å¼•ç”¨çš„æ–¹æ³•æ‰€åœ¨çš„ç±»ä¸éœ€è¦å®ç°å¯¹åº”çš„å‡½æ•°å¼æ¥å£ã€‚</li></ol></blockquote><p>ç®€å•æ¥è¯´å°±æ˜¯å¯ä»¥å¼•ç”¨å…¶å®ƒç±»ä¸­æ–¹æ³•çš„å…·ä½“å®ç°æ¥å®ä¾‹åŒ–æˆ‘ä»¬éœ€è¦çš„å‡½æ•°å¼æ¥å£ã€‚</p><p>æ–¹æ³•ç»“æ„è¦æ±‚ï¼š</p><blockquote><p>Rï¼šè¿”å›å€¼</p><p>T1ï¼šå‚æ•°1ï¼Œ T2ï¼šå‚æ•°2</p><p>æ–¹æ³•åï¼šæ— éœ€ç›¸åŒ</p><p>æŠ½è±¡æ–¹æ³•ç»“æ„ï¼šR æ–¹æ³•å(T1) å¼•ç”¨æ–¹æ³•ç»“æ„ï¼šR æ–¹æ³•å(T1) æˆ– R T1.æ–¹æ³•å()</p><p>æŠ½è±¡æ–¹æ³•ç»“æ„ï¼šR æ–¹æ³•å(T1 T2) å¼•ç”¨æ–¹æ³•ç»“æ„ï¼šR æ–¹æ³•å(T1ï¼Œ T2) æˆ– R T1.æ–¹æ³•å(T2)</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span>T1<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">T1</span> t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Callable2</span><span class="token generics"><span class="token punctuation">&lt;</span>T1<span class="token punctuation">,</span> T2<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">T1</span> t1<span class="token punctuation">,</span> <span class="token class-name">T2</span> t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Describe</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">show2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Describe2</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show3</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">,</span><span class="token class-name">String</span> msg2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg <span class="token operator">+</span> msg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">show4</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodReferences</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Describe</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Describe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Describe2</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Describe2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c1 <span class="token operator">=</span> d<span class="token operator">::</span><span class="token function">show</span><span class="token punctuation">;</span>
        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Describe</span><span class="token punctuation">&gt;</span></span> c2 <span class="token operator">=</span> <span class="token class-name">Describe</span><span class="token operator">::</span><span class="token function">show2</span><span class="token punctuation">;</span>
        <span class="token class-name">Callable2</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c3 <span class="token operator">=</span> d2<span class="token operator">::</span><span class="token function">show3</span><span class="token punctuation">;</span>
        <span class="token class-name">Callable2</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Describe2</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c4 <span class="token operator">=</span> <span class="token class-name">Describe2</span><span class="token operator">::</span><span class="token function">show4</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘æ˜¯c1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c3<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘æ˜¯c3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;æˆ‘æ˜¯c3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c4<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d2<span class="token punctuation">,</span> <span class="token string">&quot;æˆ‘æ˜¯c4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å½“å¼•ç”¨æ–¹æ³•æ˜¯ <code>static</code> æˆ–è€…ç»“æ„ä¸º T1.æ–¹æ³•å([T2])æ—¶ï¼Œæ–¹æ³•å¼•ç”¨æ˜¯ç”¨ç±»åå¼•ç”¨ã€‚</p><p><code>static</code> ä¸ºæ­£å¸¸çš„é™æ€è°ƒç”¨ã€‚</p><p>ç»“æ„ä¸º T1.æ–¹æ³•å([T2])æ—¶ï¼ˆæœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨ï¼‰ï¼Œç±»åå¼•ç”¨çš„æ„ä¹‰æ˜¯æ˜ç¡®è°ƒç”¨è€…çš„ç±»å‹ã€‚</p></blockquote><h3 id="runnable-æ¥å£" tabindex="-1"><a class="header-anchor" href="#runnable-æ¥å£" aria-hidden="true">#</a> Runnable æ¥å£</h3><p><strong>Runnable</strong> æ¥å£è‡ª 1.0 ç‰ˆä»¥æ¥ä¸€ç›´åœ¨ Java ä¸­ï¼Œå› æ­¤ä¸éœ€è¦å¯¼å…¥ã€‚å®ƒä¹Ÿç¬¦åˆç‰¹æ®Šçš„å•æ–¹æ³•æ¥å£æ ¼å¼ï¼šå®ƒçš„æ–¹æ³• <code>run()</code> ä¸å¸¦å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨ä½œä¸º <strong>Runnable</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Go</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Go::go()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunnableMethodReference</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Anonymous&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lambda&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token class-name">Go</span><span class="token operator">::</span><span class="token function">go</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
Anonymous
lambda
Go::go()
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Thread</strong> å¯¹è±¡å°† <strong>Runnable</strong> ä½œä¸ºå…¶æ„é€ å‡½æ•°å‚æ•°ï¼Œå¹¶å…·æœ‰ä¼šè°ƒç”¨ <code>run()</code> çš„æ–¹æ³• <code>start()</code>ã€‚ æ³¨æ„è¿™é‡Œåªæœ‰<strong>åŒ¿åå†…éƒ¨ç±»</strong>æ‰è¦æ±‚æ˜¾å¼å£°æ˜ <code>run()</code> æ–¹æ³•ã€‚</p><h3 id="æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨" aria-hidden="true">#</a> æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨</h3><p>æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨æ˜¯æŒ‡æ²¡æœ‰å…³è”å¯¹è±¡çš„æ™®é€šï¼ˆéé™æ€ï¼‰æ–¹æ³•ã€‚ ä½¿ç”¨æœªç»‘å®šçš„å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæä¾›å¯¹è±¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">X</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;X::f()&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">MakeString</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">TransformX</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">X</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnboundMethodReference</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// MakeString ms = X::f; // [1]</span>
    <span class="token class-name">TransformX</span> sp <span class="token operator">=</span> <span class="token class-name">X</span><span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">;</span>
    <span class="token class-name">X</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sp<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒç­‰æ•ˆæœ</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
X::f()
X::f()
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è§è¿‡äº†æ–¹æ³•å¼•ç”¨å’Œå¯¹åº”æ¥å£çš„ç­¾åï¼ˆå‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼‰ä¸€è‡´çš„å‡ ä¸ªèµ‹å€¼ä¾‹å­ã€‚</p><p>åœ¨ <strong>[1]</strong> ä¸­ï¼Œæˆ‘ä»¬å°è¯•åŒæ ·çš„åšæ³•ï¼ŒæŠŠ <code>X</code> çš„ <code>f()</code> æ–¹æ³•å¼•ç”¨èµ‹å€¼ç»™ <strong><code>MakeString</code></strong>ã€‚</p><p>ç»“æœå³ä½¿ <code>make()</code> ä¸ <code>f()</code> å…·æœ‰ç›¸åŒçš„ç­¾åï¼Œç¼–è¯‘ä¹Ÿä¼šæŠ¥â€œinvalid method referenceâ€ï¼ˆæ— æ•ˆæ–¹æ³•å¼•ç”¨ï¼‰é”™è¯¯ã€‚</p><p>é—®é¢˜åœ¨äºï¼Œè¿™é‡Œå…¶å®è¿˜éœ€è¦å¦ä¸€ä¸ªéšè—å‚æ•°å‚ä¸ï¼šæˆ‘ä»¬çš„è€æœ‹å‹ <code>this</code>ã€‚</p><p>ä½ ä¸èƒ½åœ¨æ²¡æœ‰ <code>X</code> å¯¹è±¡çš„å‰æä¸‹è°ƒç”¨ <code>f()</code>ã€‚ å› æ­¤ï¼Œ<code>X :: f</code> è¡¨ç¤ºæœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>X</code> å¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬çš„æ¥å£å®é™…ä¸Šéœ€è¦ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œæ­£å¦‚åœ¨ <strong><code>TransformX</code></strong> ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚ å¦‚æœå°† <code>X :: f</code> èµ‹å€¼ç»™ <strong><code>TransformX</code></strong>ï¼Œåœ¨ Java ä¸­æ˜¯å…è®¸çš„ã€‚</p><p><strong>[2]</strong> çš„ç»“æœæœ‰ç‚¹åƒè„‘ç­‹æ€¥è½¬å¼¯ã€‚æˆ‘æ‹¿åˆ°æœªç»‘å®šçš„æ–¹æ³•å¼•ç”¨ï¼Œå¹¶ä¸”è°ƒç”¨å®ƒçš„<code>transform()</code>æ–¹æ³•ï¼Œå°†ä¸€ä¸ª <code>X</code> ç±»çš„å¯¹è±¡ä¼ é€’ç»™å®ƒï¼Œæœ€åä½¿å¾— <code>x.f()</code> ä»¥æŸç§æ–¹å¼è¢«è°ƒç”¨ã€‚Java çŸ¥é“å®ƒå¿…é¡»æ‹¿ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å®é™…å°±æ˜¯<code>this</code> å¯¹è±¡ï¼Œç„¶åå¯¹æ­¤è°ƒç”¨æ–¹æ³•ã€‚</p><p>å¦‚æœä½ çš„æ–¹æ³•æœ‰æ›´å¤šä¸ªå‚æ•°ï¼Œå°±ä»¥ç¬¬ä¸€ä¸ªå‚æ•°æ¥å— <code>this</code> çš„æ¨¡å¼æ¥å¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">This</span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">void</span> <span class="token function">three</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">void</span> <span class="token function">four</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">TwoArgs</span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">call2</span><span class="token punctuation">(</span><span class="token class-name">This</span> athis<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ThreeArgs</span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">call3</span><span class="token punctuation">(</span><span class="token class-name">This</span> athis<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">FourArgs</span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">call4</span><span class="token punctuation">(</span>
    <span class="token class-name">This</span> athis<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultiUnbound</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TwoArgs</span> twoargs <span class="token operator">=</span> <span class="token class-name">This</span><span class="token operator">::</span><span class="token function">two</span><span class="token punctuation">;</span>
    <span class="token class-name">ThreeArgs</span> threeargs <span class="token operator">=</span> <span class="token class-name">This</span><span class="token operator">::</span><span class="token function">three</span><span class="token punctuation">;</span>
    <span class="token class-name">FourArgs</span> fourargs <span class="token operator">=</span> <span class="token class-name">This</span><span class="token operator">::</span><span class="token function">four</span><span class="token punctuation">;</span>
    <span class="token class-name">This</span> athis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">This</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    twoargs<span class="token punctuation">.</span><span class="token function">call2</span><span class="token punctuation">(</span>athis<span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    threeargs<span class="token punctuation">.</span><span class="token function">call3</span><span class="token punctuation">(</span>athis<span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">&quot;Three&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fourargs<span class="token punctuation">.</span><span class="token function">call4</span><span class="token punctuation">(</span>athis<span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token string">&quot;Four&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œæˆ‘å°†ç±»å‘½åä¸º <strong>This</strong>ï¼Œå¹¶å°†å‡½æ•°å¼æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å‘½åä¸º <strong><code>athis</code></strong>ï¼Œä½†ç”Ÿäº§çº§ä»£ç ä¸­åº”è¯¥ä½¿ç”¨å…¶ä»–åå­—ï¼Œä»¥é˜²æ­¢æ··æ·†ã€‚</p><h3 id="æ„é€ å‡½æ•°å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°å¼•ç”¨" aria-hidden="true">#</a> æ„é€ å‡½æ•°å¼•ç”¨</h3><p>ä½ è¿˜å¯ä»¥æ•è·æ„é€ å‡½æ•°çš„å¼•ç”¨ï¼Œç„¶åé€šè¿‡å¼•ç”¨è°ƒç”¨è¯¥æ„é€ å‡½æ•°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// For &quot;unknown&quot;</span>
  <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">&quot;stray&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> nm<span class="token punctuation">)</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> nm<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token class-name">String</span> nm<span class="token punctuation">,</span> <span class="token keyword">int</span> yrs<span class="token punctuation">)</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> nm<span class="token punctuation">;</span> age <span class="token operator">=</span> yrs<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">MakeNoArgs</span> <span class="token punctuation">{</span>
  <span class="token class-name">Dog</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Make1Arg</span> <span class="token punctuation">{</span>
  <span class="token class-name">Dog</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name">String</span> nm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Make2Args</span> <span class="token punctuation">{</span>
  <span class="token class-name">Dog</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name">String</span> nm<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CtorReference</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">MakeNoArgs</span> mna <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">;</span> <span class="token comment">// [1]</span>
    <span class="token class-name">Make1Arg</span> m1a <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">;</span>   <span class="token comment">// [2]</span>
    <span class="token class-name">Make2Args</span> m2a <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">;</span>  <span class="token comment">// [3]</span>

    <span class="token class-name">Dog</span> dn <span class="token operator">=</span> mna<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Dog</span> d1 <span class="token operator">=</span> m1a<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">&quot;Comet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Dog</span> d2 <span class="token operator">=</span> m2a<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string">&quot;Ralph&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Dog</strong> æœ‰ä¸‰ä¸ªæ„é€ å‡½æ•°ï¼Œå‡½æ•°å¼æ¥å£å†…çš„ <code>make()</code> æ–¹æ³•åæ˜ äº†æ„é€ å‡½æ•°å‚æ•°åˆ—è¡¨ï¼ˆ <code>make()</code> æ–¹æ³•åç§°å¯ä»¥ä¸åŒï¼‰ã€‚</p><p><strong>æ³¨æ„</strong>æˆ‘ä»¬å¦‚ä½•å¯¹ <strong>[1]</strong>ï¼Œ<strong>[2]</strong> å’Œ <strong>[3]</strong> ä¸­çš„æ¯ä¸€ä¸ªä½¿ç”¨ <code>Dog :: new</code>ã€‚ è¿™ä¸‰ä¸ªæ„é€ å‡½æ•°åªæœ‰ä¸€ä¸ªç›¸åŒåç§°ï¼š<code>:: new</code>ï¼Œä½†åœ¨æ¯ç§æƒ…å†µä¸‹èµ‹å€¼ç»™ä¸åŒçš„æ¥å£ï¼Œç¼–è¯‘å™¨å¯ä»¥ä»ä¸­çŸ¥é“å…·ä½“ä½¿ç”¨å“ªä¸ªæ„é€ å‡½æ•°ã€‚</p><p>ç¼–è¯‘å™¨çŸ¥é“è°ƒç”¨å‡½æ•°å¼æ–¹æ³•ï¼ˆæœ¬ä¾‹ä¸­ä¸º <code>make()</code>ï¼‰å°±ç›¸å½“äºè°ƒç”¨æ„é€ å‡½æ•°ã€‚</p><h2 id="å‡½æ•°å¼æ¥å£" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å¼æ¥å£" aria-hidden="true">#</a> å‡½æ•°å¼æ¥å£</h2><blockquote><p>å‡½æ•°å¼æ¥å£ (Functional Interface) å°±æ˜¯ä¸€ä¸ªæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•(é»˜è®¤æ–¹æ³•)çš„æ¥å£ã€‚</p><p><code>@FunctionalInterface</code>: æ³¨è§£åªæ˜¯åœ¨ç¼–è¯‘æ—¶èµ·åˆ°å¼ºåˆ¶è§„èŒƒå®šä¹‰çš„ä½œç”¨ï¼ˆå¯çœç•¥ï¼Œçœç•¥åä¸åšè§„èŒƒæ£€æŸ¥ï¼‰ã€‚</p><p>å‡½æ•°å¼æ¥å£å¯ä»¥è¢«éšå¼è½¬æ¢ä¸º lambda è¡¨è¾¾å¼ã€‚</p></blockquote><p>Java 8 å¼•å…¥äº† <code>java.util.function</code> åŒ…ã€‚å®ƒåŒ…å«ä¸€ç»„æ¥å£ï¼Œè¿™äº›æ¥å£æ˜¯ Lambda è¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨çš„ç›®æ ‡ç±»å‹ã€‚ æ¯ä¸ªæ¥å£åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œç§°ä¸º <em>å‡½æ•°å¼æ–¹æ³•</em>ã€‚</p><p>Java å†…ç½®å››å¤§æ ¸å¿ƒæ¥å£ï¼š</p><p><code>Consumer&lt;T&gt; : æ¶ˆè´¹å‹æ¥å£ï¼Œvoid accept (T t);</code>ï¼šè¡¨ç¤ºæ¥å—å‚æ•°å¹¶ä¸”ä¸è¿”å›ç»“æœçš„æ“ä½œã€‚</p><p><code>Supplier&lt;T&gt; : ä¾›ç»™å‹æ¥å£ï¼ŒT get ();</code>ï¼šè¡¨ç¤ºè¿”å›ç±»å‹ <code>T</code> çš„å€¼çš„å‡½æ•°ã€‚</p><p><code>Function&lt;T, R&gt; : å‡½æ•°å‹æ¥å£ï¼ŒR apply (T t);</code>ï¼šè¡¨ç¤ºæ¥å—ç±»å‹ <code>T</code> çš„å‚æ•°å¹¶è¿”å›ç±»å‹ <code>R</code> çš„ç»“æœçš„å‡½æ•°ã€‚</p><p><code>Predicate&lt;T&gt; : æ–­è¨€å‹æ¥å£ï¼Œboolean test (T t);</code>ï¼šè¡¨ç¤ºä¸ºæŒ‡å®šå‚æ•°è¿”å› <code>true</code> æˆ– <code>false</code> çš„å¸ƒå°”å‡½æ•°ã€‚</p><p>ç®€å•ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">filterString</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryString</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>function<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æˆ‘å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¤§å®¶å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°Listä¿¡æ¯</span>
        <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> consumer <span class="token operator">=</span> s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;List:&quot;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿”å›ä¸€ä¸ª String</span>
        <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringSupplier <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Supplier&lt;T&gt; : ä¾›ç»™å‹æ¥å£ï¼ŒT get ();&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringSupplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å« â€œå®¶â€ å­—ç¬¦</span>
        <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> function <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;å®¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">queryString</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> function<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å« â€œä½ â€ å­—ç¬¦</span>
        <span class="token function">filterString</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¼–å†™è‡ªå®šä¹‰æ¥å£æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@FunctionalInterface</code> æ³¨è§£å¼ºåˆ¶æ‰§è¡Œæ­¤â€œå‡½æ•°å¼æ–¹æ³•â€æ¨¡å¼ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">interface</span> <span class="token class-name">Functional</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">goodbye</span><span class="token punctuation">(</span><span class="token class-name">String</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">FunctionalNoAnn</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> <span class="token function">goodbye</span><span class="token punctuation">(</span><span class="token class-name">String</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
@FunctionalInterface
interface NotFunctional {
  String goodbye(String arg);
  String hello(String arg);
}
äº§ç”Ÿé”™è¯¯ä¿¡æ¯:
NotFunctional is not a functional interface
multiple non-overriding abstract methods
found in interface NotFunctional
*/</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionalAnnotation</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">goodbye</span><span class="token punctuation">(</span><span class="token class-name">String</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Goodbye, &quot;</span> <span class="token operator">+</span> arg<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FunctionalAnnotation</span> fa <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">FunctionalAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Functional</span> f <span class="token operator">=</span> fa<span class="token operator">::</span><span class="token function">goodbye</span><span class="token punctuation">;</span>
    <span class="token class-name">FunctionalNoAnn</span> fna <span class="token operator">=</span> fa<span class="token operator">::</span><span class="token function">goodbye</span><span class="token punctuation">;</span>
    <span class="token comment">// Functional fac = fa; // Incompatible</span>
    <span class="token class-name">Functional</span> fl <span class="token operator">=</span> a <span class="token operator">-&gt;</span> <span class="token string">&quot;Goodbye, &quot;</span> <span class="token operator">+</span> a<span class="token punctuation">;</span>
    <span class="token class-name">FunctionalNoAnn</span> fnal <span class="token operator">=</span> a <span class="token operator">-&gt;</span> <span class="token string">&quot;Goodbye, &quot;</span> <span class="token operator">+</span> a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»”ç»†è§‚å¯Ÿåœ¨å®šä¹‰ <code>f</code> å’Œ <code>fna</code> æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚ <code>Functional</code> å’Œ <code>FunctionalNoAnn</code> å£°æ˜äº†æ˜¯æ¥å£ï¼Œä½† <code>FunctionalAnnotation</code> å¹¶æ²¡æœ‰å®ç°å®ƒä»¬ï¼Œå´ä¾æ—§å¯ä»¥è¢«èµ‹å€¼ã€‚è¿™æ˜¯æ·»åŠ åˆ° Java 8 ä¸­çš„ä¸€ç‚¹å°é­”æ³•ï¼šå¦‚æœå°†æ–¹æ³•å¼•ç”¨æˆ– Lambda è¡¨è¾¾å¼èµ‹å€¼ç»™å‡½æ•°å¼æ¥å£ï¼ˆç±»å‹éœ€è¦åŒ¹é…ï¼‰ï¼ŒJava ä¼šé€‚é…ä½ çš„èµ‹å€¼åˆ°ç›®æ ‡æ¥å£ã€‚ ç¼–è¯‘å™¨ä¼šåœ¨åå°æŠŠæ–¹æ³•å¼•ç”¨æˆ– Lambda è¡¨è¾¾å¼åŒ…è£…è¿›å®ç°ç›®æ ‡æ¥å£çš„ç±»çš„å®ä¾‹ä¸­ã€‚</p><p>è™½ç„¶ <code>FunctionalAnnotation</code> ç¡®å®ç¬¦åˆ <code>Functional</code> æ¨¡å‹ï¼Œä½†æ˜¯ Java ä¸å…è®¸æˆ‘ä»¬åƒ<code>fac</code>å®šä¹‰çš„é‚£æ ·ï¼Œå°† <code>FunctionalAnnotation</code> ç›´æ¥èµ‹å€¼ç»™ <code>Functional</code>ï¼Œå› ä¸º <code>FunctionalAnnotation</code> å¹¶æ²¡æœ‰æ˜¾å¼åœ°å»å®ç° <code>Functional</code> æ¥å£ã€‚å”¯ä¸€çš„æƒŠå–œæ˜¯ï¼ŒJava 8 å…è®¸æˆ‘ä»¬å°†å‡½æ•°èµ‹å€¼ç»™æ¥å£ï¼Œè¿™æ ·çš„è¯­æ³•æ›´åŠ ç®€å•æ¼‚äº®ã€‚</p><p><code>java.util.function</code> åŒ…æ—¨åœ¨åˆ›å»ºä¸€ç»„å®Œæ•´çš„ç›®æ ‡æ¥å£ï¼Œä½¿å¾—æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€å†å®šä¹‰è‡ªå·±çš„æ¥å£ã€‚ä¸»è¦å› ä¸ºåŸºæœ¬ç±»å‹çš„å­˜åœ¨ï¼Œå¯¼è‡´é¢„å®šä¹‰çš„æ¥å£æ•°é‡æœ‰å°‘è®¸å¢åŠ ã€‚ å¦‚æœä½ äº†è§£å‘½åæ¨¡å¼ï¼Œé¡¾åæ€ä¹‰å°±èƒ½çŸ¥é“ç‰¹å®šæ¥å£çš„ä½œç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯åŸºæœ¬å‘½åå‡†åˆ™ï¼š</p><ol><li>å¦‚æœåªå¤„ç†å¯¹è±¡è€ŒéåŸºæœ¬ç±»å‹ï¼Œåç§°åˆ™ä¸º <code>Function</code>ï¼Œ<code>Consumer</code>ï¼Œ<code>Predicate</code> ç­‰ã€‚å‚æ•°ç±»å‹é€šè¿‡æ³›å‹æ·»åŠ ã€‚</li><li>å¦‚æœæ¥æ”¶çš„å‚æ•°æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ç”±åç§°çš„ç¬¬ä¸€éƒ¨åˆ†è¡¨ç¤ºï¼Œå¦‚ <code>LongConsumer</code>ï¼Œ<code>DoubleFunction</code>ï¼Œ<code>IntPredicate</code> ç­‰ï¼Œä½†è¿”å›åŸºæœ¬ç±»å‹çš„ <code>Supplier</code> æ¥å£ä¾‹å¤–ã€‚</li><li>å¦‚æœè¿”å›å€¼ä¸ºåŸºæœ¬ç±»å‹ï¼Œåˆ™ç”¨ <code>To</code> è¡¨ç¤ºï¼Œå¦‚ <code>ToLongFunction &lt;T&gt;</code> å’Œ <code>IntToLongFunction</code>ã€‚</li><li>å¦‚æœè¿”å›å€¼ç±»å‹ä¸å‚æ•°ç±»å‹ç›¸åŒï¼Œåˆ™æ˜¯ä¸€ä¸ª <code>Operator</code> ï¼šå•ä¸ªå‚æ•°ä½¿ç”¨ <code>UnaryOperator</code>ï¼Œä¸¤ä¸ªå‚æ•°ä½¿ç”¨ <code>BinaryOperator</code>ã€‚</li><li>å¦‚æœæ¥æ”¶å‚æ•°å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œåˆ™æ˜¯ä¸€ä¸ª <strong>è°“è¯</strong> (<code>Predicate</code>)ã€‚</li><li>å¦‚æœæ¥æ”¶çš„ä¸¤ä¸ªå‚æ•°ç±»å‹ä¸åŒï¼Œåˆ™åç§°ä¸­æœ‰ä¸€ä¸ª <code>Bi</code>ã€‚</li></ol><p><code>java.util.function</code> ä¸­å¸¸è§çš„ç›®æ ‡ç±»å‹ï¼ˆåŒ…æ‹¬ä¾‹å¤–æƒ…å†µï¼‰ï¼š</p><table><thead><tr><th style="text-align:center;"><strong>ç‰¹å¾</strong></th><th style="text-align:center;"><strong>å‡½æ•°å¼æ–¹æ³•å</strong></th><th style="text-align:center;"><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td style="text-align:center;">æ— å‚æ•°ï¼› æ— è¿”å›å€¼</td><td style="text-align:center;"><strong>Runnable</strong> (java.lang) <code>run()</code></td><td style="text-align:center;"><strong>Runnable</strong></td></tr><tr><td style="text-align:center;">æ— å‚æ•°ï¼› è¿”å›ç±»å‹ä»»æ„</td><td style="text-align:center;"><strong>Supplier</strong> <code>get()</code> <code>getAsç±»å‹()</code></td><td style="text-align:center;"><strong>Supplier<code>&lt;T&gt;</code> BooleanSupplier IntSupplier LongSupplier DoubleSupplier</strong></td></tr><tr><td style="text-align:center;">æ— å‚æ•°ï¼› è¿”å›ç±»å‹ä»»æ„</td><td style="text-align:center;"><strong>Callable</strong> (java.util.concurrent) <code>call()</code></td><td style="text-align:center;"><strong>Callable<code>&lt;V&gt;</code></strong></td></tr><tr><td style="text-align:center;">1 å‚æ•°ï¼› æ— è¿”å›å€¼</td><td style="text-align:center;"><strong>Consumer</strong> <code>accept()</code></td><td style="text-align:center;"><strong><code>Consumer&lt;T&gt;</code> IntConsumer LongConsumer DoubleConsumer</strong></td></tr><tr><td style="text-align:center;">2 å‚æ•° <strong>Consumer</strong></td><td style="text-align:center;"><strong>BiConsumer</strong> <code>accept()</code></td><td style="text-align:center;"><strong><code>BiConsumer&lt;T,U&gt;</code></strong></td></tr><tr><td style="text-align:center;">2 å‚æ•° <strong>Consumer</strong>ï¼› ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ å¼•ç”¨ï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯ åŸºæœ¬ç±»å‹</td><td style="text-align:center;"><strong>Obj ç±»å‹ Consumer</strong> <code>accept()</code></td><td style="text-align:center;"><strong><code>ObjIntConsumer&lt;T&gt;</code> <code>ObjLongConsumer&lt;T&gt;</code> <code>ObjDoubleConsumer&lt;T&gt;</code></strong></td></tr><tr><td style="text-align:center;">1 å‚æ•°ï¼› è¿”å›ç±»å‹ä¸åŒ</td><td style="text-align:center;"><strong>Function</strong> <code>apply()</code> <strong>To ç±»å‹</strong> å’Œ <strong>ç±»å‹ To ç±»å‹</strong> <code>applyAsç±»å‹()</code></td><td style="text-align:center;"><strong>Function<code>&lt;T,R&gt;</code> IntFunction<code>&lt;R&gt;</code> <code>LongFunction&lt;R&gt;</code> DoubleFunction<code>&lt;R&gt;</code> ToIntFunction<code>&lt;T&gt;</code> <code>ToLongFunction&lt;T&gt;</code> <code>ToDoubleFunction&lt;T&gt;</code> IntToLongFunction IntToDoubleFunction LongToIntFunction LongToDoubleFunction DoubleToIntFunction DoubleToLongFunction</strong></td></tr><tr><td style="text-align:center;">1 å‚æ•°ï¼› è¿”å›ç±»å‹ç›¸åŒ</td><td style="text-align:center;"><strong>UnaryOperator</strong> <code>apply()</code></td><td style="text-align:center;"><strong><code>UnaryOperator&lt;T&gt;</code> IntUnaryOperator LongUnaryOperator DoubleUnaryOperator</strong></td></tr><tr><td style="text-align:center;">2 å‚æ•°ï¼Œç±»å‹ç›¸åŒï¼› è¿”å›ç±»å‹ç›¸åŒ</td><td style="text-align:center;"><strong>BinaryOperator</strong> <code>apply()</code></td><td style="text-align:center;"><strong><code>BinaryOperator&lt;T&gt;</code> IntBinaryOperator LongBinaryOperator DoubleBinaryOperator</strong></td></tr><tr><td style="text-align:center;">2 å‚æ•°ï¼Œç±»å‹ç›¸åŒ; è¿”å›æ•´å‹</td><td style="text-align:center;">Comparator (java.util) <code>compare()</code></td><td style="text-align:center;"><strong><code>Comparator&lt;T&gt;</code></strong></td></tr><tr><td style="text-align:center;">2 å‚æ•°ï¼› è¿”å›å¸ƒå°”å‹</td><td style="text-align:center;"><strong>Predicate</strong> <code>test()</code></td><td style="text-align:center;"><strong><code>Predicate&lt;T&gt;</code> <code>BiPredicate&lt;T,U&gt;</code> IntPredicate LongPredicate DoublePredicate</strong></td></tr><tr><td style="text-align:center;">å‚æ•°åŸºæœ¬ç±»å‹ï¼› è¿”å›åŸºæœ¬ç±»å‹</td><td style="text-align:center;"><strong>ç±»å‹ To ç±»å‹ Function</strong> <code>applyAsç±»å‹()</code></td><td style="text-align:center;"><strong>IntToLongFunction IntToDoubleFunction LongToIntFunction LongToDoubleFunction DoubleToIntFunction DoubleToLongFunction</strong></td></tr><tr><td style="text-align:center;">2 å‚æ•°ï¼› ç±»å‹ä¸åŒ</td><td style="text-align:center;"><strong>Bi æ“ä½œ</strong> (ä¸åŒæ–¹æ³•å)</td><td style="text-align:center;"><strong><code>BiFunction&lt;T,U,R&gt;</code> <code>BiConsumer&lt;T,U&gt;</code> <code>BiPredicate&lt;T,U&gt;</code> <code>ToIntBiFunction&lt;T,U&gt;</code> <code>ToLongBiFunction&lt;T,U&gt;</code> <code>ToDoubleBiFunction&lt;T&gt;</code></strong></td></tr></tbody></table><p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨åˆ›å»º <code>java.util.function</code> æ—¶ï¼Œè®¾è®¡è€…ä»¬åšå‡ºäº†ä¸€äº›é€‰æ‹©ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ <code>IntComparator</code>ï¼Œ<code>LongComparator</code> å’Œ <code>DoubleComparator</code> å‘¢ï¼Ÿ</p><p>æœ‰ <code>BooleanSupplier</code> å´æ²¡æœ‰å…¶ä»–è¡¨ç¤º <strong>Boolean</strong> çš„æ¥å£ï¼›æœ‰é€šç”¨çš„ <code>BiConsumer</code> å´æ²¡æœ‰ç”¨äº <strong>int</strong>ï¼Œ<strong>long</strong> å’Œ <strong>double</strong> çš„ <code>BiConsumers</code> å˜ä½“ï¼ˆæˆ‘ç†è§£ä»–ä»¬ä¸ºä»€ä¹ˆæ”¾å¼ƒè¿™äº›æ¥å£ï¼‰ã€‚è¿™åˆ°åº•æ˜¯ç–å¿½è¿˜æ˜¯æœ‰äººè®¤ä¸ºå…¶ä»–ç»„åˆä½¿ç”¨å¾—å¾ˆå°‘å‘¢ï¼ˆä»–ä»¬æ˜¯å¦‚ä½•å¾—å‡ºè¿™ä¸ªç»“è®ºçš„ï¼‰ï¼Ÿ</p><p>ä½ è¿˜å¯ä»¥çœ‹åˆ°åŸºæœ¬ç±»å‹ç»™ Java æ·»åŠ äº†å¤šå°‘å¤æ‚æ€§ã€‚è¯¥è¯­è¨€çš„ç¬¬ä¸€ç‰ˆä¸­å°±åŒ…å«äº†åŸºæœ¬ç±»å‹ï¼ŒåŸå› æ˜¯è€ƒè™‘æ•ˆç‡é—®é¢˜ï¼ˆè¯¥é—®é¢˜å¾ˆå¿«å°±ç¼“è§£äº†ï¼‰ã€‚ç°åœ¨ï¼Œåœ¨è¯­è¨€çš„ç”Ÿå‘½å‘¨æœŸé‡Œï¼Œæˆ‘ä»¬ä¸€ç›´å¿å—è¯­è¨€è®¾è®¡çš„ç³Ÿç³•é€‰æ‹©æ‰€å¸¦æ¥çš„å½±å“ã€‚</p><p>ä¸‹é¢æšä¸¾äº†åŸºäº Lambda è¡¨è¾¾å¼çš„æ‰€æœ‰ä¸åŒ <strong>Function</strong> å˜ä½“çš„ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bar</span> <span class="token punctuation">{</span>
  <span class="token class-name">Foo</span> f<span class="token punctuation">;</span>
  <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token class-name">Foo</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>f <span class="token operator">=</span> f<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">IBaz</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token class-name">IBaz</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">LBaz</span> <span class="token punctuation">{</span>
  <span class="token keyword">long</span> l<span class="token punctuation">;</span>
  <span class="token class-name">LBaz</span><span class="token punctuation">(</span><span class="token keyword">long</span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>l <span class="token operator">=</span> l<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DBaz</span> <span class="token punctuation">{</span>
  <span class="token keyword">double</span> d<span class="token punctuation">;</span>
  <span class="token class-name">DBaz</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>d <span class="token operator">=</span> d<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionVariants</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Foo</span><span class="token punctuation">,</span><span class="token class-name">Bar</span><span class="token punctuation">&gt;</span></span> f1 <span class="token operator">=</span> f <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">IntFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IBaz</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> i <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">IBaz</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">LongFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LBaz</span><span class="token punctuation">&gt;</span></span> f3 <span class="token operator">=</span> l <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">LBaz</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">DoubleFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DBaz</span><span class="token punctuation">&gt;</span></span> f4 <span class="token operator">=</span> d <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">DBaz</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">ToIntFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IBaz</span><span class="token punctuation">&gt;</span></span> f5 <span class="token operator">=</span> ib <span class="token operator">-&gt;</span> ib<span class="token punctuation">.</span>i<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">ToLongFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LBaz</span><span class="token punctuation">&gt;</span></span> f6 <span class="token operator">=</span> lb <span class="token operator">-&gt;</span> lb<span class="token punctuation">.</span>l<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">ToDoubleFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DBaz</span><span class="token punctuation">&gt;</span></span> f7 <span class="token operator">=</span> db <span class="token operator">-&gt;</span> db<span class="token punctuation">.</span>d<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">IntToLongFunction</span> f8 <span class="token operator">=</span> i <span class="token operator">-&gt;</span> i<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">IntToDoubleFunction</span> f9 <span class="token operator">=</span> i <span class="token operator">-&gt;</span> i<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">LongToIntFunction</span> f10 <span class="token operator">=</span> l <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>l<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">LongToDoubleFunction</span> f11 <span class="token operator">=</span> l <span class="token operator">-&gt;</span> l<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">DoubleToIntFunction</span> f12 <span class="token operator">=</span> d <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>d<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">DoubleToLongFunction</span> f13 <span class="token operator">=</span> d <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>d<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Bar</span> b <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IBaz</span> ib <span class="token operator">=</span> f2<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LBaz</span> lb <span class="token operator">=</span> f3<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DBaz</span> db <span class="token operator">=</span> f4<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> f5<span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span>ib<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> l <span class="token operator">=</span> f6<span class="token punctuation">.</span><span class="token function">applyAsLong</span><span class="token punctuation">(</span>lb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> d <span class="token operator">=</span> f7<span class="token punctuation">.</span><span class="token function">applyAsDouble</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
    l <span class="token operator">=</span> f8<span class="token punctuation">.</span><span class="token function">applyAsLong</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d <span class="token operator">=</span> f9<span class="token punctuation">.</span><span class="token function">applyAsDouble</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> f10<span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    d <span class="token operator">=</span> f11<span class="token punctuation">.</span><span class="token function">applyAsDouble</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> f12<span class="token punctuation">.</span><span class="token function">applyAsInt</span><span class="token punctuation">(</span><span class="token number">13.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    l <span class="token operator">=</span> f13<span class="token punctuation">.</span><span class="token function">applyAsLong</span><span class="token punctuation">(</span><span class="token number">13.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº› Lambda è¡¨è¾¾å¼å°è¯•ç”Ÿæˆé€‚åˆå‡½æ•°ç­¾åçš„æœ€ç®€ä»£ç ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹æœ‰å¿…è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥æˆªæ–­é”™è¯¯ã€‚</p><p><code>main()</code>ä¸­çš„æ¯ä¸ªæµ‹è¯•éƒ½æ˜¾ç¤ºäº† <code>Function</code> æ¥å£ä¸­ä¸åŒç±»å‹çš„ <code>apply()</code> æ–¹æ³•ã€‚ æ¯ä¸ªéƒ½äº§ç”Ÿä¸€ä¸ªä¸å…¶å…³è”çš„ Lambda è¡¨è¾¾å¼çš„è°ƒç”¨ã€‚</p><p>æ–¹æ³•å¼•ç”¨æœ‰è‡ªå·±çš„å°é­”æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">In1</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">In2</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodConversion</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">In1</span> i1<span class="token punctuation">,</span> <span class="token class-name">In2</span> i2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;accept()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">someOtherName</span><span class="token punctuation">(</span><span class="token class-name">In1</span> i1<span class="token punctuation">,</span> <span class="token class-name">In2</span> i2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;someOtherName()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">In1</span><span class="token punctuation">,</span><span class="token class-name">In2</span><span class="token punctuation">&gt;</span></span> bic<span class="token punctuation">;</span>

    bic <span class="token operator">=</span> <span class="token class-name">MethodConversion</span><span class="token operator">::</span><span class="token function">accept</span><span class="token punctuation">;</span>
    bic<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">In1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">In2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    bic <span class="token operator">=</span> <span class="token class-name">MethodConversion</span><span class="token operator">::</span><span class="token function">someOtherName</span><span class="token punctuation">;</span>
    <span class="token comment">// bic.someOtherName(new In1(), new In2()); // Nope</span>
    bic<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">In1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">In2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
accept()
someOtherName()
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹ <code>BiConsumer</code> çš„æ–‡æ¡£ï¼Œä½ ä¼šçœ‹åˆ°å®ƒçš„å‡½æ•°å¼æ–¹æ³•ä¸º <code>accept()</code> ã€‚ çš„ç¡®ï¼Œå¦‚æœæˆ‘ä»¬å°†æ–¹æ³•å‘½åä¸º <code>accept()</code>ï¼Œå®ƒå°±å¯ä»¥ä½œä¸ºæ–¹æ³•å¼•ç”¨ã€‚ ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ç”¨ä¸åŒçš„åç§°ï¼Œæ¯”å¦‚ <code>someOtherName()</code>ã€‚åªè¦å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ä¸ <code>BiConsumer</code> çš„ <code>accept()</code> ç›¸åŒå³å¯ã€‚</p><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨å‡½æ•°æ¥å£æ—¶ï¼Œåç§°æ— å…³ç´§è¦â€”â€”åªè¦å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ç›¸åŒã€‚ Java ä¼šå°†ä½ çš„æ–¹æ³•æ˜ å°„åˆ°æ¥å£æ–¹æ³•ã€‚ è¦è°ƒç”¨æ–¹æ³•ï¼Œå¯ä»¥è°ƒç”¨æ¥å£çš„å‡½æ•°å¼æ–¹æ³•åï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º <code>accept()</code>ï¼‰ï¼Œè€Œä¸æ˜¯ä½ çš„æ–¹æ³•åã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå°†æ–¹æ³•å¼•ç”¨åº”ç”¨äºåŸºäºç±»çš„å‡½æ•°å¼æ¥å£ï¼ˆå³é‚£äº›ä¸åŒ…å«åŸºæœ¬ç±»å‹çš„å‡½æ•°å¼æ¥å£ï¼‰ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘åˆ›å»ºäº†é€‚åˆå‡½æ•°å¼æ–¹æ³•ç­¾åçš„æœ€ç®€å•çš„æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// functional/ClassFunctionals.java</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AA</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">BB</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">CC</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassFunctionals</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">AA</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa1<span class="token punctuation">,</span> <span class="token class-name">AA</span> aa2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">,</span> <span class="token class-name">BB</span> bb<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">CC</span> <span class="token function">f5</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">CC</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">,</span> <span class="token class-name">BB</span> bb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">f7</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">f8</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">,</span> <span class="token class-name">BB</span> bb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">AA</span> <span class="token function">f9</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">AA</span> <span class="token function">f10</span><span class="token punctuation">(</span><span class="token class-name">AA</span> aa1<span class="token punctuation">,</span> <span class="token class-name">AA</span> aa2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f1</span><span class="token punctuation">;</span>
    s<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f2</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> cons <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f3</span><span class="token punctuation">;</span>
    cons<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">,</span>BB<span class="token punctuation">&gt;</span></span> bicons <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f4</span><span class="token punctuation">;</span>
    bicons<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">,</span>CC<span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f5</span><span class="token punctuation">;</span>
    <span class="token class-name">CC</span> cc <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiFunction</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">,</span>BB<span class="token punctuation">,</span>CC<span class="token punctuation">&gt;</span></span> bif <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f6</span><span class="token punctuation">;</span>
    cc <span class="token operator">=</span> bif<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f7</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">,</span>BB<span class="token punctuation">&gt;</span></span> bip <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f8</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> bip<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UnaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> uo <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f9</span><span class="token punctuation">;</span>
    <span class="token class-name">AA</span> aa <span class="token operator">=</span> uo<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span>AA<span class="token punctuation">&gt;</span></span> bo <span class="token operator">=</span> <span class="token class-name">ClassFunctionals</span><span class="token operator">::</span><span class="token function">f10</span><span class="token punctuation">;</span>
    aa <span class="token operator">=</span> bo<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">AA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·<strong>æ³¨æ„</strong>ï¼Œæ¯ä¸ªæ–¹æ³•åç§°éƒ½æ˜¯éšæ„çš„ï¼ˆå¦‚ <code>f1()</code>ï¼Œ<code>f2()</code>ç­‰ï¼‰ã€‚æ­£å¦‚ä½ åˆšæ‰çœ‹åˆ°çš„ï¼Œä¸€æ—¦å°†æ–¹æ³•å¼•ç”¨èµ‹å€¼ç»™å‡½æ•°æ¥å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ä¸è¯¥æ¥å£å…³è”çš„å‡½æ•°æ–¹æ³•ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ä¸º <code>get()</code>ã€<code>compare()</code>ã€<code>accept()</code>ã€<code>apply()</code> å’Œ <code>test()</code>ã€‚</p><h3 id="å¤šå‚æ•°å‡½æ•°å¼æ¥å£" tabindex="-1"><a class="header-anchor" href="#å¤šå‚æ•°å‡½æ•°å¼æ¥å£" aria-hidden="true">#</a> å¤šå‚æ•°å‡½æ•°å¼æ¥å£</h3><p><code>java.util.functional</code> ä¸­çš„æ¥å£æ˜¯æœ‰é™çš„ã€‚æ¯”å¦‚æœ‰ <code>BiFunction</code>ï¼Œä½†ä¹Ÿä»…æ­¤è€Œå·²ã€‚ å¦‚æœéœ€è¦ä¸‰å‚æ•°å‡½æ•°çš„æ¥å£æ€ä¹ˆåŠï¼Ÿ å…¶å®è¿™äº›æ¥å£éå¸¸ç®€å•ï¼Œå¾ˆå®¹æ˜“æŸ¥çœ‹ Java åº“æºä»£ç å¹¶è‡ªè¡Œåˆ›å»ºã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TriFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">U</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">R</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">,</span> <span class="token class-name">U</span> u<span class="token punctuation">,</span> <span class="token class-name">V</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€å•æµ‹è¯•ï¼ŒéªŒè¯å®ƒæ˜¯å¦æœ‰æ•ˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TriFunctionTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">long</span> l<span class="token punctuation">,</span> <span class="token keyword">double</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">99</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TriFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> tf <span class="token operator">=</span>
      <span class="token class-name">TriFunctionTest</span><span class="token operator">::</span><span class="token function">f</span><span class="token punctuation">;</span>
    tf <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> l<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">12</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬åŒæ—¶æµ‹è¯•äº†æ–¹æ³•å¼•ç”¨å’Œ Lambda è¡¨è¾¾å¼ã€‚</p><h3 id="ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°" aria-hidden="true">#</a> ç¼ºå°‘åŸºæœ¬ç±»å‹çš„å‡½æ•°</h3><p>è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹ <code>BiConsumer</code>ï¼Œçœ‹çœ‹æˆ‘ä»¬å°†å¦‚ä½•åˆ›å»ºå„ç§ç¼ºå¤±çš„é¢„å®šä¹‰ç»„åˆï¼Œæ¶‰åŠ <strong>int</strong>ï¼Œ<strong>long</strong> å’Œ <strong>double</strong> ï¼ˆåŸºæœ¬ç±»å‹ï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BiConsumerPermutations</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> bicid <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %f%n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> bicdi <span class="token operator">=</span> <span class="token punctuation">(</span>d<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %f%n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">BiConsumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> bicil <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> l<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %d%n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> l<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bicid<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">11.34</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bicdi<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token number">22.45</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bicil<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
47, 11.340000
92, 22.450000
1, 11
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œä½¿ç”¨ <code>System.out.format()</code> æ¥æ˜¾ç¤ºã€‚å®ƒç±»ä¼¼äº <code>System.out.println()</code> ä½†æä¾›äº†æ›´å¤šçš„æ˜¾ç¤ºé€‰é¡¹ã€‚ è¿™é‡Œï¼Œ<code>%f</code> è¡¨ç¤ºæˆ‘å°† <code>n</code> ä½œä¸ºæµ®ç‚¹å€¼ç»™å‡ºï¼Œ<code>%d</code> è¡¨ç¤º <code>n</code> æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚ è¿™å…¶ä¸­å¯ä»¥åŒ…å«ç©ºæ ¼ï¼Œè¾“å…¥ <code>%n</code> ä¼šæ¢è¡Œ â€” å½“ç„¶ä½¿ç”¨ä¼ ç»Ÿçš„ <code>\n</code> ä¹Ÿèƒ½æ¢è¡Œï¼Œä½† <code>%n</code> æ˜¯è‡ªåŠ¨è·¨å¹³å°çš„ï¼Œè¿™æ˜¯ä½¿ç”¨ <code>format()</code> çš„å¦ä¸€ä¸ªåŸå› ã€‚</p><p>ä¸Šä¾‹åªæ˜¯ç®€å•ä½¿ç”¨äº†åˆé€‚çš„åŒ…è£…ç±»å‹ï¼Œè€Œè£…ç®±å’Œæ‹†ç®±è´Ÿè´£å®ƒä¸åŸºæœ¬ç±»å‹ä¹‹é—´çš„æ¥å›è½¬æ¢ã€‚ åˆæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŒ…è£…ç±»å‹å’Œ<code>Function</code>ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸å»ç”¨å„ç§é’ˆå¯¹åŸºæœ¬ç±»å‹çš„é¢„å®šä¹‰æ¥å£ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionWithWrapped</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> fid <span class="token operator">=</span> i <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>i<span class="token punctuation">;</span>
    <span class="token class-name">IntToDoubleFunction</span> fid2 <span class="token operator">=</span> i <span class="token operator">-&gt;</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ²¡æœ‰å¼ºåˆ¶è½¬æ¢ï¼Œåˆ™ä¼šæ”¶åˆ°é”™è¯¯æ¶ˆæ¯ï¼šâ€œInteger cannot be converted to Doubleâ€ï¼ˆ<strong>Integer</strong> æ— æ³•è½¬æ¢ä¸º <strong>Double</strong>ï¼‰ï¼Œè€Œä½¿ç”¨ <strong><code>IntToDoubleFunction</code></strong> å°±æ²¡æœ‰æ­¤ç±»é—®é¢˜ã€‚ <strong><code>IntToDoubleFunction</code></strong> æ¥å£çš„æºä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IntToDoubleFunction</span> <span class="token punctuation">{</span>
  <span class="token keyword">double</span> <span class="token function">applyAsDouble</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å†™ <code>Function &lt;Integerï¼ŒDouble&gt;</code> å¹¶äº§ç”Ÿæ­£å¸¸çš„ç»“æœï¼Œæ‰€ä»¥ç”¨åŸºæœ¬ç±»å‹ï¼ˆ<code>IntToDoubleFunction</code>ï¼‰çš„å”¯ä¸€ç†ç”±æ˜¯å¯ä»¥é¿å…ä¼ é€’å‚æ•°å’Œè¿”å›ç»“æœè¿‡ç¨‹ä¸­çš„è‡ªåŠ¨æ‹†è£…ç®±ï¼Œè¿›è€Œæå‡æ€§èƒ½ã€‚</p><p>ä¼¼ä¹æ˜¯è€ƒè™‘åˆ°ä½¿ç”¨é¢‘ç‡ï¼ŒæŸäº›å‡½æ•°ç±»å‹å¹¶æ²¡æœ‰é¢„å®šä¹‰ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœå› ä¸ºç¼ºå°‘é’ˆå¯¹åŸºæœ¬ç±»å‹çš„å‡½æ•°å¼æ¥å£é€ æˆäº†æ€§èƒ½é—®é¢˜ï¼Œä½ å¯ä»¥è½»æ¾ç¼–å†™è‡ªå·±çš„æ¥å£ï¼ˆ å‚è€ƒ Java æºä»£ç ï¼‰â€”â€”å°½ç®¡è¿™é‡Œå‡ºç°æ€§èƒ½ç“¶é¢ˆçš„å¯èƒ½æ€§ä¸å¤§ã€‚</p><h2 id="é«˜é˜¶å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶å‡½æ•°" aria-hidden="true">#</a> é«˜é˜¶å‡½æ•°</h2><p>è¿™ä¸ªåå­—å¯èƒ½å¬èµ·æ¥ä»¤äººç”Ÿç•ï¼Œä½†æ˜¯ï¼š<a href="https://en.wikipedia.org/wiki/Higher-order_function" target="_blank" rel="noopener noreferrer">é«˜é˜¶å‡½æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ˆHigher-order Functionï¼‰åªæ˜¯ä¸€ä¸ªæ¶ˆè´¹æˆ–äº§ç”Ÿå‡½æ•°çš„å‡½æ•°ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•äº§ç”Ÿä¸€ä¸ªå‡½æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span>
<span class="token class-name">FuncSS</span> <span class="token keyword">extends</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// [1]</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProduceFunction</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">FuncSS</span> <span class="token function">produce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">FuncSS</span> f <span class="token operator">=</span> <span class="token function">produce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">&quot;YELLING&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
yelling
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>produce()</code> æ˜¯é«˜é˜¶å‡½æ•°ã€‚</p><p><strong>[1]</strong> ä½¿ç”¨ç»§æ‰¿ï¼Œå¯ä»¥è½»æ¾åœ°ä¸ºä¸“ç”¨æ¥å£åˆ›å»ºåˆ«åã€‚</p><p><strong>[2]</strong> ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨æ–¹æ³•ä¸­åˆ›å»ºå’Œè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</p><p>è¦æ¶ˆè´¹ä¸€ä¸ªå‡½æ•°ï¼Œæ¶ˆè´¹å‡½æ•°éœ€è¦åœ¨å‚æ•°åˆ—è¡¨æ­£ç¡®åœ°æè¿°å‡½æ•°ç±»å‹ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">One</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Two</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsumeFunction</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Two</span> <span class="token function">consume</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">One</span><span class="token punctuation">,</span><span class="token class-name">Two</span><span class="token punctuation">&gt;</span></span> onetwo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> onetwo<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">One</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Two</span> two <span class="token operator">=</span> <span class="token function">consume</span><span class="token punctuation">(</span>one <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Two</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“åŸºäºæ¶ˆè´¹å‡½æ•°ç”Ÿæˆæ–°å‡½æ•°æ—¶ï¼Œäº‹æƒ…å°±å˜å¾—ç›¸å½“æœ‰è¶£äº†ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">I</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;I&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">O</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransformFunction</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">I</span><span class="token punctuation">,</span><span class="token class-name">O</span><span class="token punctuation">&gt;</span></span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">I</span><span class="token punctuation">,</span><span class="token class-name">O</span><span class="token punctuation">&gt;</span></span> in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> in<span class="token punctuation">.</span><span class="token function">andThen</span><span class="token punctuation">(</span>o <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> o<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">I</span><span class="token punctuation">,</span><span class="token class-name">O</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> <span class="token function">transform</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">O</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">O</span> o <span class="token operator">=</span> f2<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">I</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
I
O
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œ<code>transform()</code> ç”Ÿæˆä¸€ä¸ªä¸ä¼ å…¥çš„å‡½æ•°å…·æœ‰ç›¸åŒç­¾åçš„å‡½æ•°ï¼Œä½†æ˜¯ä½ å¯ä»¥ç”Ÿæˆä»»ä½•ä½ æƒ³è¦çš„ç±»å‹ã€‚</p><p>è¿™é‡Œä½¿ç”¨åˆ°äº† <code>Function</code> æ¥å£ä¸­åä¸º <code>andThen()</code> çš„é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸“é—¨ç”¨äºæ“ä½œå‡½æ•°ã€‚ é¡¾åæ€ä¹‰ï¼Œåœ¨è°ƒç”¨ <code>in</code> å‡½æ•°ä¹‹åè°ƒç”¨ <code>andThen()</code>ï¼ˆè¿˜æœ‰ä¸ª <code>compose()</code> æ–¹æ³•ï¼Œå®ƒåœ¨ <code>in</code> å‡½æ•°ä¹‹å‰åº”ç”¨æ–°å‡½æ•°ï¼‰ã€‚ è¦é™„åŠ ä¸€ä¸ª <code>andThen()</code> å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€å°†è¯¥å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ <code>transform()</code> äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå®ƒå°† <code>in</code> çš„åŠ¨ä½œä¸ <code>andThen()</code> å‚æ•°çš„åŠ¨ä½œç»“åˆèµ·æ¥ã€‚</p><h2 id="é—­åŒ…" tabindex="-1"><a class="header-anchor" href="#é—­åŒ…" aria-hidden="true">#</a> é—­åŒ…</h2><p>åœ¨ä¸Šä¸€èŠ‚çš„ <code>ProduceFunction.java</code> ä¸­ï¼Œæˆ‘ä»¬ä»æ–¹æ³•ä¸­è¿”å› Lambda å‡½æ•°ã€‚ è™½ç„¶è¿‡ç¨‹ç®€å•ï¼Œä½†æ˜¯æœ‰äº›é—®é¢˜å¿…é¡»å†å›è¿‡å¤´æ¥æ¢è®¨ä¸€ä¸‹ã€‚</p><p><strong>é—­åŒ…</strong>ï¼ˆClosureï¼‰ä¸€è¯æ€»ç»“äº†è¿™äº›é—®é¢˜ã€‚ å®ƒéå¸¸é‡è¦ï¼Œåˆ©ç”¨é—­åŒ…å¯ä»¥è½»æ¾ç”Ÿæˆå‡½æ•°ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„ Lambdaï¼Œå®ƒä½¿ç”¨å‡½æ•°ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ã€‚ è¿”å›è¯¥å‡½æ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®ƒå¯¹é‚£äº› â€œå¤–éƒ¨ â€å˜é‡å¼•ç”¨äº†ä»€ä¹ˆ? å¦‚æœè¯­è¨€ä¸èƒ½è‡ªåŠ¨è§£å†³ï¼Œé‚£é—®é¢˜å°†å˜å¾—éå¸¸æ£˜æ‰‹ã€‚ èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„è¯­è¨€è¢«ç§°ä½œ <em>æ”¯æŒé—­åŒ…</em>ï¼Œæˆ–è€…ç§°ä½œ <em>è¯æ³•å®šç•Œ</em>ï¼ˆ<em>lexically scoped</em> ï¼ŒåŸºäºè¯æ³•ä½œç”¨åŸŸçš„ï¼‰( ä¹Ÿæœ‰ç”¨æœ¯è¯­ <em>å˜é‡æ•è·</em> <em>variable capture</em> ç§°å‘¼çš„)ã€‚Java 8 æä¾›äº†æœ‰é™ä½†åˆç†çš„é—­åŒ…æ”¯æŒï¼Œæˆ‘ä»¬å°†ç”¨ä¸€äº›ç®€å•çš„ä¾‹å­æ¥ç ”ç©¶å®ƒã€‚</p><p>é¦–å…ˆï¼Œä¸‹åˆ—æ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è®¿é—®å¯¹è±¡å­—æ®µå’Œæ–¹æ³•å‚æ•°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure1</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯ï¼Œä»”ç»†è€ƒè™‘ä¸€ä¸‹ï¼Œ<code>i</code> çš„è¿™ç§ç”¨æ³•å¹¶éæ˜¯ä¸ªå¤§éš¾é¢˜ï¼Œå› ä¸ºå¯¹è±¡å¾ˆå¯èƒ½åœ¨ä½ è°ƒç”¨ <code>makeFun()</code> ä¹‹åå°±å­˜åœ¨äº†â€”â€”å®é™…ä¸Šï¼Œåƒåœ¾æ”¶é›†å™¨å‡ ä¹è‚¯å®šä¼šä¿ç•™ä»¥è¿™ç§æ–¹å¼è¢«ç»‘å®šåˆ°ç°å­˜å‡½æ•°çš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å¯¹åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ <code>makeFun()</code> ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°å¤šä¸ªå‡½æ•°ï¼Œå®ƒä»¬å…±äº« <code>i</code> çš„å­˜å‚¨ç©ºé—´ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// functional/SharedStorage.java</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SharedStorage</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Closure1</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Closure1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IntSupplier</span> f1 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IntSupplier</span> f2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IntSupplier</span> f3 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f3<span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
0
1
2
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯æ¬¡è°ƒç”¨ <code>getAsInt()</code> éƒ½ä¼šå¢åŠ  <code>i</code>ï¼Œè¡¨æ˜å­˜å‚¨æ˜¯å…±äº«çš„ã€‚</p><p>å¦‚æœ <code>i</code> æ˜¯ <code>makeFun()</code> çš„å±€éƒ¨å˜é‡æ€ä¹ˆåŠï¼Ÿ åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“ <code>makeFun()</code> å®Œæˆæ—¶ <code>i</code> å°±æ¶ˆå¤±ã€‚ ä½†å®ƒä»å¯ä»¥ç¼–è¯‘ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure2</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”± <code>makeFun()</code> è¿”å›çš„ <code>IntSupplier</code> â€œå…³ä½äº†â€ <code>i</code> å’Œ <code>x</code>ï¼Œå› æ­¤å³ä½¿<code>makeFun()</code>å·²æ‰§è¡Œå®Œæ¯•ï¼Œå½“ä½ è°ƒç”¨è¿”å›çš„å‡½æ•°æ—¶<code>i</code> å’Œ <code>x</code>ä»ç„¶æœ‰æ•ˆï¼Œè€Œä¸æ˜¯åƒæ­£å¸¸æƒ…å†µä¸‹é‚£æ ·åœ¨ <code>makeFun()</code> æ‰§è¡Œå <code>i</code> å’Œ<code>x</code>å°±æ¶ˆå¤±äº†ã€‚ ä½†è¯·æ³¨æ„ï¼Œæˆ‘æ²¡æœ‰åƒ <code>Closure1.java</code> é‚£æ ·é€’å¢ <code>i</code>ï¼Œå› ä¸ºä¼šäº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure3</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// x++ å’Œ i++ éƒ½ä¼šæŠ¥é”™ï¼š</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x<span class="token operator">++</span> <span class="token operator">+</span> i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>x</code> å’Œ <code>i</code> çš„æ“ä½œéƒ½çŠ¯äº†åŒæ ·çš„é”™è¯¯ï¼šè¢« Lambda è¡¨è¾¾å¼å¼•ç”¨çš„å±€éƒ¨å˜é‡å¿…é¡»æ˜¯ <code>final</code> æˆ–è€…æ˜¯ç­‰åŒ <code>final</code> æ•ˆæœçš„ã€‚</p><p>å¦‚æœä½¿ç”¨ <code>final</code> ä¿®é¥° <code>x</code>å’Œ <code>i</code>ï¼Œå°±ä¸èƒ½å†é€’å¢å®ƒä»¬çš„å€¼äº†ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure4</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆä¸ºä»€ä¹ˆåœ¨ <code>Closure2.java</code> ä¸­ï¼Œ <code>x</code> å’Œ <code>i</code> é <code>final</code> å´å¯ä»¥è¿è¡Œå‘¢ï¼Ÿ</p><p>è¿™å°±å«åš<strong>ç­‰åŒ final æ•ˆæœ</strong>ï¼ˆEffectively Finalï¼‰ã€‚è¿™ä¸ªæœ¯è¯­æ˜¯åœ¨ Java 8 æ‰å¼€å§‹å‡ºç°çš„ï¼Œè¡¨ç¤ºè™½ç„¶æ²¡æœ‰æ˜ç¡®åœ°å£°æ˜å˜é‡æ˜¯ <code>final</code> çš„ï¼Œä½†æ˜¯å› å˜é‡å€¼æ²¡è¢«æ”¹å˜è¿‡è€Œå®é™…æœ‰äº† <code>final</code> åŒç­‰çš„æ•ˆæœã€‚ å¦‚æœå±€éƒ¨å˜é‡çš„åˆå§‹å€¼æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œé‚£ä¹ˆå®ƒå®é™…ä¸Šå°±æ˜¯ <code>final</code> çš„ã€‚</p><p>å¦‚æœ <code>x</code> å’Œ <code>i</code> çš„å€¼åœ¨æ–¹æ³•ä¸­çš„å…¶ä»–ä½ç½®å‘ç”Ÿæ”¹å˜ï¼ˆä½†ä¸åœ¨è¿”å›çš„å‡½æ•°å†…éƒ¨ï¼‰ï¼Œåˆ™ç¼–è¯‘å™¨ä»å°†è§†å…¶ä¸ºé”™è¯¯ã€‚æ¯ä¸ªé€’å¢æ“ä½œåˆ™ä¼šåˆ†åˆ«äº§ç”Ÿé”™è¯¯æ¶ˆæ¯ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure5</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
    x<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç­‰åŒ final æ•ˆæœ</strong>æ„å‘³ç€å¯ä»¥åœ¨å˜é‡å£°æ˜å‰åŠ ä¸Š <strong>final</strong> å…³é”®å­—è€Œä¸ç”¨æ›´æ”¹ä»»ä½•å…¶ä½™ä»£ç ã€‚ å®é™…ä¸Šå®ƒå°±æ˜¯å…·å¤‡ <code>final</code> æ•ˆæœçš„ï¼Œåªæ˜¯æ²¡æœ‰æ˜ç¡®è¯´æ˜ã€‚</p><p>åœ¨é—­åŒ…ä¸­ï¼Œåœ¨ä½¿ç”¨ <code>x</code> å’Œ <code>i</code> ä¹‹å‰ï¼Œé€šè¿‡å°†å®ƒä»¬èµ‹å€¼ç»™ <code>final</code> ä¿®é¥°çš„å˜é‡ï¼Œæˆ‘ä»¬è§£å†³äº† <code>Closure5.java</code> ä¸­é‡åˆ°çš„é—®é¢˜ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure6</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
    x<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> iFinal <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> xFinal <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> xFinal <span class="token operator">+</span> iFinal<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šä¾‹ä¸­ <code>iFinal</code> å’Œ <code>xFinal</code> çš„å€¼åœ¨èµ‹å€¼åå¹¶æ²¡æœ‰æ”¹å˜è¿‡ï¼Œå› æ­¤åœ¨è¿™é‡Œä½¿ç”¨ <code>final</code> æ˜¯å¤šä½™çš„ã€‚</p><p>å¦‚æœæ”¹ç”¨åŒ…è£…ç±»å‹ä¼šæ˜¯ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠ<code>int</code>ç±»å‹æ”¹ä¸º<code>Integer</code>ç±»å‹ç ”ç©¶ä¸€ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure7</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¯‘å™¨éå¸¸èªæ˜åœ°è¯†åˆ«åˆ°å˜é‡ <code>i</code> çš„å€¼è¢«æ›´æ”¹è¿‡ã€‚ åŒ…è£…ç±»å‹å¯èƒ½æ˜¯è¢«ç‰¹æ®Šå¤„ç†äº†ï¼Œæˆ‘ä»¬å†å°è¯•ä¸‹ <strong>List</strong>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure8</span> <span class="token punctuation">{</span>
  <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ai<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> ai<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Closure8</span> c7 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Closure8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span>
      l1 <span class="token operator">=</span> c7<span class="token punctuation">.</span><span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      l2 <span class="token operator">=</span> c7<span class="token punctuation">.</span><span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    l1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    l2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>l2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
[1]
[1]
[1, 42]
[1, 96]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡ä¸€åˆ‡æ­£å¸¸ã€‚æˆ‘ä»¬æ”¹å˜äº† <strong>List</strong> çš„å†…å®¹å´æ²¡äº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ã€‚é€šè¿‡è§‚å¯Ÿæœ¬ä¾‹çš„è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å‘ç°è¿™çœ‹èµ·æ¥éå¸¸å®‰å…¨ã€‚è¿™æ˜¯å› ä¸ºæ¯æ¬¡è°ƒç”¨ <code>makeFun()</code> æ—¶ï¼Œå…¶å®éƒ½ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°è€Œéå…±äº«çš„ <code>ArrayList</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªé—­åŒ…éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ <code>ArrayList</code>ï¼Œå®ƒä»¬ä¹‹é—´äº’ä¸å¹²æ‰°ã€‚</p><p>è¯·<strong>æ³¨æ„</strong>æˆ‘å·²ç»å£°æ˜ <code>ai</code> æ˜¯ <code>final</code> çš„äº†ã€‚å°½ç®¡åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½ å¯ä»¥å»æ‰ <code>final</code> å¹¶å¾—åˆ°ç›¸åŒçš„ç»“æœï¼ˆè¯•è¯•å§ï¼ï¼‰ã€‚ åº”ç”¨äºå¯¹è±¡å¼•ç”¨çš„ <code>final</code> å…³é”®å­—ä»…è¡¨ç¤ºä¸ä¼šé‡æ–°èµ‹å€¼å¼•ç”¨ã€‚ å®ƒå¹¶ä¸ä»£è¡¨ä½ ä¸èƒ½ä¿®æ”¹å¯¹è±¡æœ¬èº«ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ <code>Closure7.java</code> å’Œ <code>Closure8.java</code> ä¹‹é—´çš„åŒºåˆ«ã€‚æˆ‘ä»¬çœ‹åˆ°ï¼šåœ¨ <code>Closure7.java</code> ä¸­å˜é‡ <code>i</code> æœ‰è¿‡é‡æ–°èµ‹å€¼ã€‚ ä¹Ÿè®¸è¿™å°±æ˜¯è§¦å‘<strong>ç­‰åŒ final æ•ˆæœ</strong>é”™è¯¯æ¶ˆæ¯çš„åŸå› ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Closure9</span> <span class="token punctuation">{</span>
  <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reassignment</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> ai<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šä¾‹ï¼Œé‡æ–°èµ‹å€¼å¼•ç”¨ä¼šè§¦å‘é”™è¯¯æ¶ˆæ¯ã€‚å¦‚æœåªä¿®æ”¹æŒ‡å‘çš„å¯¹è±¡åˆ™æ²¡é—®é¢˜ï¼Œåªè¦æ²¡æœ‰å…¶ä»–äººè·å¾—å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼ˆè¿™æ„å‘³ç€ä½ æœ‰å¤šä¸ªå®ä½“å¯ä»¥ä¿®æ”¹å¯¹è±¡ï¼Œæ­¤æ—¶äº‹æƒ…ä¼šå˜å¾—éå¸¸æ··ä¹±ï¼‰ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å®‰å…¨çš„ã€‚</p><p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ <code>Closure1.java</code>ã€‚é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼šä¸ºä»€ä¹ˆå˜é‡ <code>i</code> è¢«ä¿®æ”¹ç¼–è¯‘å™¨å´æ²¡æœ‰æŠ¥é”™å‘¢ã€‚ å®ƒæ—¢ä¸æ˜¯ <code>final</code> çš„ï¼Œä¹Ÿä¸æ˜¯<strong>ç­‰åŒ final æ•ˆæœ</strong>çš„ã€‚</p><p>å› ä¸º <code>i</code> æ˜¯å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œæ‰€ä»¥è¿™æ ·åšè‚¯å®šæ˜¯å®‰å…¨çš„ï¼ˆé™¤éä½ æ­£åœ¨åˆ›å»ºå…±äº«å¯å˜å†…å­˜çš„å¤šä¸ªå‡½æ•°ï¼‰ã€‚æ˜¯çš„ï¼Œä½ å¯ä»¥è¾©ç§°åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ä¼šå‘ç”Ÿå˜é‡æ•è·ï¼ˆVariable Captureï¼‰ã€‚</p><p>ä½†å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œ<code>Closure3.java</code> çš„é”™è¯¯æ¶ˆæ¯æ˜¯ä¸“é—¨é’ˆå¯¹å±€éƒ¨å˜é‡çš„ã€‚å› æ­¤ï¼Œè§„åˆ™å¹¶éåªæ˜¯ â€œåœ¨ Lambda ä¹‹å¤–å®šä¹‰çš„ä»»ä½•å˜é‡å¿…é¡»æ˜¯ <code>final</code> çš„æˆ–<strong>ç­‰åŒ final æ•ˆæœ</strong>â€ é‚£ä¹ˆç®€å•ã€‚</p><p>ç›¸åï¼Œä½ å¿…é¡»è€ƒè™‘æ•è·çš„å˜é‡æ˜¯å¦æ˜¯<strong>ç­‰åŒ final æ•ˆæœ</strong>çš„ã€‚ å¦‚æœå®ƒæ˜¯å¯¹è±¡ä¸­çš„å­—æ®µï¼ˆå®ä¾‹å˜é‡ï¼‰ï¼Œé‚£ä¹ˆå®ƒæœ‰ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„æ•è·ä»¥ä¾¿ç¨ååœ¨è°ƒç”¨ Lambda æ—¶å­˜åœ¨ã€‚ï¼ˆæ³¨ï¼šç»“è®ºæ˜¯â€”â€”Lambda å¯ä»¥æ²¡æœ‰é™åˆ¶åœ°å¼•ç”¨ å®ä¾‹å˜é‡å’Œé™æ€å˜é‡ã€‚ä½†å±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜ä¸º finalï¼Œæˆ–äº‹å®ä¸Šæ˜¯ final ã€‚ï¼‰</p><h3 id="ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»" aria-hidden="true">#</a> ä½œä¸ºé—­åŒ…çš„å†…éƒ¨ç±»</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»é‡å†™ä¹‹å‰çš„ä¾‹å­:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnonymousClosure</span> <span class="token punctuation">{</span>
  <span class="token class-name">IntSupplier</span> <span class="token function">makeFun</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// åŒæ ·è§„åˆ™çš„åº”ç”¨:</span>
    <span class="token comment">// i++; // éç­‰åŒ final æ•ˆæœ</span>
    <span class="token comment">// x++; // åŒä¸Š</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">IntSupplier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šåªè¦æœ‰å†…éƒ¨ç±»ï¼Œå°±ä¼šæœ‰é—­åŒ…ï¼ˆJava 8 åªæ˜¯ç®€åŒ–äº†é—­åŒ…æ“ä½œï¼‰ã€‚åœ¨ Java 8 ä¹‹å‰ï¼Œå˜é‡ <code>x</code> å’Œ <code>i</code> å¿…é¡»è¢«æ˜ç¡®å£°æ˜ä¸º <code>final</code>ã€‚åœ¨ Java 8 ä¸­ï¼Œå†…éƒ¨ç±»çš„è§„åˆ™æ”¾å®½ï¼ŒåŒ…æ‹¬<strong>ç­‰åŒ final æ•ˆæœ</strong>ã€‚</p><h2 id="å‡½æ•°ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°ç»„åˆ" aria-hidden="true">#</a> å‡½æ•°ç»„åˆ</h2><p>å‡½æ•°ç»„åˆï¼ˆFunction Compositionï¼‰æ„ä¸ºâ€œå¤šä¸ªå‡½æ•°ç»„åˆæˆæ–°å‡½æ•°â€ã€‚å®ƒé€šå¸¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚åœ¨å‰é¢çš„ <code>TransformFunction.java</code> ç±»ä¸­ï¼Œå°±æœ‰ä¸€ä¸ªä½¿ç”¨ <code>andThen()</code> çš„å‡½æ•°ç»„åˆç¤ºä¾‹ã€‚ä¸€äº› <code>java.util.function</code> æ¥å£ä¸­åŒ…å«æ”¯æŒå‡½æ•°ç»„åˆçš„æ–¹æ³• ã€‚</p><table><thead><tr><th style="text-align:center;">ç»„åˆæ–¹æ³•</th><th style="text-align:center;">æ”¯æŒæ¥å£</th></tr></thead><tbody><tr><td style="text-align:center;"><code>andThen(argument)</code> æ‰§è¡ŒåŸæ“ä½œ,å†æ‰§è¡Œå‚æ•°æ“ä½œ</td><td style="text-align:center;"><strong>Function BiFunction Consumer BiConsumer IntConsumer LongConsumer DoubleConsumer UnaryOperator IntUnaryOperator LongUnaryOperator DoubleUnaryOperator BinaryOperator</strong></td></tr><tr><td style="text-align:center;"><code>compose(argument)</code> æ‰§è¡Œå‚æ•°æ“ä½œ,å†æ‰§è¡ŒåŸæ“ä½œ</td><td style="text-align:center;"><strong>Function UnaryOperator IntUnaryOperator LongUnaryOperator DoubleUnaryOperator</strong></td></tr><tr><td style="text-align:center;"><code>and(argument)</code> åŸè°“è¯(Predicate)å’Œå‚æ•°è°“è¯çš„çŸ­è·¯<strong>é€»è¾‘ä¸</strong></td><td style="text-align:center;"><strong>Predicate BiPredicate IntPredicate LongPredicate DoublePredicate</strong></td></tr><tr><td style="text-align:center;"><code>or(argument)</code> åŸè°“è¯å’Œå‚æ•°è°“è¯çš„çŸ­è·¯<strong>é€»è¾‘æˆ–</strong></td><td style="text-align:center;"><strong>Predicate BiPredicate IntPredicate LongPredicate DoublePredicate</strong></td></tr><tr><td style="text-align:center;"><code>negate()</code> è¯¥è°“è¯çš„<strong>é€»è¾‘é</strong></td><td style="text-align:center;"><strong>Predicate BiPredicate IntPredicate LongPredicate DoublePredicate</strong></td></tr></tbody></table><p>ä¸‹ä¾‹ä½¿ç”¨äº† <code>Function</code> é‡Œçš„ <code>compose()</code>å’Œ <code>andThen()</code>ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionComposition</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
    f1 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token char">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    f2 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    f3 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    f4 <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">compose</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andThen</span><span class="token punctuation">(</span>f3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      f4<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">&quot;GO AFTER ALL AMBULANCES&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
AFTER ALL AMBULANCES
_fter _ll _mbul_nces
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹çœ‹æ­£åœ¨åˆ›å»ºçš„æ–°å‡½æ•° <code>f4</code>ã€‚å®ƒè°ƒç”¨ <code>apply()</code> çš„æ–¹å¼ä¸å¸¸è§„å‡ ä¹æ— å¼‚ã€‚</p><p>å½“ <code>f1</code> è·å¾—å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒå·²ç»è¢« <code>f2</code> å‰¥ç¦»äº†å‰ä¸‰ä¸ªå­—ç¬¦ã€‚è¿™æ˜¯å› ä¸º <code>composeï¼ˆf2ï¼‰</code> è¡¨ç¤º <code>f2</code> çš„è°ƒç”¨å‘ç”Ÿåœ¨ <code>f1</code> ä¹‹å‰ã€‚</p><p>ä¸‹ä¾‹æ˜¯è°“è¯(<code>Predicate</code>) çš„é€»è¾‘è¿ç®—æ¼”ç¤º.ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PredicateComposition</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
    p1 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    p2 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">,</span>
    p3 <span class="token operator">=</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    p4 <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token function">negate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foobar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foobaz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fongopuckey&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>p4<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
foobar
foobaz
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>p4</code> è·å–åˆ°äº†æ‰€æœ‰è°“è¯(<code>Predicate</code>)å¹¶ç»„åˆæˆä¸€ä¸ªæ›´å¤æ‚çš„è°“è¯ã€‚è§£è¯»ï¼šå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸åŒ…å« <code>bar</code> ä¸”é•¿åº¦å°äº 5ï¼Œæˆ–è€…å®ƒåŒ…å« <code>foo</code> ï¼Œåˆ™ç»“æœä¸º <code>true</code>ã€‚</p><p>æ­£å› å®ƒäº§ç”Ÿå¦‚æ­¤æ¸…æ™°çš„è¯­æ³•ï¼Œæˆ‘åœ¨ä¸»æ–¹æ³•ä¸­é‡‡ç”¨äº†ä¸€äº›å°æŠ€å·§ï¼Œå¹¶å€Ÿç”¨äº†ä¸‹ä¸€ç« çš„å†…å®¹ã€‚é¦–å…ˆï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„æµï¼Œç„¶åå°†æ¯ä¸ªå¯¹è±¡ä¼ é€’ç»™ <code>filter()</code> æ“ä½œã€‚ <code>filter()</code> ä½¿ç”¨ <code>p4</code> çš„è°“è¯æ¥ç¡®å®šå¯¹è±¡çš„å»ç•™ã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨ <code>forEach()</code> å°† <code>println</code> æ–¹æ³•å¼•ç”¨åº”ç”¨åœ¨æ¯ä¸ªç•™å­˜çš„å¯¹è±¡ä¸Šã€‚</p><p>ä»è¾“å‡ºç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>p4</code> çš„å·¥ä½œæµç¨‹ï¼šä»»ä½•å¸¦æœ‰ <code>&quot;foo&quot;</code> çš„å­—ç¬¦ä¸²éƒ½å¾—ä»¥ä¿ç•™ï¼Œå³ä½¿å®ƒçš„é•¿åº¦å¤§äº 5ã€‚ <code>&quot;fongopuckey&quot;</code> å› é•¿åº¦è¶…å‡ºä¸”ä¸åŒ…å« <code>foo</code> è€Œè¢«ä¸¢å¼ƒã€‚</p><h2 id="æµå¼ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#æµå¼ç¼–ç¨‹" aria-hidden="true">#</a> æµå¼ç¼–ç¨‹</h2><p>stream ä½¿ç”¨çš„æ˜¯å‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼ï¼Œå¯ä»¥è¢«ç”¨æ¥å¯¹é›†åˆæˆ–æ•°ç»„è¿›è¡Œé“¾çŠ¶æµå¼çš„æ“ä½œ</p><h3 id="åˆ›å»ºæµ" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæµ" aria-hidden="true">#</a> åˆ›å»ºæµ</h3><p>å•åˆ—é›†åˆ: <code>é›†åˆå¯¹è±¡.stream()</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Author</span><span class="token punctuation">&gt;</span></span> authors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Author</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> authors<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°ç»„: <code>Arrays.stream()</code>æˆ–è€…<code>Stream.of(arr)</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">IntStream</span> intStream <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> stream2 <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒåˆ—é›†åˆ(map): å…ˆè½¬æˆå•åˆ—å†åˆ›å»º</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> stream3 <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="éšæœºæ•°æµ" tabindex="-1"><a class="header-anchor" href="#éšæœºæ•°æµ" aria-hidden="true">#</a> éšæœºæ•°æµ</h4><p><code>Random</code> ç±»è¢«ä¸€ç»„ç”Ÿæˆæµçš„æ–¹æ³•å¢å¼ºäº†ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomGenerators</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stream
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;++++++++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ§åˆ¶ä¸Šé™å’Œä¸‹é™ï¼š</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ§åˆ¶æµå¤§å°ï¼š</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ§åˆ¶æµçš„å¤§å°å’Œç•Œé™</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">longs</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">doubles</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11.5</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Random</strong> ç±»åªèƒ½ç”ŸæˆåŸºæœ¬ç±»å‹ <strong>int</strong>ï¼Œ <strong>long</strong>ï¼Œ <strong>double</strong> çš„æµã€‚<code>boxed()</code> æµæ“ä½œå°†ä¼šè‡ªåŠ¨åœ°æŠŠåŸºæœ¬ç±»å‹åŒ…è£…æˆä¸ºå¯¹åº”çš„è£…ç®±ç±»å‹ï¼Œä»è€Œä½¿å¾— <code>show()</code> èƒ½å¤Ÿæ¥å—æµã€‚</p><h3 id="ä¸­é—´æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ä¸­é—´æ“ä½œ" aria-hidden="true">#</a> ä¸­é—´æ“ä½œ</h3><p>ä¸­é—´æ“ä½œç”¨äºä»ä¸€ä¸ªæµä¸­è·å–å¯¹è±¡ï¼Œå¹¶å°†å¯¹è±¡ä½œä¸ºå¦ä¸€ä¸ªæµä»åç«¯è¾“å‡ºï¼Œä»¥è¿æ¥åˆ°å…¶ä»–æ“ä½œã€‚</p><h4 id="è·Ÿè¸ªå’Œè°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#è·Ÿè¸ªå’Œè°ƒè¯•" aria-hidden="true">#</a> è·Ÿè¸ªå’Œè°ƒè¯•</h4><p><code>peek()</code> æ“ä½œçš„ç›®çš„æ˜¯å¸®åŠ©è°ƒè¯•ã€‚å®ƒå…è®¸ä½ æ— ä¿®æ”¹åœ°æŸ¥çœ‹æµä¸­çš„å…ƒç´ ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Peeking</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toUpperCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æµå…ƒç´ æ’åº" tabindex="-1"><a class="header-anchor" href="#æµå…ƒç´ æ’åº" aria-hidden="true">#</a> æµå…ƒç´ æ’åº</h4><p><code>sorted()</code> é¢„è®¾äº†ä¸€äº›é»˜è®¤çš„æ¯”è¾ƒå™¨ã€‚å®ƒè¿˜æœ‰å¦ä¸€ç§å½¢å¼çš„å®ç°ï¼šä¼ å…¥ä¸€ä¸ª <strong>Comparator</strong> å‚æ•°ã€‚ä¹Ÿå¯ä»¥æŠŠ Lambda å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>sorted()</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SortedComparator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> w <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">print</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç§»é™¤å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#ç§»é™¤å…ƒç´ " aria-hidden="true">#</a> ç§»é™¤å…ƒç´ </h4><ul><li><code>distinct()</code>ï¼šåœ¨ <code>Randoms.java</code> ç±»ä¸­çš„ <code>distinct()</code> å¯ç”¨äºæ¶ˆé™¤æµä¸­çš„é‡å¤å…ƒç´ ã€‚ç›¸æ¯”åˆ›å»ºä¸€ä¸ª <strong>Set</strong> é›†åˆæ¥æ¶ˆé™¤é‡å¤ï¼Œè¯¥æ–¹æ³•çš„å·¥ä½œé‡è¦å°‘å¾—å¤šã€‚</li><li><code>filter(Predicate)</code>ï¼šè¿‡æ»¤æ“ä½œï¼Œä¿ç•™å¦‚ä¸‹å…ƒç´ ï¼šè‹¥å…ƒç´ ä¼ é€’ç»™è¿‡æ»¤å‡½æ•°äº§ç”Ÿçš„ç»“æœä¸º <code>true</code> ã€‚</li></ul><p>æ£€æµ‹è´¨æ•°:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">LongStream</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Prime</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Boolean</span> <span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">LongStream</span> <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> i <span class="token operator">-&gt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Prime</span><span class="token operator">::</span><span class="token function">isPrime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Prime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>rangeClosed()</code> åŒ…å«äº†ä¸Šé™å€¼ã€‚å¦‚æœä¸èƒ½æ•´é™¤ï¼Œå³ä½™æ•°ä¸ç­‰äº 0ï¼Œåˆ™ <code>noneMatch()</code> æ“ä½œè¿”å› <code>true</code>ï¼Œå¦‚æœå‡ºç°ä»»ä½•ç­‰äº 0 çš„ç»“æœåˆ™è¿”å› <code>false</code>ã€‚ <code>noneMatch()</code> æ“ä½œä¸€æ—¦æœ‰å¤±è´¥å°±ä¼šé€€å‡ºã€‚</p><h4 id="åº”ç”¨å‡½æ•°åˆ°å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#åº”ç”¨å‡½æ•°åˆ°å…ƒç´ " aria-hidden="true">#</a> åº”ç”¨å‡½æ•°åˆ°å…ƒç´ </h4><ul><li><code>map(Function)</code>ï¼šå°†å‡½æ•°æ“ä½œåº”ç”¨åœ¨è¾“å…¥æµçš„å…ƒç´ ä¸­ï¼Œå¹¶å°†è¿”å›å€¼ä¼ é€’åˆ°è¾“å‡ºæµä¸­ã€‚</li><li><code>mapToInt(ToIntFunction)</code>ï¼šæ“ä½œåŒä¸Šï¼Œä½†ç»“æœæ˜¯ <strong>IntStream</strong>ã€‚</li><li><code>mapToLong(ToLongFunction)</code>ï¼šæ“ä½œåŒä¸Šï¼Œä½†ç»“æœæ˜¯ <strong>LongStream</strong>ã€‚</li><li><code>mapToDouble(ToDoubleFunction)</code>ï¼šæ“ä½œåŒä¸Šï¼Œä½†ç»“æœæ˜¯ <strong>DoubleStream</strong>ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>
    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨ <code>Integer.parseInt()</code> å°è¯•å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•´æ•°ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸èƒ½è¢«è½¬åŒ–æˆä¸ºæ•´æ•°å°±ä¼šæŠ›å‡º <code>NumberFormatException</code> å¼‚å¸¸ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å›è¿‡å¤´æ¥æŠŠåŸå§‹å­—ç¬¦ä¸²æ”¾åˆ°è¾“å‡ºæµä¸­ã€‚</p><p>äº§ç”Ÿå’Œæ¥æ”¶ç±»å‹å®Œå…¨ä¸åŒçš„ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Different input and output types ï¼ˆä¸åŒçš„è¾“å…¥è¾“å‡ºç±»å‹ï¼‰</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Numbered</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token class-name">Numbered</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Numbered(&quot;</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap2</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Numbered</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç»“æœæ˜¯æ•°å€¼ç±»å‹çš„ä¸€ç§ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨åˆé€‚çš„ <code>mapToæ•°å€¼ç±»å‹</code> è¿›è¡Œæ›¿ä»£ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// Producing numeric output streamsï¼ˆ äº§ç”Ÿæ•°å€¼è¾“å‡ºæµï¼‰</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">FunctionMap3</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;19&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToLong</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">parseLong</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.9&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">mapToDouble</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token operator">::</span><span class="token function">parseDouble</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%f &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨-map-ä¸­ç»„åˆæµ" tabindex="-1"><a class="header-anchor" href="#åœ¨-map-ä¸­ç»„åˆæµ" aria-hidden="true">#</a> åœ¨ <code>map()</code> ä¸­ç»„åˆæµ</h4><p><code>flatMap()</code> åšäº†ä¸¤ä»¶äº‹ï¼šå°†äº§ç”Ÿæµçš„å‡½æ•°åº”ç”¨åœ¨æ¯ä¸ªå…ƒç´ ä¸Šï¼ˆä¸ <code>map()</code> æ‰€åšçš„ç›¸åŒï¼‰ï¼Œç„¶åå°†æ¯ä¸ªæµéƒ½æ‰å¹³åŒ–ä¸ºå…ƒç´ ï¼Œå› è€Œæœ€ç»ˆäº§ç”Ÿçš„ä»…ä»…æ˜¯å…ƒç´ ã€‚</p><p><code>flatMap(Function)</code>ï¼šå½“ <code>Function</code> äº§ç”Ÿæµæ—¶ä½¿ç”¨ã€‚</p><p><code>flatMapToInt(Function)</code>ï¼šå½“ <code>Function</code> äº§ç”Ÿ <code>IntStream</code> æ—¶ä½¿ç”¨ã€‚</p><p><code>flatMapToLong(Function)</code>ï¼šå½“ <code>Function</code> äº§ç”Ÿ <code>LongStream</code> æ—¶ä½¿ç”¨ã€‚</p><p><code>flatMapToDouble(Function)</code>ï¼šå½“ <code>Function</code> äº§ç”Ÿ <code>DoubleStream</code> æ—¶ä½¿ç”¨ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Gonzo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Fozzie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beaker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä¸€ä¸ªæ•´æ•°æµå¼€å§‹ï¼Œç„¶åä½¿ç”¨æ¯ä¸€ä¸ªæ•´æ•°å»åˆ›å»ºæ›´å¤šçš„éšæœºæ•°ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfRandoms</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">flatMapToInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>
        rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="optional-ç±»" tabindex="-1"><a class="header-anchor" href="#optional-ç±»" aria-hidden="true">#</a> Optional ç±»</h3><p><strong>Optional</strong> å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚ä¸€äº›æ ‡å‡†æµæ“ä½œè¿”å› <strong>Optional</strong> å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸èƒ½ä¿è¯é¢„æœŸç»“æœä¸€å®šå­˜åœ¨ã€‚åŒ…æ‹¬ï¼š</p><ul><li><p><code>findFirst()</code> è¿”å›ä¸€ä¸ªåŒ…å«ç¬¬ä¸€ä¸ªå…ƒç´ çš„ <strong>Optional</strong> å¯¹è±¡ï¼Œå¦‚æœæµä¸ºç©ºåˆ™è¿”å› <strong>Optional.empty</strong></p></li><li><p><code>findAny()</code> è¿”å›åŒ…å«ä»»æ„å…ƒç´ çš„ <strong>Optional</strong> å¯¹è±¡ï¼Œå¦‚æœæµä¸ºç©ºåˆ™è¿”å› <strong>Optional.empty</strong></p></li><li><p><code>max()</code> å’Œ <code>min()</code> è¿”å›ä¸€ä¸ªåŒ…å«æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼çš„ <strong>Optional</strong> å¯¹è±¡ï¼Œå¦‚æœæµä¸ºç©ºåˆ™è¿”å› <strong>Optional.empty</strong></p><p><code>reduce()</code> ä¸å†ä»¥ <code>identity</code> å½¢å¼å¼€å¤´ï¼Œè€Œæ˜¯å°†å…¶è¿”å›å€¼åŒ…è£…åœ¨ <strong>Optional</strong> ä¸­ã€‚ï¼ˆ<code>identity</code> å¯¹è±¡æˆä¸ºå…¶ä»–å½¢å¼çš„ <code>reduce()</code> çš„é»˜è®¤ç»“æœï¼Œå› æ­¤ä¸å­˜åœ¨ç©ºç»“æœçš„é£é™©ï¼‰</p></li></ul><p>å¯¹äºæ•°å­—æµ <strong>IntStream</strong>ã€<strong>LongStream</strong> å’Œ <strong>DoubleStream</strong>ï¼Œ<code>average()</code> ä¼šå°†ç»“æœåŒ…è£…åœ¨ <strong>Optional</strong> ä»¥é˜²æ­¢æµä¸ºç©ºã€‚</p><p>ç®€å•æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalsFromEmptyStreams</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token constant">CASE_INSENSITIVE_ORDER</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token constant">CASE_INSENSITIVE_ORDER</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> s1 <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
             <span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Optional.empty
Optional.empty
Optional.empty
Optional.empty
Optional.empty
OptionalDouble.empty
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Optional</strong> çš„ä¸¤ä¸ªåŸºæœ¬ç”¨æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalBasics</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ”¶åˆ° <strong>Optional</strong> å¯¹è±¡æ—¶ï¼Œé¦–å…ˆè°ƒç”¨ <code>isPresent()</code> æ£€æŸ¥å…¶ä¸­æ˜¯å¦åŒ…å«å…ƒç´ ã€‚å¦‚æœå­˜åœ¨ï¼Œå¯ä½¿ç”¨ <code>get()</code> è·å–ã€‚</p><h4 id="ä¾¿åˆ©å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä¾¿åˆ©å‡½æ•°" aria-hidden="true">#</a> ä¾¿åˆ©å‡½æ•°</h4><p>æœ‰è®¸å¤šä¾¿åˆ©å‡½æ•°å¯ä»¥è§£åŒ… <strong>Optional</strong> ï¼Œè¿™ç®€åŒ–äº†ä¸Šè¿° â€œå¯¹æ‰€åŒ…å«çš„å¯¹è±¡çš„æ£€æŸ¥å’Œæ‰§è¡Œæ“ä½œâ€ çš„è¿‡ç¨‹ï¼š</p><ul><li><code>ifPresent(Consumer)</code>ï¼šå½“å€¼å­˜åœ¨æ—¶è°ƒç”¨ <strong>Consumer</strong>ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åšã€‚</li><li><code>orElse(otherObject)</code>ï¼šå¦‚æœå€¼å­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™ç”Ÿæˆ <strong>otherObject</strong>ã€‚</li><li><code>orElseGet(Supplier)</code>ï¼šå¦‚æœå€¼å­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä½¿ç”¨ <strong>Supplier</strong> å‡½æ•°ç”Ÿæˆä¸€ä¸ªå¯æ›¿ä»£å¯¹è±¡ã€‚</li><li><code>orElseThrow(Supplier)</code>ï¼šå¦‚æœå€¼å­˜åœ¨ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä½¿ç”¨ <strong>Supplier</strong> å‡½æ•°ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Optionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">basics</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">else</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing inside!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        optString<span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nada&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        optString<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;Generated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> optString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optString<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Supplied&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Caught &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> cos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Epithets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cos<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;basics&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">basics</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ifPresent&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">ifPresent</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElse&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseGet&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElseGet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;orElseThrow&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optionals</span><span class="token operator">::</span><span class="token function">orElseThrow</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»º-optional" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-optional" aria-hidden="true">#</a> åˆ›å»º Optional</h4><p>å½“æˆ‘ä»¬åœ¨è‡ªå·±çš„ä»£ç ä¸­åŠ å…¥ <strong>Optional</strong> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ 3 ä¸ªé™æ€æ–¹æ³•ï¼š</p><ul><li><code>empty()</code>ï¼šç”Ÿæˆä¸€ä¸ªç©º <strong>Optional</strong>ã€‚</li><li><code>of(value)</code>ï¼šå°†ä¸€ä¸ªéç©ºå€¼åŒ…è£…åˆ° <strong>Optional</strong> é‡Œã€‚</li><li><code>ofNullable(value)</code>ï¼šé’ˆå¯¹ä¸€ä¸ªå¯èƒ½ä¸ºç©ºçš„å€¼ï¼Œä¸ºç©ºæ—¶è‡ªåŠ¨ç”Ÿæˆ <strong>Optional.empty</strong>ï¼Œå¦åˆ™å°†å€¼åŒ…è£…åœ¨ <strong>Optional</strong> ä¸­ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">CreatingOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> testName<span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> opt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; === &quot;</span> <span class="token operator">+</span> testName <span class="token operator">+</span> <span class="token string">&quot; === &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;empty&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Howdy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;of&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token string">&quot;Hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ofNullable&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¸èƒ½é€šè¿‡ä¼ é€’ <code>null</code> åˆ° <code>of()</code> æ¥åˆ›å»º <code>Optional</code> å¯¹è±¡ã€‚æœ€å®‰å…¨çš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ <code>ofNullable()</code> æ¥ä¼˜é›…åœ°å¤„ç† <code>null</code>ã€‚</p><h4 id="optional-å¯¹è±¡æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#optional-å¯¹è±¡æ“ä½œ" aria-hidden="true">#</a> Optional å¯¹è±¡æ“ä½œ</h4><p>å½“æˆ‘ä»¬çš„æµç®¡é“ç”Ÿæˆäº† <strong>Optional</strong> å¯¹è±¡ï¼Œä¸‹é¢ 3 ä¸ªæ–¹æ³•å¯ä½¿å¾— <strong>Optional</strong> çš„åç»­èƒ½åšæ›´å¤šçš„æ“ä½œï¼š</p><ul><li><code>filter(Predicate)</code>ï¼šå¯¹ <strong>Optional</strong> ä¸­çš„å†…å®¹åº”ç”¨ <strong>Predicate</strong> å¹¶å°†ç»“æœè¿”å›ã€‚å¦‚æœ <strong>Optional</strong> ä¸æ»¡è¶³ <strong>Predicate</strong> ï¼Œå°† <strong>Optional</strong> è½¬åŒ–ä¸ºç©º <strong>Optional</strong> ã€‚å¦‚æœ <strong>Optional</strong> å·²ç»ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©º <strong>Optional</strong> ã€‚</li><li><code>map(Function)</code>ï¼šå¦‚æœ <strong>Optional</strong> ä¸ä¸ºç©ºï¼Œåº”ç”¨ <strong>Function</strong> äº <strong>Optional</strong> ä¸­çš„å†…å®¹ï¼Œå¹¶è¿”å›ç»“æœã€‚å¦åˆ™ç›´æ¥è¿”å› <strong>Optional.empty</strong>ã€‚</li><li><code>flatMap(Function)</code>ï¼šåŒ <code>map()</code>ï¼Œä½†æ˜¯æä¾›çš„æ˜ å°„å‡½æ•°å°†ç»“æœåŒ…è£…åœ¨ <strong>Optional</strong> å¯¹è±¡ä¸­ï¼Œå› æ­¤ <code>flatMap()</code> ä¸ä¼šåœ¨æœ€åè¿›è¡Œä»»ä½•åŒ…è£…ã€‚</li></ul><p>ä»¥ä¸Šæ–¹æ³•éƒ½ä¸é€‚ç”¨äºæ•°å€¼å‹ <strong>Optional</strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæµçš„ <code>filter()</code> ä¼šåœ¨ <strong>Predicate</strong> è¿”å› <code>false</code> æ—¶ç§»é™¤æµå…ƒç´ ã€‚è€Œ <code>Optional.filter()</code> åœ¨å¤±è´¥æ—¶ä¸ä¼šåˆ é™¤ <strong>Optional</strong>ï¼Œè€Œæ˜¯å°†å…¶ä¿ç•™ä¸‹æ¥ï¼Œå¹¶è½¬åŒ–ä¸ºç©ºã€‚ä¸‹é¢è¯·çœ‹ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">OptionalFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Baz&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bingo&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pred<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str != \&quot;\&quot;&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;str.length() == 3&quot;</span><span class="token punctuation">,</span> str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;startsWith(\&quot;B\&quot;)&quot;</span><span class="token punctuation">,</span>
                str <span class="token operator">-&gt;</span> str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>for å¾ªç¯çš„ç´¢å¼•å€¼èŒƒå›´å¹¶ä¸æ˜¯ <code>i &lt; elements.length</code>ï¼Œ è€Œæ˜¯ <code>i &lt;= elements.length</code>ã€‚æ‰€ä»¥æœ€åä¸€ä¸ªå…ƒç´ å®é™…ä¸Šè¶…å‡ºäº†æµã€‚æ–¹ä¾¿çš„æ˜¯ï¼Œè¿™å°†è‡ªåŠ¨æˆä¸º <strong>Optional.empty</strong>ã€‚</p><p>åŒ <code>map()</code> ä¸€æ · ï¼Œ <code>Optional.map()</code> æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚å®ƒä»…åœ¨ <strong>Optional</strong> ä¸ä¸ºç©ºæ—¶æ‰æ‰§è¡Œè¿™ä¸ªæ˜ å°„å‡½æ•°ã€‚å¹¶å°† <strong>Optional</strong> çš„å†…å®¹æå–å‡ºæ¥ï¼Œä¼ é€’ç»™æ˜ å°„å‡½æ•°ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Function</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Produces an Optional</span>
                            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If Optional is not empty, map() first extracts</span>
        <span class="token comment">// the contents which it then passes</span>
        <span class="token comment">// to the function:</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> s<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// After the function is finished, map() wraps the</span>
    <span class="token comment">// result in an Optional before returning it:</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ˜ å°„å‡½æ•°çš„è¿”å›ç»“æœä¼šè‡ªåŠ¨åŒ…è£…æˆä¸º <strong>Optional</strong>ã€‚<strong>Optional.empty</strong> ä¼šè¢«ç›´æ¥è·³è¿‡ã€‚</p><p><strong>Optional</strong> çš„ <code>flatMap()</code> åº”ç”¨äºå·²ç”Ÿæˆ <strong>Optional</strong> çš„æ˜ å°„å‡½æ•°ï¼Œæ‰€ä»¥ <code>flatMap()</code> ä¸ä¼šåƒ <code>map()</code> é‚£æ ·å°†ç»“æœå°è£…åœ¨ <strong>Optional</strong> ä¸­ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// streams/OptionalFlatMap.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Optional</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">Function</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Stream</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OptionalFlatMap</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> descr<span class="token punctuation">,</span>
                     <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> func<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---( &quot;</span> <span class="token operator">+</span> descr <span class="token operator">+</span> <span class="token string">&quot; )---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token function">testStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Add brackets&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Increment&quot;</span><span class="token punctuation">,</span> s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
                        <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NumberFormatException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Replace&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Take last digit&quot;</span><span class="token punctuation">,</span>
                s <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span>
                        s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span>
                        <span class="token operator">:</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒ <code>map()</code>ï¼Œ<code>flatMap()</code> å°†æå–éç©º <strong>Optional</strong> çš„å†…å®¹å¹¶å°†å…¶åº”ç”¨åœ¨æ˜ å°„å‡½æ•°ã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ <code>flatMap()</code> ä¸ä¼šæŠŠç»“æœåŒ…è£…åœ¨ <strong>Optional</strong> ä¸­ï¼Œå› ä¸ºæ˜ å°„å‡½æ•°å·²ç»è¢«åŒ…è£…è¿‡äº†ã€‚</p><h4 id="optional-æµ" tabindex="-1"><a class="header-anchor" href="#optional-æµ" aria-hidden="true">#</a> Optional æµ</h4><p>å‡è®¾ä½ çš„ç”Ÿæˆå™¨å¯èƒ½äº§ç”Ÿ <code>null</code> å€¼ï¼Œé‚£ä¹ˆå½“ç”¨å®ƒæ¥åˆ›å»ºæµæ—¶ï¼Œä½ ä¼šè‡ªç„¶åœ°æƒ³åˆ°ç”¨ <strong>Optional</strong> æ¥åŒ…è£…å…ƒç´ ã€‚å¦‚ä¸‹æ˜¯å®ƒçš„æ ·å­ï¼Œä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Signal</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> msg<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Signal(&quot;</span> <span class="token operator">+</span> msg <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Signal</span> <span class="token function">morse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Signal</span><span class="token punctuation">(</span><span class="token string">&quot;dash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Optional</span><span class="token punctuation">&lt;</span><span class="token class-name">Signal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Signal</span><span class="token operator">::</span><span class="token function">morse</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>signal <span class="token operator">-&gt;</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>signal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæµçš„æ—¶å€™ï¼Œå¿…é¡»è¦å¼„æ¸…æ¥šå¦‚ä½•è§£åŒ… <strong>Optional</strong>ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamOfOptionals</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Signal</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">isPresent</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>filter()</code> æ¥ä¿ç•™é‚£äº›éç©º <strong>Optional</strong>ï¼Œç„¶ååœ¨ <code>map()</code> ä¸­ä½¿ç”¨ <code>get()</code> è·å–å…ƒç´ ã€‚ç”±äºæ¯ç§æƒ…å†µéƒ½éœ€è¦å®šä¹‰ â€œç©ºå€¼â€ çš„å«ä¹‰ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬è¦ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºé‡‡ç”¨ä¸åŒçš„æ–¹æ³•ã€‚</p><h3 id="ç»ˆç«¯æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ç»ˆç«¯æ“ä½œ" aria-hidden="true">#</a> ç»ˆç«¯æ“ä½œ</h3><p>ä»¥ä¸‹æ“ä½œå°†ä¼šè·å–æµçš„æœ€ç»ˆç»“æœã€‚è‡³æ­¤æˆ‘ä»¬æ— æ³•å†ç»§ç»­å¾€åä¼ é€’æµã€‚å¯ä»¥è¯´ï¼Œç»ˆç«¯æ“ä½œï¼ˆTerminal Operationsï¼‰æ€»æ˜¯æˆ‘ä»¬åœ¨æµç®¡é“ä¸­æ‰€åšçš„æœ€åä¸€ä»¶äº‹ã€‚</p><h4 id="æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„" aria-hidden="true">#</a> æ•°ç»„</h4><ul><li><code>toArray()</code>ï¼šå°†æµè½¬æ¢æˆé€‚å½“ç±»å‹çš„æ•°ç»„ã€‚</li><li><code>toArray(generator)</code>ï¼šåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œç”Ÿæˆè‡ªå®šä¹‰ç±»å‹çš„æ•°ç»„ã€‚</li></ul><p>å½“æˆ‘ä»¬éœ€è¦å¾—åˆ°æ•°ç»„ç±»å‹çš„æ•°æ®ä»¥ä¾¿äºåç»­æ“ä½œæ—¶ï¼Œä¸Šé¢çš„æ–¹æ³•å°±å¾ˆæœ‰ç”¨ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦å¤ç”¨æµäº§ç”Ÿçš„éšæœºæ•°æ—¶ï¼Œå°±å¯ä»¥è¿™ä¹ˆä½¿ç”¨ã€‚ä»£ç ç¤ºä¾‹:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandInts</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IntStream</span> <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>rints<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#å¾ªç¯" aria-hidden="true">#</a> å¾ªç¯</h4><ul><li><code>forEach(Consumer)</code> å¸¸è§å¦‚ <code>System.out::println</code> ä½œä¸º <strong>Consumer</strong> å‡½æ•°ã€‚</li><li><code>forEachOrdered(Consumer)</code>ï¼š ä¿è¯ <code>forEach</code> æŒ‰ç…§åŸå§‹æµé¡ºåºæ“ä½œã€‚</li></ul><p>ç¬¬ä¸€ç§å½¢å¼ï¼šæ— åºæ“ä½œï¼Œä»…åœ¨å¼•å…¥å¹¶è¡Œæµæ—¶æ‰æœ‰æ„ä¹‰ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸‹ <code>parallel()</code>ï¼šå¯å®ç°å¤šå¤„ç†å™¨å¹¶è¡Œæ“ä½œã€‚å®ç°åŸç†ä¸ºå°†æµåˆ†å‰²ä¸ºå¤šä¸ªï¼ˆé€šå¸¸æ•°ç›®ä¸º CPU æ ¸å¿ƒæ•°ï¼‰å¹¶åœ¨ä¸åŒå¤„ç†å™¨ä¸Šåˆ†åˆ«æ‰§è¡Œæ“ä½œã€‚å› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å†…éƒ¨è¿­ä»£ï¼Œè€Œä¸æ˜¯å¤–éƒ¨è¿­ä»£ï¼Œæ‰€ä»¥è¿™æ˜¯å¯èƒ½å®ç°çš„ã€‚</p><p>ä¸‹ä¾‹å¼•å…¥ <code>parallel()</code> æ¥å¸®åŠ©ç†è§£ <code>forEachOrdered(Consumer)</code> çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ForEach</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">SZ</span> <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token constant">SZ</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token constant">SZ</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token constant">SZ</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forEachOrdered</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">258</span> <span class="token number">555</span> <span class="token number">693</span> <span class="token number">861</span> <span class="token number">961</span> <span class="token number">429</span> <span class="token number">868</span> <span class="token number">200</span> <span class="token number">522</span> <span class="token number">207</span> <span class="token number">288</span> <span class="token number">128</span> <span class="token number">551</span> <span class="token number">589</span>
<span class="token number">551</span> <span class="token number">861</span> <span class="token number">429</span> <span class="token number">589</span> <span class="token number">200</span> <span class="token number">522</span> <span class="token number">555</span> <span class="token number">693</span> <span class="token number">258</span> <span class="token number">128</span> <span class="token number">868</span> <span class="token number">288</span> <span class="token number">961</span> <span class="token number">207</span>
<span class="token number">258</span> <span class="token number">555</span> <span class="token number">693</span> <span class="token number">861</span> <span class="token number">961</span> <span class="token number">429</span> <span class="token number">868</span> <span class="token number">200</span> <span class="token number">522</span> <span class="token number">207</span> <span class="token number">288</span> <span class="token number">128</span> <span class="token number">551</span> <span class="token number">589</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¬¬ä¸€ä¸ªæµä¸­ï¼Œæœªä½¿ç”¨ <code>parallel()</code> ï¼Œå› æ­¤ä»¥å…ƒç´ ä» <code>rands()</code> å‡ºæ¥çš„é¡ºåºè¾“å‡ºç»“æœã€‚åœ¨ç¬¬äºŒä¸ªæµä¸­ï¼Œå¼•å…¥ <code>parallel()</code> ï¼Œå³ä¾¿æµå¾ˆå°ï¼Œè¾“å‡ºçš„ç»“æœçš„é¡ºåºä¹Ÿå’Œå‰é¢ä¸ä¸€æ ·ã€‚è¿™æ˜¯ç”±äºå¤šå¤„ç†å™¨å¹¶è¡Œæ“ä½œçš„åŸå› ï¼Œå¦‚æœä½ å°†ç¨‹åºå¤šè¿è¡Œå‡ æ¬¡ï¼Œä½ ä¼šå‘ç°è¾“å‡ºéƒ½ä¸ç›¸åŒï¼Œè¿™æ˜¯å¤šå¤„ç†å™¨å¹¶è¡Œæ“ä½œçš„ä¸ç¡®å®šæ€§é€ æˆçš„ç»“æœã€‚</p><p>åœ¨æœ€åä¸€ä¸ªæµä¸­ï¼ŒåŒæ—¶ä½¿ç”¨äº† <code>parallel()</code> å’Œ <code>forEachOrdered()</code> æ¥å¼ºåˆ¶ä¿æŒåŸå§‹æµé¡ºåºã€‚å› æ­¤ï¼Œå¯¹éå¹¶è¡Œæµä½¿ç”¨ <code>forEachOrdered()</code> æ˜¯æ²¡æœ‰ä»»ä½•å½±å“çš„ã€‚</p><h4 id="é›†åˆ" tabindex="-1"><a class="header-anchor" href="#é›†åˆ" aria-hidden="true">#</a> é›†åˆ</h4><ul><li><code>collect(Collector)</code>ï¼šä½¿ç”¨ <strong>Collector</strong> æ”¶é›†æµå…ƒç´ åˆ°ç»“æœé›†åˆä¸­ã€‚</li><li><code>collect(Supplier, BiConsumer, BiConsumer)</code>ï¼šåŒä¸Šï¼Œç¬¬ä¸€ä¸ªå‚æ•° <strong>Supplier</strong> åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç»“æœé›†åˆï¼Œç¬¬äºŒä¸ªå‚æ•° <strong>BiConsumer</strong> å°†ä¸‹ä¸€ä¸ªå…ƒç´ æ”¶é›†åˆ°ç»“æœé›†åˆä¸­ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° <strong>BiConsumer</strong> ç”¨äºå°†ä¸¤ä¸ªç»“æœé›†åˆåˆå¹¶èµ·æ¥ã€‚</li></ul><p>å‡è®¾æˆ‘ä»¬ç°åœ¨ä¸ºäº†ä¿è¯å…ƒç´ æœ‰åºï¼Œå°†å…ƒç´ å­˜å‚¨åœ¨ <strong>TreeSet</strong> ä¸­ã€‚<strong>Collectors</strong> é‡Œé¢æ²¡æœ‰ç‰¹å®šçš„ <code>toTreeSet()</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†é›†åˆçš„æ„é€ å‡½æ•°å¼•ç”¨ä¼ é€’ç»™ <code>Collectors.toCollection()</code>ï¼Œä»è€Œæ„å»ºä»»ä½•ç±»å‹çš„é›†åˆã€‚ä¸‹é¢æˆ‘ä»¬æ¥å°†ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å•è¯æ”¶é›†åˆ° <strong>TreeSet</strong> é›†åˆä¸­ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSetOfWords</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words2 <span class="token operator">=</span>
                <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;TreeSetOfWords.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\W+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;\\d+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// No numbers</span>
                        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">trim</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">TreeSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>words2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Files.</strong><code>lines()</code> æ‰“å¼€ <strong>Path</strong> å¹¶å°†å…¶è½¬æ¢æˆä¸ºç”±è¡Œç»„æˆçš„æµã€‚ä¸‹ä¸€è¡Œä»£ç ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ï¼ˆ<code>\\W+</code>ï¼‰ä¸ºåˆ†ç•Œï¼Œå¯¹æ¯ä¸€è¡Œè¿›è¡Œåˆ†å‰²ï¼Œç»“æœæ˜¯äº§ç”Ÿä¸€ä¸ªæ•°ç»„ï¼Œç„¶åä½¿ç”¨ <strong>Arrays.</strong><code>stream()</code> å°†æ•°ç»„è½¬åŒ–æˆä¸ºæµï¼Œæœ€å <code>flatMap()</code> å°†å„è¡Œå½¢æˆçš„å¤šä¸ªå•è¯æµï¼Œæ‰å¹³æ˜ å°„ä¸ºä¸€ä¸ªå•è¯æµã€‚ä½¿ç”¨ <code>matches(\\d+)</code> æŸ¥æ‰¾å¹¶ç§»é™¤å…¨éƒ¨æ˜¯æ•°å­—çš„å­—ç¬¦ä¸²ï¼ˆæ³¨æ„ï¼Œ<code>words2</code> æ˜¯é€šè¿‡çš„ï¼‰ã€‚ç„¶åç”¨ <strong>String.</strong><code>trim()</code> å»é™¤å•è¯ä¸¤è¾¹çš„ç©ºç™½ï¼Œ<code>filter()</code> è¿‡æ»¤æ‰€æœ‰é•¿åº¦å°äº 3 çš„å•è¯ï¼Œå¹¶åªè·å–å‰ 100 ä¸ªå•è¯ï¼Œæœ€åå°†å…¶ä¿å­˜åˆ° <strong>TreeSet</strong> ä¸­ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨æµä¸­ç”Ÿæˆ <strong>Map</strong>ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Pair</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Character</span> c<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> i<span class="token punctuation">;</span>
    <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token class-name">Character</span> c<span class="token punctuation">,</span> <span class="token class-name">Integer</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Character</span> <span class="token function">getC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Pair(&quot;</span> <span class="token operator">+</span> c <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">RandomPair</span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// An infinite iterator of random capital letters:</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> capChars <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pair</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> rand<span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span>capChars<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapCollector</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span>
                <span class="token keyword">new</span> <span class="token class-name">RandomPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>
                                <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">getI</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">getC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#ç»„åˆ" aria-hidden="true">#</a> ç»„åˆ</h4><ul><li><code>reduce(BinaryOperator)</code>ï¼šä½¿ç”¨ <strong>BinaryOperator</strong> æ¥ç»„åˆæ‰€æœ‰æµä¸­çš„å…ƒç´ ã€‚å› ä¸ºæµå¯èƒ½ä¸ºç©ºï¼Œå…¶è¿”å›å€¼ä¸º <strong>Optional</strong>ã€‚</li><li><code>reduce(identity, BinaryOperator)</code>ï¼šåŠŸèƒ½åŒä¸Šï¼Œä½†æ˜¯ä½¿ç”¨ <strong>identity</strong> ä½œä¸ºå…¶ç»„åˆçš„åˆå§‹å€¼ã€‚å› æ­¤å¦‚æœæµä¸ºç©ºï¼Œ<strong>identity</strong> å°±æ˜¯ç»“æœã€‚</li><li><code>reduce(identity, BiFunction, BinaryOperator)</code>ï¼šæ›´å¤æ‚çš„ä½¿ç”¨å½¢å¼ï¼ˆæš‚ä¸ä»‹ç»ï¼‰ï¼Œè¿™é‡ŒæŠŠå®ƒåŒ…å«åœ¨å†…ï¼Œå› ä¸ºå®ƒå¯ä»¥æé«˜æ•ˆç‡ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°ç»„åˆ <code>map()</code> å’Œ <code>reduce()</code> æ¥æ›´ç®€å•çš„è¡¨è¾¾å®ƒã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Frobnitz</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span><span class="token keyword">int</span> sz<span class="token punctuation">)</span> <span class="token punctuation">{</span> size <span class="token operator">=</span> sz<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Frobnitz(&quot;</span> <span class="token operator">+</span> size <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Generator:</span>
    <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">BOUND</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Frobnitz</span> <span class="token function">supply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Frobnitz</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token constant">BOUND</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reduce</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Frobnitz</span><span class="token operator">::</span><span class="token function">supply</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fr0<span class="token punctuation">,</span> fr1<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> fr0<span class="token punctuation">.</span>size <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token operator">?</span> fr0 <span class="token operator">:</span> fr1<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Lambda è¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>fr0</code> æ˜¯ <code>reduce()</code> ä¸­ä¸Šä¸€æ¬¡è°ƒç”¨çš„ç»“æœã€‚è€Œç¬¬äºŒä¸ªå‚æ•° <code>fr1</code> æ˜¯ä»æµä¼ é€’è¿‡æ¥çš„å€¼ã€‚</p><p><code>reduce()</code> ä¸­çš„ Lambda è¡¨è¾¾å¼ä½¿ç”¨äº†ä¸‰å…ƒè¡¨è¾¾å¼æ¥è·å–ç»“æœï¼Œå½“ <code>fr0</code> çš„ <code>size</code> å€¼å°äº 50 çš„æ—¶å€™ï¼Œå°† <code>fr0</code> ä½œä¸ºç»“æœï¼Œå¦åˆ™å°†åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ å³ <code>fr1</code> ä½œä¸ºç»“æœã€‚å½“å–å¾—ç¬¬ä¸€ä¸ª <code>size</code> å€¼å°äº 50 çš„ <code>Frobnitz</code>ï¼Œåªè¦å¾—åˆ°è¿™ä¸ªç»“æœå°±ä¼šå¿½ç•¥æµä¸­å…¶ä»–å…ƒç´ ã€‚</p><h4 id="åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#åŒ¹é…" aria-hidden="true">#</a> åŒ¹é…</h4><ul><li><code>allMatch(Predicate)</code> ï¼šå¦‚æœæµçš„æ¯ä¸ªå…ƒç´ æä¾›ç»™ <strong>Predicate</strong> éƒ½è¿”å› true ï¼Œç»“æœè¿”å›ä¸º trueã€‚åœ¨ç¬¬ä¸€ä¸ª false æ—¶ï¼Œåˆ™åœæ­¢æ‰§è¡Œè®¡ç®—ã€‚</li><li><code>anyMatch(Predicate)</code>ï¼šå¦‚æœæµçš„ä»»æ„ä¸€ä¸ªå…ƒç´ æä¾›ç»™ <strong>Predicate</strong> è¿”å› true ï¼Œç»“æœè¿”å›ä¸º trueã€‚åœ¨ç¬¬ä¸€ä¸ª true æ˜¯åœæ­¢æ‰§è¡Œè®¡ç®—ã€‚</li><li><code>noneMatch(Predicate)</code>ï¼šå¦‚æœæµçš„æ¯ä¸ªå…ƒç´ æä¾›ç»™ <strong>Predicate</strong> éƒ½è¿”å› false æ—¶ï¼Œç»“æœè¿”å›ä¸º trueã€‚åœ¨ç¬¬ä¸€ä¸ª true æ—¶åœæ­¢æ‰§è¡Œè®¡ç®—ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Matcher</span> <span class="token keyword">extends</span> <span class="token class-name">BiPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Matching</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Matcher</span> match<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                match<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>
                        <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">rangeClosed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        n <span class="token operator">-&gt;</span> n <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">allMatch</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">anyMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token operator">::</span><span class="token function">noneMatch</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>BiPredicate</strong> æ˜¯ä¸€ä¸ªäºŒå…ƒè°“è¯ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°å¹¶è¿”å› true æˆ–è€… falseã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦æµ‹è¯•çš„æµï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè°“è¯ <strong>Predicate</strong>ã€‚<strong>Matcher</strong> å¯ä»¥åŒ¹é…æ‰€æœ‰çš„ <strong>Stream::*Match</strong> æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥å°†æ¯ä¸€ä¸ª <strong>Stream::*Match</strong> æ–¹æ³•å¼•ç”¨ä¼ é€’åˆ° <code>show()</code> ä¸­ã€‚å¯¹ <code>match.test()</code> çš„è°ƒç”¨ä¼šè¢«è½¬æ¢æˆ å¯¹æ–¹æ³•å¼•ç”¨ <strong>Stream::*Match</strong> çš„è°ƒç”¨ã€‚</p><p><code>show()</code> æ¥å—ä¸€ä¸ª <strong>Matcher</strong> å’Œä¸€ä¸ª <code>val</code> å‚æ•°ï¼Œ<code>val</code> åœ¨åˆ¤æ–­æµ‹è¯• <code>n &lt; val</code> ä¸­æŒ‡å®šäº†æœ€å¤§å€¼ã€‚<code>show()</code> æ–¹æ³•ç”Ÿæˆäº†æ•´æ•° 1-9 ç»„æˆçš„ä¸€ä¸ªæµã€‚<code>peek()</code> ç”¨æ¥å±•ç¤ºåœ¨æµ‹è¯•çŸ­è·¯ä¹‹å‰æµ‹è¯•è¿›è¡Œåˆ°äº†å“ªä¸€æ­¥ã€‚ä»è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°æ¯æ¬¡éƒ½å‘ç”Ÿäº†çŸ­è·¯ã€‚</p><h4 id="æŸ¥æ‰¾" tabindex="-1"><a class="header-anchor" href="#æŸ¥æ‰¾" aria-hidden="true">#</a> æŸ¥æ‰¾</h4><ul><li><code>findFirst()</code>ï¼šè¿”å›ç¬¬ä¸€ä¸ªæµå…ƒç´ çš„ <strong>Optional</strong>ï¼Œå¦‚æœæµä¸ºç©ºè¿”å› <strong>Optional.empty</strong>ã€‚</li><li><code>findAny(</code>ï¼šè¿”å›å«æœ‰ä»»æ„æµå…ƒç´ çš„ <strong>Optional</strong>ï¼Œå¦‚æœæµä¸ºç©ºè¿”å› <strong>Optional.empty</strong>ã€‚</li></ul><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SelectElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>258
258
258
242
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ— è®ºæµæ˜¯å¦ä¸ºå¹¶è¡ŒåŒ–ï¼Œ<code>findFirst()</code> æ€»æ˜¯ä¼šé€‰æ‹©æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å¯¹äºéå¹¶è¡Œæµï¼Œ<code>findAny()</code> ä¼šé€‰æ‹©æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå³ä½¿ä»å®šä¹‰ä¸Šæ¥çœ‹æ˜¯é€‰æ‹©ä»»æ„å…ƒç´ ï¼‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”¨ <code>parallel()</code> å°†æµå¹¶è¡ŒåŒ–ï¼Œä»¥å±•ç¤º <code>findAny()</code> ä¸é€‰æ‹©æµçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å¯èƒ½æ€§ã€‚</p><p>å¦‚æœå¿…é¡»é€‰æ‹©æµä¸­æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£å°±ä½¿ç”¨ <code>reduce()</code>ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LastElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OptionalInt</span> last <span class="token operator">=</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>last<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Non-numeric object:</span>
        <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lastobj <span class="token operator">=</span>
                <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                lastobj<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;Nothing there!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>19
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>reduce()</code> çš„å‚æ•°åªæ˜¯ç”¨æœ€åä¸€ä¸ªå…ƒç´ æ›¿æ¢äº†æœ€åä¸¤ä¸ªå…ƒç´ ï¼Œæœ€ç»ˆåªç”Ÿæˆæœ€åä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœä¸ºæ•°å­—æµï¼Œä½ å¿…é¡»ä½¿ç”¨ç›¸è¿‘çš„æ•°å­— <strong>Optional</strong> ç±»å‹ï¼ˆ numeric optional typeï¼‰ï¼Œå¦åˆ™ä½¿ç”¨ <strong>Optional</strong> ç±»å‹ï¼Œå°±åƒä¸Šä¾‹ä¸­çš„ <code>Optional&lt;String&gt;</code>ã€‚</p><h4 id="ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ä¿¡æ¯" aria-hidden="true">#</a> ä¿¡æ¯</h4><ul><li><code>count()</code>ï¼šæµä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</li><li><code>max(Comparator)</code>ï¼šæ ¹æ®æ‰€ä¼ å…¥çš„ <strong>Comparator</strong> æ‰€å†³å®šçš„ â€œæœ€å¤§â€ å…ƒç´ ã€‚</li><li><code>min(Comparator)</code>ï¼šæ ¹æ®æ‰€ä¼ å…¥çš„ <strong>Comparator</strong> æ‰€å†³å®šçš„ â€œæœ€å°â€ å…ƒç´ ã€‚</li></ul><p><strong>String</strong> ç±»å‹æœ‰é¢„è®¾çš„ <strong>Comparator</strong> å®ç°ã€‚ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// streams/Informational.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Informational</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
    <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token constant">CASE_INSENSITIVE_ORDER</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                <span class="token class-name">FileToWords</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token string">&quot;Cheese.dat&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token constant">CASE_INSENSITIVE_ORDER</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;NONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>32
a
you
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>min()</code> å’Œ <code>max()</code> çš„è¿”å›ç±»å‹ä¸º <strong>Optional</strong>ï¼Œè¿™éœ€è¦æˆ‘ä»¬ä½¿ç”¨ <code>orElse()</code> æ¥è§£åŒ…ã€‚</p><h4 id="æ•°å­—æµä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ•°å­—æµä¿¡æ¯" aria-hidden="true">#</a> æ•°å­—æµä¿¡æ¯</h4><ul><li><code>average()</code> ï¼šæ±‚å–æµå…ƒç´ å¹³å‡å€¼ã€‚</li><li><code>max()</code> å’Œ <code>min()</code>ï¼šæ•°å€¼æµæ“ä½œæ— éœ€ <strong>Comparator</strong>ã€‚</li><li><code>sum()</code>ï¼šå¯¹æ‰€æœ‰æµå…ƒç´ è¿›è¡Œæ±‚å’Œã€‚</li><li><code>summaryStatistics()</code>ï¼šç”Ÿæˆå¯èƒ½æœ‰ç”¨çš„æ•°æ®ã€‚ç›®å‰å¹¶ä¸å¤ªæ¸…æ¥šè¿™ä¸ªæ–¹æ³•å­˜åœ¨çš„å¿…è¦æ€§ï¼Œå› ä¸ºæˆ‘ä»¬å…¶å®å¯ä»¥ç”¨æ›´ç›´æ¥çš„æ–¹æ³•è·å¾—éœ€è¦çš„æ•°æ®ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">streams<span class="token punctuation">.</span></span><span class="token class-name">RandInts</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NumericStreamInfo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">rands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summaryStatistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>å¤åˆ¶<span class="token class-name">ErrorOK</span><span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>507.94
998
8
50794
IntSummaryStatistics{count=100, sum=50794, min=8, average=507.940000, max=998}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šä¾‹æ“ä½œå¯¹äº <strong>LongStream</strong> å’Œ <strong>DoubleStream</strong> åŒæ ·é€‚ç”¨ã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/SurplusFate/SurplusFate.github.io/edit/main/src/docs/Java/14. å‡½æ•°å¼ç¼–ç¨‹.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></footer><nav class="page-nav"><a href="/docs/Java/13.%20%E6%B3%9B%E5%9E%8B.html" class="nav-link prev" aria-label="13. æ³›å‹"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-note"></span>13. æ³›å‹</div></a><a href="/docs/Java/15.%20%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" class="nav-link next" aria-label="15. å¼‚å¸¸å¤„ç†"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">15. å¼‚å¸¸å¤„ç†<span class="icon iconfont icon-note"></span></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.69c911d5.js" defer></script>
  </body>
</html>
