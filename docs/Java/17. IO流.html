<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://SurplusFate.github.io/docs/Java/17.%20IO%E6%B5%81.html"><meta property="og:site_name" content="ç©º~"><meta property="og:title" content="17. IO æµ"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-17T03:57:24.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:published_time" content="2022-08-13T00:00:00.000Z"><meta property="article:modified_time" content="2022-10-17T03:57:24.000Z"><link rel="icon" href="/logo.png"><script type="text/javascript" src="/base.js"></script><title>17. IO æµ | ç©º~</title><meta name="description" content="å­¦ä¹ è®°å½•">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.e3796d55.css">
    <link rel="modulepreload" href="/assets/app.6cc3427f.js"><link rel="modulepreload" href="/assets/17. IOæµ.html.710837ff.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/17. IOæµ.html.7c8d4551.js"><link rel="prefetch" href="/assets/index.html.d1d719ad.js"><link rel="prefetch" href="/assets/1. Javaè¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ.html.16a2038d.js"><link rel="prefetch" href="/assets/10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰.html.1dfa7329.js"><link rel="prefetch" href="/assets/11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’.html.bc05d690.js"><link rel="prefetch" href="/assets/12. Javaé›†åˆ.html.236c0a6e.js"><link rel="prefetch" href="/assets/13. æ³›å‹.html.d872941c.js"><link rel="prefetch" href="/assets/14. å‡½æ•°å¼ç¼–ç¨‹.html.42278969.js"><link rel="prefetch" href="/assets/15. å¼‚å¸¸å¤„ç†.html.dea146af.js"><link rel="prefetch" href="/assets/16. æ³¨è§£.html.06b16e47.js"><link rel="prefetch" href="/assets/18. å¤šçº¿ç¨‹.html.7911edec.js"><link rel="prefetch" href="/assets/19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„.html.b8772d07.js"><link rel="prefetch" href="/assets/2. ç¬¬ä¸€ä¸ªjavaç¨‹åº.html.d6f58fdb.js"><link rel="prefetch" href="/assets/3. Javaç¨‹åºçš„åŸºæœ¬è§„åˆ™.html.3e70b959.js"><link rel="prefetch" href="/assets/4. æ•°æ®ç±»å‹.html.b038438f.js"><link rel="prefetch" href="/assets/5. è¿ç®—ç¬¦.html.689d9fa3.js"><link rel="prefetch" href="/assets/6. æµç¨‹æ§åˆ¶.html.ce807feb.js"><link rel="prefetch" href="/assets/7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰.html.d5d73ee1.js"><link rel="prefetch" href="/assets/8. æ•°ç»„.html.e3fd13e4.js"><link rel="prefetch" href="/assets/9. æ•°ç»„çš„å¸¸è§ç®—æ³•.html.aeaca4e4.js"><link rel="prefetch" href="/assets/1. VMware.html.275faebe.js"><link rel="prefetch" href="/assets/2. æ–‡ä»¶ç®¡ç†.html.c806c88b.js"><link rel="prefetch" href="/assets/3. ç³»ç»Ÿç®¡ç†.html.c29dade4.js"><link rel="prefetch" href="/assets/4. ç”¨æˆ·å’Œç»„.html.77724975.js"><link rel="prefetch" href="/assets/5. è½¯ä»¶åŒ…ç®¡ç†.html.569b9477.js"><link rel="prefetch" href="/assets/6. JavaEEç¯å¢ƒæ­å»º.html.9770998c.js"><link rel="prefetch" href="/assets/index.html.d25c08e0.js"><link rel="prefetch" href="/assets/1. åˆ›å»ºä¸ç®¡ç†æ•°æ®åº“.html.cde2f5d0.js"><link rel="prefetch" href="/assets/2. åˆ›å»ºä¸ç®¡ç†æ•°æ®è¡¨.html.245f782d.js"><link rel="prefetch" href="/assets/3. çº¦æŸç®¡ç†.html.66208747.js"><link rel="prefetch" href="/assets/4. æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ.html.261846f0.js"><link rel="prefetch" href="/assets/5. è§†å›¾.html.abb7b35f.js"><link rel="prefetch" href="/assets/6. ç´¢å¼•.html.4b3674ec.js"><link rel="prefetch" href="/assets/7. äº‹åŠ¡.html.c44463a2.js"><link rel="prefetch" href="/assets/1. å‡†å¤‡.html.301a4bd8.js"><link rel="prefetch" href="/assets/10. æ³¨è§£.html.2efc626a.js"><link rel="prefetch" href="/assets/11. å¤æ‚æŸ¥è¯¢ç¯å¢ƒæ­å»º.html.03f08f7b.js"><link rel="prefetch" href="/assets/12. åŠ¨æ€ SQL.html.1190f63c.js"><link rel="prefetch" href="/assets/2. ä½¿ç”¨.html.baedad6b.js"><link rel="prefetch" href="/assets/3. ä¸»è¦ç±»ä»‹ç».html.fbfa242d.js"><link rel="prefetch" href="/assets/4. é…ç½®æ–‡ä»¶è¯¦è§£.html.5144c38f.js"><link rel="prefetch" href="/assets/5. CRUD.html.060a1793.js"><link rel="prefetch" href="/assets/6. é…ç½® environments.html.49a2a1b8.js"><link rel="prefetch" href="/assets/7. ResultMap ç»“æœé›†æ˜ å°„.html.b264070b.js"><link rel="prefetch" href="/assets/8. æ—¥å¿—.html.49cce0e2.js"><link rel="prefetch" href="/assets/9. åˆ†é¡µ.html.78475802.js"><link rel="prefetch" href="/assets/index.html.ad22a30f.js"><link rel="prefetch" href="/assets/index.html.07dfa7b1.js"><link rel="prefetch" href="/assets/1. Vue æ ¸å¿ƒ.html.3263039f.js"><link rel="prefetch" href="/assets/2. ç»„ä»¶åŒ–ç¼–ç¨‹.html.4b7c9a8e.js"><link rel="prefetch" href="/assets/3. è„šæ‰‹æ¶.html.e1075ea7.js"><link rel="prefetch" href="/assets/index.html.92bdd567.js"><link rel="prefetch" href="/assets/1. Dubbo æ¡†æ¶.html.1d5acdce.js"><link rel="prefetch" href="/assets/2. ç›´è¿æ–¹å¼.html.359ef81d.js"><link rel="prefetch" href="/assets/3. æ”¹é€  Dubbo é¡¹ç›®.html.72824e22.js"><link rel="prefetch" href="/assets/4. å¸¸ç”¨æ ‡ç­¾.html.840815cd.js"><link rel="prefetch" href="/assets/5. æ³¨å†Œä¸­å¿ƒ-Zookeeper.html.b86f30a8.js"><link rel="prefetch" href="/assets/6. ä½¿ç”¨ Zookeeper.html.c3b0bbc8.js"><link rel="prefetch" href="/assets/7. Dubbo çš„é…ç½®.html.6fee71be.js"><link rel="prefetch" href="/assets/8. ç›‘æ§ä¸­å¿ƒ.html.0738b520.js"><link rel="prefetch" href="/assets/index.html.b9bfea8f.js"><link rel="prefetch" href="/assets/index.html.2d0bfb5c.js"><link rel="prefetch" href="/assets/0. Maven.html.7e8c3bea.js"><link rel="prefetch" href="/assets/1. HTML.html.7597e63d.js"><link rel="prefetch" href="/assets/10. JavaBean.html.93a4c1a6.js"><link rel="prefetch" href="/assets/11. MVC æ¨¡å¼ä¸ä¸‰å±‚æ¶æ„çš„åŒºåˆ«.html.702fd54d.js"><link rel="prefetch" href="/assets/12. Filter.html.0620a8d2.js"><link rel="prefetch" href="/assets/13. ç›‘å¬å™¨.html.366fe924.js"><link rel="prefetch" href="/assets/14. JDBC.html.a0c2317c.js"><link rel="prefetch" href="/assets/15. Ajax.html.fc5d0393.js"><link rel="prefetch" href="/assets/2. CSS.html.314a0a75.js"><link rel="prefetch" href="/assets/3. JavaScript.html.8353ff27.js"><link rel="prefetch" href="/assets/4. jQuery.html.d1442778.js"><link rel="prefetch" href="/assets/5. xml å’Œ json.html.2e907af9.js"><link rel="prefetch" href="/assets/6. tomcat.html.56b0a242.js"><link rel="prefetch" href="/assets/7. Servlet.html.d415c7d1.js"><link rel="prefetch" href="/assets/8. Cookie å’Œ Session.html.1609f25e.js"><link rel="prefetch" href="/assets/9. JSP.html.e854fe05.js"><link rel="prefetch" href="/assets/Cookie å­˜ JSON.html.e21af224.js"><link rel="prefetch" href="/assets/SSMç¯å¢ƒæ­å»º.html.64ba0bd7.js"><link rel="prefetch" href="/assets/XXmappingæ³¨è§£.html.ae61afed.js"><link rel="prefetch" href="/assets/index.html.e16d41a5.js"><link rel="prefetch" href="/assets/å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.3612ba29.js"><link rel="prefetch" href="/assets/è¯·æ±‚è½¬å‘ä¸è¯·æ±‚é‡å®šå‘.html.db484390.js"><link rel="prefetch" href="/assets/1. IOC.html.b3d97ed2.js"><link rel="prefetch" href="/assets/10. æ•´åˆMybatis.html.bb91a0f0.js"><link rel="prefetch" href="/assets/11. äº‹åŠ¡.html.705aa111.js"><link rel="prefetch" href="/assets/12.  webé¡¹ç›®ä¸­ä½¿ç”¨å®¹å™¨å¯¹è±¡.html.559d856f.js"><link rel="prefetch" href="/assets/2. Springåˆ›å»ºå¯¹è±¡.html.3548feb4.js"><link rel="prefetch" href="/assets/3. DI ä¾èµ–æ³¨å…¥.html.5114db28.js"><link rel="prefetch" href="/assets/4. Springé…ç½®.html.e1c9412d.js"><link rel="prefetch" href="/assets/5. Beanè‡ªåŠ¨è£…é….html.98b74cd6.js"><link rel="prefetch" href="/assets/6. ä½¿ç”¨æ³¨è§£å¼€å‘.html.50e3139d.js"><link rel="prefetch" href="/assets/7. ä½¿ç”¨javaæ–¹å¼é…ç½®Spring.html.5c9621b0.js"><link rel="prefetch" href="/assets/8. ä»£ç†æ¨¡å¼.html.aae61f02.js"><link rel="prefetch" href="/assets/9. Spring AOP.html.ecc861e2.js"><link rel="prefetch" href="/assets/1. SpringBoot.html.50ee5856.js"><link rel="prefetch" href="/assets/2. JavaConfig.html.0fd39f77.js"><link rel="prefetch" href="/assets/3. Webç»„ä»¶.html.ee3acd4d.js"><link rel="prefetch" href="/assets/4. ORM æ“ä½œ MySQL.html.f320833c.js"><link rel="prefetch" href="/assets/5. RESTful.html.4e0ea18e.js"><link rel="prefetch" href="/assets/6. é›†æˆ Redis.html.019e2cdb.js"><link rel="prefetch" href="/assets/index.html.e48a84a8.js"><link rel="prefetch" href="/assets/1. ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº.html.9a21c34a.js"><link rel="prefetch" href="/assets/10. æ‹¦æˆªå™¨.html.c7f6f4c3.js"><link rel="prefetch" href="/assets/2. é…ç½®è§†å›¾è§£æå™¨.html.14badf9a.js"><link rel="prefetch" href="/assets/3. æ§åˆ¶è¯·æ±‚æ–¹å¼.html.6b8c7035.js"><link rel="prefetch" href="/assets/4. å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°.html.e1eb5ef4.js"><link rel="prefetch" href="/assets/5. å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.7d21923e.js"><link rel="prefetch" href="/assets/6. url-pattern.html.92107f19.js"><link rel="prefetch" href="/assets/7. SSMæ•´åˆ.html.176ae25f.js"><link rel="prefetch" href="/assets/8. è¯·æ±‚é‡å®šå‘å’Œè½¬å‘.html.f9d9891e.js"><link rel="prefetch" href="/assets/9. å¼‚å¸¸å¤„ç†.html.a3ed0ef7.js"><link rel="prefetch" href="/assets/index.html.95fff35f.js"><link rel="prefetch" href="/assets/404.html.a240fd26.js"><link rel="prefetch" href="/assets/index.html.959edad6.js"><link rel="prefetch" href="/assets/index.html.a3f0cf1d.js"><link rel="prefetch" href="/assets/index.html.d8d2a309.js"><link rel="prefetch" href="/assets/index.html.c637a48c.js"><link rel="prefetch" href="/assets/index.html.bec2f67e.js"><link rel="prefetch" href="/assets/index.html.1ae9f863.js"><link rel="prefetch" href="/assets/index.html.f6cd30d9.js"><link rel="prefetch" href="/assets/index.html.664b2367.js"><link rel="prefetch" href="/assets/index.html.9fc22188.js"><link rel="prefetch" href="/assets/index.html.87f5ef83.js"><link rel="prefetch" href="/assets/index.html.b6baff10.js"><link rel="prefetch" href="/assets/index.html.df9abfbe.js"><link rel="prefetch" href="/assets/index.html.2a6a22ea.js"><link rel="prefetch" href="/assets/index.html.7a057341.js"><link rel="prefetch" href="/assets/index.html.bd05c30e.js"><link rel="prefetch" href="/assets/index.html.e606c064.js"><link rel="prefetch" href="/assets/index.html.0cf4dcfd.js"><link rel="prefetch" href="/assets/index.html.8c585a06.js"><link rel="prefetch" href="/assets/index.html.b5df2403.js"><link rel="prefetch" href="/assets/index.html.2797726c.js"><link rel="prefetch" href="/assets/1. Javaè¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ.html.df7b8756.js"><link rel="prefetch" href="/assets/10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰.html.279878a3.js"><link rel="prefetch" href="/assets/11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’.html.d4e49566.js"><link rel="prefetch" href="/assets/12. Javaé›†åˆ.html.fbc31226.js"><link rel="prefetch" href="/assets/13. æ³›å‹.html.4d256333.js"><link rel="prefetch" href="/assets/14. å‡½æ•°å¼ç¼–ç¨‹.html.3cdce22b.js"><link rel="prefetch" href="/assets/15. å¼‚å¸¸å¤„ç†.html.556a1d7e.js"><link rel="prefetch" href="/assets/16. æ³¨è§£.html.18500a47.js"><link rel="prefetch" href="/assets/18. å¤šçº¿ç¨‹.html.460a21f2.js"><link rel="prefetch" href="/assets/19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„.html.683a08fc.js"><link rel="prefetch" href="/assets/2. ç¬¬ä¸€ä¸ªjavaç¨‹åº.html.02aa82a8.js"><link rel="prefetch" href="/assets/3. Javaç¨‹åºçš„åŸºæœ¬è§„åˆ™.html.70210dc4.js"><link rel="prefetch" href="/assets/4. æ•°æ®ç±»å‹.html.c15b7599.js"><link rel="prefetch" href="/assets/5. è¿ç®—ç¬¦.html.e7eb56c6.js"><link rel="prefetch" href="/assets/6. æµç¨‹æ§åˆ¶.html.14cd4dbc.js"><link rel="prefetch" href="/assets/7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰.html.488eda1b.js"><link rel="prefetch" href="/assets/8. æ•°ç»„.html.3d1331d0.js"><link rel="prefetch" href="/assets/9. æ•°ç»„çš„å¸¸è§ç®—æ³•.html.6b195922.js"><link rel="prefetch" href="/assets/1. VMware.html.b53ce838.js"><link rel="prefetch" href="/assets/2. æ–‡ä»¶ç®¡ç†.html.dbbd424a.js"><link rel="prefetch" href="/assets/3. ç³»ç»Ÿç®¡ç†.html.6e017814.js"><link rel="prefetch" href="/assets/4. ç”¨æˆ·å’Œç»„.html.113411fb.js"><link rel="prefetch" href="/assets/5. è½¯ä»¶åŒ…ç®¡ç†.html.e2eeff32.js"><link rel="prefetch" href="/assets/6. JavaEEç¯å¢ƒæ­å»º.html.f99cc8c2.js"><link rel="prefetch" href="/assets/index.html.02d89314.js"><link rel="prefetch" href="/assets/1. åˆ›å»ºä¸ç®¡ç†æ•°æ®åº“.html.de508c89.js"><link rel="prefetch" href="/assets/2. åˆ›å»ºä¸ç®¡ç†æ•°æ®è¡¨.html.5a24c57c.js"><link rel="prefetch" href="/assets/3. çº¦æŸç®¡ç†.html.c0c91e81.js"><link rel="prefetch" href="/assets/4. æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ.html.e2a3af48.js"><link rel="prefetch" href="/assets/5. è§†å›¾.html.63e89e2f.js"><link rel="prefetch" href="/assets/6. ç´¢å¼•.html.57b3d120.js"><link rel="prefetch" href="/assets/7. äº‹åŠ¡.html.345d4daf.js"><link rel="prefetch" href="/assets/1. å‡†å¤‡.html.d1f9dac9.js"><link rel="prefetch" href="/assets/10. æ³¨è§£.html.d2a0f26b.js"><link rel="prefetch" href="/assets/11. å¤æ‚æŸ¥è¯¢ç¯å¢ƒæ­å»º.html.f5cd52c9.js"><link rel="prefetch" href="/assets/12. åŠ¨æ€ SQL.html.6b9ebba6.js"><link rel="prefetch" href="/assets/2. ä½¿ç”¨.html.632b816d.js"><link rel="prefetch" href="/assets/3. ä¸»è¦ç±»ä»‹ç».html.124f4d62.js"><link rel="prefetch" href="/assets/4. é…ç½®æ–‡ä»¶è¯¦è§£.html.239ef2f3.js"><link rel="prefetch" href="/assets/5. CRUD.html.5bedeb3e.js"><link rel="prefetch" href="/assets/6. é…ç½® environments.html.7a6d43d1.js"><link rel="prefetch" href="/assets/7. ResultMap ç»“æœé›†æ˜ å°„.html.1bfbeeab.js"><link rel="prefetch" href="/assets/8. æ—¥å¿—.html.ab47df2d.js"><link rel="prefetch" href="/assets/9. åˆ†é¡µ.html.484f47d1.js"><link rel="prefetch" href="/assets/index.html.f4cc7a9e.js"><link rel="prefetch" href="/assets/index.html.12259dd5.js"><link rel="prefetch" href="/assets/1. Vue æ ¸å¿ƒ.html.9ba00192.js"><link rel="prefetch" href="/assets/2. ç»„ä»¶åŒ–ç¼–ç¨‹.html.6fc0e8ab.js"><link rel="prefetch" href="/assets/3. è„šæ‰‹æ¶.html.2747a8e2.js"><link rel="prefetch" href="/assets/index.html.03f037c0.js"><link rel="prefetch" href="/assets/1. Dubbo æ¡†æ¶.html.2f966147.js"><link rel="prefetch" href="/assets/2. ç›´è¿æ–¹å¼.html.bef99c7d.js"><link rel="prefetch" href="/assets/3. æ”¹é€  Dubbo é¡¹ç›®.html.c372199a.js"><link rel="prefetch" href="/assets/4. å¸¸ç”¨æ ‡ç­¾.html.df385e73.js"><link rel="prefetch" href="/assets/5. æ³¨å†Œä¸­å¿ƒ-Zookeeper.html.d3f6bb38.js"><link rel="prefetch" href="/assets/6. ä½¿ç”¨ Zookeeper.html.2b0770db.js"><link rel="prefetch" href="/assets/7. Dubbo çš„é…ç½®.html.c1f6157a.js"><link rel="prefetch" href="/assets/8. ç›‘æ§ä¸­å¿ƒ.html.7e6b6c75.js"><link rel="prefetch" href="/assets/index.html.e1211bb4.js"><link rel="prefetch" href="/assets/index.html.3c744a6d.js"><link rel="prefetch" href="/assets/0. Maven.html.2d4e5707.js"><link rel="prefetch" href="/assets/1. HTML.html.60276c41.js"><link rel="prefetch" href="/assets/10. JavaBean.html.d3d84c0d.js"><link rel="prefetch" href="/assets/11. MVC æ¨¡å¼ä¸ä¸‰å±‚æ¶æ„çš„åŒºåˆ«.html.b85e7060.js"><link rel="prefetch" href="/assets/12. Filter.html.6a2e5aca.js"><link rel="prefetch" href="/assets/13. ç›‘å¬å™¨.html.19bc27af.js"><link rel="prefetch" href="/assets/14. JDBC.html.fef259aa.js"><link rel="prefetch" href="/assets/15. Ajax.html.2b7cdc11.js"><link rel="prefetch" href="/assets/2. CSS.html.a5723f95.js"><link rel="prefetch" href="/assets/3. JavaScript.html.a55daa1f.js"><link rel="prefetch" href="/assets/4. jQuery.html.7670c89b.js"><link rel="prefetch" href="/assets/5. xml å’Œ json.html.c2941507.js"><link rel="prefetch" href="/assets/6. tomcat.html.c834d0b5.js"><link rel="prefetch" href="/assets/7. Servlet.html.c67e225e.js"><link rel="prefetch" href="/assets/8. Cookie å’Œ Session.html.3219b9b2.js"><link rel="prefetch" href="/assets/9. JSP.html.0e4c9eb6.js"><link rel="prefetch" href="/assets/Cookie å­˜ JSON.html.81197ca6.js"><link rel="prefetch" href="/assets/SSMç¯å¢ƒæ­å»º.html.6d032079.js"><link rel="prefetch" href="/assets/XXmappingæ³¨è§£.html.ec7e0151.js"><link rel="prefetch" href="/assets/index.html.119da6e5.js"><link rel="prefetch" href="/assets/å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.73e49bd4.js"><link rel="prefetch" href="/assets/è¯·æ±‚è½¬å‘ä¸è¯·æ±‚é‡å®šå‘.html.49343c73.js"><link rel="prefetch" href="/assets/1. IOC.html.2d47d110.js"><link rel="prefetch" href="/assets/10. æ•´åˆMybatis.html.628c268b.js"><link rel="prefetch" href="/assets/11. äº‹åŠ¡.html.aac5b658.js"><link rel="prefetch" href="/assets/12.  webé¡¹ç›®ä¸­ä½¿ç”¨å®¹å™¨å¯¹è±¡.html.5df04c51.js"><link rel="prefetch" href="/assets/2. Springåˆ›å»ºå¯¹è±¡.html.2627205b.js"><link rel="prefetch" href="/assets/3. DI ä¾èµ–æ³¨å…¥.html.faa63c5c.js"><link rel="prefetch" href="/assets/4. Springé…ç½®.html.d2a9f868.js"><link rel="prefetch" href="/assets/5. Beanè‡ªåŠ¨è£…é….html.fb6aed0a.js"><link rel="prefetch" href="/assets/6. ä½¿ç”¨æ³¨è§£å¼€å‘.html.cd03cccd.js"><link rel="prefetch" href="/assets/7. ä½¿ç”¨javaæ–¹å¼é…ç½®Spring.html.354274dc.js"><link rel="prefetch" href="/assets/8. ä»£ç†æ¨¡å¼.html.c2fdc000.js"><link rel="prefetch" href="/assets/9. Spring AOP.html.3a3c2f10.js"><link rel="prefetch" href="/assets/1. SpringBoot.html.9c6193ac.js"><link rel="prefetch" href="/assets/2. JavaConfig.html.ebe8a6ef.js"><link rel="prefetch" href="/assets/3. Webç»„ä»¶.html.462336b5.js"><link rel="prefetch" href="/assets/4. ORM æ“ä½œ MySQL.html.689faf6d.js"><link rel="prefetch" href="/assets/5. RESTful.html.2f1e7344.js"><link rel="prefetch" href="/assets/6. é›†æˆ Redis.html.00e66449.js"><link rel="prefetch" href="/assets/index.html.c8910024.js"><link rel="prefetch" href="/assets/1. ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº.html.41583296.js"><link rel="prefetch" href="/assets/10. æ‹¦æˆªå™¨.html.eeec42c4.js"><link rel="prefetch" href="/assets/2. é…ç½®è§†å›¾è§£æå™¨.html.cd360259.js"><link rel="prefetch" href="/assets/3. æ§åˆ¶è¯·æ±‚æ–¹å¼.html.77860137.js"><link rel="prefetch" href="/assets/4. å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°.html.70bad085.js"><link rel="prefetch" href="/assets/5. å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼.html.fd2a04e8.js"><link rel="prefetch" href="/assets/6. url-pattern.html.80e4f95f.js"><link rel="prefetch" href="/assets/7. SSMæ•´åˆ.html.d060b18c.js"><link rel="prefetch" href="/assets/8. è¯·æ±‚é‡å®šå‘å’Œè½¬å‘.html.4c2a4691.js"><link rel="prefetch" href="/assets/9. å¼‚å¸¸å¤„ç†.html.52a1cfa0.js"><link rel="prefetch" href="/assets/index.html.924bbad4.js"><link rel="prefetch" href="/assets/404.html.7581c493.js"><link rel="prefetch" href="/assets/index.html.5c74cdc9.js"><link rel="prefetch" href="/assets/index.html.82a2bbb0.js"><link rel="prefetch" href="/assets/index.html.a25ff052.js"><link rel="prefetch" href="/assets/index.html.69ce3c6a.js"><link rel="prefetch" href="/assets/index.html.1f325478.js"><link rel="prefetch" href="/assets/index.html.bd17332f.js"><link rel="prefetch" href="/assets/index.html.875a9b4b.js"><link rel="prefetch" href="/assets/index.html.42f847e3.js"><link rel="prefetch" href="/assets/index.html.51fc3df9.js"><link rel="prefetch" href="/assets/index.html.063be329.js"><link rel="prefetch" href="/assets/index.html.c6a699af.js"><link rel="prefetch" href="/assets/index.html.688261f8.js"><link rel="prefetch" href="/assets/index.html.96ddcd8b.js"><link rel="prefetch" href="/assets/index.html.d5970399.js"><link rel="prefetch" href="/assets/index.html.3ee39e78.js"><link rel="prefetch" href="/assets/index.html.b8bb3d18.js"><link rel="prefetch" href="/assets/index.html.ef7162af.js"><link rel="prefetch" href="/assets/index.html.6636ea1c.js"><link rel="prefetch" href="/assets/index.html.5a6a35a6.js"><link rel="prefetch" href="/assets/photoswipe.esm.f594e77b.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="ç©º~"><!----><span class="site-name hide-in-pad">ç©º~</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/guide/" class="nav-link" aria-label="å­¦ä¹ æŒ‡å—"><span class="icon iconfont icon-creative"></span>å­¦ä¹ æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Java/1.%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" class="nav-link" aria-label="JavaSE"><span class="icon iconfont icon-java"></span>JavaSE<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/MySQL/1.%20%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93.html" class="nav-link" aria-label="MySQL"><span class="icon iconfont icon-mysql"></span>MySQL<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/javaWeb/0.%20Maven.html" class="nav-link" aria-label="JavaWeb"><span class="icon iconfont icon-Apache"></span>JavaWeb<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Mybatis/" class="nav-link" aria-label="Mybatis"><span class="icon iconfont icon-stack"></span>Mybatis<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Springç³»åˆ—"><span class="title"><span class="icon iconfont icon-stack"></span>Springç³»åˆ—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/Spring/1.%20IOC.html" class="nav-link" aria-label="Spring"><span class="icon iconfont icon-module"></span>Spring<!----></a></li><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/SpringMVC/" class="nav-link" aria-label="SpringMVC"><span class="icon iconfont icon-module"></span>SpringMVC<!----></a></li><li class="dropdown-item"><a href="/docs/Spring%E7%B3%BB%E5%88%97/SpringBoot/" class="nav-link" aria-label="SpringBoot"><span class="icon iconfont icon-module"></span>SpringBoot<!----></a></li><li class="dropdown-item"><a href="/docs/Springç³»åˆ—/SpringCloud/" class="nav-link" aria-label="SpringCloud"><span class="icon iconfont icon-module"></span>SpringCloud<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/docs/Vue/" class="nav-link" aria-label="Vue"><span class="icon iconfont icon-vue"></span>Vue<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Linux/" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-linux"></span>Linux<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/Dubbo/" class="nav-link" aria-label="Dubbo"><span class="icon iconfont icon-tool"></span>Dubbo<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/%E5%B0%8F%E8%AE%B0/" class="nav-link" aria-label="å°è®°"><span class="icon iconfont icon-write"></span>å°è®°<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/SurplusFate/SurplusFate.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/docs/Java/1.%20Java%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" class="nav-link sidebar-link sidebar-page" aria-label="1. Java è¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ"><span class="icon iconfont icon-note"></span>1. Java è¯­è¨€æ¦‚è¿°ä¸å¼€å‘ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/2.%20%E7%AC%AC%E4%B8%80%E4%B8%AAjava%E7%A8%8B%E5%BA%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="2. ç¬¬ä¸€ä¸ª java ç¨‹åº"><span class="icon iconfont icon-note"></span>2. ç¬¬ä¸€ä¸ª java ç¨‹åº<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/3.%20Java%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%A7%84%E5%88%99.html" class="nav-link sidebar-link sidebar-page" aria-label="3. Java ç¨‹åºçš„åŸºæœ¬è§„åˆ™"><span class="icon iconfont icon-note"></span>3. Java ç¨‹åºçš„åŸºæœ¬è§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/4.%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="4. æ•°æ®ç±»å‹"><span class="icon iconfont icon-note"></span>4. æ•°æ®ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/5.%20%E8%BF%90%E7%AE%97%E7%AC%A6.html" class="nav-link sidebar-link sidebar-page" aria-label="5. è¿ç®—ç¬¦"><span class="icon iconfont icon-note"></span>5. è¿ç®—ç¬¦<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/6.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="6. æµç¨‹æ§åˆ¶"><span class="icon iconfont icon-note"></span>6. æµç¨‹æ§åˆ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/7.%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8A%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰"><span class="icon iconfont icon-note"></span>7. é¢å‘å¯¹è±¡ï¼ˆä¸Šï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/8.%20%E6%95%B0%E7%BB%84.html" class="nav-link sidebar-link sidebar-page" aria-label="8. æ•°ç»„"><span class="icon iconfont icon-note"></span>8. æ•°ç»„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/9.%20%E6%95%B0%E7%BB%84%E7%9A%84%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95.html" class="nav-link sidebar-link sidebar-page" aria-label="9. æ•°ç»„çš„å¸¸è§ç®—æ³•"><span class="icon iconfont icon-note"></span>9. æ•°ç»„çš„å¸¸è§ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/10.%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%B8%8B%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰"><span class="icon iconfont icon-note"></span>10. é¢å‘å¯¹è±¡ï¼ˆä¸‹ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/11.%20%E4%B8%8E%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E4%BA%A4%E4%BA%92.html" class="nav-link sidebar-link sidebar-page" aria-label="11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’"><span class="icon iconfont icon-note"></span>11. ä¸è¿è¡Œç¯å¢ƒäº¤äº’<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/12.%20Java%E9%9B%86%E5%90%88.html" class="nav-link sidebar-link sidebar-page" aria-label="12. Java é›†åˆ"><span class="icon iconfont icon-note"></span>12. Java é›†åˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/13.%20%E6%B3%9B%E5%9E%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="13. æ³›å‹"><span class="icon iconfont icon-note"></span>13. æ³›å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/14.%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="14. å‡½æ•°å¼ç¼–ç¨‹"><span class="icon iconfont icon-note"></span>14. å‡½æ•°å¼ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/15.%20%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" class="nav-link sidebar-link sidebar-page" aria-label="15. å¼‚å¸¸å¤„ç†"><span class="icon iconfont icon-note"></span>15. å¼‚å¸¸å¤„ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/16.%20%E6%B3%A8%E8%A7%A3.html" class="nav-link sidebar-link sidebar-page" aria-label="16. æ³¨è§£"><span class="icon iconfont icon-note"></span>16. æ³¨è§£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="17. IO æµ"><span class="icon iconfont icon-note"></span>17. IO æµ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#file-ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="File ç±»"><!---->File ç±»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è®¿é—®æ–‡ä»¶å’Œç›®å½•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è®¿é—®æ–‡ä»¶å’Œç›®å½•"><!---->è®¿é—®æ–‡ä»¶å’Œç›®å½•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æ–‡ä»¶è¿‡æ»¤å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–‡ä»¶è¿‡æ»¤å™¨"><!---->æ–‡ä»¶è¿‡æ»¤å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ç†è§£-java-çš„-io-æµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç†è§£ Java çš„ IO æµ"><!---->ç†è§£ Java çš„ IO æµ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æµçš„åˆ†ç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æµçš„åˆ†ç±»"><!---->æµçš„åˆ†ç±»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æµçš„æ¦‚å¿µæ¨¡å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æµçš„æ¦‚å¿µæ¨¡å‹"><!---->æµçš„æ¦‚å¿µæ¨¡å‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å­—èŠ‚æµå’Œå­—ç¬¦æµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å­—èŠ‚æµå’Œå­—ç¬¦æµ"><!---->å­—èŠ‚æµå’Œå­—ç¬¦æµ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#inputstream-å’Œ-reader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="InputStream å’Œ Reader"><!---->InputStream å’Œ Reader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#outputstream-å’Œ-writer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="OutputStream å’Œ Writer"><!---->OutputStream å’Œ Writer<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è¾“å…¥-è¾“å‡ºæµä½“ç³»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è¾“å…¥/è¾“å‡ºæµä½“ç³»"><!---->è¾“å…¥/è¾“å‡ºæµä½“ç³»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¤„ç†æµçš„ç”¨æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤„ç†æµçš„ç”¨æ³•"><!---->å¤„ç†æµçš„ç”¨æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½“ç³»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½“ç³»"><!---->ä½“ç³»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è½¬æ¢æµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è½¬æ¢æµ"><!---->è½¬æ¢æµ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æ¨å›è¾“å…¥æµ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¨å›è¾“å…¥æµ"><!---->æ¨å›è¾“å…¥æµ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#é‡å®šå‘æ ‡å‡†è¾“å…¥-è¾“å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é‡å®šå‘æ ‡å‡†è¾“å…¥/è¾“å‡º"><!---->é‡å®šå‘æ ‡å‡†è¾“å…¥/è¾“å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#java-è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Java è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®"><!---->Java è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#randomaccessfile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RandomAccessFile"><!---->RandomAccessFile<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¯¹è±¡åºåˆ—åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯¹è±¡åºåˆ—åŒ–"><!---->å¯¹è±¡åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–"><!---->ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–"><!---->å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è‡ªå®šä¹‰åºåˆ—åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰åºåˆ—åŒ–"><!---->è‡ªå®šä¹‰åºåˆ—åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶"><!---->å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ç‰ˆæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç‰ˆæœ¬"><!---->ç‰ˆæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NIO"><!---->NIO<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio-æ¦‚è¿°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NIO æ¦‚è¿°"><!---->NIO æ¦‚è¿°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-buffer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨ Buffer"><!---->ä½¿ç”¨ Buffer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-channel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨ Channel"><!---->ä½¿ç”¨ Channel<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å­—ç¬¦é›†å’Œ-charset" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å­—ç¬¦é›†å’Œ Charset"><!---->å­—ç¬¦é›†å’Œ Charset<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="NIO.2"><!---->NIO.2<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#pathã€paths-å’Œ-files-æ ¸å¿ƒ-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Pathã€Paths å’Œ Files æ ¸å¿ƒ API"><!---->Pathã€Paths å’Œ Files æ ¸å¿ƒ API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-filevisitor-éå†æ–‡ä»¶å’Œç›®å½•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨ FileVisitor éå†æ–‡ä»¶å’Œç›®å½•"><!---->ä½¿ç”¨ FileVisitor éå†æ–‡ä»¶å’Œç›®å½•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-watchservice-ç›‘æ§æ–‡ä»¶å˜åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨ WatchService ç›‘æ§æ–‡ä»¶å˜åŒ–"><!---->ä½¿ç”¨ WatchService ç›‘æ§æ–‡ä»¶å˜åŒ–<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è®¿é—®æ–‡ä»¶å±æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è®¿é—®æ–‡ä»¶å±æ€§"><!---->è®¿é—®æ–‡ä»¶å±æ€§<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/docs/Java/18.%20%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="18. å¤šçº¿ç¨‹"><span class="icon iconfont icon-note"></span>18. å¤šçº¿ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/Java/19.%20%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6%E4%B8%8E%E5%8F%8D%E5%B0%84.html" class="nav-link sidebar-link sidebar-page" aria-label="19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„"><span class="icon iconfont icon-note"></span>19. ç±»åŠ è½½æœºåˆ¶ä¸åå°„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-note"></span>17. IO æµ</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://SurplusFate.github.io" target="_blank" rel="noopener noreferrer">ç©º~</a></span><span property="author" content="ç©º~"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´8æœˆ13æ—¥</span><meta property="datePublished" content="2022-08-13T00:00:00.000Z"></span><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category6 clickable" role="navigation">java</li><meta property="articleSection" content="java"></ul></span><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 71 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT71M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#file-ç±»" class="router-link-active router-link-exact-active toc-link level2">File ç±»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è®¿é—®æ–‡ä»¶å’Œç›®å½•" class="router-link-active router-link-exact-active toc-link level3">è®¿é—®æ–‡ä»¶å’Œç›®å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æ–‡ä»¶è¿‡æ»¤å™¨" class="router-link-active router-link-exact-active toc-link level3">æ–‡ä»¶è¿‡æ»¤å™¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ç†è§£-java-çš„-io-æµ" class="router-link-active router-link-exact-active toc-link level2">ç†è§£ Java çš„ IO æµ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æµçš„åˆ†ç±»" class="router-link-active router-link-exact-active toc-link level3">æµçš„åˆ†ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æµçš„æ¦‚å¿µæ¨¡å‹" class="router-link-active router-link-exact-active toc-link level3">æµçš„æ¦‚å¿µæ¨¡å‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å­—èŠ‚æµå’Œå­—ç¬¦æµ" class="router-link-active router-link-exact-active toc-link level2">å­—èŠ‚æµå’Œå­—ç¬¦æµ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#inputstream-å’Œ-reader" class="router-link-active router-link-exact-active toc-link level3">InputStream å’Œ Reader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#outputstream-å’Œ-writer" class="router-link-active router-link-exact-active toc-link level3">OutputStream å’Œ Writer</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è¾“å…¥-è¾“å‡ºæµä½“ç³»" class="router-link-active router-link-exact-active toc-link level2">è¾“å…¥/è¾“å‡ºæµä½“ç³»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¤„ç†æµçš„ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">å¤„ç†æµçš„ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½“ç³»" class="router-link-active router-link-exact-active toc-link level3">ä½“ç³»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è½¬æ¢æµ" class="router-link-active router-link-exact-active toc-link level3">è½¬æ¢æµ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#æ¨å›è¾“å…¥æµ" class="router-link-active router-link-exact-active toc-link level3">æ¨å›è¾“å…¥æµ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#é‡å®šå‘æ ‡å‡†è¾“å…¥-è¾“å‡º" class="router-link-active router-link-exact-active toc-link level2">é‡å®šå‘æ ‡å‡†è¾“å…¥/è¾“å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#java-è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®" class="router-link-active router-link-exact-active toc-link level2">Java è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#randomaccessfile" class="router-link-active router-link-exact-active toc-link level2">RandomAccessFile</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¯¹è±¡åºåˆ—åŒ–" class="router-link-active router-link-exact-active toc-link level2">å¯¹è±¡åºåˆ—åŒ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–" class="router-link-active router-link-exact-active toc-link level3">å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è‡ªå®šä¹‰åºåˆ—åŒ–" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰åºåˆ—åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶" class="router-link-active router-link-exact-active toc-link level3">å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ç‰ˆæœ¬" class="router-link-active router-link-exact-active toc-link level3">ç‰ˆæœ¬</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio" class="router-link-active router-link-exact-active toc-link level2">NIO</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio-æ¦‚è¿°" class="router-link-active router-link-exact-active toc-link level3">NIO æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-buffer" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨ Buffer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-channel" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨ Channel</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#å­—ç¬¦é›†å’Œ-charset" class="router-link-active router-link-exact-active toc-link level3">å­—ç¬¦é›†å’Œ Charset</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#nio-2" class="router-link-active router-link-exact-active toc-link level2">NIO.2</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#pathã€paths-å’Œ-files-æ ¸å¿ƒ-api" class="router-link-active router-link-exact-active toc-link level3">Pathã€Paths å’Œ Files æ ¸å¿ƒ API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-filevisitor-éå†æ–‡ä»¶å’Œç›®å½•" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨ FileVisitor éå†æ–‡ä»¶å’Œç›®å½•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#ä½¿ç”¨-watchservice-ç›‘æ§æ–‡ä»¶å˜åŒ–" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨ WatchService ç›‘æ§æ–‡ä»¶å˜åŒ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/Java/17.%20IO%E6%B5%81.html#è®¿é—®æ–‡ä»¶å±æ€§" class="router-link-active router-link-exact-active toc-link level3">è®¿é—®æ–‡ä»¶å±æ€§</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="_17-io-æµ" tabindex="-1"><a class="header-anchor" href="#_17-io-æµ" aria-hidden="true">#</a> 17. IO æµ</h1><blockquote><p>åœ¨ä¸‘é™‹çš„ Java I/O ç¼–ç¨‹æ–¹å¼è¯ç”Ÿå¤šå¹´ä»¥åï¼ŒJava ç»ˆäºç®€åŒ–äº†æ–‡ä»¶è¯»å†™çš„åŸºæœ¬æ“ä½œã€‚</p></blockquote><p>IOï¼ˆè¾“å…¥/è¾“å‡ºï¼‰æ˜¯æ¯”è¾ƒä¹å‘³çš„äº‹æƒ…ï¼Œå› ä¸ºçœ‹ä¸åˆ°æ˜æ˜¾çš„è¿è¡Œæ•ˆæœï¼Œä½†è¾“å…¥/è¾“å‡ºæ˜¯æ‰€æœ‰ç¨‹åºéƒ½å¿…éœ€çš„éƒ¨åˆ†â€”â€”ä½¿ç”¨è¾“å…¥æœºåˆ¶ï¼Œå…è®¸ç¨‹åºè¯»å–å¤–éƒ¨æ•°æ®ï¼ˆåŒ…æ‹¬æ¥è‡ªç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡çš„æ•°æ®ï¼‰ã€ç”¨æˆ·è¾“å…¥æ•°æ®ï¼›ä½¿ç”¨è¾“å‡ºæœºåˆ¶ï¼Œå…è®¸ç¨‹åºè®°å½•è¿è¡ŒçŠ¶æ€ï¼Œå°†ç¨‹åºæ•°æ®è¾“å‡ºåˆ°ç£ç›˜ã€å…‰ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸­ã€‚</p><h2 id="file-ç±»" tabindex="-1"><a class="header-anchor" href="#file-ç±»" aria-hidden="true">#</a> File ç±»</h2><p>File ç±»æ˜¯ <code>java.io</code> åŒ…ä¸‹ä»£è¡¨ä¸å¹³å°æ— å…³çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå¸Œæœ›åœ¨ç¨‹åºä¸­æ“ä½œæ–‡ä»¶å’Œç›®å½•ï¼Œéƒ½å¯ä»¥é€šè¿‡ File ç±»æ¥å®Œæˆã€‚</p><p>File èƒ½æ–°å»ºã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶å’Œç›®å½•ï¼Œä½† File ä¸èƒ½è®¿é—®æ–‡ä»¶å†…å®¹æœ¬èº«ã€‚</p><h3 id="è®¿é—®æ–‡ä»¶å’Œç›®å½•" tabindex="-1"><a class="header-anchor" href="#è®¿é—®æ–‡ä»¶å’Œç›®å½•" aria-hidden="true">#</a> è®¿é—®æ–‡ä»¶å’Œç›®å½•</h3><p>File ç±»å¯ä»¥ä½¿ç”¨æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æ¥åˆ›å»º File å®ä¾‹ï¼Œè¯¥æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æ—¢å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ€»æ˜¯ä¾æ®ç”¨æˆ·çš„å·¥ä½œè·¯å¾„æ¥è§£é‡Šç›¸å¯¹è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„ç”±ç³»ç»Ÿå±æ€§â€œuser.dirâ€æŒ‡å®šï¼Œé€šå¸¸ä¹Ÿå°±æ˜¯è¿è¡Œ Java è™šæ‹Ÿæœºæ—¶æ‰€åœ¨çš„è·¯å¾„ã€‚</p><p>File ç±»æä¾›äº†å¾ˆå¤šæ–¹æ³•æ¥æ“ä½œæ–‡ä»¶å’Œç›®å½•ï¼Œä¸‹é¢åˆ—å‡ºä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p><strong>1. è®¿é—®æ–‡ä»¶åç›¸å…³çš„æ–¹æ³•ï¼š</strong></p><ol><li><code>String getName()</code>ï¼šè¿”å›æ­¤ File å¯¹è±¡æ‰€è¡¨ç¤ºçš„æ–‡ä»¶åæˆ–è·¯å¾„åï¼ˆå¦‚æœæ˜¯è·¯å¾„ï¼Œåˆ™è¿”å›æœ€åä¸€çº§å­è·¯å¾„åï¼‰ã€‚</li><li><code>String getPath()</code>ï¼šè¿”å›æ­¤ File å¯¹è±¡æ‰€å¯¹åº”çš„è·¯å¾„åã€‚</li><li><code>File getAbsoluteFile()</code>ï¼šè¿”å›æ­¤ File å¯¹è±¡æ‰€å¯¹åº”çš„ç»å¯¹è·¯å¾„æ‰€å¯¹åº”çš„ File å¯¹è±¡ã€‚</li><li><code>String getAbsolutePath()</code>ï¼šè¿”å›æ­¤ File å¯¹è±¡æ‰€å¯¹åº”çš„ç»å¯¹è·¯å¾„åã€‚</li><li><code>String getParent()</code>ï¼šè¿”å›æ­¤ File å¯¹è±¡æ‰€å¯¹åº”ç›®å½•ï¼ˆæœ€åä¸€çº§å­ç›®å½•ï¼‰çš„çˆ¶ç›®å½•åã€‚</li><li><code>boolean renameTo(File newName)</code>ï¼šé‡å‘½åæ­¤ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœé‡å‘½åæˆåŠŸï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</li></ol><p><strong>2. æ–‡ä»¶æ£€æµ‹ç›¸å…³çš„æ–¹æ³•ï¼š</strong></p><ol><li><code>boolean exists()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚</li><li><code>boolean canWrite()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•æ˜¯å¦å¯å†™ã€‚</li><li><code>boolean canRead()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶å’Œç›®å½•æ˜¯å¦å¯è¯»ã€‚</li><li><code>boolean isFile()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ˜¯å¦æ˜¯æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›®å½•ã€‚</li><li><code>boolean isDirectory()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ˜¯å¦æ˜¯ç›®å½•ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚</li><li><code>boolean isAbsolute()</code>ï¼šåˆ¤æ–­ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„ã€‚è¯¥æ–¹æ³•æ¶ˆé™¤äº†ä¸åŒå¹³å°çš„å·®å¼‚ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­ File å¯¹è±¡æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ã€‚åœ¨ UNIX/Linux/BSD ç­‰ç³»ç»Ÿä¸Šï¼Œå¦‚æœè·¯å¾„åå¼€å¤´æ˜¯ä¸€æ¡æ–œçº¿ï¼ˆ/ï¼‰ï¼Œåˆ™è¡¨æ˜è¯¥ File å¯¹è±¡å¯¹åº”ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼›åœ¨ Windows ç­‰ç³»ç»Ÿä¸Šï¼Œå¦‚æœè·¯å¾„å¼€å¤´æ˜¯ç›˜ç¬¦ï¼Œåˆ™è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚</li></ol><p><strong>3. è·å–å¸¸è§„æ–‡ä»¶ä¿¡æ¯ï¼š</strong></p><ol><li><code>long lastModified()</code>ï¼šè¿”å›æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</li><li><code>long length()</code>ï¼šè¿”å›æ–‡ä»¶å†…å®¹çš„é•¿åº¦ã€‚</li></ol><p><strong>4. æ–‡ä»¶æ“ä½œç›¸å…³çš„æ–¹æ³•ï¼š</strong></p><ol><li><code>boolean createNewFile()</code>ï¼šå½“æ­¤ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œè¯¥æ–¹æ³•å°†æ–°å»ºä¸€ä¸ªè¯¥ File å¯¹è±¡æ‰€æŒ‡å®šçš„æ–°æ–‡ä»¶ï¼Œå¦‚æœåˆ›å»ºæˆåŠŸåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</li><li><code>boolean delete()</code>ï¼šåˆ é™¤ File å¯¹è±¡æ‰€å¯¹åº”çš„æ–‡ä»¶æˆ–è·¯å¾„ã€‚</li><li><code>static File createTempFile(String prefix, String suffix)</code> ï¼šåœ¨é»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ç©ºæ–‡ä»¶ï¼Œä½¿ç”¨ç»™å®šå‰ç¼€ã€ç³»ç»Ÿç”Ÿæˆçš„éšæœºæ•°å’Œç»™å®šåç¼€ä½œä¸ºæ–‡ä»¶åã€‚è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ File ç±»æ¥è°ƒç”¨ã€‚prefix å‚æ•°å¿…é¡»è‡³å°‘æ˜¯ 3 ä¸ªå­—èŠ‚é•¿ã€‚å»ºè®®å‰ç¼€ä½¿ç”¨ä¸€ä¸ªçŸ­çš„ã€æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚&quot;hjb&quot;æˆ–&quot;mail&quot;ã€‚suffix å‚æ•°å¯ä»¥ä¸º nullï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨é»˜è®¤çš„åç¼€â€œ.tmpâ€ã€‚</li><li><code>static File createTempFile(String prefix, String suffix, File directory)</code>ï¼šåœ¨ directory æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ç©ºæ–‡ä»¶ï¼Œä½¿ç”¨ç»™å®šå‰ç¼€ã€ç³»ç»Ÿç”Ÿæˆçš„éšæœºæ•°å’Œç»™å®šåç¼€ä½œä¸ºæ–‡ä»¶åã€‚è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ File ç±»æ¥è°ƒç”¨ã€‚</li></ol><p><strong>5. ç›®å½•æ“ä½œç›¸å…³çš„æ–¹æ³•ï¼š</strong></p><ol><li><code>boolean mkdir()</code>ï¼šè¯•å›¾åˆ›å»ºä¸€ä¸ª File å¯¹è±¡æ‰€å¯¹åº”çš„ç›®å½•ï¼Œå¦‚æœåˆ›å»ºæˆåŠŸï¼Œåˆ™è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚è°ƒç”¨è¯¥æ–¹æ³•æ—¶ File å¯¹è±¡å¿…é¡»å¯¹åº”ä¸€ä¸ªè·¯å¾„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</li><li><code>String[] list()</code>ï¼šåˆ—å‡º File å¯¹è±¡çš„æ‰€æœ‰å­æ–‡ä»¶åå’Œè·¯å¾„åï¼Œè¿”å› String æ•°ç»„ã€‚</li><li><code>File[] listFiles()</code>ï¼šåˆ—å‡º File å¯¹è±¡çš„æ‰€æœ‰å­æ–‡ä»¶å’Œè·¯å¾„ï¼Œè¿”å› File æ•°ç»„ã€‚</li><li><code>static File[] listRoots()</code>ï¼šåˆ—å‡ºç³»ç»Ÿæ‰€æœ‰çš„æ ¹è·¯å¾„ã€‚è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ File ç±»æ¥è°ƒç”¨ã€‚</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä»¥å½“å‰è·¯å¾„æ¥åˆ›å»ºä¸€ä¸ª File å¯¹è±¡ï¼ˆåªä¼šåˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸ä¼šåœ¨ç”µè„‘ä¸­åˆ›å»ºæ–‡ä»¶ï¼‰</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç›´æ¥è·å–æ–‡ä»¶åï¼Œè¾“å‡ºä¸€ç‚¹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ç›¸å¯¹è·¯å¾„çš„çˆ¶è·¯å¾„å¯èƒ½å‡ºé”™ï¼Œä¸‹é¢ä»£ç è¾“å‡º null</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ç»å¯¹è·¯å¾„</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getAbsoluteFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ä¸Šä¸€çº§è·¯å¾„</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getAbsoluteFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åœ¨å½“å‰è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶</span>
        <span class="token class-name">File</span> tmpFile <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">.</span><span class="token function">createTempFile</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.txt&quot;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŒ‡å®šå½“ JVM é€€å‡ºæ—¶åˆ é™¤è¯¥æ–‡ä»¶</span>
        tmpFile<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»¥ç³»ç»Ÿå½“å‰æ—¶é—´ä½œä¸ºæ–°æ–‡ä»¶åæ¥åˆ›å»ºæ–°å¯¹è±¡ï¼ˆåªä¼šåˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä¸ä¼šåœ¨ç”µè„‘ä¸­åˆ›å»ºæ–‡ä»¶ï¼‰</span>
        <span class="token class-name">File</span> newFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;newFile æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š&quot;</span> <span class="token operator">+</span> newFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»¥æŒ‡å®š newFile å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆåˆ›å»ºå…·ä½“çš„æ–‡ä»¶ï¼‰</span>
        newFile<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä»¥ newFile å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå› ä¸º newFile å·²ç»å­˜åœ¨</span>
        <span class="token comment">// æ‰€ä»¥ä¸‹é¢æ–¹æ³•è¿”å› falseï¼Œå³æ— æ³•åˆ›å»ºè¯¥ç›®å½•</span>
        newFile<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨ list() æ–¹æ³•åˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œè·¯å¾„</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fileList <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œè·¯å¾„å¦‚ä¸‹====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> fileName <span class="token operator">:</span> fileList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// listRoots() é™æ€æ–¹æ³•åˆ—å‡ºæ‰€æœ‰çš„ç£ç›˜æ ¹è·¯å¾„</span>
        <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> roots <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">.</span><span class="token function">listRoots</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====ç³»ç»Ÿæ‰€æœ‰æ ¹è·¯å¾„å¦‚ä¸‹====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> root <span class="token operator">:</span> roots<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–‡ä»¶è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶è¿‡æ»¤å™¨" aria-hidden="true">#</a> æ–‡ä»¶è¿‡æ»¤å™¨</h3><p>åœ¨ File ç±»çš„ <code>list()</code>æ–¹æ³•ä¸­å¯ä»¥æ¥æ”¶ä¸€ä¸ª <code>FilenameFilter</code>å‚æ•°ï¼Œé€šè¿‡è¯¥å‚æ•°å¯ä»¥åªåˆ—å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶ã€‚</p><p><code>FilenameFilter</code>æ¥å£é‡ŒåŒ…å«äº†ä¸€ä¸ª <code>accept(File dir, String name)</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¾æ¬¡å¯¹æŒ‡å®š File çš„æ‰€æœ‰å­ç›®å½•æˆ–è€…æ–‡ä»¶è¿›è¡Œè¿­ä»£ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å› trueï¼Œåˆ™ <code>list()</code>æ–¹æ³•ä¼šåˆ—å‡ºè¯¥å­ç›®å½•æˆ–è€…æ–‡ä»¶ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilenameFilterTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nameList <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyFilenameFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> nameList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®ç°è‡ªå·±çš„ FilenameFilter å®ç°ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">MyFilenameFilter</span> <span class="token keyword">implements</span> <span class="token class-name">FilenameFilter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœæ–‡ä»¶åä»¥ã€‚java ç»“å°¾ï¼Œæˆ–è€…æ–‡ä»¶å¯¹åº”ä¸€ä¸ªè·¯å¾„ï¼Œåˆ™è¿”å› true</span>
        <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.java&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç†è§£-java-çš„-io-æµ" tabindex="-1"><a class="header-anchor" href="#ç†è§£-java-çš„-io-æµ" aria-hidden="true">#</a> ç†è§£ Java çš„ IO æµ</h2><p>Java çš„ IO æµæ˜¯å®ç°è¾“å…¥/è¾“å‡ºçš„åŸºç¡€ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿åœ°å®ç°æ•°æ®çš„è¾“å…¥/è¾“å‡ºæ“ä½œï¼Œåœ¨ Java ä¸­æŠŠä¸åŒçš„è¾“å…¥/è¾“å‡ºæºï¼ˆé”®ç›˜ã€æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰æŠ½è±¡è¡¨è¿°ä¸ºâ€œæµâ€ï¼ˆstreamï¼‰ï¼Œé€šè¿‡æµçš„æ–¹å¼å…è®¸ Java ç¨‹åºä½¿ç”¨ç›¸åŒçš„æ–¹å¼æ¥è®¿é—®ä¸åŒçš„è¾“å…¥/è¾“å‡ºæºã€‚stream æ˜¯ä»èµ·æºï¼ˆsourceï¼‰åˆ°æ¥æ”¶ï¼ˆsinkï¼‰çš„æœ‰åºæ•°æ®ã€‚</p><p>Java æŠŠæ‰€æœ‰ä¼ ç»Ÿçš„æµç±»å‹ï¼ˆç±»æˆ–æŠ½è±¡ç±»ï¼‰éƒ½æ”¾åœ¨ <code>java.io</code> åŒ…ä¸­ï¼Œç”¨ä»¥å®ç°è¾“å…¥/è¾“å‡ºåŠŸèƒ½ã€‚</p><h3 id="æµçš„åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#æµçš„åˆ†ç±»" aria-hidden="true">#</a> æµçš„åˆ†ç±»</h3><p><strong>1. è¾“å…¥æµå’Œè¾“å‡ºæµï¼š</strong></p><ol><li>è¾“å…¥æµï¼šåªèƒ½ä»ä¸­è¯»å–æ•°æ®ï¼Œè€Œä¸èƒ½å‘å…¶å†™å…¥æ•°æ®ã€‚</li><li>è¾“å‡ºæµï¼šåªèƒ½å‘å…¶å†™å…¥æ•°æ®ï¼Œè€Œä¸èƒ½ä»ä¸­è¯»å–æ•°æ®ã€‚</li></ol><p>æ•°æ®ä»å†…å­˜åˆ°ç¡¬ç›˜ï¼Œé€šå¸¸ç§°ä¸ºè¾“å‡ºæµâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œçš„è¾“å…¥ã€è¾“å‡ºéƒ½æ˜¯ä»ç¨‹åºè¿è¡Œæ‰€åœ¨å†…å­˜çš„è§’åº¦æ¥åˆ’åˆ†çš„ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152045882.jpeg" alt="epub_681336_1946"></p><p>Java çš„è¾“å…¥æµä¸»è¦ç”± <code>InputStream</code>å’Œ Reader ä½œä¸ºåŸºç±»ï¼Œè€Œè¾“å‡ºæµåˆ™ä¸»è¦ç”± <code>OutputStream</code>å’Œ Writer ä½œä¸ºåŸºç±»ã€‚å®ƒä»¬éƒ½æ˜¯ä¸€äº›æŠ½è±¡åŸºç±»ï¼Œæ— æ³•ç›´æ¥åˆ›å»ºå®ä¾‹ã€‚</p><p><strong>2. å­—èŠ‚æµå’Œå­—ç¬¦æµï¼š</strong></p><p>å­—èŠ‚æµå’Œå­—ç¬¦æµçš„ç”¨æ³•å‡ ä¹å®Œå…¨ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºå­—èŠ‚æµå’Œå­—ç¬¦æµæ‰€æ“ä½œçš„æ•°æ®å•å…ƒä¸åŒâ€”â€”å­—èŠ‚æµæ“ä½œçš„æ•°æ®å•å…ƒæ˜¯ 8 ä½çš„å­—èŠ‚ï¼Œè€Œå­—ç¬¦æµæ“ä½œçš„æ•°æ®å•å…ƒæ˜¯ 16 ä½çš„å­—ç¬¦ã€‚</p><p>å­—èŠ‚æµä¸»è¦ç”± <code>InputStream</code>å’Œ <code>OutputStream</code>ä½œä¸ºåŸºç±»ï¼Œè€Œå­—ç¬¦æµåˆ™ä¸»è¦ç”± Reader å’Œ Writer ä½œä¸ºåŸºç±»ã€‚</p><p><strong>3. èŠ‚ç‚¹æµå’Œå¤„ç†æµï¼š</strong></p><p>å¯ä»¥ä»/å‘ä¸€ä¸ªç‰¹å®šçš„ IO è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ã€ç½‘ç»œï¼‰è¯»/å†™æ•°æ®çš„æµï¼Œç§°ä¸ºèŠ‚ç‚¹æµï¼ŒèŠ‚ç‚¹æµä¹Ÿè¢«ç§°ä¸ºä½çº§æµï¼ˆLow Level Streamï¼‰ã€‚</p><p>å½“ä½¿ç”¨èŠ‚ç‚¹æµè¿›è¡Œè¾“å…¥/è¾“å‡ºæ—¶ï¼Œç¨‹åºç›´æ¥è¿æ¥åˆ°å®é™…çš„æ•°æ®æºï¼Œå’Œå®é™…çš„è¾“å…¥/è¾“å‡ºèŠ‚ç‚¹è¿æ¥ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152047288.jpeg" alt="epub_681336_1948"></p><p>å¤„ç†æµåˆ™ç”¨äºå¯¹ä¸€ä¸ªå·²å­˜åœ¨çš„æµè¿›è¡Œè¿æ¥æˆ–å°è£…ï¼Œé€šè¿‡å°è£…åçš„æµæ¥å®ç°æ•°æ®è¯»/å†™åŠŸèƒ½ã€‚å¤„ç†æµä¹Ÿè¢«ç§°ä¸ºé«˜çº§æµã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152048478.jpeg" alt="epub_681336_1949"></p><p>å½“ä½¿ç”¨å¤„ç†æµè¿›è¡Œè¾“å…¥/è¾“å‡ºæ—¶ï¼Œç¨‹åºå¹¶ä¸ä¼šç›´æ¥è¿æ¥åˆ°å®é™…çš„æ•°æ®æºï¼Œæ²¡æœ‰å’Œå®é™…çš„è¾“å…¥/è¾“å‡ºèŠ‚ç‚¹è¿æ¥ã€‚</p><p>ä½¿ç”¨å¤„ç†æµçš„ä¸€ä¸ªæ˜æ˜¾å¥½å¤„æ˜¯ï¼Œåªè¦ä½¿ç”¨ç›¸åŒçš„å¤„ç†æµï¼Œç¨‹åºå°±å¯ä»¥é‡‡ç”¨å®Œå…¨ç›¸åŒçš„è¾“å…¥/è¾“å‡ºä»£ç æ¥è®¿é—®ä¸åŒçš„æ•°æ®æºï¼Œéšç€å¤„ç†æµæ‰€åŒ…è£…èŠ‚ç‚¹æµçš„å˜åŒ–ï¼Œç¨‹åºå®é™…æ‰€è®¿é—®çš„æ•°æ®æºä¹Ÿç›¸åº”åœ°å‘ç”Ÿå˜åŒ–ã€‚</p><div class="custom-container info"><p class="custom-container-title">ç›¸å…³ä¿¡æ¯</p><p>Java ä½¿ç”¨å¤„ç†æµæ¥åŒ…è£…èŠ‚ç‚¹æµæ˜¯ä¸€ç§å…¸å‹çš„è£…é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡ä½¿ç”¨å¤„ç†æµæ¥åŒ…è£…ä¸åŒçš„èŠ‚ç‚¹æµï¼Œæ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµçš„å®ç°å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥å®Œæˆè¾“å…¥/è¾“å‡ºåŠŸèƒ½ã€‚å› æ­¤å¤„ç†æµä¹Ÿè¢«ç§°ä¸ºåŒ…è£…æµã€‚</p></div><h3 id="æµçš„æ¦‚å¿µæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#æµçš„æ¦‚å¿µæ¨¡å‹" aria-hidden="true">#</a> æµçš„æ¦‚å¿µæ¨¡å‹</h3><p>Java æŠŠæ‰€æœ‰è®¾å¤‡é‡Œçš„æœ‰åºæ•°æ®æŠ½è±¡æˆæµæ¨¡å‹ï¼Œç®€åŒ–äº†è¾“å…¥/è¾“å‡ºå¤„ç†ï¼Œç†è§£äº†æµçš„æ¦‚å¿µæ¨¡å‹ä¹Ÿå°±äº†è§£äº† Java IOã€‚</p><p>Java çš„ IO æµçš„ 40 å¤šä¸ªç±»éƒ½æ˜¯ä»å¦‚ä¸‹ 4 ä¸ªæŠ½è±¡åŸºç±»æ´¾ç”Ÿçš„ã€‚</p><ol><li><code>InputStream/Reader</code>ï¼šæ‰€æœ‰è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚</li><li><code>OutputStream/Writer</code>ï¼šæ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚</li></ol><p>å¯¹äº <code>InputStream</code>å’Œ <code>Reader</code>è€Œè¨€ï¼Œå®ƒä»¬æŠŠè¾“å…¥è®¾å¤‡æŠ½è±¡æˆä¸€ä¸ªâ€œæ°´ç®¡â€ï¼Œè¿™ä¸ªæ°´ç®¡é‡Œçš„æ¯ä¸ªâ€œæ°´æ»´â€ä¾æ¬¡æ’åˆ—ã€‚</p><p>å­—èŠ‚æµå’Œå­—ç¬¦æµçš„å¤„ç†æ–¹å¼å…¶å®éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯å®ƒä»¬å¤„ç†çš„è¾“å…¥/è¾“å‡ºå•ä½ä¸åŒè€Œå·²ã€‚</p><p>è¾“å…¥æµä½¿ç”¨éšå¼çš„è®°å½•æŒ‡é’ˆæ¥è¡¨ç¤ºå½“å‰æ­£å‡†å¤‡ä»å“ªä¸ªâ€œæ°´æ»´â€å¼€å§‹è¯»å–ï¼Œæ¯å½“ç¨‹åºä» <code>InputStream</code>æˆ– <code>Reader</code> é‡Œå–å‡ºä¸€ä¸ªæˆ–å¤šä¸ªâ€œæ°´æ»´â€åï¼Œè®°å½•æŒ‡é’ˆè‡ªåŠ¨å‘åç§»åŠ¨ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œ<code>InputStream</code>å’Œ <code>Reader</code>é‡Œéƒ½æä¾›ä¸€äº›æ–¹æ³•æ¥æ§åˆ¶è®°å½•æŒ‡é’ˆçš„ç§»åŠ¨ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152100807.jpeg" alt="epub_681336_1953"></p><p>å¯¹äº <code>OutputStream</code>å’Œ <code>Writer</code>è€Œè¨€ï¼Œå®ƒä»¬åŒæ ·æŠŠè¾“å‡ºè®¾å¤‡æŠ½è±¡æˆä¸€ä¸ªâ€œæ°´ç®¡â€ï¼Œåªæ˜¯è¿™ä¸ªæ°´ç®¡é‡Œæ²¡æœ‰ä»»ä½•æ°´æ»´ã€‚</p><p>å½“æ‰§è¡Œè¾“å‡ºæ—¶ï¼Œç¨‹åºç›¸å½“äºä¾æ¬¡æŠŠâ€œæ°´æ»´â€æ”¾å…¥åˆ°è¾“å‡ºæµçš„æ°´ç®¡ä¸­ï¼Œè¾“å‡ºæµåŒæ ·é‡‡ç”¨éšå¼çš„è®°å½•æŒ‡é’ˆæ¥æ ‡è¯†å½“å‰æ°´æ»´å³å°†æ”¾å…¥çš„ä½ç½®ï¼Œæ¯å½“ç¨‹åºå‘ <code>OutputStream</code> æˆ– <code>Writer</code>é‡Œè¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªæ°´æ»´åï¼Œè®°å½•æŒ‡é’ˆè‡ªåŠ¨å‘åç§»åŠ¨ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152101684.jpeg" alt="epub_681336_1954"></p><p>å¤„ç†æµçš„åŠŸèƒ½ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ã€‚</p><ol><li>æ€§èƒ½çš„æé«˜ï¼šä¸»è¦ä»¥å¢åŠ ç¼“å†²çš„æ–¹å¼æ¥æé«˜è¾“å…¥/è¾“å‡ºçš„æ•ˆç‡ã€‚</li><li>æ“ä½œçš„ä¾¿æ·ï¼šå¤„ç†æµå¯èƒ½æä¾›äº†ä¸€ç³»åˆ—ä¾¿æ·çš„æ–¹æ³•æ¥ä¸€æ¬¡è¾“å…¥/è¾“å‡ºå¤§æ‰¹é‡çš„å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å…¥/è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªâ€œæ°´æ»´â€ã€‚</li></ol><p>å¤„ç†æµå¯ä»¥â€œå«æ¥â€åœ¨ä»»ä½•å·²å­˜åœ¨çš„æµçš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿™å°±å…è®¸ Java åº”ç”¨ç¨‹åºé‡‡ç”¨ç›¸åŒçš„ä»£ç ã€é€æ˜çš„æ–¹å¼æ¥è®¿é—®ä¸åŒçš„è¾“å…¥/è¾“å‡ºè®¾å¤‡çš„æ•°æ®æµã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152102274.jpeg" alt="epub_681336_1957"></p><p>é€šè¿‡ä½¿ç”¨å¤„ç†æµï¼ŒJava ç¨‹åºæ— é¡»ç†ä¼šè¾“å…¥/è¾“å‡ºèŠ‚ç‚¹æ˜¯ç£ç›˜ã€ç½‘ç»œè¿˜æ˜¯å…¶ä»–çš„è¾“å…¥/è¾“å‡ºè®¾å¤‡ï¼Œç¨‹åºåªè¦å°†è¿™äº›èŠ‚ç‚¹æµåŒ…è£…æˆå¤„ç†æµï¼Œå°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„è¾“å…¥/è¾“å‡ºä»£ç æ¥è¯»å†™ä¸åŒçš„è¾“å…¥/è¾“å‡ºè®¾å¤‡çš„æ•°æ®ã€‚</p><h2 id="å­—èŠ‚æµå’Œå­—ç¬¦æµ" tabindex="-1"><a class="header-anchor" href="#å­—èŠ‚æµå’Œå­—ç¬¦æµ" aria-hidden="true">#</a> å­—èŠ‚æµå’Œå­—ç¬¦æµ</h2><p>å®ƒä»¬çš„æ“ä½œæ–¹å¼å‡ ä¹å®Œå…¨ä¸€æ ·ï¼ŒåŒºåˆ«åªæ˜¯æ“ä½œçš„æ•°æ®å•å…ƒä¸åŒè€Œå·²â€”â€”å­—èŠ‚æµæ“ä½œçš„æ•°æ®å•å…ƒæ˜¯å­—èŠ‚ï¼Œå­—ç¬¦æµæ“ä½œçš„æ•°æ®å•å…ƒæ˜¯å­—ç¬¦ã€‚</p><h3 id="inputstream-å’Œ-reader" tabindex="-1"><a class="header-anchor" href="#inputstream-å’Œ-reader" aria-hidden="true">#</a> InputStream å’Œ Reader</h3><p><code>InputStream</code>å’Œ <code>Reader</code>æ˜¯æ‰€æœ‰è¾“å…¥æµçš„æŠ½è±¡åŸºç±»ï¼Œæœ¬èº«å¹¶ä¸èƒ½åˆ›å»ºå®ä¾‹æ¥æ‰§è¡Œè¾“å…¥ï¼Œä½†å®ƒä»¬å°†æˆä¸ºæ‰€æœ‰è¾“å…¥æµçš„æ¨¡æ¿ï¼Œæ‰€ä»¥å®ƒä»¬çš„æ–¹æ³•æ˜¯æ‰€æœ‰è¾“å…¥æµéƒ½å¯ä½¿ç”¨çš„æ–¹æ³•ã€‚</p><p>åœ¨ <code>InputStream</code>é‡ŒåŒ…å«å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>int read()</code>ï¼šä»è¾“å…¥æµä¸­è¯»å–å•ä¸ªå­—èŠ‚ï¼ˆç›¸å½“äºä»å›¾ 15.5 æ‰€ç¤ºçš„æ°´ç®¡ä¸­å–å‡ºä¸€æ»´æ°´ï¼‰ï¼Œè¿”å›æ‰€è¯»å–çš„å­—èŠ‚æ•°æ®ï¼ˆå­—èŠ‚æ•°æ®å¯ç›´æ¥è½¬æ¢ä¸º int ç±»å‹ï¼‰ã€‚</li><li><code>int read(byte[] b)</code>ï¼šä»è¾“å…¥æµä¸­æœ€å¤šè¯»å– b.length ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å­—èŠ‚æ•°ç»„ b ä¸­ï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚</li><li><code>int read(byte[] b, int off, int len)</code>ï¼šä»è¾“å…¥æµä¸­æœ€å¤šè¯»å– len ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨æ•°ç»„ b ä¸­ï¼Œæ”¾å…¥æ•°ç»„ b ä¸­æ—¶ï¼Œå¹¶ä¸æ˜¯ä»æ•°ç»„èµ·ç‚¹å¼€å§‹ï¼Œè€Œæ˜¯ä» off ä½ç½®å¼€å§‹ï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚</li></ol><p>åœ¨ Reader é‡ŒåŒ…å«å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>int read()</code>ï¼šä»è¾“å…¥æµä¸­è¯»å–å•ä¸ªå­—ç¬¦ï¼ˆç›¸å½“äºä»å›¾ 15.5 æ‰€ç¤ºçš„æ°´ç®¡ä¸­å–å‡ºä¸€æ»´æ°´ï¼‰ï¼Œè¿”å›æ‰€è¯»å–çš„å­—ç¬¦æ•°æ®ï¼ˆå­—ç¬¦æ•°æ®å¯ç›´æ¥è½¬æ¢ä¸º int ç±»å‹ï¼‰ã€‚</li><li><code>int read(char[] cbuf)</code>ï¼šä»è¾“å…¥æµä¸­æœ€å¤šè¯»å– cbuf.length ä¸ªå­—ç¬¦çš„æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å­—ç¬¦æ•°ç»„ cbuf ä¸­ï¼Œè¿”å›å®é™…è¯»å–çš„å­—ç¬¦æ•°ã€‚</li><li><code>int read(char[] cbuf, int off, int len)</code>ï¼šä»è¾“å…¥æµä¸­æœ€å¤šè¯»å– len ä¸ªå­—ç¬¦çš„æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨å­—ç¬¦æ•°ç»„ cbuf ä¸­ï¼Œæ”¾å…¥æ•°ç»„ cbuf ä¸­æ—¶ï¼Œå¹¶ä¸æ˜¯ä»æ•°ç»„èµ·ç‚¹å¼€å§‹ï¼Œè€Œæ˜¯ä» off ä½ç½®å¼€å§‹ï¼Œè¿”å›å®é™…è¯»å–çš„å­—ç¬¦æ•°ã€‚</li></ol><p>å¯¹æ¯” <code>InputStream</code>å’Œ <code>Reader</code>æ‰€æä¾›çš„æ–¹æ³•ï¼Œå°±ä¸éš¾å‘ç°è¿™ä¸¤ä¸ªåŸºç±»çš„åŠŸèƒ½åŸºæœ¬æ˜¯ä¸€æ ·çš„ã€‚<code>InputStream</code>å’Œ <code>Reader</code> éƒ½æ˜¯å°†è¾“å…¥æ•°æ®æŠ½è±¡æˆæ°´ç®¡ï¼Œæ‰€ä»¥ç¨‹åºæ—¢å¯ä»¥é€šè¿‡ <code>read()</code>æ–¹æ³•æ¯æ¬¡è¯»å–ä¸€ä¸ªâ€œæ°´æ»´â€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>read(char[] cbuf)</code> æˆ– <code>read(byte[] b)</code>æ–¹æ³•æ¥è¯»å–å¤šä¸ªâ€œæ°´æ»´â€ã€‚</p><p><code>read(char[] cbuf)</code>æ–¹æ³•ä¸­çš„æ•°ç»„å¯ç†è§£æˆä¸€ä¸ªâ€œç«¹ç­’â€ï¼Œç¨‹åºæ¯æ¬¡è°ƒç”¨è¾“å…¥æµçš„ <code>read(char[] cbuf)</code>æˆ– <code>read(byte[] b)</code> æ–¹æ³•ï¼Œå°±ç›¸å½“äºç”¨â€œç«¹ç­’â€ä»è¾“å…¥æµä¸­å–å‡ºä¸€ç­’â€œæ°´æ»´â€ï¼Œç¨‹åºå¾—åˆ°â€œç«¹ç­’â€é‡Œçš„â€œæ°´æ»´â€åï¼Œè½¬æ¢æˆç›¸åº”çš„æ•°æ®å³å¯ï¼›ç¨‹åºå¤šæ¬¡é‡å¤è¿™ä¸ªâ€œå–æ°´â€è¿‡ç¨‹ï¼Œç›´åˆ°æœ€åã€‚ç›´åˆ° <code>read(char[]cbuf) æˆ– read(byte[] b)</code> æ–¹æ³•è¿”å›-1ï¼Œå³è¡¨æ˜åˆ°äº†è¾“å…¥æµçš„ç»“æŸç‚¹ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208152113813.jpeg" alt="epub_681336_1965"></p><p><code>InputStream</code>å’Œ <code>Reader</code>åˆ†åˆ«æœ‰ä¸€ä¸ªç”¨äºè¯»å–æ–‡ä»¶çš„è¾“å…¥æµï¼š<code>FileInputStream</code>å’Œ <code>FileReader</code>ï¼Œå®ƒä»¬éƒ½æ˜¯èŠ‚ç‚¹æµâ€”â€”ä¼šç›´æ¥å’ŒæŒ‡å®šæ–‡ä»¶å…³è”ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileInputStreamTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºå­—èŠ‚è¾“å…¥æµ</span>
        <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FileInputStreamTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 1024 çš„â€œç«¹ç­’â€</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// ç”¨äºä¿å­˜å®é™…è¯»å–çš„å­—èŠ‚æ•°</span>
        <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// ä½¿ç”¨å¾ªç¯æ¥é‡å¤â€œå–æ°´â€è¿‡ç¨‹</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å–å‡ºâ€œç«¹ç­’â€ä¸­çš„æ°´æ»´ï¼ˆå­—èŠ‚ï¼‰ï¼Œå°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²è¾“å…¥</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// å…³é—­æ–‡ä»¶è¾“å…¥æµï¼Œæ”¾åœ¨ finally å—é‡Œæ›´å®‰å…¨</span>
        fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>FileReader</code>æ¥è¯»å–æ–‡ä»¶æœ¬èº«ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileReaderTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºå­—ç¬¦è¾“å…¥æµ</span>
            <span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FileReaderTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 32 çš„â€œç«¹ç­’â€</span>
            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// ç”¨äºä¿å­˜å®é™…è¯»å–çš„å­—ç¬¦æ•°</span>
            <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨å¾ªç¯æ¥é‡å¤â€œå–æ°´â€è¿‡ç¨‹</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å–å‡ºâ€œç«¹ç­’â€ä¸­çš„æ°´æ»´ï¼ˆå­—ç¬¦ï¼‰ï¼Œå°†å­—ç¬¦æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²è¾“å…¥ï¼</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>cbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>InputStream</code>å’Œ <code>Reader</code>è¿˜æ”¯æŒå¦‚ä¸‹å‡ ä¸ªæ–¹æ³•æ¥ç§»åŠ¨è®°å½•æŒ‡é’ˆã€‚</p><ol><li><code>void mark(int readAheadLimit)</code>ï¼šåœ¨è®°å½•æŒ‡é’ˆå½“å‰ä½ç½®è®°å½•ä¸€ä¸ªæ ‡è®°ï¼ˆmarkï¼‰ã€‚</li><li><code>boolean markSupported()</code>ï¼šåˆ¤æ–­æ­¤è¾“å…¥æµæ˜¯å¦æ”¯æŒ mark() æ“ä½œï¼Œå³æ˜¯å¦æ”¯æŒè®°å½•æ ‡è®°ã€‚</li><li><code>void reset()</code>ï¼šå°†æ­¤æµçš„è®°å½•æŒ‡é’ˆé‡æ–°å®šä½åˆ°ä¸Šä¸€æ¬¡è®°å½•æ ‡è®°ï¼ˆmarkï¼‰çš„ä½ç½®ã€‚</li><li><code>long skip(long n</code>)ï¼šè®°å½•æŒ‡é’ˆå‘å‰ç§»åŠ¨ n ä¸ªå­—èŠ‚/å­—ç¬¦ã€‚</li></ol><h3 id="outputstream-å’Œ-writer" tabindex="-1"><a class="header-anchor" href="#outputstream-å’Œ-writer" aria-hidden="true">#</a> OutputStream å’Œ Writer</h3><p>ä¸¤ä¸ªæµéƒ½æä¾›äº†å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>void write(int c)</code>ï¼šå°†æŒ‡å®šçš„å­—èŠ‚/å­—ç¬¦è¾“å‡ºåˆ°è¾“å‡ºæµä¸­ï¼Œå…¶ä¸­ c æ—¢å¯ä»¥ä»£è¡¨å­—èŠ‚ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨å­—ç¬¦ã€‚</li><li><code>void write(byte[]/char[] buf)</code>ï¼šå°†å­—èŠ‚æ•°ç»„/å­—ç¬¦æ•°ç»„ä¸­çš„æ•°æ®è¾“å‡ºåˆ°æŒ‡å®šè¾“å‡ºæµä¸­ã€‚</li><li><code>void write(byte[]/char[] buf, int off, int len)</code>ï¼šå°†å­—èŠ‚æ•°ç»„/å­—ç¬¦æ•°ç»„ä¸­ä» off ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—èŠ‚/å­—ç¬¦è¾“å‡ºåˆ°è¾“å‡ºæµä¸­ã€‚</li></ol><p>å› ä¸ºå­—ç¬¦æµç›´æ¥ä»¥å­—ç¬¦ä½œä¸ºæ“ä½œå•ä½ï¼Œæ‰€ä»¥ Writer å¯ä»¥ç”¨å­—ç¬¦ä¸²æ¥ä»£æ›¿å­—ç¬¦æ•°ç»„ï¼Œå³ä»¥ String å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚Writer é‡Œè¿˜åŒ…å«å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>void write(String str)</code>ï¼šå°† str å­—ç¬¦ä¸²é‡ŒåŒ…å«çš„å­—ç¬¦è¾“å‡ºåˆ°æŒ‡å®šè¾“å‡ºæµä¸­ã€‚</li><li><code>void write(String str, int off, int len)</code>ï¼šå°† str å­—ç¬¦ä¸²é‡Œä» off ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—ç¬¦è¾“å‡ºåˆ°æŒ‡å®šè¾“å‡ºæµä¸­ã€‚</li></ol><p>ä¸‹é¢ç¨‹åºä½¿ç”¨ <code>FileInputStream</code>æ¥æ‰§è¡Œè¾“å…¥ï¼Œå¹¶ä½¿ç”¨ <code>FileOutputStream</code>æ¥æ‰§è¡Œè¾“å‡ºï¼Œç”¨ä»¥å®ç°å¤åˆ¶ FileOutputStreamTest.java æ–‡ä»¶çš„åŠŸèƒ½ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOutputStreamTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºå­—èŠ‚è¾“å…¥æµ</span>
            <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FileOutputStreamTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºå­—èŠ‚è¾“å‡ºæµ</span>
            <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/newFile.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// å¾ªç¯ä»è¾“å…¥æµä¸­å–å‡ºæ•°æ®</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// æ¯è¯»å–ä¸€æ¬¡ï¼Œå³å†™å…¥æ–‡ä»¶è¾“å‡ºæµï¼Œè¯»äº†å¤šå°‘ï¼Œå°±å†™å¤šå°‘</span>
                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå¸Œæœ›ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²å†…å®¹ï¼Œåˆ™ä½¿ç”¨ Writer ä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileWriterTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;poem.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;é”¦ç‘Ÿ - æå•†éšã€r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;é”¦ç‘Ÿæ— ç«¯äº”åå¼¦ï¼Œä¸€å¼¦ä¸€æŸ±æ€åå¹´ã€‚\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;åº„ç”Ÿæ™“æ¢¦è¿·è´è¶ï¼Œæœ›å¸æ˜¥å¿ƒæ‰˜æœé¹ƒã€‚\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æ²§æµ·æœˆæ˜ç æœ‰æ³ªï¼Œè“ç”°æ—¥æš–ç‰ç”ŸçƒŸã€‚\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æ­¤æƒ…å¯å¾…æˆè¿½å¿†ï¼Œåªæ˜¯å½“æ—¶å·²æƒ˜ç„¶ã€‚\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¾“å…¥-è¾“å‡ºæµä½“ç³»" tabindex="-1"><a class="header-anchor" href="#è¾“å…¥-è¾“å‡ºæµä½“ç³»" aria-hidden="true">#</a> è¾“å…¥/è¾“å‡ºæµä½“ç³»</h2><p>4 ä¸ªåŸºç±»ä½¿ç”¨èµ·æ¥æœ‰äº›çƒ¦çï¼Œè¿™å°±éœ€è¦å€ŸåŠ©äºå¤„ç†æµäº†ã€‚</p><h3 id="å¤„ç†æµçš„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#å¤„ç†æµçš„ç”¨æ³•" aria-hidden="true">#</a> å¤„ç†æµçš„ç”¨æ³•</h3><p>ä½¿ç”¨å¤„ç†æµæ—¶çš„å…¸å‹æ€è·¯æ˜¯ï¼Œä½¿ç”¨å¤„ç†æµæ¥åŒ…è£…èŠ‚ç‚¹æµï¼Œç¨‹åºé€šè¿‡å¤„ç†æµæ¥æ‰§è¡Œè¾“å…¥/è¾“å‡ºåŠŸèƒ½ï¼Œè®©èŠ‚ç‚¹æµä¸åº•å±‚çš„ I/O è®¾å¤‡ã€æ–‡ä»¶äº¤äº’ã€‚</p><p>åªè¦æµçš„æ„é€ å™¨å‚æ•°ä¸æ˜¯ä¸€ä¸ªç‰©ç†èŠ‚ç‚¹ï¼Œè€Œæ˜¯å·²ç»å­˜åœ¨çš„æµï¼Œé‚£ä¹ˆè¿™ç§æµå°±ä¸€å®šæ˜¯å¤„ç†æµï¼›è€Œæ‰€æœ‰èŠ‚ç‚¹æµéƒ½æ˜¯ç›´æ¥ä»¥ç‰©ç† IO èŠ‚ç‚¹ä½œä¸ºæ„é€ å™¨å‚æ•°çš„ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintStreamTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>fos<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä½¿ç”¨ PrintStream æ‰§è¡Œè¾“å‡º</span>
            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ™®é€šå­—ç¬¦ä¸²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç›´æ¥ä½¿ç”¨ PrintStream è¾“å‡ºå¯¹è±¡</span>
            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintStreamTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>PrintStream</code>çš„è¾“å‡ºåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå‰é¢ç¨‹åºä¸­ä¸€ç›´ä½¿ç”¨çš„æ ‡å‡†è¾“å‡º <code>System.out</code>çš„ç±»å‹å°±æ˜¯ <code>PrintStream</code>ã€‚</p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>åœ¨ä½¿ç”¨å¤„ç†æµåŒ…è£…äº†åº•å±‚èŠ‚ç‚¹æµä¹‹åï¼Œå…³é—­è¾“å…¥/è¾“å‡ºæµèµ„æºæ—¶ï¼Œåªè¦å…³é—­æœ€ä¸Šå±‚çš„å¤„ç†æµå³å¯ã€‚å…³é—­æœ€ä¸Šå±‚çš„å¤„ç†æµæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å…³é—­è¢«è¯¥å¤„ç†æµåŒ…è£…çš„èŠ‚ç‚¹æµã€‚</p></div><h3 id="ä½“ç³»" tabindex="-1"><a class="header-anchor" href="#ä½“ç³»" aria-hidden="true">#</a> ä½“ç³»</h3><p>Java çš„è¾“å…¥/è¾“å‡ºæµä½“ç³»æä¾›äº†è¿‘ 40 ä¸ªç±»ï¼Œè¿™äº›ç±»çœ‹ä¸Šå»æ‚ä¹±è€Œæ²¡æœ‰è§„å¾‹ï¼Œä½†å¦‚æœæˆ‘ä»¬å°†å…¶æŒ‰åŠŸèƒ½è¿›è¡Œåˆ†ç±»ï¼Œåˆ™ä¸éš¾å‘ç°å…¶æ˜¯éå¸¸è§„åˆ™çš„ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208160918601.jpeg" alt="epub_681336_1978"></p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>å¦‚æœè¿›è¡Œè¾“å…¥/è¾“å‡ºçš„å†…å®¹æ˜¯æ–‡æœ¬å†…å®¹ï¼Œåˆ™åº”è¯¥è€ƒè™‘ä½¿ç”¨å­—ç¬¦æµï¼›å¦‚æœè¿›è¡Œè¾“å…¥/è¾“å‡ºçš„å†…å®¹æ˜¯äºŒè¿›åˆ¶å†…å®¹ï¼Œåˆ™åº”è¯¥è€ƒè™‘ä½¿ç”¨å­—èŠ‚æµã€‚</p></div><p>è¡¨ä»…ä»…æ€»ç»“äº†è¾“å…¥/è¾“å‡ºæµä½“ç³»ä¸­ä½äº <code>java.io</code> åŒ…ä¸‹çš„æµï¼Œè¿˜æœ‰ä¸€äº›è¯¸å¦‚ <code>AudioInputStream</code>ã€<code>CipherInputStream</code> ã€<code>DeflaterInputStream</code>ã€<code>ZipInputStream</code>ç­‰å…·æœ‰è®¿é—®éŸ³é¢‘æ–‡ä»¶ã€åŠ å¯†/è§£å¯†ã€å‹ç¼©/è§£å‹ç­‰åŠŸèƒ½çš„å­—èŠ‚æµï¼Œå®ƒä»¬å…·æœ‰ç‰¹æ®Šçš„åŠŸèƒ½ï¼Œä½äº JDK çš„å…¶ä»–åŒ…ä¸‹ã€‚</p><p>å­—èŠ‚æµä»¥å­—èŠ‚æ•°ç»„ä¸ºèŠ‚ç‚¹ï¼Œå­—ç¬¦æµä»¥å­—ç¬¦æ•°ç»„ä¸ºèŠ‚ç‚¹ï¼›è¿™ç§ä»¥æ•°ç»„ä¸ºç‰©ç†èŠ‚ç‚¹çš„èŠ‚ç‚¹æµé™¤äº†åœ¨åˆ›å»ºèŠ‚ç‚¹æµå¯¹è±¡æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„æˆ–è€…å­—ç¬¦æ•°ç»„ä¹‹å¤–ï¼Œç”¨æ³•ä¸Šä¸æ–‡ä»¶èŠ‚ç‚¹æµå®Œå…¨ç›¸ä¼¼ã€‚</p><p>ä¸æ­¤ç±»ä¼¼çš„æ˜¯ï¼Œå­—ç¬¦æµè¿˜å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºç‰©ç†èŠ‚ç‚¹ï¼Œç”¨äºå®ç°ä»å­—ç¬¦ä¸²è¯»å–å†…å®¹ï¼Œæˆ–å°†å†…å®¹å†™å…¥å­—ç¬¦ä¸²ï¼ˆç”¨ <code>StringBuffer</code>å……å½“å­—ç¬¦ä¸²ï¼‰çš„åŠŸèƒ½ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringNodeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> src <span class="token operator">=</span>
            <span class="token string">&quot;ä»æ˜å¤©èµ·ï¼Œåšä¸€ä¸ªå¹¸ç¦çš„äººã€n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;å–‚é©¬ï¼ŒåŠˆæŸ´ï¼Œå‘¨æ¸¸ä¸–ç•Œã€n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;ä»æ˜å¤©èµ·ï¼Œå…³å¿ƒç²®é£Ÿå’Œè”¬èœã€n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;æˆ‘æœ‰ä¸€æ‰€æˆ¿å­ï¼Œé¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€ã€n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;ä»æ˜å¤©èµ·ï¼Œå’Œæ¯ä¸€ä¸ªäº²äººé€šä¿¡ã€n&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;å‘Šè¯‰ä»–ä»¬æˆ‘çš„å¹¸ç¦ã€n&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">StringReader</span> sr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// é‡‡ç”¨å¾ªç¯è¯»å–çš„æ–¹å¼è¯»å–å­—ç¬¦ä¸²</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> sr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»º StringWriter æ—¶ï¼Œå®é™…ä¸Šä»¥ä¸€ä¸ª StringBuffer ä½œä¸ºè¾“å‡ºèŠ‚ç‚¹</span>
            <span class="token comment">// ä¸‹é¢æŒ‡å®šçš„ 20 å°±æ˜¯ StringBuffer çš„åˆå§‹é•¿åº¦</span>
            <span class="token class-name">StringWriter</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è°ƒç”¨ StringWriter çš„æ–¹æ³•æ‰§è¡Œè¾“å‡º</span>
            sw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰ä¸€ä¸ªç¾ä¸½çš„æ–°ä¸–ç•Œï¼Œ\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;å¥¹åœ¨è¿œæ–¹ç­‰æˆ‘ï¼Œ\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;é‚£é‡Œæœ‰å¤©çœŸçš„å­©å­ï¼Œ\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;è¿˜æœ‰å§‘å¨˜çš„é…’çªã€n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----ä¸‹é¢æ˜¯ sw å­—ç¬¦ä¸²èŠ‚ç‚¹é‡Œçš„å†…å®¹----&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨ toString() æ–¹æ³•è¿”å› StringWriter å­—ç¬¦ä¸²èŠ‚ç‚¹çš„å†…å®¹</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº String æ˜¯ä¸å¯å˜çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œæ‰€ä»¥ <code>StringWriter</code>ä½¿ç”¨ <code>StringBuffer</code>ä½œä¸ºè¾“å‡ºèŠ‚ç‚¹ã€‚</p><p>4 ä¸ªè®¿é—®ç®¡é“çš„æµï¼š<code>PipedInputStream</code>ã€<code>PipedOutputStream</code>ã€<code>PipedReader</code>ã€<code>PipedWriter</code> ï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨äºå®ç°è¿›ç¨‹ä¹‹é—´é€šä¿¡åŠŸèƒ½çš„ï¼Œåˆ†åˆ«æ˜¯å­—èŠ‚è¾“å…¥æµã€å­—èŠ‚è¾“å‡ºæµã€å­—ç¬¦è¾“å…¥æµå’Œå­—ç¬¦è¾“å‡ºæµã€‚</p><p>ç¼“å†²æµåˆ™å¢åŠ äº†ç¼“å†²åŠŸèƒ½ï¼Œå¢åŠ ç¼“å†²åŠŸèƒ½å¯ä»¥æé«˜è¾“å…¥ã€è¾“å‡ºçš„æ•ˆç‡ï¼Œå¢åŠ ç¼“å†²åŠŸèƒ½åéœ€è¦ä½¿ç”¨ <code>flush()</code>æ‰å¯ä»¥å°†ç¼“å†²åŒºçš„å†…å®¹å†™å…¥å®é™…çš„ç‰©ç†èŠ‚ç‚¹ã€‚</p><p>å¯¹è±¡æµä¸»è¦ç”¨äºå®ç°å¯¹è±¡çš„åºåˆ—åŒ–ã€‚</p><h3 id="è½¬æ¢æµ" tabindex="-1"><a class="header-anchor" href="#è½¬æ¢æµ" aria-hidden="true">#</a> è½¬æ¢æµ</h3><p>è¾“å…¥/è¾“å‡ºæµä½“ç³»ä¸­è¿˜æä¾›äº†ä¸¤ä¸ªè½¬æ¢æµï¼Œè¿™ä¸¤ä¸ªè½¬æ¢æµç”¨äºå®ç°å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµï¼Œå…¶ä¸­ <code>InputStreamReader</code> å°†å­—èŠ‚è¾“å…¥æµè½¬æ¢æˆå­—ç¬¦è¾“å…¥æµï¼Œ<code>OutputStreamWriter</code>å°†å­—èŠ‚è¾“å‡ºæµè½¬æ¢æˆå­—ç¬¦è¾“å‡ºæµã€‚</p><p>Java ä½¿ç”¨ <code>System.in</code> ä»£è¡¨æ ‡å‡†è¾“å…¥ï¼Œå³é”®ç›˜è¾“å…¥ï¼Œä½†è¿™ä¸ªæ ‡å‡†è¾“å…¥æµæ˜¯ <code>InputStream</code> ç±»çš„å®ä¾‹ï¼Œä½¿ç”¨ä¸å¤ªæ–¹ä¾¿ï¼Œè€Œä¸”é”®ç›˜è¾“å…¥å†…å®¹éƒ½æ˜¯æ–‡æœ¬å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ <code>InputStreamReader</code>å°†å…¶è½¬æ¢æˆå­—ç¬¦è¾“å…¥æµï¼Œæ™®é€šçš„ Reader è¯»å–è¾“å…¥å†…å®¹æ—¶ä¾ç„¶ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ™®é€šçš„ Reader å†æ¬¡åŒ…è£…æˆ <code>BufferedReader</code>ï¼Œåˆ©ç”¨ <code>BufferedReader</code>çš„ <code>readLine()</code> æ–¹æ³•å¯ä»¥ä¸€æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KeyinTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// å°† Sytem.in å¯¹è±¡è½¬æ¢æˆ Reader å¯¹è±¡</span>
            <span class="token class-name">InputStreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å°†æ™®é€šçš„ Reader åŒ…è£…æˆ BufferedReader</span>
            <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> buffer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token comment">// é‡‡ç”¨å¾ªç¯æ–¹å¼æ¥é€è¡Œåœ°è¯»å–</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>buffer <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å¦‚æœè¯»å–çš„å­—ç¬¦ä¸²ä¸º&quot;exit&quot;ï¼Œåˆ™ç¨‹åºé€€å‡º</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;exit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// æ‰“å°è¯»å–çš„å†…å®¹</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¾“å…¥å†…å®¹ä¸ºï¼š&quot;</span> <span class="token operator">+</span> buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¨‹åºå°† <code>System.in</code> åŒ…è£…æˆ <code>BufferedReader</code>ï¼Œ<code>BufferedReader</code>æµå…·æœ‰ç¼“å†²åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä¸€æ¬¡è¯»å–ä¸€è¡Œæ–‡æœ¬â€”â€”ä»¥æ¢è¡Œç¬¦ä¸ºæ ‡å¿—ï¼Œå¦‚æœå®ƒæ²¡æœ‰è¯»åˆ°æ¢è¡Œç¬¦ï¼Œåˆ™ç¨‹åºé˜»å¡ï¼Œç­‰åˆ°è¯»åˆ°æ¢è¡Œç¬¦ä¸ºæ­¢ã€‚</p><p>è¿è¡Œä¸Šé¢ç¨‹åºå¯ä»¥å‘ç°è¿™ä¸ªç‰¹å¾ï¼Œå½“æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰§è¡Œè¾“å…¥æ—¶ï¼Œåªæœ‰æŒ‰ä¸‹å›è½¦é”®ï¼Œç¨‹åºæ‰ä¼šæ‰“å°å‡ºåˆšåˆšè¾“å…¥çš„å†…å®¹ã€‚</p><h3 id="æ¨å›è¾“å…¥æµ" tabindex="-1"><a class="header-anchor" href="#æ¨å›è¾“å…¥æµ" aria-hidden="true">#</a> æ¨å›è¾“å…¥æµ</h3><p>åœ¨è¾“å…¥/è¾“å‡ºæµä½“ç³»ä¸­ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æµä¸ä¼—ä¸åŒï¼Œå°±æ˜¯ <code>PushbackInputStream</code>å’Œ <code>PushbackReader</code>ï¼Œå®ƒä»¬éƒ½æä¾›äº†å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>void unread(byte[]/char[] buf)</code>ï¼šå°†ä¸€ä¸ªå­—èŠ‚/å­—ç¬¦æ•°ç»„å†…å®¹æ¨å›åˆ°æ¨å›ç¼“å†²åŒºé‡Œï¼Œä»è€Œå…è®¸é‡å¤è¯»å–åˆšåˆšè¯»å–çš„å†…å®¹ã€‚</li><li><code>void unread(byte[]/char[] b, int off, int len)</code>ï¼šå°†ä¸€ä¸ªå­—èŠ‚/å­—ç¬¦æ•°ç»„é‡Œä» off å¼€å§‹ï¼Œé•¿åº¦ä¸º len å­—èŠ‚/å­—ç¬¦çš„å†…å®¹æ¨å›åˆ°æ¨å›ç¼“å†²åŒºé‡Œï¼Œä»è€Œå…è®¸é‡å¤è¯»å–åˆšåˆšè¯»å–çš„å†…å®¹ã€‚</li><li><code>void unread(int b)</code>ï¼šå°†ä¸€ä¸ªå­—èŠ‚/å­—ç¬¦æ¨å›åˆ°æ¨å›ç¼“å†²åŒºé‡Œï¼Œä»è€Œå…è®¸é‡å¤è¯»å–åˆšåˆšè¯»å–çš„å†…å®¹ã€‚</li></ol><p>è¿™ä¸¤ä¸ªæ¨å›è¾“å…¥æµéƒ½å¸¦æœ‰ä¸€ä¸ªæ¨å›ç¼“å†²åŒºï¼Œå½“ç¨‹åºè°ƒç”¨è¿™ä¸¤ä¸ªæ¨å›è¾“å…¥æµçš„ <code>unread()</code>æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿå°†ä¼šæŠŠæŒ‡å®šæ•°ç»„çš„å†…å®¹æ¨å›åˆ°è¯¥ç¼“å†²åŒºé‡Œï¼Œè€Œæ¨å›è¾“å…¥æµæ¯æ¬¡è°ƒç”¨ read() æ–¹æ³•æ—¶æ€»æ˜¯å…ˆä»æ¨å›ç¼“å†²åŒºè¯»å–ï¼Œåªæœ‰å®Œå…¨è¯»å–äº†æ¨å›ç¼“å†²åŒºçš„å†…å®¹åï¼Œä½†è¿˜æ²¡æœ‰è£…æ»¡ <code>read()</code>æ‰€éœ€çš„æ•°ç»„æ—¶æ‰ä¼šä»åŸè¾“å…¥æµä¸­è¯»å–ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161005210.jpeg" alt="epub_681336_1985"></p><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>PushbackInputStream</code>å’Œ <code>PushbackReader</code>æ—¶éœ€è¦æŒ‡å®šæ¨å›ç¼“å†²åŒºçš„å¤§å°ï¼Œé»˜è®¤çš„æ¨å›ç¼“å†²åŒºçš„é•¿åº¦ä¸º 1ã€‚</p><p>å¦‚æœç¨‹åºä¸­æ¨å›åˆ°æ¨å›ç¼“å†²åŒºçš„å†…å®¹è¶…å‡ºäº†æ¨å›ç¼“å†²åŒºçš„å¤§å°ï¼Œå°†ä¼šå¼•å‘ Pushback buffer overflow çš„ <code>IOException</code>å¼‚å¸¸ã€‚</p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>æ¨å›ç¼“å†²åŒºçš„é•¿åº¦ä¸ <code>read()</code>æ–¹æ³•çš„æ•°ç»„å‚æ•°çš„é•¿åº¦æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå®Œå…¨å¯ä»¥æ›´å¤§ã€‚</p></div><p>ä¸‹é¢ç¨‹åºè¯•å›¾æ‰¾å‡ºç¨‹åºä¸­çš„&quot;new PushbackReader&quot;å­—ç¬¦ä¸²ï¼Œå½“æ‰¾åˆ°è¯¥å­—ç¬¦ä¸²åï¼Œç¨‹åºåªæ˜¯æ‰“å°å‡ºç›®æ ‡å­—ç¬¦ä¸²ä¹‹å‰çš„å†…å®¹ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PushbackTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª PushbackReader å¯¹è±¡ï¼ŒæŒ‡å®šæ¨å›ç¼“å†²åŒºçš„é•¿åº¦ä¸º 64</span>
            <span class="token class-name">PushbackReader</span> pr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PushbackReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/PushbackTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// ç”¨ä»¥ä¿å­˜ä¸Šæ¬¡è¯»å–çš„å­—ç¬¦ä¸²å†…å®¹</span>
            <span class="token class-name">String</span> lastContent <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> pr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å°†è¯»å–çš„å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²</span>
                <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> targetIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token comment">// å°†ä¸Šæ¬¡è¯»å–çš„å­—ç¬¦ä¸²å’Œæœ¬æ¬¡è¯»å–çš„å­—ç¬¦ä¸²æ‹¼èµ·æ¥</span>
                <span class="token comment">// æŸ¥çœ‹æ˜¯å¦åŒ…å«ç›®æ ‡å­—ç¬¦ä¸²ï¼Œå¦‚æœåŒ…å«ç›®æ ‡å­—ç¬¦ä¸²</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>targetIndex <span class="token operator">=</span> <span class="token punctuation">(</span>lastContent <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;new PushbackReader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// å°†æœ¬æ¬¡å†…å®¹å’Œä¸Šæ¬¡å†…å®¹ä¸€èµ·æ¨å›ç¼“å†²åŒº</span>
                    pr<span class="token punctuation">.</span><span class="token function">unread</span><span class="token punctuation">(</span><span class="token punctuation">(</span>lastContent <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// æŒ‡å®šè¯»å–å‰é¢ len ä¸ªå­—ç¬¦</span>
                    <span class="token keyword">int</span> len <span class="token operator">=</span> targetIndex <span class="token operator">&gt;</span> <span class="token number">32</span> <span class="token operator">?</span> <span class="token number">32</span> <span class="token operator">:</span> targetIndex<span class="token punctuation">;</span>
                    <span class="token comment">// å†æ¬¡è¯»å–æŒ‡å®šé•¿åº¦çš„å†…å®¹ï¼ˆå°±æ˜¯ç›®æ ‡å­—ç¬¦ä¸²ä¹‹å‰çš„å†…å®¹ï¼‰</span>
                    pr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// æ‰“å°è¯»å–çš„å†…å®¹</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// æ‰“å°ä¸Šæ¬¡è¯»å–çš„å†…å®¹</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>lastContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// å°†æœ¬æ¬¡å†…å®¹è®¾ä¸ºä¸Šæ¬¡è¯»å–çš„å†…å®¹</span>
                    lastContent <span class="token operator">=</span> content<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ioe<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é‡å®šå‘æ ‡å‡†è¾“å…¥-è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#é‡å®šå‘æ ‡å‡†è¾“å…¥-è¾“å‡º" aria-hidden="true">#</a> é‡å®šå‘æ ‡å‡†è¾“å…¥/è¾“å‡º</h2><p>å½“ç¨‹åºé€šè¿‡ <code>System.in</code>æ¥è·å–è¾“å…¥æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä»é”®ç›˜è¯»å–è¾“å…¥ï¼›å½“ç¨‹åºè¯•å›¾é€šè¿‡ <code>System.out</code>æ‰§è¡Œè¾“å‡ºæ—¶ï¼Œç¨‹åºæ€»æ˜¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><p>åœ¨ System ç±»é‡Œæä¾›äº†å¦‚ä¸‹ 3 ä¸ªé‡å®šå‘æ ‡å‡†è¾“å…¥/è¾“å‡ºçš„æ–¹æ³•ã€‚</p><ol><li><code>static void setErr(PrintStream err)</code>ï¼šé‡å®šå‘ â€œæ ‡å‡†â€é”™è¯¯è¾“å‡ºæµã€‚</li><li><code>static void setIn(InputStream in)</code>ï¼šé‡å®šå‘â€œæ ‡å‡†â€è¾“å…¥æµã€‚</li><li><code>static void setOut(PrintStream out)</code>ï¼šé‡å®šå‘ â€œæ ‡å‡†â€è¾“å‡ºæµã€‚</li></ol><p>å°† <code>System.out</code>çš„è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶è¾“å‡ºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedirectOut</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// ä¸€æ¬¡æ€§åˆ›å»º PrintStream è¾“å‡ºæµ</span>
            <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;out.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° ps è¾“å‡ºæµ</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setOut</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å‘æ ‡å‡†è¾“å‡ºè¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ™®é€šå­—ç¬¦ä¸²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å‘æ ‡å‡†è¾“å‡ºè¾“å‡ºä¸€ä¸ªå¯¹è±¡</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RedirectOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°† <code>System.in</code>é‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œè€Œä¸æ˜¯é”®ç›˜è¾“å…¥ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedirectIn</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/RedirectIn.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ° fis è¾“å…¥æµ</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setIn</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨ System.in åˆ›å»º Scanner å¯¹è±¡ï¼Œç”¨äºè·å–æ ‡å‡†è¾“å…¥</span>
            <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å¢åŠ ä¸‹é¢ä¸€è¡ŒåªæŠŠå›è½¦ä½œä¸ºåˆ†éš”ç¬¦</span>
            sc<span class="token punctuation">.</span><span class="token function">useDelimiter</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªè¾“å…¥é¡¹</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>sc<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¾“å‡ºè¾“å…¥é¡¹</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¾“å…¥çš„å†…å®¹æ˜¯ï¼š&quot;</span> <span class="token operator">+</span> sc<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="java-è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#java-è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®" aria-hidden="true">#</a> Java è™šæ‹Ÿæœºè¯»å†™å…¶ä»–è¿›ç¨‹çš„æ•°æ®</h2><p>ä½¿ç”¨ Runtime å¯¹è±¡çš„ <code>exec()</code>æ–¹æ³•å¯ä»¥è¿è¡Œå¹³å°ä¸Šçš„å…¶ä»–ç¨‹åºï¼Œè¯¥æ–¹æ³•äº§ç”Ÿä¸€ä¸ª Process å¯¹è±¡ï¼ŒProcess å¯¹è±¡ä»£è¡¨ç”±è¯¥ Java ç¨‹åºå¯åŠ¨çš„å­è¿›ç¨‹ã€‚Process ç±»æä¾›äº†å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ï¼Œç”¨äºè®©ç¨‹åºå’Œå…¶å­è¿›ç¨‹è¿›è¡Œé€šä¿¡ã€‚</p><ol><li><code>InputStream getErrorStream()</code>ï¼šè·å–å­è¿›ç¨‹çš„é”™è¯¯æµã€‚</li><li><code>InputStream getInputStream()</code>ï¼šè·å–å­è¿›ç¨‹çš„è¾“å…¥æµã€‚</li><li><code>OutputStream getOutputStream()</code>ï¼šè·å–å­è¿›ç¨‹çš„è¾“å‡ºæµã€‚</li></ol><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>æ­¤å¤„çš„è¾“å…¥æµã€è¾“å‡ºæµéå¸¸å®¹æ˜“æ··æ·†ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾è®©å­è¿›ç¨‹è¯»å–ç¨‹åºä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨è¾“å…¥æµè¿˜æ˜¯è¾“å‡ºæµï¼Ÿä¸æ˜¯è¾“å…¥æµï¼Œè€Œæ˜¯è¾“å‡ºæµã€‚æˆ‘ä»¬è¦ç«™åœ¨ç¨‹åºçš„è§’åº¦æ¥çœ‹é—®é¢˜ï¼Œå­è¿›ç¨‹è¯»å–ç¨‹åºçš„æ•°æ®ï¼Œå°±æ˜¯è®©ç¨‹åºæŠŠæ•°æ®è¾“å‡ºåˆ°å­è¿›ç¨‹ä¸­ï¼ˆå°±åƒæŠŠæ•°æ®è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ä¸€æ ·ï¼Œåªæ˜¯ç°åœ¨ç”±å­è¿›ç¨‹èŠ‚ç‚¹ä»£æ›¿äº†æ–‡ä»¶èŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨è¾“å‡ºæµã€‚</p></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadFromProcess</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿è¡Œ javac å‘½ä»¤ï¼Œè¿”å›è¿è¡Œè¯¥å‘½ä»¤çš„å­è¿›ç¨‹</span>
        <span class="token class-name">Process</span> p <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;javac&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// ä»¥ p è¿›ç¨‹çš„é”™è¯¯æµåˆ›å»º BufferedReader å¯¹è±¡</span>
            <span class="token comment">// è¿™ä¸ªé”™è¯¯æµå¯¹æœ¬ç¨‹åºæ˜¯è¾“å…¥æµï¼Œå¯¹ p è¿›ç¨‹åˆ™æ˜¯è¾“å‡ºæµ</span>
            <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getErrorStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> buff <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token comment">// é‡‡å–å¾ªç¯æ–¹å¼æ¥è¯»å– p è¿›ç¨‹çš„é”™è¯¯è¾“å‡º</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>buff <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®æµå¯¹ p è¿›ç¨‹ï¼ˆjavac è¿›ç¨‹ï¼‰è€Œè¨€ï¼Œå®ƒæ˜¯è¾“å‡ºæµï¼›ä½†å¯¹æœ¬ç¨‹åºï¼ˆReadFromProcessï¼‰è€Œè¨€ï¼Œå®ƒæ˜¯è¾“å…¥æµâ€”â€”æˆ‘ä»¬è¡¡é‡è¾“å…¥ã€è¾“å‡ºæ—¶æ€»æ˜¯ç«™åœ¨è¿è¡Œæœ¬ç¨‹åºæ‰€åœ¨å†…å­˜çš„è§’åº¦ï¼Œæ‰€ä»¥è¯¥æ•°æ®æµåº”è¯¥æ˜¯è¾“å…¥æµã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161108835.jpeg" alt="epub_681336_1992"></p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161109192.png" alt="image-20220816110942756"></p><p>ä¹Ÿå¯ä»¥é€šè¿‡ Process çš„ <code>getOutputStream()</code>æ–¹æ³•è·å¾—å‘è¿›ç¨‹è¾“å…¥æ•°æ®çš„æµã€‚</p><h2 id="randomaccessfile" tabindex="-1"><a class="header-anchor" href="#randomaccessfile" aria-hidden="true">#</a> RandomAccessFile</h2><p><code>RandomAccessFile</code>æ˜¯ Java è¾“å…¥/è¾“å‡ºæµä½“ç³»ä¸­åŠŸèƒ½æœ€ä¸°å¯Œçš„æ–‡ä»¶å†…å®¹è®¿é—®ç±»ï¼Œå®ƒæä¾›äº†ä¼—å¤šçš„æ–¹æ³•æ¥è®¿é—®æ–‡ä»¶å†…å®¹ï¼Œå®ƒæ—¢å¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥å‘æ–‡ä»¶è¾“å‡ºæ•°æ®ã€‚</p><p><code>RandomAccessFile</code>æ”¯æŒâ€œä»»æ„è®¿é—®â€çš„æ–¹å¼ï¼Œç¨‹åºå¯ä»¥ç›´æ¥è·³è½¬åˆ°æ–‡ä»¶çš„ä»»æ„åœ°æ–¹æ¥è¯»å†™æ•°æ®ã€‚</p><p><code>RandomAccessFile</code>å¯¹è±¡ä¹ŸåŒ…å«äº†ä¸€ä¸ªè®°å½•æŒ‡é’ˆï¼Œç”¨ä»¥æ ‡è¯†å½“å‰è¯»å†™å¤„çš„ä½ç½®ï¼Œå½“ç¨‹åºæ–°åˆ›å»ºä¸€ä¸ª <code>RandomAccessFile</code> å¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡çš„æ–‡ä»¶è®°å½•æŒ‡é’ˆä½äºæ–‡ä»¶å¤´ï¼ˆä¹Ÿå°±æ˜¯ 0 å¤„ï¼‰ï¼Œå½“è¯»/å†™äº† n ä¸ªå­—èŠ‚åï¼Œæ–‡ä»¶è®°å½•æŒ‡é’ˆå°†ä¼šå‘åç§»åŠ¨ n ä¸ªå­—èŠ‚ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>RandomAccessFile</code>å¯ä»¥è‡ªç”±ç§»åŠ¨è¯¥è®°å½•æŒ‡é’ˆï¼Œæ—¢å¯ä»¥å‘å‰ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥å‘åç§»åŠ¨ã€‚<code>RandomAccessFile</code>åŒ…å«äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•æ¥æ“ä½œæ–‡ä»¶è®°å½•æŒ‡é’ˆã€‚</p><ol><li><code>long getFilePointer()</code>ï¼šè¿”å›æ–‡ä»¶è®°å½•æŒ‡é’ˆçš„å½“å‰ä½ç½®ã€‚</li><li><code>void seek(long pos)</code>ï¼šå°†æ–‡ä»¶è®°å½•æŒ‡é’ˆå®šä½åˆ° pos ä½ç½®ã€‚</li></ol><p><code>RandomAccessFile</code>ç±»æœ‰ä¸¤ä¸ªæ„é€ å™¨ï¼Œå…¶å®è¿™ä¸¤ä¸ªæ„é€ å™¨åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯æŒ‡å®šæ–‡ä»¶çš„å½¢å¼ä¸åŒè€Œå·²â€”â€”ä¸€ä¸ªä½¿ç”¨ String å‚æ•°æ¥æŒ‡å®šæ–‡ä»¶åï¼Œä¸€ä¸ªä½¿ç”¨ File å‚æ•°æ¥æŒ‡å®šæ–‡ä»¶æœ¬èº«ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œåˆ›å»º <code>RandomAccessFile</code>å¯¹è±¡æ—¶è¿˜éœ€è¦æŒ‡å®šä¸€ä¸ª mode å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®š <code>RandomAccessFile</code>çš„è®¿é—®æ¨¡å¼ï¼Œè¯¥å‚æ•°æœ‰å¦‚ä¸‹ 4 ä¸ªå€¼ã€‚</p><ol><li><code>r</code>ï¼šä»¥åªè¯»æ–¹å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶ã€‚å¦‚æœè¯•å›¾å¯¹è¯¥ <code>RandomAccessFile</code>æ‰§è¡Œå†™å…¥æ–¹æ³•ï¼Œéƒ½å°†æŠ›å‡º <code>IOException</code>å¼‚å¸¸ã€‚</li><li><code>rw</code>ï¼šä»¥è¯»ã€å†™æ–¹å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶ã€‚å¦‚æœè¯¥æ–‡ä»¶å°šä¸å­˜åœ¨ï¼Œåˆ™å°è¯•åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</li><li><code>rws</code>ï¼šä»¥è¯»ã€å†™æ–¹å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶ã€‚ç›¸å¯¹äº <code>rw</code>æ¨¡å¼ï¼Œè¿˜è¦æ±‚å¯¹æ–‡ä»¶çš„å†…å®¹æˆ–å…ƒæ•°æ®çš„æ¯ä¸ªæ›´æ–°éƒ½åŒæ­¥å†™å…¥åˆ°åº•å±‚å­˜å‚¨è®¾å¤‡ã€‚</li><li><code>rwd</code>ï¼šä»¥è¯»ã€å†™æ–¹å¼æ‰“å¼€æŒ‡å®šæ–‡ä»¶ã€‚ç›¸å¯¹äº <code>rw</code>æ¨¡å¼ï¼Œè¿˜è¦æ±‚å¯¹æ–‡ä»¶å†…å®¹çš„æ¯ä¸ªæ›´æ–°éƒ½åŒæ­¥å†™å…¥åˆ°åº•å±‚å­˜å‚¨è®¾å¤‡ã€‚</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomAccessFileTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">RandomAccessFile</span> raf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/RandomAccessFileTest.java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å– RandomAccessFile å¯¹è±¡æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆå§‹ä½ç½®æ˜¯ 0</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RandomAccessFile çš„æ–‡ä»¶æŒ‡é’ˆçš„åˆå§‹ä½ç½®ï¼š&quot;</span> <span class="token operator">+</span> raf<span class="token punctuation">.</span><span class="token function">getFilePointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç§»åŠ¨ raf çš„æ–‡ä»¶è®°å½•æŒ‡é’ˆçš„ä½ç½®</span>
            raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// ç”¨äºä¿å­˜å®é™…è¯»å–çš„å­—èŠ‚æ•°</span>
            <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨å¾ªç¯æ¥é‡å¤â€œå–æ°´â€è¿‡ç¨‹</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> raf<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å–å‡ºâ€œç«¹ç­’â€ä¸­çš„æ°´æ»´ï¼ˆå­—èŠ‚ï¼‰ï¼Œå°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²è¾“å…¥</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä¸Šé¢ç¨‹åºï¼Œå°†çœ‹åˆ°ç¨‹åºåªè¯»å–åé¢éƒ¨åˆ†çš„æ•ˆæœã€‚</p><p>ä¸‹é¢ç¨‹åºç¤ºèŒƒäº†å¦‚ä½•å‘æŒ‡å®šæ–‡ä»¶åè¿½åŠ å†…å®¹ï¼Œä¸ºäº†è¿½åŠ å†…å®¹ï¼Œç¨‹åºåº”è¯¥å…ˆå°†è®°å½•æŒ‡é’ˆç§»åŠ¨åˆ°æ–‡ä»¶æœ€åï¼Œç„¶åå¼€å§‹å‘æ–‡ä»¶ä¸­è¾“å‡ºå†…å®¹ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppendContent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// ä»¥è¯»ã€å†™æ–¹å¼æ‰“å¼€ä¸€ä¸ª RandomAccessFile å¯¹è±¡</span>
            <span class="token class-name">RandomAccessFile</span> raf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;out.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°†è®°å½•æŒ‡é’ˆç§»åŠ¨åˆ° out.txt æ–‡ä»¶çš„æœ€å</span>
            raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>raf<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;è¿½åŠ çš„å†…å®¹ï¼\r\n&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p><code>RandomAccessFile</code>ä¸èƒ½å‘æ–‡ä»¶çš„æŒ‡å®šä½ç½®æ’å…¥å†…å®¹ï¼Œå¦‚æœç›´æ¥å°†æ–‡ä»¶è®°å½•æŒ‡é’ˆç§»åŠ¨åˆ°ä¸­é—´æŸä½ç½®åå¼€å§‹è¾“å‡ºï¼Œåˆ™æ–°è¾“å‡ºçš„å†…å®¹ä¼šè¦†ç›–æ–‡ä»¶ä¸­åŸæœ‰çš„å†…å®¹ã€‚</p><p>å¦‚æœéœ€è¦å‘æŒ‡å®šä½ç½®æ’å…¥å†…å®¹ï¼Œç¨‹åºéœ€è¦å…ˆæŠŠæ’å…¥ç‚¹åé¢çš„å†…å®¹è¯»å…¥ç¼“å†²åŒºï¼Œç­‰æŠŠéœ€è¦æ’å…¥çš„æ•°æ®å†™å…¥æ–‡ä»¶åï¼Œå†å°†ç¼“å†²åŒºçš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶åé¢ã€‚</p></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InsertContent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/InsertContent.java&quot;</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token string">&quot;æ’å…¥çš„å†…å®¹ã€r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token keyword">long</span> pos<span class="token punctuation">,</span> <span class="token class-name">String</span> insertContent<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> tmp <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">.</span><span class="token function">createTempFile</span><span class="token punctuation">(</span><span class="token string">&quot;tmp&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tmp<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">RandomAccessFile</span> raf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶æ¥ä¿å­˜æ’å…¥ç‚¹åçš„æ•°æ®</span>
            <span class="token class-name">FileOutputStream</span> tmpOut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token class-name">FileInputStream</span> tmpIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ------ä¸‹é¢ä»£ç å°†æ’å…¥ç‚¹åçš„å†…å®¹è¯»å…¥ä¸´æ—¶æ–‡ä»¶ä¸­ä¿å­˜------</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bbuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// ç”¨äºä¿å­˜å®é™…è¯»å–çš„å­—èŠ‚æ•°</span>
            <span class="token keyword">int</span> hasRead <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨å¾ªç¯æ–¹å¼è¯»å–æ’å…¥ç‚¹åçš„æ•°æ®</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> raf<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å°†è¯»å–çš„æ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶</span>
                tmpOut<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// ----------ä¸‹é¢ä»£ç ç”¨äºæ’å…¥å†…å®¹----------</span>
            <span class="token comment">// æŠŠæ–‡ä»¶è®°å½•æŒ‡é’ˆé‡æ–°å®šä½åˆ° pos ä½ç½®</span>
            raf<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è¿½åŠ éœ€è¦æ’å…¥çš„å†…å®¹</span>
            raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>insertContent<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è¿½åŠ ä¸´æ—¶æ–‡ä»¶ä¸­çš„å†…å®¹</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>hasRead <span class="token operator">=</span> tmpIn<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                raf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bbuf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hasRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®åˆšå¥½æ’å…¥åˆ° <code>javadoc</code> æ³¨é‡Šä¸­ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161514334.png" alt="image-20220816151451359"></p><p>ä¸Šé¢ç¨‹åºä¸­ä½¿ç”¨ File çš„ <code>createTempFile(String prefix, String suffix)</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼ˆè¯¥ä¸´æ—¶æ–‡ä»¶å°†åœ¨ JVM é€€å‡ºæ—¶è¢«åˆ é™¤ï¼‰ï¼Œç”¨ä»¥ä¿å­˜è¢«æ’å…¥æ–‡ä»¶çš„æ’å…¥ç‚¹åé¢çš„å†…å®¹ã€‚</p><p>ç¨‹åºå…ˆå°†æ–‡ä»¶ä¸­æ’å…¥ç‚¹åçš„å†…å®¹è¯»å…¥ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œç„¶åé‡æ–°å®šä½åˆ°æ’å…¥ç‚¹ï¼Œå°†éœ€è¦æ’å…¥çš„å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶åé¢ï¼Œæœ€åå°†ä¸´æ—¶æ–‡ä»¶çš„å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶åé¢ï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹å°±å¯ä»¥å‘æŒ‡å®šæ–‡ä»¶ã€æŒ‡å®šä½ç½®æ’å…¥å†…å®¹ã€‚</p><h2 id="å¯¹è±¡åºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡åºåˆ—åŒ–" aria-hidden="true">#</a> å¯¹è±¡åºåˆ—åŒ–</h2><p>å¯¹è±¡åºåˆ—åŒ–çš„ç›®æ ‡æ˜¯å°†å¯¹è±¡ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œæˆ–å…è®¸åœ¨ç½‘ç»œä¸­ç›´æ¥ä¼ è¾“å¯¹è±¡ã€‚</p><p>å¯¹è±¡åºåˆ—åŒ–æœºåˆ¶å…è®¸æŠŠå†…å­˜ä¸­çš„ Java å¯¹è±¡è½¬æ¢æˆå¹³å°æ— å…³çš„äºŒè¿›åˆ¶æµï¼Œä»è€Œå…è®¸æŠŠè¿™ç§äºŒè¿›åˆ¶æµæŒä¹…åœ°ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œé€šè¿‡ç½‘ç»œå°†è¿™ç§äºŒè¿›åˆ¶æµä¼ è¾“åˆ°å¦ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ã€‚</p><p>å…¶ä»–ç¨‹åºä¸€æ—¦è·å¾—äº†è¿™ç§äºŒè¿›åˆ¶æµï¼ˆæ— è®ºæ˜¯ä»ç£ç›˜ä¸­è·å–çš„ï¼Œè¿˜æ˜¯é€šè¿‡ç½‘ç»œè·å–çš„ï¼‰ï¼Œéƒ½å¯ä»¥å°†è¿™ç§äºŒè¿›åˆ¶æµæ¢å¤æˆåŸæ¥çš„ Java å¯¹è±¡ã€‚</p><p>å¦‚æœéœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å®ƒçš„ç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼ˆserializableï¼‰ã€‚ä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»å¿…é¡»å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ï¼š</p><ol><li>Serializable</li><li>Externalizable</li></ol><p>è¯¥æ¥å£æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œå®ç°è¯¥æ¥å£æ— é¡»å®ç°ä»»ä½•æ–¹æ³•ï¼Œå®ƒåªæ˜¯è¡¨æ˜è¯¥ç±»çš„å®ä¾‹æ˜¯å¯åºåˆ—åŒ–çš„ã€‚</p><h3 id="ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–" aria-hidden="true">#</a> ä½¿ç”¨å¯¹è±¡æµå®ç°åºåˆ—åŒ–</h3><p>ä¸€æ—¦æŸä¸ªç±»å®ç°äº† Serializable æ¥å£ï¼Œè¯¥ç±»çš„å¯¹è±¡å°±æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œç¨‹åºå¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªæ­¥éª¤æ¥åºåˆ—åŒ–è¯¥å¯¹è±¡ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ª <code>ObjectOutputStream</code> ï¼Œè¿™ä¸ªè¾“å‡ºæµæ˜¯ä¸€ä¸ªå¤„ç†æµï¼Œæ‰€ä»¥å¿…é¡»å»ºç«‹åœ¨å…¶ä»–èŠ‚ç‚¹æµçš„åŸºç¡€ä¹‹ä¸Šã€‚</li><li>è°ƒç”¨ <code>ObjectOutputStream</code> å¯¹è±¡çš„ <code>writeObject()</code> æ–¹æ³•è¾“å‡ºå¯åºåˆ—åŒ–å¯¹è±¡ã€‚</li></ol><p>å®šä¹‰ä¸€ä¸ª Person ç±»ï¼Œå®ç° Serializable æ¥å£ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ³¨æ„æ­¤å¤„æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰å‚æ•°çš„æ„é€ å™¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>ObjectOutputStream</code> å°†ä¸€ä¸ª Person å¯¹è±¡å†™å…¥ç£ç›˜æ–‡ä»¶ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WriteObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectOutputStream è¾“å‡ºæµ</span>
            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;object.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å°† per å¯¹è±¡å†™å…¥è¾“å‡ºæµ</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä¸Šé¢ç¨‹åºï¼Œå°†ä¼šçœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ª object.txt æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„å†…å®¹å°±æ˜¯ Person å¯¹è±¡ã€‚</p><p>å¦‚æœå¸Œæœ›ä»äºŒè¿›åˆ¶æµä¸­æ¢å¤ Java å¯¹è±¡ï¼Œåˆ™éœ€è¦ä½¿ç”¨ååºåˆ—åŒ–ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ª <code>ObjectInputStream</code> è¾“å…¥æµï¼Œè¿™ä¸ªè¾“å…¥æµæ˜¯ä¸€ä¸ªå¤„ç†æµï¼Œæ‰€ä»¥å¿…é¡»å»ºç«‹åœ¨å…¶ä»–èŠ‚ç‚¹æµçš„åŸºç¡€ä¹‹ä¸Šã€‚</li><li>è°ƒç”¨ <code>ObjectInputStream</code> å¯¹è±¡çš„ <code>readObject()</code> æ–¹æ³•è¯»å–æµä¸­çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª Object ç±»å‹çš„ Java å¯¹è±¡ï¼Œå¦‚æœç¨‹åºçŸ¥é“è¯¥ Java å¯¹è±¡çš„ç±»å‹ï¼Œåˆ™å¯ä»¥å°†è¯¥å¯¹è±¡å¼ºåˆ¶ç±»å‹è½¬æ¢æˆå…¶çœŸå®çš„ç±»å‹ã€‚</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;object.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ª Java å¯¹è±¡ï¼Œå¹¶å°†å…¶å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º Person ç±»</span>
            <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åå­—ä¸ºï¼š&quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\n å¹´é¾„ä¸ºï¼š&quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ååºåˆ—åŒ–è¯»å–çš„ä»…ä»…æ˜¯ Java å¯¹è±¡çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ Java ç±»ï¼Œå› æ­¤é‡‡ç”¨ååºåˆ—åŒ–æ¢å¤ Java å¯¹è±¡æ—¶ï¼Œå¿…é¡»æä¾›è¯¥ Java å¯¹è±¡æ‰€å±ç±»çš„ class æ–‡ä»¶ï¼Œå¦åˆ™å°†ä¼šå¼•å‘ <code>ClassNotFoundException</code>å¼‚å¸¸ã€‚</p><p><mark>Person ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ•°çš„æ„é€ å™¨ï¼Œæ²¡æœ‰æ— å‚æ•°çš„æ„é€ å™¨ï¼Œè€Œä¸”è¯¥æ„é€ å™¨å†…æœ‰ä¸€ä¸ªæ™®é€šçš„æ‰“å°è¯­å¥ã€‚å½“ååºåˆ—åŒ–è¯»å– Java å¯¹è±¡æ—¶ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°ç¨‹åºè°ƒç”¨è¯¥æ„é€ å™¨ï¼Œè¿™è¡¨æ˜ååºåˆ—åŒ–æœºåˆ¶æ— é¡»é€šè¿‡æ„é€ å™¨æ¥åˆå§‹åŒ– Java å¯¹è±¡ã€‚</mark></p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>åœ¨ <code>ObjectInputStream</code>è¾“å…¥æµä¸­çš„ <code>readObject()</code> æ–¹æ³•å£°æ˜æŠ›å‡ºäº† <code>ClassNotFoundException</code>å¼‚å¸¸ã€‚</p></div><p>å¦‚æœä½¿ç”¨åºåˆ—åŒ–æœºåˆ¶å‘æ–‡ä»¶ä¸­å†™å…¥äº†å¤šä¸ª Java å¯¹è±¡ï¼Œä½¿ç”¨ååºåˆ—åŒ–æœºåˆ¶æ¢å¤å¯¹è±¡æ—¶å¿…é¡»æŒ‰å®é™…å†™å…¥çš„é¡ºåºè¯»å–ã€‚</p><p>å½“ä¸€ä¸ªå¯åºåˆ—åŒ–ç±»æœ‰å¤šä¸ªçˆ¶ç±»æ—¶ï¼ˆåŒ…æ‹¬ç›´æ¥çˆ¶ç±»å’Œé—´æ¥çˆ¶ç±»ï¼‰ï¼Œè¿™äº›çˆ¶ç±»è¦ä¹ˆæœ‰æ— å‚æ•°çš„æ„é€ å™¨ï¼Œè¦ä¹ˆä¹Ÿæ˜¯å¯åºåˆ—åŒ–çš„â€”â€”å¦åˆ™ååºåˆ—åŒ–æ—¶å°†æŠ›å‡º <code>InvalidClassException</code> å¼‚å¸¸ã€‚</p><p>å¦‚æœçˆ¶ç±»æ˜¯ä¸å¯åºåˆ—åŒ–çš„ï¼Œåªæ˜¯å¸¦æœ‰æ— å‚æ•°çš„æ„é€ å™¨ï¼Œåˆ™è¯¥çˆ¶ç±»ä¸­å®šä¹‰çš„ Field å€¼ä¸ä¼šåºåˆ—åŒ–åˆ°äºŒè¿›åˆ¶æµä¸­ã€‚</p><h3 id="å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–" aria-hidden="true">#</a> å¯¹è±¡å¼•ç”¨çš„åºåˆ—åŒ–</h3><p>å¦‚æœæŸä¸ªç±»çš„ Field ç±»å‹ä¸æ˜¯åŸºæœ¬ç±»å‹æˆ– String ç±»å‹ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ç±»å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™æ‹¥æœ‰è¯¥ç±»å‹çš„ Field çš„ç±»ä¹Ÿæ˜¯ä¸å¯åºåˆ—åŒ–çš„ã€‚</p><p>å¦‚ä¸‹ Teacher ç±»æŒæœ‰ä¸€ä¸ª Person ç±»çš„å¼•ç”¨ï¼Œåªæœ‰ Person ç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼ŒTeacher ç±»æ‰æ˜¯å¯åºåˆ—åŒ–çš„ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Person</span> student<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Person</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>student <span class="token operator">=</span> student<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å‡è®¾æœ‰å¦‚ä¸‹ä¸€ç§ç‰¹æ®Šæƒ…å½¢ï¼šç¨‹åºä¸­æœ‰ä¸¤ä¸ª Teacher å¯¹è±¡ï¼Œå®ƒä»¬çš„ student å®ä¾‹å˜é‡éƒ½å¼•ç”¨åˆ°åŒä¸€ä¸ª Person å¯¹è±¡ï¼Œè€Œä¸”è¯¥ Person å¯¹è±¡è¿˜æœ‰ä¸€ä¸ªå¼•ç”¨å˜é‡å¼•ç”¨å®ƒã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Teacher</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;å”åƒ§&quot;</span><span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Teacher</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;è©æç¥–å¸ˆ&quot;</span><span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸‰ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç¤ºæ„å›¾å¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161657994.jpeg" alt="epub_681336_2005"></p><p>è¿™é‡Œäº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœå…ˆåºåˆ—åŒ– t1 å¯¹è±¡ï¼Œåˆ™ç³»ç»Ÿå°†è¯¥ t1 å¯¹è±¡æ‰€å¼•ç”¨çš„ Person å¯¹è±¡ä¸€èµ·åºåˆ—åŒ–ï¼›å¦‚æœç¨‹åºå†åºåˆ—åŒ– t2 å¯¹è±¡ï¼Œç³»ç»Ÿå°†ä¸€æ ·ä¼šåºåˆ—åŒ–è¯¥ t2 å¯¹è±¡ï¼Œå¹¶ä¸”å°†å†æ¬¡åºåˆ—åŒ–è¯¥ t2 å¯¹è±¡æ‰€å¼•ç”¨çš„ Person å¯¹è±¡ï¼›å¦‚æœç¨‹åºå†æ˜¾å¼åºåˆ—åŒ– per å¯¹è±¡ï¼Œç³»ç»Ÿå°†å†æ¬¡åºåˆ—åŒ–è¯¥ Person å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼¼ä¹ä¼šå‘è¾“å‡ºæµä¸­è¾“å‡º 3 ä¸ª Person å¯¹è±¡ã€‚</p><p>è¿™è¿èƒŒäº† Java åºåˆ—åŒ–æœºåˆ¶çš„åˆè¡·ã€‚</p><p>Java åºåˆ—åŒ–æœºåˆ¶é‡‡ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„åºåˆ—åŒ–ç®—æ³•ï¼Œå…¶ç®—æ³•å†…å®¹å¦‚ä¸‹ã€‚</p><ol><li>æ‰€æœ‰ä¿å­˜åˆ°ç£ç›˜ä¸­çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåºåˆ—åŒ–ç¼–å·ã€‚</li><li>å½“ç¨‹åºè¯•å›¾åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç¨‹åºå°†å…ˆæ£€æŸ¥è¯¥å¯¹è±¡æ˜¯å¦å·²ç»è¢«åºåˆ—åŒ–è¿‡ï¼Œåªæœ‰è¯¥å¯¹è±¡ä»æœªï¼ˆåœ¨æœ¬æ¬¡è™šæ‹Ÿæœºä¸­ï¼‰è¢«åºåˆ—åŒ–è¿‡ï¼Œç³»ç»Ÿæ‰ä¼šå°†è¯¥å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡ºã€‚</li><li>å¦‚æœæŸä¸ªå¯¹è±¡å·²ç»åºåˆ—åŒ–è¿‡ï¼Œç¨‹åºå°†åªæ˜¯ç›´æ¥è¾“å‡ºä¸€ä¸ªåºåˆ—åŒ–ç¼–å·ï¼Œè€Œä¸æ˜¯å†æ¬¡é‡æ–°åºåˆ—åŒ–è¯¥å¯¹è±¡ã€‚</li></ol><p>å‡è®¾æœ‰å¦‚ä¸‹é¡ºåºçš„åºåˆ—åŒ–ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åºåˆ—åŒ–åç£ç›˜æ–‡ä»¶çš„å­˜å‚¨ç¤ºæ„å›¾å¦‚å›¾ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161714185.jpeg" alt="epub_681336_2009"></p><p>å½“å¤šæ¬¡è°ƒç”¨ <code>writeObject()</code> æ–¹æ³•è¾“å‡ºåŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>writeObject()</code> æ–¹æ³•æ—¶æ‰ä¼šå°†è¯¥å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡ºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WriteTeacher</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectOutputStream è¾“å‡ºæµ</span>
            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;teacher.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Teacher</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;å”åƒ§&quot;</span><span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Teacher</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;è©æç¥–å¸ˆ&quot;</span><span class="token punctuation">,</span> per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä¾æ¬¡å°† 4 ä¸ªå¯¹è±¡å†™å…¥è¾“å‡ºæµ</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>t2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯»å–åºåˆ—åŒ–æ–‡ä»¶ä¸­çš„å¯¹è±¡ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadTeacher</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;teacher.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ä¾æ¬¡è¯»å– ObjectInputStream è¾“å…¥æµä¸­çš„ 4 ä¸ªå¯¹è±¡</span>
            <span class="token class-name">Teacher</span> t1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Teacher</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Teacher</span> t2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Teacher</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Teacher</span> t3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Teacher</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è¾“å‡º true</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t1 çš„ student å¼•ç”¨å’Œ p æ˜¯å¦ç›¸åŒï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span><span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è¾“å‡º true</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t2 çš„ student å¼•ç”¨å’Œ p æ˜¯å¦ç›¸åŒï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span><span class="token function">getStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è¾“å‡º true</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;t2 å’Œ t3 æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t2 <span class="token operator">==</span> t3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161723934.png" alt="image-20220816172307334"></p><p>å½“ç¨‹åºåºåˆ—åŒ–ä¸€ä¸ªå¯å˜å¯¹è±¡æ—¶ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä½¿ç”¨ <code>writeObject()</code> æ–¹æ³•è¾“å‡ºæ—¶æ‰ä¼šå°†è¯¥å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡ºï¼Œå½“ç¨‹åºå†æ¬¡è°ƒç”¨ <code>writeObject()</code> æ–¹æ³•æ—¶ï¼Œç¨‹åºåªæ˜¯è¾“å‡ºå‰é¢çš„åºåˆ—åŒ–ç¼–å·ï¼Œå³ä½¿åé¢è¯¥å¯¹è±¡çš„ Field å€¼å·²è¢«æ”¹å˜ï¼Œæ”¹å˜çš„ Field å€¼ä¹Ÿä¸ä¼šè¢«è¾“å‡ºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SerializeMutable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectOutputStream è¾“å‡ºæµ</span>
            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;mutable.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;mutable.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç³»ç»Ÿå°† per å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡º</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ”¹å˜ per å¯¹è±¡çš„ name Field çš„å€¼</span>
            per<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;çŒªå…«æˆ’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç³»ç»Ÿåªæ˜¯è¾“å‡ºåºåˆ—åŒ–ç¼–å·ï¼Œæ‰€ä»¥æ”¹å˜åçš„ name ä¸ä¼šè¢«åºåˆ—åŒ–</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//â‘ </span>
            <span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//â‘¡</span>
            <span class="token comment">// ä¸‹é¢è¾“å‡º trueï¼Œå³ååºåˆ—åŒ–å p1 ç­‰äº p2</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä¸‹é¢ä¾ç„¶çœ‹åˆ°è¾“å‡ºâ€œå­™æ‚Ÿç©ºâ€ï¼Œå³æ”¹å˜åçš„ Field æ²¡æœ‰è¢«åºåˆ—åŒ–</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰åºåˆ—åŒ–" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰åºåˆ—åŒ–" aria-hidden="true">#</a> è‡ªå®šä¹‰åºåˆ—åŒ–</h3><p>åœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹ï¼Œå¦‚æœä¸€ä¸ªç±»é‡ŒåŒ…å«çš„æŸäº› Field å€¼æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚é“¶è¡Œè´¦æˆ·ä¿¡æ¯ç­‰ï¼Œè¿™æ—¶ä¸å¸Œæœ›ç³»ç»Ÿå°†è¯¥ Field å€¼è¿›è¡Œåºåˆ—åŒ–ï¼›æˆ–è€…æŸä¸ª Field çš„ç±»å‹æ˜¯ä¸å¯åºåˆ—åŒ–çš„ï¼Œå› æ­¤ä¸å¸Œæœ›å¯¹è¯¥ Field è¿›è¡Œé€’å½’åºåˆ—åŒ–ï¼Œä»¥é¿å…å¼•å‘ <code>java.io.NotSerializableException</code> å¼‚å¸¸ã€‚</p><p>é€šè¿‡åœ¨ Field å‰é¢ä½¿ç”¨ <code>transient</code> å…³é”®å­—ä¿®é¥°ï¼Œå¯ä»¥æŒ‡å®š Java åºåˆ—åŒ–æ—¶æ— é¡»ç†ä¼šè¯¥ Fieldã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ³¨æ„æ­¤å¤„æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰å‚æ•°çš„æ„é€ å™¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…ˆåºåˆ—åŒ–ä¸€ä¸ª Person å¯¹è±¡ï¼Œç„¶åå†ååºåˆ—åŒ–è¯¥ Person å¯¹è±¡ï¼Œå¾—åˆ°ååºåˆ—åŒ–çš„ Person å¯¹è±¡åç¨‹åºè¾“å‡ºè¯¥å¯¹è±¡çš„ age Field å€¼ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransientTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectOutputStream è¾“å‡ºæµ</span>
            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç³»ç»Ÿå°† per å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡º</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Person</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºæœ¬ç¨‹åºä¸­çš„ Person ç±»çš„ age Field ä½¿ç”¨ transient å…³é”®å­—ä¿®é¥°ï¼Œæ‰€ä»¥ <code>age</code> å°†è¾“å‡º 0ã€‚</p><p>Java è¿˜æä¾›äº†ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶ï¼Œé€šè¿‡è¿™ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶å¯ä»¥è®©ç¨‹åºæ§åˆ¶å¦‚ä½•åºåˆ—åŒ–å„ Fieldï¼Œç”šè‡³å®Œå…¨ä¸åºåˆ—åŒ–æŸäº› Fieldï¼ˆä¸ä½¿ç”¨ transient å…³é”®å­—çš„æ•ˆæœç›¸åŒï¼‰ã€‚</p><p>åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„ç±»åº”è¯¥æä¾›å¦‚ä¸‹ç‰¹æ®Šç­¾åçš„æ–¹æ³•ï¼Œè¿™äº›ç‰¹æ®Šçš„æ–¹æ³•ç”¨ä»¥å®ç°è‡ªå®šä¹‰åºåˆ—åŒ–ã€‚</p><ol><li><code>private void writeObject(java.io.ObjectOutputStream out)throws IOException;</code></li><li><code>private void readObject(java.io.ObjectInputStream in)throws IOException, ClassNotFoundException;</code></li><li><code>private void readObjectNoData()throws ObjectStreamException;</code></li></ol><p><code>writeObject()</code> æ–¹æ³•è´Ÿè´£å†™å…¥ç‰¹å®šç±»çš„å®ä¾‹çŠ¶æ€ï¼Œä»¥ä¾¿ç›¸åº”çš„ <code>readObject()</code> æ–¹æ³•å¯ä»¥æ¢å¤å®ƒã€‚é€šè¿‡é‡å†™è¯¥æ–¹æ³•ï¼Œç¨‹åºå‘˜å¯ä»¥å®Œå…¨è·å¾—å¯¹åºåˆ—åŒ–æœºåˆ¶çš„æ§åˆ¶ï¼Œå¯ä»¥è‡ªä¸»å†³å®šå“ªäº› Field éœ€è¦åºåˆ—åŒ–ï¼Œéœ€è¦æ€æ ·åºåˆ—åŒ–ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨ <code>out.defaultWriteObject</code> æ¥ä¿å­˜ Java å¯¹è±¡çš„å„ Fieldï¼Œä»è€Œå¯ä»¥å®ç°åºåˆ—åŒ– Java å¯¹è±¡çŠ¶æ€çš„ç›®çš„ã€‚</p><p><code>readObject()</code> æ–¹æ³•è´Ÿè´£ä»æµä¸­è¯»å–å¹¶æ¢å¤å¯¹è±¡ Fieldï¼Œé€šè¿‡é‡å†™è¯¥æ–¹æ³•ï¼Œç¨‹åºå‘˜å¯ä»¥å®Œå…¨è·å¾—å¯¹ååºåˆ—åŒ–æœºåˆ¶çš„æ§åˆ¶ï¼Œå¯ä»¥è‡ªä¸»å†³å®šéœ€è¦ååºåˆ—åŒ–å“ªäº› Fieldï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œååºåˆ—åŒ–ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨ <code>in.defaultReadObject</code> æ¥æ¢å¤ Java å¯¹è±¡çš„éé™æ€å’Œéç¬æ€ Fieldã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>readObject()</code> æ–¹æ³•ä¸ <code>writeObject()</code> æ–¹æ³•å¯¹åº”ï¼Œå¦‚æœ <code>writeObject()</code> æ–¹æ³•ä¸­å¯¹ Java å¯¹è±¡çš„ Field è¿›è¡Œäº†ä¸€äº›å¤„ç†ï¼Œåˆ™åº”è¯¥åœ¨ <code>readObject()</code> æ–¹æ³•ä¸­å¯¹å…¶ Field è¿›è¡Œç›¸åº”çš„åå¤„ç†ï¼Œä»¥ä¾¿æ­£ç¡®æ¢å¤è¯¥å¯¹è±¡ã€‚</p><p>å½“åºåˆ—åŒ–æµä¸å®Œæ•´æ—¶ï¼Œ<code>readObjectNoData()</code> æ–¹æ³•å¯ä»¥ç”¨æ¥æ­£ç¡®åœ°åˆå§‹åŒ–ååºåˆ—åŒ–çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæ¥æ”¶æ–¹ä½¿ç”¨çš„ååºåˆ—åŒ–ç±»çš„ç‰ˆæœ¬ä¸åŒäºå‘é€æ–¹ï¼Œæˆ–è€…æ¥æ”¶æ–¹ç‰ˆæœ¬æ‰©å±•çš„ç±»ä¸æ˜¯å‘é€æ–¹ç‰ˆæœ¬æ‰©å±•çš„ç±»ï¼Œæˆ–è€…åºåˆ—åŒ–æµè¢«ç¯¡æ”¹æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šè°ƒç”¨ <code>readObjectNoData()</code> æ–¹æ³•æ¥åˆå§‹åŒ–ååºåˆ—åŒ–çš„å¯¹è±¡ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ³¨æ„æ­¤å¤„æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰å‚æ•°çš„æ„é€ å™¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectOutputStream</span> out<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°† name Field å€¼åè½¬åå†™å…¥äºŒè¿›åˆ¶æµ</span>
        out<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectInputStream</span> in<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†è¯»å–çš„å­—ç¬¦ä¸²åè½¬åèµ‹ç»™ name Field</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">StringBuffer</span><span class="token punctuation">)</span>in<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ç§æ›´å½»åº•çš„è‡ªå®šä¹‰æœºåˆ¶ï¼Œå®ƒç”šè‡³å¯ä»¥åœ¨åºåˆ—åŒ–å¯¹è±¡æ—¶å°†è¯¥å¯¹è±¡æ›¿æ¢æˆå…¶ä»–å¯¹è±¡ã€‚å¦‚æœéœ€è¦å®ç°åºåˆ—åŒ–æŸä¸ªå¯¹è±¡æ—¶æ›¿æ¢è¯¥å¯¹è±¡ï¼Œåˆ™åº”ä¸ºåºåˆ—åŒ–ç±»æä¾›å¦‚ä¸‹ç‰¹æ®Šæ–¹æ³•ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token constant">ANY</span><span class="token operator">-</span><span class="token constant">ACCESS</span><span class="token operator">-</span><span class="token constant">MODIFIER</span> <span class="token class-name">Object</span> <span class="token function">writeReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤ <code>writeReplace()</code> æ–¹æ³•å°†ç”±åºåˆ—åŒ–æœºåˆ¶è°ƒç”¨ï¼Œåªè¦è¯¥æ–¹æ³•å­˜åœ¨ã€‚å› ä¸ºè¯¥æ–¹æ³•å¯ä»¥æ‹¥æœ‰ç§æœ‰ï¼ˆprivateï¼‰ã€å—ä¿æŠ¤çš„ï¼ˆprotectedï¼‰å’ŒåŒ…ç§æœ‰ï¼ˆpackage-privateï¼‰ç­‰è®¿é—®æƒé™ï¼Œæ‰€ä»¥å…¶å­ç±»æœ‰å¯èƒ½è·å¾—è¯¥æ–¹æ³•ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ³¨æ„æ­¤å¤„æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰å‚æ•°çš„æ„é€ å™¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é‡å†™ writeReplace æ–¹æ³•ï¼Œç¨‹åºåœ¨åºåˆ—åŒ–è¯¥å¯¹è±¡ä¹‹å‰ï¼Œå…ˆè°ƒç”¨è¯¥æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">writeReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä¸‹ç¨‹åºè¡¨é¢ä¸Šæ˜¯åºåˆ—åŒ– <code>Person å¯¹è±¡</code> ï¼Œä½†å®é™…ä¸Šåºåˆ—åŒ–çš„æ˜¯ <code>ArrayList</code>ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReplaceTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectOutputStream è¾“å‡ºæµ</span>
            <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;replace.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
            <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;replace.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> per <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç³»ç»Ÿå°† per å¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—å¹¶è¾“å‡º</span>
            oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ååºåˆ—åŒ–è¯»å–å¾—åˆ°çš„æ˜¯ ArrayList</span>
            <span class="token class-name">ArrayList</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Java çš„åºåˆ—åŒ–æœºåˆ¶ä¿è¯åœ¨åºåˆ—åŒ–æŸä¸ªå¯¹è±¡ä¹‹å‰ï¼Œå…ˆè°ƒç”¨è¯¥å¯¹è±¡çš„ <code>writeReplace()</code> æ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å›å¦ä¸€ä¸ª Java å¯¹è±¡ï¼Œåˆ™ç³»ç»Ÿè½¬ä¸ºåºåˆ—åŒ–å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>ä¸ <code>writeReplace()</code> æ–¹æ³•ç›¸å¯¹çš„æ˜¯ï¼Œåºåˆ—åŒ–æœºåˆ¶é‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥å®ç°ä¿æŠ¤æ€§å¤åˆ¶æ•´ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token constant">ANY</span><span class="token operator">-</span><span class="token constant">ACCESS</span><span class="token operator">-</span><span class="token constant">MODIFIER</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•ä¼šç´§æ¥ç€ <code>readObject()</code> ä¹‹åè¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼å°†ä¼šä»£æ›¿åŸæ¥ååºåˆ—åŒ–çš„å¯¹è±¡ï¼Œè€ŒåŸæ¥ <code>readObject()</code>ååºåˆ—åŒ–çš„å¯¹è±¡å°†ä¼šè¢«ç«‹å³ä¸¢å¼ƒã€‚</p><p>Orientation ç±»çš„æ„é€ å™¨ç§æœ‰ï¼Œç¨‹åºåªæœ‰ä¸¤ä¸ª Orientation å¯¹è±¡ï¼Œåˆ†åˆ«é€šè¿‡ Orientation çš„ <code>HORIZONTAL</code> å’Œ <code>VERTICAL</code> ä¸¤ä¸ªå¸¸é‡æ¥å¼•ç”¨ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Orientation</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Orientation</span> <span class="token constant">HORIZONTAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Orientation</span> <span class="token constant">VERTICAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>

        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å†™å…¥ Orientation.HORIZONTAL å€¼</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¯»å–åˆšåˆšåºåˆ—åŒ–çš„å€¼</span>
        <span class="token class-name">Orientation</span> ori <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ori<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä¸€ä¸ª <code>Orientation.HORIZONTAL</code> å€¼åºåˆ—åŒ–åå†è¯»å‡ºå¹¶ç«‹å³æ‹¿ <code>ori</code> å’Œ <code>Orientation.HORIZONTAL</code> å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå°†ä¼šå‘ç°è¿”å› falseã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸º Orientation ç±»æä¾›ä¸€ä¸ª <code>readResolve()</code> æ–¹æ³•æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Orientation</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Orientation</span> <span class="token constant">HORIZONTAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Orientation</span> <span class="token constant">VERTICAL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Orientation</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>

        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å†™å…¥ Orientation.HORIZONTAL å€¼</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ª ObjectInputStream è¾“å…¥æµ</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;transient.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¯»å–åˆšåˆšåºåˆ—åŒ–çš„å€¼</span>
        <span class="token class-name">Orientation</span> ori <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Orientation</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ori<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ä¸ºæšä¸¾ç±»å¢åŠ  readResolve() æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ObjectStreamException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token constant">HORIZONTAL</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token constant">VERTICAL</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>å› ä¸ºååºåˆ—åŒ–æœºåˆ¶åœ¨æ¢å¤ Java å¯¹è±¡æ—¶æ— é¡»è°ƒç”¨æ„é€ å™¨æ¥åˆå§‹åŒ– Java å¯¹è±¡ï¼Œæ‰€ä»¥åºåˆ—åŒ–æœºåˆ¶å¯ä»¥ç”¨æ¥â€œå…‹éš†â€å¯¹è±¡ã€‚</p></div><p>ä¸ <code>writeReplace()</code> æ–¹æ³•ç±»ä¼¼çš„æ˜¯ï¼Œ<code>readResolve()</code> æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„è®¿é—®æ§åˆ¶ç¬¦ï¼Œå› æ­¤çˆ¶ç±»çš„ <code>readResolve()</code> æ–¹æ³•å¯èƒ½è¢«å…¶å­ç±»ç»§æ‰¿ã€‚</p><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><p>å½“çˆ¶ç±»å·²ç»å®ç°äº† <code>readResolve()</code> æ–¹æ³•åï¼Œå­ç±»å°†å˜å¾—æ— ä»ä¸‹æ‰‹ã€‚å¦‚æœçˆ¶ç±»åŒ…å«ä¸€ä¸ª protected æˆ– public çš„ <code>readResolve()</code> æ–¹æ³•ï¼Œè€Œä¸”å­ç±»ä¹Ÿæ²¡æœ‰é‡å†™è¯¥æ–¹æ³•ï¼Œå°†ä¼šä½¿å¾—å­ç±»ååºåˆ—åŒ–æ—¶å¾—åˆ°ä¸€ä¸ªçˆ¶ç±»çš„å¯¹è±¡ï¼Œè€Œä¸”ä¹Ÿä¸å®¹æ˜“å‘ç°è¿™ç§é”™è¯¯ã€‚</p><p>æ€»æ˜¯è®©å­ç±»é‡å†™ <code>readResolve()</code> æ–¹æ³•æ— ç–‘æ˜¯ä¸€ä¸ªè´Ÿæ‹…ï¼Œå› æ­¤å¯¹äºè¦è¢«ä½œä¸ºçˆ¶ç±»ç»§æ‰¿çš„ç±»è€Œè¨€ï¼Œå®ç° <code>readResolve()</code> æ–¹æ³•å¯èƒ½æœ‰ä¸€äº›æ½œåœ¨çš„å±é™©ã€‚</p><p>é€šå¸¸çš„å»ºè®®æ˜¯ï¼Œå¯¹äº final ç±»é‡å†™ <code>readResolve()</code> æ–¹æ³•ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼›å¦åˆ™ï¼Œé‡å†™ <code>readResolve()</code> æ–¹æ³•æ—¶åº”å°½é‡ä½¿ç”¨ private ä¿®é¥°è¯¥æ–¹æ³•ã€‚</p></div><h3 id="å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶" aria-hidden="true">#</a> å¦ä¸€ç§è‡ªå®šä¹‰åºåˆ—åŒ–æœºåˆ¶</h3><p>Java è¿˜æä¾›äº†å¦ä¸€ç§åºåˆ—åŒ–æœºåˆ¶ï¼Œè¿™ç§åºåˆ—åŒ–æ–¹å¼å®Œå…¨ç”±ç¨‹åºå‘˜å†³å®šå­˜å‚¨å’Œæ¢å¤å¯¹è±¡æ•°æ®ã€‚è¦å®ç°è¯¥ç›®æ ‡ï¼ŒJava ç±»å¿…é¡»å®ç° Externalizable æ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>void readExternal(ObjectInput in)</code>ï¼šéœ€è¦åºåˆ—åŒ–çš„ç±»å®ç° <code>readExternal()</code> æ–¹æ³•æ¥å®ç°ååºåˆ—åŒ–ã€‚è¯¥æ–¹æ³•è°ƒç”¨ <code>DataInput</code> ï¼ˆå®ƒæ˜¯ <code>ObjectInput</code> çš„çˆ¶æ¥å£ï¼‰çš„æ–¹æ³•æ¥æ¢å¤åŸºæœ¬ç±»å‹çš„ Field å€¼ï¼Œè°ƒç”¨ <code>ObjectInput</code> çš„ <code>readObject()</code> æ–¹æ³•æ¥æ¢å¤å¼•ç”¨ç±»å‹çš„ Field å€¼ã€‚</li><li><code>void writeExternal(ObjectOutput out)</code>ï¼šéœ€è¦åºåˆ—åŒ–çš„ç±»å®ç° <code>writeExternal()</code> æ–¹æ³•æ¥ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ã€‚è¯¥æ–¹æ³•è°ƒç”¨ <code>DataOutput</code> ï¼ˆå®ƒæ˜¯ <code>ObjectOutput</code> çš„çˆ¶æ¥å£ï¼‰çš„æ–¹æ³•æ¥ä¿å­˜åŸºæœ¬ç±»å‹çš„ Field å€¼ï¼Œè°ƒç”¨ <code>ObjectOutput</code> çš„ <code>writeObject()</code>æ–¹æ³•æ¥ä¿å­˜å¼•ç”¨ç±»å‹çš„ Field å€¼ã€‚</li></ol><p>é‡‡ç”¨å®ç° Externalizable æ¥å£æ–¹å¼çš„åºåˆ—åŒ–ä¸å‰é¢ä»‹ç»çš„è‡ªå®šä¹‰åºåˆ—åŒ–éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯ Externalizable æ¥å£å¼ºåˆ¶è‡ªå®šä¹‰åºåˆ—åŒ–ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Externalizable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token comment">// æ³¨æ„æ­¤å¤„æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨</span>
    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ‰å‚æ•°çš„æ„é€ å™¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeExternal</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectOutput</span> out<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°† name Field å€¼åè½¬åå†™å…¥äºŒè¿›åˆ¶æµ</span>
        out<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readExternal</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectInput</span> in<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†è¯»å–çš„å­—ç¬¦ä¸²åè½¬åèµ‹ç»™ name Field</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">StringBuffer</span><span class="token punctuation">)</span>in<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Person ç±»å®ç°äº† <code>java.io.Externalizable</code> æ¥å£ï¼Œå’Œ <code>readExternal()</code> ã€<code>writeExternal()</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•é™¤äº†æ–¹æ³•ç­¾åå’Œ <code>readObject()</code>ã€<code>writeObject()</code> ä¸¤ä¸ªæ–¹æ³•çš„æ–¹æ³•ç­¾åä¸åŒä¹‹å¤–ï¼Œå…¶æ–¹æ³•ä½“å®Œå…¨ä¸€æ ·ã€‚</p><p>å¦‚æœç¨‹åºéœ€è¦åºåˆ—åŒ–å®ç° Externalizable æ¥å£çš„å¯¹è±¡ï¼Œä¸€æ ·è°ƒç”¨ <code>ObjectOutputStream</code> çš„ <code>writeObject()</code> æ–¹æ³•è¾“å‡ºè¯¥å¯¹è±¡å³å¯ï¼›ååºåˆ—åŒ–è¯¥å¯¹è±¡ï¼Œåˆ™è°ƒç”¨ <code>ObjectInputStream</code> çš„ <code>readObject()</code> æ–¹æ³•ã€‚</p><p>å…³äºä¸¤ç§åºåˆ—åŒ–æœºåˆ¶çš„å¯¹æ¯”ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161831784.jpeg" alt="epub_681336_2017"></p><p>ç”±äºå®ç° Externalizable æ¥å£å¯¼è‡´äº†ç¼–ç¨‹å¤æ‚åº¦çš„å¢åŠ ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯é‡‡ç”¨å®ç° Serializable æ¥å£æ–¹å¼æ¥å®ç°åºåˆ—åŒ–ã€‚</p><p>å…³äºå¯¹è±¡åºåˆ—åŒ–ï¼Œè¿˜æœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚</p><ol><li>å¯¹è±¡çš„ç±»åã€Fieldï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»å‹ã€æ•°ç»„ã€å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼‰éƒ½ä¼šè¢«åºåˆ—åŒ–ï¼›æ–¹æ³•ã€static Field ï¼ˆå³é™æ€ Fieldï¼‰ã€transientFieldï¼ˆä¹Ÿè¢«ç§°ä¸ºç¬æ€ Fieldï¼‰éƒ½ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚</li><li>å®ç° Serializable æ¥å£çš„ç±»å¦‚æœéœ€è¦è®©æŸä¸ª Field ä¸è¢«åºåˆ—åŒ–ï¼Œåˆ™å¯åœ¨è¯¥ Field å‰åŠ  transient ä¿®é¥°ç¬¦ï¼Œè€Œä¸æ˜¯åŠ  static å…³é”®å­—ã€‚è™½ç„¶ static å…³é”®å­—ä¹Ÿå¯è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä½† static å…³é”®å­—ä¸èƒ½è¿™æ ·ç”¨ã€‚</li><li>ä¿è¯åºåˆ—åŒ–å¯¹è±¡çš„ Field ç±»å‹ä¹Ÿæ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™éœ€è¦ä½¿ç”¨ transient å…³é”®å­—æ¥ä¿®é¥°è¯¥ Fieldï¼Œè¦ä¸ç„¶ï¼Œè¯¥ç±»æ˜¯ä¸å¯åºåˆ—åŒ–çš„ã€‚</li><li>ååºåˆ—åŒ–å¯¹è±¡æ—¶å¿…é¡»æœ‰åºåˆ—åŒ–å¯¹è±¡çš„ class æ–‡ä»¶ã€‚</li><li>å½“é€šè¿‡æ–‡ä»¶ã€ç½‘ç»œæ¥è¯»å–åºåˆ—åŒ–åçš„å¯¹è±¡æ—¶ï¼Œå¿…é¡»æŒ‰å®é™…å†™å…¥çš„é¡ºåºè¯»å–ã€‚</li></ol><h3 id="ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#ç‰ˆæœ¬" aria-hidden="true">#</a> ç‰ˆæœ¬</h3><p>Java åºåˆ—åŒ–æœºåˆ¶å…è®¸ä¸ºåºåˆ—åŒ–ç±»æä¾›ä¸€ä¸ª <code>private static final</code> çš„ <code>serialVersionUID</code> å€¼ï¼Œè¯¥ Field å€¼ç”¨äºæ ‡è¯†è¯¥ Java ç±»çš„åºåˆ—åŒ–ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªç±»å‡çº§åï¼Œåªè¦å®ƒçš„ <code>serialVersionUID</code> Field å€¼ä¿æŒä¸å˜ï¼Œåºåˆ—åŒ–æœºåˆ¶ä¹Ÿä¼šæŠŠå®ƒä»¬å½“æˆåŒä¸€ä¸ªåºåˆ—åŒ–ç‰ˆæœ¬ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>pubic <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token comment">//ä¸ºè¯¥ç±»æŒ‡å®šä¸€ä¸ª serialVersionUID Field å€¼</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">512L</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†åœ¨ååºåˆ—åŒ–æ—¶ç¡®ä¿åºåˆ—åŒ–ç‰ˆæœ¬çš„å…¼å®¹æ€§ï¼Œæœ€å¥½åœ¨æ¯ä¸ªè¦åºåˆ—åŒ–çš„ç±»ä¸­åŠ å…¥ <code>private static final long serialVersionUID</code> è¿™ä¸ª Fieldã€‚</p><p>å¦‚æœä¸æ˜¾ç¤ºå®šä¹‰ <code>serialVersionUID</code> Field å€¼ï¼Œè¯¥ Field å€¼å°†ç”± JVM æ ¹æ®ç±»çš„ç›¸å…³ä¿¡æ¯è®¡ç®—ï¼Œè€Œä¿®æ”¹åçš„ç±»çš„è®¡ç®—ç»“æœä¸ä¿®æ”¹å‰çš„ç±»çš„è®¡ç®—ç»“æœå¾€å¾€ä¸åŒï¼Œä»è€Œé€ æˆå¯¹è±¡çš„ååºåˆ—åŒ–å› ä¸ºç±»ç‰ˆæœ¬ä¸å…¼å®¹è€Œå¤±è´¥ã€‚</p><p>å¯ä»¥é€šè¿‡ JDK å®‰è£…è·¯å¾„çš„ bin ç›®å½•ä¸‹çš„ <code>serialver.exe</code> å·¥å…·æ¥è·å¾—è¯¥ç±»çš„ <code>serialVersionUID</code> Field å€¼</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161845338.png" alt="image-20220816184508254"></p><p>åœ¨è¿è¡Œ <code>serialver</code> å‘½ä»¤æ—¶æŒ‡å®š-show é€‰é¡¹ï¼Œè¿˜å¯ä»¥å¯åŠ¨ä¸€ä¸ªå›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161846264.png" alt="image-20220816184631201"></p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208161847657.png" alt="image-20220816184727609"></p><p>ä¸æ˜¾å¼æŒ‡å®š <code>serialVersionUID</code> Field å€¼çš„å¦ä¸€ä¸ªåå¤„æ˜¯ï¼Œä¸åˆ©äºç¨‹åºåœ¨ä¸åŒçš„ JVM ä¹‹é—´ç§»æ¤ã€‚å› ä¸ºä¸åŒçš„ç¼–è¯‘å™¨è®¡ç®—è¯¥ Field å€¼çš„è®¡ç®—ç­–ç•¥å¯èƒ½ä¸åŒï¼Œä»è€Œé€ æˆè™½ç„¶ç±»å®Œå…¨æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å› ä¸º JVM ä¸åŒï¼Œä¹Ÿä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸å…¼å®¹è€Œæ— æ³•æ­£ç¡®ååºåˆ—åŒ–çš„ç°è±¡ã€‚</p><h2 id="nio" tabindex="-1"><a class="header-anchor" href="#nio" aria-hidden="true">#</a> NIO</h2><p>å‰é¢ä»‹ç»çš„è¾“å…¥æµã€è¾“å‡ºæµéƒ½æ˜¯é˜»å¡å¼çš„è¾“å…¥ã€è¾“å‡ºã€‚ä¸ä»…å¦‚æ­¤ï¼Œä¼ ç»Ÿçš„è¾“å…¥æµã€è¾“å‡ºæµéƒ½æ˜¯é€šè¿‡å­—èŠ‚çš„ç§»åŠ¨æ¥å¤„ç†çš„ï¼ˆå³ä½¿æˆ‘ä»¬ä¸ç›´æ¥å»å¤„ç†å­—èŠ‚æµï¼Œä½†åº•å±‚çš„å®ç°è¿˜æ˜¯ä¾èµ–äºå­—èŠ‚å¤„ç†ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé¢å‘æµçš„è¾“å…¥/è¾“å‡ºç³»ç»Ÿä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªå­—èŠ‚ï¼Œå› æ­¤é¢å‘æµçš„è¾“å…¥/è¾“å‡ºç³»ç»Ÿé€šå¸¸æ•ˆç‡ä¸é«˜ã€‚</p><p>ä» JDK 1.4 å¼€å§‹ï¼ŒJava æä¾›äº†ä¸€ç³»åˆ—æ”¹è¿›çš„è¾“å…¥/è¾“å‡ºå¤„ç†çš„æ–°åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½è¢«ç»Ÿç§°ä¸ºæ–° IOï¼ˆNew IOï¼Œç®€ç§° NIOï¼‰ï¼Œæ–°å¢äº†è®¸å¤šç”¨äºå¤„ç†è¾“å…¥/è¾“å‡ºçš„ç±»ï¼Œè¿™äº›ç±»éƒ½è¢«æ”¾åœ¨ <code>java.nio</code> åŒ…ä»¥åŠå­åŒ…ä¸‹ï¼Œå¹¶ä¸”å¯¹åŸ <code>java.io</code> åŒ…ä¸­çš„å¾ˆå¤šç±»éƒ½ä»¥ NIO ä¸ºåŸºç¡€è¿›è¡Œäº†æ”¹å†™ï¼Œæ–°å¢äº†æ»¡è¶³ NIO çš„åŠŸèƒ½ã€‚</p><h3 id="nio-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#nio-æ¦‚è¿°" aria-hidden="true">#</a> NIO æ¦‚è¿°</h3><p>NIO é‡‡ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶çš„æ–¹å¼æ¥å¤„ç†è¾“å…¥/è¾“å‡ºï¼ŒNIO å°†æ–‡ä»¶æˆ–æ–‡ä»¶çš„ä¸€æ®µåŒºåŸŸæ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åƒè®¿é—®å†…å­˜ä¸€æ ·æ¥è®¿é—®æ–‡ä»¶äº†ï¼ˆè¿™ç§æ–¹å¼æ¨¡æ‹Ÿäº†æ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿå†…å­˜çš„æ¦‚å¿µï¼‰ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥è¿›è¡Œè¾“å…¥/è¾“å‡ºæ¯”ä¼ ç»Ÿçš„è¾“å…¥/è¾“å‡ºè¦å¿«å¾—å¤šã€‚</p><p>NIO ç›¸å…³çš„åŒ…å¦‚ä¸‹ã€‚</p><ol><li><code>java.nio</code> åŒ…ï¼šä¸»è¦åŒ…å«å„ç§ä¸ Buffer ç›¸å…³çš„ç±»ã€‚</li><li><code>java.nio.channels</code> åŒ…ï¼šä¸»è¦åŒ…å«ä¸ Channel å’Œ Selector ç›¸å…³çš„ç±»ã€‚</li><li><code>java.nio.charset</code> åŒ…ï¼šä¸»è¦åŒ…å«ä¸å­—ç¬¦é›†ç›¸å…³çš„ç±»ã€‚</li><li><code>java.nio.channels.spi</code> åŒ…ï¼šä¸»è¦åŒ…å«ä¸ Channel ç›¸å…³çš„æœåŠ¡æä¾›è€…ç¼–ç¨‹æ¥å£ã€‚</li><li><code>java.nio.charset.spi</code> åŒ…ï¼šåŒ…å«ä¸å­—ç¬¦é›†ç›¸å…³çš„æœåŠ¡æä¾›è€…ç¼–ç¨‹æ¥å£ã€‚</li></ol><p>Channelï¼ˆé€šé“ï¼‰å’Œ Bufferï¼ˆç¼“å†²ï¼‰æ˜¯ NIO ä¸­çš„ä¸¤ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼ŒChannel æ˜¯å¯¹ä¼ ç»Ÿçš„è¾“å…¥/è¾“å‡ºç³»ç»Ÿçš„æ¨¡æ‹Ÿï¼Œåœ¨ NIO ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦é€šè¿‡é€šé“ä¼ è¾“ï¼›Channel ä¸ä¼ ç»Ÿçš„ <code>InputStream</code>ã€<code>OutputStream</code> æœ€å¤§çš„åŒºåˆ«åœ¨äºå®ƒæä¾›äº†ä¸€ä¸ª <code>map()</code> æ–¹æ³•ï¼Œé€šè¿‡è¯¥ <code>map()</code> æ–¹æ³•å¯ä»¥ç›´æ¥å°†â€œä¸€å—æ•°æ®â€æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚</p><p>å¦‚æœè¯´ä¼ ç»Ÿçš„è¾“å…¥/è¾“å‡ºç³»ç»Ÿæ˜¯é¢å‘æµçš„å¤„ç†ï¼Œåˆ™æ–° IO åˆ™æ˜¯é¢å‘å—çš„å¤„ç†ã€‚Buffer å¯ä»¥è¢«ç†è§£æˆä¸€ä¸ªå®¹å™¨ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå‘é€åˆ° Channel ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½å¿…é¡»é¦–å…ˆæ”¾åˆ° Buffer ä¸­ï¼Œè€Œä» Channel ä¸­è¯»å–çš„æ•°æ®ä¹Ÿå¿…é¡»å…ˆæ”¾åˆ° Buffer ä¸­ã€‚</p><p>æ­¤å¤„çš„ Buffer æœ‰ç‚¹ç±»ä¼¼äºå‰é¢ä»‹ç»çš„â€œç«¹ç­’â€ï¼Œä½†è¯¥ Buffer æ—¢å¯ä»¥åƒâ€œç«¹ç­’â€é‚£æ ·ä¸€æ¬¡æ¬¡å» Channel ä¸­å–æ°´ï¼Œä¹Ÿå…è®¸ä½¿ç”¨ Channel ç›´æ¥å°†æ–‡ä»¶çš„æŸå—æ•°æ®æ˜ å°„æˆ Bufferã€‚é™¤äº† Channel å’Œ Buffer ä¹‹å¤–ï¼Œæ–° IO è¿˜æä¾›äº†ç”¨äºå°† Unicode å­—ç¬¦ä¸²æ˜ å°„æˆå­—èŠ‚åºåˆ—ä»¥åŠé€†æ˜ å°„æ“ä½œçš„ Charset ç±»ï¼Œä¹Ÿæä¾›äº†ç”¨äºæ”¯æŒéé˜»å¡å¼è¾“å…¥/è¾“å‡ºçš„ Selector ç±»ã€‚</p><h3 id="ä½¿ç”¨-buffer" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-buffer" aria-hidden="true">#</a> ä½¿ç”¨ Buffer</h3><p>ä»å†…éƒ¨ç»“æ„ä¸Šæ¥çœ‹ï¼ŒBuffer å°±åƒä¸€ä¸ªæ•°ç»„ï¼Œå®ƒå¯ä»¥ä¿å­˜å¤šä¸ªç±»å‹ç›¸åŒçš„æ•°æ®ã€‚Buffer æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶æœ€å¸¸ç”¨çš„å­ç±»æ˜¯ <code>ByteBuffer</code> ï¼Œå®ƒå¯ä»¥åœ¨åº•å±‚å­—èŠ‚æ•°ç»„ä¸Šè¿›è¡Œ get/set æ“ä½œã€‚</p><p>é™¤äº† <code>ByteBuffer</code> ä¹‹å¤–ï¼Œå¯¹åº”äºå…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ<code>boolean</code> é™¤å¤–ï¼‰éƒ½æœ‰ç›¸åº”çš„ Buffer ç±»ï¼š<code>CharBuffer</code>ã€<code>ShortBuffer</code>ã€<code>IntBuffer</code> ã€<code>LongBuffer</code>ã€<code>FloatBuffer</code>ã€<code>DoubleBuffer</code>ã€‚é™¤äº† <code>ByteBuffer</code> ä¹‹å¤–ï¼Œå®ƒä»¬éƒ½é‡‡ç”¨ç›¸åŒæˆ–ç›¸ä¼¼çš„æ–¹æ³•æ¥ç®¡ç†æ•°æ®ï¼Œåªæ˜¯å„è‡ªç®¡ç†çš„æ•°æ®ç±»å‹ä¸åŒè€Œå·²ã€‚è¿™äº› Buffer ç±»éƒ½æ²¡æœ‰æä¾›æ„é€ å™¨ï¼Œé€šè¿‡ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥å¾—åˆ°ä¸€ä¸ª Buffer å¯¹è±¡ã€‚</p><ul><li><code>static XxxBuffer allocate(int capacity)</code>ï¼šåˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º capacity çš„ <code>XxxBuffer</code> å¯¹è±¡ã€‚</li></ul><p>ä½¿ç”¨è¾ƒå¤šçš„æ˜¯ <code>ByteBuffer</code> å’Œ <code>CharBuffer</code>ã€‚å…¶ä¸­ <code>ByteBuffer</code> ç±»è¿˜æœ‰ä¸€ä¸ªå­ç±»ï¼š<code>MappedByteBuffer</code>ï¼Œå®ƒç”¨äºè¡¨ç¤º Channel å°†ç£ç›˜æ–‡ä»¶çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å†…å®¹æ˜ å°„åˆ°å†…å­˜ä¸­åå¾—åˆ°çš„ç»“æœï¼Œé€šå¸¸ <code>MappedByteBuffer</code> å¯¹è±¡ç”± Channel çš„ <code>map()</code> æ–¹æ³•è¿”å›ã€‚</p><p>åœ¨ Buffer ä¸­æœ‰ 3 ä¸ªé‡è¦çš„æ¦‚å¿µï¼šå®¹é‡ï¼ˆcapacityï¼‰ã€ç•Œé™ï¼ˆlimitï¼‰å’Œä½ç½®ï¼ˆpositionï¼‰ã€‚</p><ol><li>å®¹é‡ï¼ˆcapacityï¼‰ï¼šç¼“å†²åŒºçš„å®¹é‡ï¼ˆcapacityï¼‰è¡¨ç¤ºè¯¥ Buffer çš„æœ€å¤§æ•°æ®å®¹é‡ï¼Œå³æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘æ•°æ®ã€‚ç¼“å†²åŒºçš„å®¹é‡ä¸å¯èƒ½ä¸ºè´Ÿå€¼ï¼Œåˆ›å»ºåä¸èƒ½æ”¹å˜ã€‚</li><li>ç•Œé™ï¼ˆlimitï¼‰ï¼šç¬¬ä¸€ä¸ªä¸åº”è¯¥è¢«è¯»å‡ºæˆ–è€…å†™å…¥çš„ç¼“å†²åŒºä½ç½®ç´¢å¼•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½äº limit åçš„æ•°æ®æ—¢ä¸å¯è¢«è¯»ï¼Œä¹Ÿä¸å¯è¢«å†™ã€‚</li><li>ä½ç½®ï¼ˆpositionï¼‰ï¼šç”¨äºæŒ‡æ˜ä¸‹ä¸€ä¸ªå¯ä»¥è¢«è¯»å‡ºçš„æˆ–è€…å†™å…¥çš„ç¼“å†²åŒºä½ç½®ç´¢å¼•ï¼ˆç±»ä¼¼äº IO æµä¸­çš„è®°å½•æŒ‡é’ˆï¼‰ã€‚å½“ä½¿ç”¨ Buffer ä» Channel ä¸­è¯»å–æ•°æ®æ—¶ï¼Œposition çš„å€¼æ°å¥½ç­‰äºå·²ç»è¯»åˆ°äº†å¤šå°‘æ•°æ®ã€‚å½“åˆšåˆšæ–°å»ºä¸€ä¸ª Buffer å¯¹è±¡æ—¶ï¼Œå…¶ position ä¸º 0ï¼›å¦‚æœä» Channel ä¸­è¯»å–äº† 2 ä¸ªæ•°æ®åˆ°è¯¥ Buffer ä¸­ï¼Œåˆ™ position ä¸º 2ï¼ŒæŒ‡å‘ Buffer ä¸­ç¬¬ 3 ä¸ªï¼ˆç¬¬ 1 ä¸ªä½ç½®çš„ç´¢å¼•ä¸º 0ï¼‰ä½ç½®ã€‚</li></ol><p>é™¤æ­¤ä¹‹å¤–ï¼ŒBuffer é‡Œè¿˜æ”¯æŒä¸€ä¸ªå¯é€‰çš„æ ‡è®°ï¼ˆmarkï¼Œç±»ä¼¼äºä¼ ç»Ÿ IO æµä¸­çš„ markï¼‰ï¼ŒBuffer å…è®¸ç›´æ¥å°† position å®šä½åˆ°è¯¥ mark å¤„ã€‚è¿™äº›å€¼æ»¡è¶³å¦‚ä¸‹å…³ç³»ã€‚</p><blockquote><p>0â‰¤markâ‰¤positionâ‰¤limitâ‰¤capacity</p></blockquote><p>æŸä¸ª Buffer è¯»å…¥äº†ä¸€äº›æ•°æ®åçš„ç¤ºæ„å›¾ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181356396.jpeg" alt="epub_681336_2039"></p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>Buffer ä¸­åŒ…å«ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œå³ <code>flip()</code> å’Œ <code>clear()</code>ï¼Œ<code>flip()</code> ä¸ºä» Buffer ä¸­å–å‡ºæ•°æ®åšå¥½å‡†å¤‡ï¼Œè€Œ <code>clear()</code> ä¸ºå†æ¬¡å‘ Buffer ä¸­è£…å…¥æ•°æ®åšå¥½å‡†å¤‡ã€‚</p></div><p>Buffer çš„ä¸»è¦ä½œç”¨å°±æ˜¯è£…å…¥æ•°æ®ï¼Œç„¶åè¾“å‡ºæ•°æ®ï¼ˆå…¶ä½œç”¨ç±»ä¼¼äºå‰é¢ä»‹ç»çš„å–æ°´çš„â€œç«¹ç­’â€ï¼‰ï¼Œå¼€å§‹æ—¶ Buffer çš„ position ä¸º 0ï¼Œlimit ä¸º capacityï¼Œç¨‹åºå¯é€šè¿‡ <code>put()</code> æ–¹æ³•å‘ Buffer ä¸­æ”¾å…¥ä¸€äº›æ•°æ®ï¼ˆæˆ–è€…ä» Channel ä¸­è·å–ä¸€äº›æ•°æ®ï¼‰ï¼Œæ¯æ”¾å…¥ä¸€äº›æ•°æ®ï¼ŒBuffer çš„ position ç›¸åº”åœ°å‘åç§»åŠ¨ä¸€äº›ä½ç½®ã€‚</p><p>å½“ Buffer è£…å…¥æ•°æ®ç»“æŸåï¼Œè°ƒç”¨ Buffer çš„ <code>flip()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°† limit è®¾ç½®ä¸º position æ‰€åœ¨ä½ç½®ï¼Œå¹¶å°† position è®¾ä¸º 0ï¼Œè¿™å°±ä½¿å¾— Buffer çš„è¯»å†™æŒ‡é’ˆåˆç§»åˆ°äº†å¼€å§‹ä½ç½®ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒBuffer è°ƒç”¨ <code>flip()</code> æ–¹æ³•ä¹‹åï¼ŒBuffer ä¸ºè¾“å‡ºæ•°æ®åšå¥½å‡†å¤‡ï¼›å½“ Buffer è¾“å‡ºæ•°æ®ç»“æŸåï¼ŒBuffer è°ƒç”¨ <code>clear()</code> æ–¹æ³•ï¼Œ<code>clear()</code> æ–¹æ³•ä¸æ˜¯æ¸…ç©º Buffer çš„æ•°æ®ï¼Œå®ƒä»…ä»…å°† position ç½®ä¸º 0ï¼Œå°† limit ç½®ä¸º capacityï¼Œè¿™æ ·ä¸ºå†æ¬¡å‘ Buffer ä¸­è£…å…¥æ•°æ®åšå¥½å‡†å¤‡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒBuffer è¿˜åŒ…å«å¦‚ä¸‹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><ol><li><code>int capacity()</code>ï¼šè¿”å› Buffer çš„ capacity å¤§å°ã€‚</li><li><code>boolean hasRemaining()</code>ï¼šåˆ¤æ–­å½“å‰ä½ç½®ï¼ˆpositionï¼‰å’Œç•Œé™ï¼ˆlimitï¼‰ä¹‹é—´æ˜¯å¦è¿˜æœ‰å…ƒç´ å¯ä¾›å¤„ç†ã€‚</li><li><code>int limit()</code>ï¼šè¿”å› Buffer çš„ç•Œé™ï¼ˆlimitï¼‰çš„ä½ç½®ã€‚</li><li><code>Buffer limit(int newLt)</code>ï¼šé‡æ–°è®¾ç½®ç•Œé™ï¼ˆlimitï¼‰çš„å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…·æœ‰æ–°çš„ limit çš„ç¼“å†²åŒºå¯¹è±¡ã€‚</li><li><code>Buffer mark()</code>ï¼šè®¾ç½® Buffer çš„ mark ä½ç½®ï¼Œå®ƒåªèƒ½åœ¨ 0 å’Œä½ç½®ï¼ˆpositionï¼‰ä¹‹é—´åš markã€‚</li><li><code>int position()</code>ï¼šè¿”å› Buffer ä¸­çš„ position å€¼ã€‚</li><li><code>Buffer position(int newPs)</code>ï¼šè®¾ç½® Buffer çš„ positionï¼Œå¹¶è¿”å› position è¢«ä¿®æ”¹åçš„ Buffer å¯¹è±¡ã€‚</li><li><code>int remaining()</code>ï¼šè¿”å›å½“å‰ä½ç½®å’Œç•Œé™ï¼ˆlimitï¼‰ä¹‹é—´çš„å…ƒç´ ä¸ªæ•°ã€‚</li><li><code>Buffer reset()</code>ï¼šå°†ä½ç½®ï¼ˆpositionï¼‰è½¬åˆ° mark æ‰€åœ¨çš„ä½ç½®ã€‚</li><li><code>Buffer rewind()</code>ï¼šå°†ä½ç½®ï¼ˆpositionï¼‰è®¾ç½®æˆ 0ï¼Œå–æ¶ˆè®¾ç½®çš„ markã€‚</li></ol><p>Buffer çš„æ‰€æœ‰å­ç±»è¿˜æä¾›äº†ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•ï¼š<code>put()</code> å’Œ <code>get()</code> æ–¹æ³•ï¼Œç”¨äºå‘ Buffer ä¸­æ”¾å…¥æ•°æ®å’Œä» Buffer ä¸­å–å‡ºæ•°æ®ã€‚å½“ä½¿ç”¨ <code>put()</code>å’Œ <code>get()</code> æ–¹æ³•æ”¾å…¥ã€å–å‡ºæ•°æ®æ—¶ï¼ŒBuffer æ—¢æ”¯æŒå¯¹å•ä¸ªæ•°æ®çš„è®¿é—®ï¼Œä¹Ÿæ”¯æŒå¯¹æ‰¹é‡æ•°æ®çš„è®¿é—®ï¼ˆä»¥æ•°ç»„ä½œä¸ºå‚æ•°ï¼‰ã€‚</p><p>ä½¿ç”¨ <code>put()</code> å’Œ <code>get()</code> æ¥è®¿é—® Buffer ä¸­çš„æ•°æ®æ—¶ï¼Œåˆ†ä¸ºç›¸å¯¹å’Œç»å¯¹ä¸¤ç§ã€‚</p><ol><li>ç›¸å¯¹ï¼ˆRelativeï¼‰ï¼šä» Buffer çš„å½“å‰ position å¤„å¼€å§‹è¯»å–æˆ–å†™å…¥æ•°æ®ï¼Œç„¶åå°†ä½ç½®ï¼ˆpositionï¼‰çš„å€¼æŒ‰å¤„ç†å…ƒç´ çš„ä¸ªæ•°å¢åŠ ã€‚</li><li>ç»å¯¹ï¼ˆAbsoluteï¼‰ï¼šç›´æ¥æ ¹æ®ç´¢å¼•å‘ Buffer ä¸­è¯»å–æˆ–å†™å…¥æ•°æ®ï¼Œä½¿ç”¨ç»å¯¹æ–¹å¼è®¿é—® Buffer é‡Œçš„æ•°æ®æ—¶ï¼Œå¹¶ä¸ä¼šå½±å“ä½ç½®ï¼ˆpositionï¼‰çš„å€¼ã€‚</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»º Buffer</span>
        <span class="token class-name">CharBuffer</span> buff <span class="token operator">=</span> <span class="token class-name">CharBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//â‘ </span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;capacity: &quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;limit: &quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;position: &quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ”¾å…¥å…ƒç´ </span>
        buff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//â‘¡</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åŠ å…¥ä¸‰ä¸ªå…ƒç´ åï¼Œposition=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨ flip() æ–¹æ³•</span>
        buff<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//â‘¢</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œ flip() åï¼Œlimit=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;position=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ </span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´  (position=0)ï¼š&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//â‘£</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å–å‡ºä¸€ä¸ªå…ƒç´ åï¼Œposition=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è°ƒç”¨ clear() æ–¹æ³•</span>
        buff<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//â‘¤</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œ clear() åï¼Œlimit=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œ clear() åï¼Œposition=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œ clear() åï¼Œç¼“å†²åŒºå†…å®¹å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼š&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸ºï¼š&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// â‘¥</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œç»å¯¹è¯»å–åï¼Œposition=&quot;</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢ç¨‹åºçš„ â‘  å·ä»£ç å¤„ï¼Œé€šè¿‡ <code>CharBuffer</code> çš„ä¸€ä¸ªé™æ€æ–¹æ³• <code>allocate()</code> åˆ›å»ºäº†ä¸€ä¸ª capacity ä¸º 8 çš„ <code>CharBuffer</code>ï¼Œæ­¤æ—¶è¯¥ Buffer çš„ limit å’Œ capacity ä¸º 8ï¼Œposition ä¸º 0ã€‚</p><p><img src="https://res.weread.qq.com/wrepub/epub_681336_2052" alt="epub_681336_2052"></p><p>æ¥ä¸‹æ¥ç¨‹åºæ‰§è¡Œåˆ° â‘¡ å·ä»£ç å¤„ï¼Œç¨‹åºå‘ <code>CharBuffer</code> ä¸­æ”¾å…¥ 3 ä¸ªæ•°å€¼ï¼Œæ”¾å…¥ 3 ä¸ªæ•°å€¼åçš„ <code>CharBuffer</code>ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181603114.jpeg" alt="epub_681336_2053"></p><p>ç¨‹åºæ‰§è¡Œåˆ° â‘¢ å·ä»£ç å¤„ï¼Œè°ƒç”¨äº† Buffer çš„ <code>flip()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†æŠŠ limit è®¾ä¸º position å¤„ï¼ŒæŠŠ position è®¾ä¸º 0ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181604193.jpeg" alt="epub_681336_2054"></p><p>å½“ Buffer è°ƒç”¨äº† <code>flip()</code> æ–¹æ³•ä¹‹åï¼Œlimit å°±ç§»åˆ°äº†åŸæ¥ position æ‰€åœ¨ä½ç½®ï¼Œè¿™æ ·ç›¸å½“äºæŠŠ Buffer ä¸­æ²¡æœ‰æ•°æ®çš„å­˜å‚¨ç©ºé—´â€œå°å°â€èµ·æ¥ï¼Œä»è€Œé¿å…è¯»å– Buffer æ•°æ®æ—¶è¯»åˆ° null å€¼ã€‚</p><p>æ¥ä¸‹æ¥ç¨‹åºåœ¨ â‘£ å·ä»£ç å¤„å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå–å‡ºä¸€ä¸ªå…ƒç´ å position å‘åç§»åŠ¨ä¸€ä½ï¼Œä¹Ÿå°±æ˜¯è¯¥ Buffer çš„ position ç­‰äº 1ã€‚ç¨‹åºæ‰§è¡Œåˆ° â‘¤ å·ä»£ç å¤„ï¼ŒBuffer è°ƒç”¨ <code>clear()</code> æ–¹æ³•å°† position è®¾ä¸º 0ï¼Œå°† limit è®¾ä¸ºä¸ capacity ç›¸ç­‰ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181605865.jpeg" alt="epub_681336_2055"></p><p>å¯¹ Buffer æ‰§è¡Œ <code>clear()</code> æ–¹æ³•åï¼Œè¯¥ Buffer å¯¹è±¡é‡Œçš„æ•°æ®ä¾ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥ç¨‹åºåœ¨ â‘¥ å·ä»£ç å¤„ä¾ç„¶å¯ä»¥å–å‡ºä½ç½®ä¸º 2 çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ cã€‚å› ä¸º â‘¥ å·ä»£ç é‡‡ç”¨çš„æ˜¯æ ¹æ®ç´¢å¼•æ¥å–å€¼çš„æ–¹å¼ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•ä¸ä¼šå½±å“ Buffer çš„ positionã€‚</p><h3 id="ä½¿ç”¨-channel" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-channel" aria-hidden="true">#</a> ä½¿ç”¨ Channel</h3><p>Channel ä¸ä¼ ç»Ÿçš„æµå¯¹è±¡æœ‰ä¸¤ä¸ªä¸»è¦åŒºåˆ«ã€‚</p><ol><li>Channel å¯ä»¥ç›´æ¥å°†æŒ‡å®šæ–‡ä»¶çš„éƒ¨åˆ†æˆ–å…¨éƒ¨ç›´æ¥æ˜ å°„æˆ Bufferã€‚</li><li>ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—® Channel ä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬è¯»å–ã€å†™å…¥éƒ½ä¸è¡Œï¼ŒChannel åªèƒ½ä¸ Buffer è¿›è¡Œäº¤äº’ã€‚</li></ol><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¦ä» Channel ä¸­å–å¾—æ•°æ®ï¼Œå¿…é¡»å…ˆç”¨ Buffer ä» Channel ä¸­å–å‡ºä¸€äº›æ•°æ®ï¼Œç„¶åè®©ç¨‹åºä» Buffer ä¸­å–å‡ºè¿™äº›æ•°æ®ï¼›å¦‚æœè¦å°†ç¨‹åºä¸­çš„æ•°æ®å†™å…¥ Channelï¼Œä¸€æ ·å…ˆè®©ç¨‹åºå°†æ•°æ®æ”¾å…¥ Buffer ä¸­ï¼Œç¨‹åºå†å°† Buffer é‡Œçš„æ•°æ®å†™å…¥ Channel ä¸­ã€‚</p><p>Channel æ¥å£æä¾›äº† <code>DatagramChannel</code>ã€<code>FileChannel</code>ã€<code>Pipe.SinkChannel</code>ã€<code>Pipe.SourceChannel</code>ã€<code>SelectableChannel</code> ã€<code>ServerSocketChannel</code>ã€<code>SocketChannel</code>ç­‰å®ç°ç±»ã€‚</p><p>NIO é‡Œçš„ Channel æ˜¯æŒ‰åŠŸèƒ½æ¥åˆ’åˆ†çš„ï¼Œä¾‹å¦‚ <code>Pipe.SinkChannel</code>ã€<code>Pipe.SourceChannel</code>æ˜¯ç”¨äºæ”¯æŒçº¿ç¨‹ä¹‹é—´é€šä¿¡çš„ç®¡é“ Channelï¼›<code>ServerSocketChannel</code>ã€<code>SocketChannel</code>æ˜¯ç”¨äºæ”¯æŒ TCP ç½‘ç»œé€šä¿¡çš„ Channelï¼›è€Œ <code>DatagramChannel</code>åˆ™æ˜¯ç”¨äºæ”¯æŒ UDP ç½‘ç»œé€šä¿¡çš„ Channelã€‚</p><p>æ‰€æœ‰çš„ Channel éƒ½ä¸åº”è¯¥é€šè¿‡æ„é€ å™¨æ¥ç›´æ¥åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ä¼ ç»Ÿçš„èŠ‚ç‚¹ <code>InputStream</code>ã€<code>OutputStream</code> çš„ <code>getChannel()</code> æ–¹æ³•æ¥è¿”å›å¯¹åº”çš„ Channelï¼Œä¸åŒçš„èŠ‚ç‚¹æµè·å¾—çš„ Channel ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œ<code>FileInputStream</code>ã€<code>FileOutputStream</code> çš„ <code>getChannel()</code> è¿”å›çš„æ˜¯ <code>FileChannel</code>ï¼Œè€Œ <code>PipedInputStream</code> å’Œ <code>PipedOutputStream</code> çš„ <code>getChannel()</code> è¿”å›çš„æ˜¯ <code>Pipe.SinkChannel</code> ã€<code>Pipe.SourceChannel</code>ã€‚</p><p>Channel ä¸­æœ€å¸¸ç”¨çš„ 3 ç±»æ–¹æ³•æ˜¯ <code>map()</code>ã€<code>read()</code> å’Œ <code>write()</code>ï¼Œå…¶ä¸­ <code>map()</code> æ–¹æ³•ç”¨äºå°† Channel å¯¹åº”çš„éƒ¨åˆ†æˆ–å…¨éƒ¨æ•°æ®æ˜ å°„æˆ <code>ByteBuffer</code>ï¼›è€Œ <code>read()</code> æˆ– <code>write()</code> æ–¹æ³•éƒ½æœ‰ä¸€ç³»åˆ—é‡è½½å½¢å¼ï¼Œè¿™äº›æ–¹æ³•ç”¨äºä» Buffer ä¸­è¯»å–æ•°æ®æˆ–å‘ Buffer ä¸­å†™å…¥æ•°æ®ã€‚</p><p><code>map()</code> æ–¹æ³•çš„æ–¹æ³•ç­¾åä¸ºï¼š<code>MappedByteBuffer map(FileChannel.MapMode mode, long position, long size)</code> ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ‰§è¡Œæ˜ å°„æ—¶çš„æ¨¡å¼ï¼Œåˆ†åˆ«æœ‰åªè¯»ã€è¯»å†™ç­‰æ¨¡å¼ï¼›ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºæ§åˆ¶å°† Channel çš„å“ªäº›æ•°æ®æ˜ å°„æˆ <code>ByteBuffer</code>ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileChannelTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FileChannelTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span>
            <span class="token comment">// åˆ›å»º FileInputStreamï¼Œä»¥è¯¥æ–‡ä»¶è¾“å…¥æµåˆ›å»º FileChannel</span>
            <span class="token class-name">FileChannel</span> inChannel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä»¥æ–‡ä»¶è¾“å‡ºæµåˆ›å»º FileChannelï¼Œç”¨ä»¥æ§åˆ¶è¾“å‡º</span>
            <span class="token class-name">FileChannel</span> outChannel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°† FileChannel é‡Œçš„å…¨éƒ¨æ•°æ®æ˜ å°„æˆ ByteBuffer</span>
            <span class="token class-name">MappedByteBuffer</span> buffer <span class="token operator">=</span> inChannel<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">FileChannel<span class="token punctuation">.</span>MapMode</span><span class="token punctuation">.</span><span class="token constant">READ_ONLY</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// â‘ </span>
            <span class="token comment">// ä½¿ç”¨ UTF-8 çš„å­—ç¬¦é›†æ¥åˆ›å»ºè§£ç å™¨</span>
            <span class="token class-name">Charset</span> charset <span class="token operator">=</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">;</span>
            <span class="token comment">// ç›´æ¥å°† buffer é‡Œçš„æ•°æ®å…¨éƒ¨è¾“å‡º</span>
            outChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// â‘¡</span>
            <span class="token comment">// å†æ¬¡è°ƒç”¨ buffer çš„ clear() æ–¹æ³•ï¼Œå¤åŸ limitã€position çš„ä½ç½®</span>
            buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºè§£ç å™¨ï¼ˆCharsetDecoderï¼‰å¯¹è±¡</span>
            <span class="token class-name">CharsetDecoder</span> decoder <span class="token operator">=</span> charset<span class="token punctuation">.</span><span class="token function">newDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä½¿ç”¨è§£ç å™¨å°† ByteBuffer è½¬æ¢æˆ CharBuffer</span>
            <span class="token class-name">CharBuffer</span> charBuffer <span class="token operator">=</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// CharBuffer çš„ toString æ–¹æ³•å¯ä»¥è·å–å¯¹åº”çš„å­—ç¬¦ä¸²</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>charBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†åˆ«ä½¿ç”¨ <code>FileInputStream</code>ã€<code>FileOutputStream</code> æ¥è·å– <code>FileChannel</code>ï¼Œè™½ç„¶ <code>FileChannel</code> æ—¢å¯ä»¥è¯»å–ä¹Ÿå¯ä»¥å†™å…¥ï¼Œä½† <code>FileInputStream</code> è·å–çš„ <code>FileChannel</code> åªèƒ½è¯»ï¼Œè€Œ <code>FileOutputStream</code> è·å–çš„ <code>FileChannel</code> åªèƒ½å†™ã€‚</p><p>ç¨‹åºä¸­ â‘  å·ä»£ç å¤„ç›´æ¥å°†æŒ‡å®š Channel ä¸­çš„å…¨éƒ¨æ•°æ®æ˜ å°„æˆ <code>ByteBuffer</code>ï¼Œç„¶åç¨‹åºä¸­ â‘¡ å·ä»£ç å¤„ç›´æ¥å°†æ•´ä¸ª <code>ByteBuffer</code> çš„å…¨éƒ¨æ•°æ®å†™å…¥ä¸€ä¸ªè¾“å‡º <code>FileChannel</code> ä¸­ï¼Œè¿™å°±å®Œæˆäº†æ–‡ä»¶çš„å¤åˆ¶ã€‚</p><blockquote><p>ä¸ºäº†èƒ½å°† FileChannelTest.java æ–‡ä»¶é‡Œçš„å†…å®¹æ‰“å°å‡ºæ¥ï¼Œä½¿ç”¨äº† Charset ç±»å’Œ <code>CharsetDecoder</code> ç±»å°† <code>ByteBuffer</code> è½¬æ¢æˆ <code>CharBuffer</code>ã€‚</p></blockquote><p>ä¸ä»… <code>InputStream</code>ã€<code>OutputStream</code> åŒ…å«äº† <code>getChannel()</code> æ–¹æ³•ï¼Œåœ¨ <code>RandomAccessFile</code> ä¸­ä¹ŸåŒ…å«äº†ä¸€ä¸ª <code>getChannel()</code> æ–¹æ³•ï¼Œç”± <code>RandomAccessFile</code> è¿”å›çš„ <code>FileChannel()</code> æ˜¯åªè¯»çš„è¿˜æ˜¯è¯»å†™çš„ Channelï¼Œåˆ™å–å†³äº <code>RandomAccessFile</code> æ‰“å¼€æ–‡ä»¶çš„æ¨¡å¼ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RandomFileChannelTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ª RandomAccessFile å¯¹è±¡</span>
        <span class="token class-name">RandomAccessFile</span> raf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å– RandomAccessFile å¯¹åº”çš„ Channel</span>
        <span class="token class-name">FileChannel</span> randomChannel <span class="token operator">=</span> raf<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å°† Channel ä¸­çš„æ‰€æœ‰æ•°æ®æ˜ å°„æˆ ByteBuffer</span>
      <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> randomChannel<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">FileChannel
          <span class="token punctuation">.</span>MapMode</span><span class="token punctuation">.</span><span class="token constant">READ_ONLY</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// æŠŠ Channel çš„è®°å½•æŒ‡é’ˆç§»åŠ¨åˆ°æœ€å</span>
      randomChannel<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å°† buffer ä¸­çš„æ‰€æœ‰æ•°æ®è¾“å‡º</span>
      randomChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>randomChannel.position(f.length());</code>å¯ä»¥å°† Channel çš„è®°å½•æŒ‡é’ˆç§»åŠ¨åˆ°è¯¥ Channel çš„æœ€åï¼Œä»è€Œå¯ä»¥è®©ç¨‹åºå°†æŒ‡å®š <code>ByteBuffer</code> çš„æ•°æ®è¿½åŠ åˆ°è¯¥ Channel çš„åé¢ã€‚æ¯æ¬¡è¿è¡Œä¸Šé¢ç¨‹åºï¼Œéƒ½ä¼šæŠŠ a.txt æ–‡ä»¶çš„å†…å®¹å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å°†å…¨éƒ¨å†…å®¹è¿½åŠ åˆ°è¯¥æ–‡ä»¶çš„åé¢ã€‚</p><h3 id="å­—ç¬¦é›†å’Œ-charset" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦é›†å’Œ-charset" aria-hidden="true">#</a> å­—ç¬¦é›†å’Œ Charset</h3><p>è®¡ç®—æœºé‡Œçš„æ–‡ä»¶ã€æ•°æ®ã€å›¾ç‰‡æ–‡ä»¶åªæ˜¯ä¸€ç§è¡¨é¢ç°è±¡ï¼Œæ‰€æœ‰æ–‡ä»¶åœ¨åº•å±‚éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå³å…¨éƒ¨éƒ½æ˜¯å­—èŠ‚ç ã€‚å›¾ç‰‡ã€éŸ³ä¹æ–‡ä»¶æš‚æ—¶å…ˆä¸è¯´ï¼Œå¯¹äºæ–‡æœ¬æ–‡ä»¶è€Œè¨€ï¼Œä¹‹æ‰€ä»¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ªä¸ªçš„å­—ç¬¦ï¼Œè¿™å®Œå…¨æ˜¯å› ä¸ºç³»ç»Ÿå°†åº•å±‚çš„äºŒè¿›åˆ¶åºåˆ—è½¬æ¢æˆå­—ç¬¦çš„ç¼˜æ•…ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠä¸¤ä¸ªæ¦‚å¿µï¼šç¼–ç ï¼ˆEncodeï¼‰å’Œè§£ç ï¼ˆDecodeï¼‰ï¼Œé€šå¸¸è€Œè¨€ï¼ŒæŠŠæ˜æ–‡çš„å­—ç¬¦åºåˆ—è½¬æ¢æˆè®¡ç®—æœºç†è§£çš„äºŒè¿›åˆ¶åºåˆ—ï¼ˆæ™®é€šäººçœ‹ä¸æ‡‚ï¼‰ç§°ä¸ºç¼–ç ï¼ŒæŠŠäºŒè¿›åˆ¶åºåˆ—è½¬æ¢æˆæ™®é€šäººèƒ½çœ‹æ‡‚çš„æ˜æ–‡å­—ç¬¦ä¸²ç§°ä¸ºè§£ç ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181705441.jpeg" alt="epub_681336_2060"></p><p>å½“éœ€è¦ä¿å­˜æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œç¨‹åºå¿…é¡»å…ˆæŠŠæ–‡ä»¶ä¸­çš„æ¯ä¸ªå­—ç¬¦ç¿»è¯‘æˆäºŒè¿›åˆ¶åºåˆ—ï¼›å½“éœ€è¦è¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œç¨‹åºå¿…é¡»æŠŠäºŒè¿›åˆ¶åºåˆ—è½¬æ¢ä¸ºä¸€ä¸ªä¸ªçš„å­—ç¬¦ã€‚</p><p>Java é»˜è®¤ä½¿ç”¨ Unicode å­—ç¬¦é›†ï¼Œä½†å¾ˆå¤šæ“ä½œç³»ç»Ÿå¹¶ä¸ä½¿ç”¨ Unicode å­—ç¬¦é›†ï¼Œé‚£ä¹ˆå½“ä»ç³»ç»Ÿä¸­è¯»å–æ•°æ®åˆ° Java ç¨‹åºä¸­æ—¶ï¼Œå°±å¯èƒ½å‡ºç°ä¹±ç ç­‰é—®é¢˜ JDK 1.4 æä¾›äº† Charset æ¥å¤„ç†å­—èŠ‚åºåˆ—å’Œå­—ç¬¦åºåˆ—ï¼ˆå­—ç¬¦ä¸²ï¼‰ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œè¯¥ç±»åŒ…å«äº†ç”¨äºåˆ›å»ºè§£ç å™¨å’Œç¼–ç å™¨çš„æ–¹æ³•ï¼Œè¿˜æä¾›äº†è·å– Charset æ‰€æ”¯æŒå­—ç¬¦é›†çš„æ–¹æ³•ï¼ŒCharset ç±»æ˜¯ä¸å¯å˜çš„ã€‚Charset ç±»æä¾›äº†ä¸€ä¸ª <code>availableCharsets()</code> é™æ€æ–¹æ³•æ¥è·å–å½“å‰ JDK æ‰€æ”¯æŒçš„æ‰€æœ‰å­—ç¬¦é›†ã€‚æ‰€ä»¥ç¨‹åºå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ç¨‹åºæ¥è·å–è¯¥ JDK æ‰€æ”¯æŒçš„å…¨éƒ¨å­—ç¬¦é›†ã€‚</p><div class="custom-container info"><p class="custom-container-title">ç›¸å…³ä¿¡æ¯</p><p>ä¸ºäº†è§£å†³äºŒè¿›åˆ¶åºåˆ—ä¸å­—ç¬¦ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œè¿™å°±éœ€è¦å­—ç¬¦é›†äº†ã€‚å…³äºå­—ç¬¦é›†çš„ä»‹ç»ï¼Œå¤ªå¤šä¹¦ç±ä»‹ç»å¾—â€œäº‘é‡Œé›¾é‡Œâ€äº†ã€‚å…¶å®å¾ˆç®€å•ï¼Œæ‰€è°“å­—ç¬¦é›†ï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ä¸ªå·ç è€Œå·²ã€‚ä¸å­˜åœ¨ä»»ä½•çš„æŠ€æœ¯éš¾åº¦ï¼ä»»ä½•äººéƒ½å¯åˆ¶å®šè‡ªå·±ç‹¬æœ‰çš„å­—ç¬¦é›†ï¼Œåªè¦ä¸ºæ¯ä¸ªå­—ç¬¦ç¼–ä¸ªå·ç å³å¯ã€‚</p><p>æ¯”å¦‚å°†â€œåˆšâ€å­—ç¼–å·ä¸º 65ï¼Œè¿™æ ·â€œåˆšâ€å­—å°±è½¬æ¢æˆ 01000001ï¼›åè¿‡æ¥ï¼Œ01000001 ä¹Ÿå¯è¢«æ¢å¤æˆâ€œåˆšâ€å­—ã€‚å½“ç„¶ï¼Œå¦‚æœæ¯ä¸ªäººéƒ½åˆ¶å®šè‡ªå·±ç‹¬æœ‰çš„å­—ç¬¦é›†ï¼Œé‚£ç¨‹åºå°±æ²¡æ³•äº¤æµäº†â€”â€”A ç¨‹åºä½¿ç”¨ A å­—ç¬¦é›†ï¼ˆA å­—ç¬¦é›†ä¸­â€œåˆšâ€å­—ç¼–å·ä¸º 65ï¼‰ï¼ŒA ç¨‹åºä¿å­˜â€œåˆšâ€å­—æ—¶ä¿å­˜çš„æ˜¯ 01000001ï¼›B ç¨‹åºä½¿ç”¨ B å­—ç¬¦é›†ï¼ˆB å­—ç¬¦é›†ä¸­ç¼–å·ä¸º 65 çš„å¯èƒ½æ˜¯å…¶ä»–å­—ç¬¦ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å­—ç¬¦ç¼–å· 65ï¼‰ï¼Œé‚£ä¹ˆ B ç¨‹åºè¯»å– 01000001 åï¼Œå†æŒ‰ B å­—ç¬¦é›†æ¢å¤å‡ºæ¥è‡ªç„¶å°±å¾—åˆ°ä¸åˆ°â€œåˆšâ€å­—äº†ã€‚</p></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharsetTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å– Java æ”¯æŒçš„å…¨éƒ¨å­—ç¬¦é›†</span>
    <span class="token class-name">SortedMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">availableCharsets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> alias <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¾“å‡ºå­—ç¬¦é›†çš„åˆ«åå’Œå¯¹åº”çš„ Charset å¯¹è±¡</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>alias <span class="token operator">+</span> <span class="token string">&quot;-----&gt;&quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>alias<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ªå­—ç¬¦é›†éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ï¼Œä¹Ÿè¢«ç§°ä¸ºå­—ç¬¦ä¸²åˆ«åã€‚å¯¹äºä¸­å›½çš„ç¨‹åºå‘˜è€Œè¨€ï¼Œä¸‹é¢å‡ ä¸ªå­—ç¬¦ä¸²åˆ«åæ˜¯å¸¸ç”¨çš„ã€‚</p><ol><li>GBKï¼šç®€ä½“ä¸­æ–‡å­—ç¬¦é›†ã€‚</li><li>BIG5ï¼šç¹ä½“ä¸­æ–‡å­—ç¬¦é›†ã€‚</li><li>ISO-8859-1ï¼šISO æ‹‰ä¸å­—æ¯è¡¨ No.1ï¼Œä¹Ÿå«åš ISO-LATIN-1ã€‚</li><li>UTF-8ï¼š8 ä½ UCS è½¬æ¢æ ¼å¼ã€‚</li><li>UTF-16BEï¼š16 ä½ UCS è½¬æ¢æ ¼å¼ï¼ŒBig-endianï¼ˆæœ€ä½åœ°å€å­˜æ”¾é«˜ä½å­—èŠ‚ï¼‰å­—èŠ‚é¡ºåºã€‚</li><li>UTF-16LEï¼š16 ä½ UCS è½¬æ¢æ ¼å¼ï¼ŒLittle-endianï¼ˆæœ€é«˜åœ°å€å­˜æ”¾ä½ä½å­—èŠ‚ï¼‰å­—èŠ‚é¡ºåºã€‚</li><li>UTF-16ï¼š16 ä½ UCS è½¬æ¢æ ¼å¼ï¼Œå­—èŠ‚é¡ºåºç”±å¯é€‰çš„å­—èŠ‚é¡ºåºæ ‡è®°æ¥æ ‡è¯†ã€‚</li></ol><div class="custom-container info"><p class="custom-container-title">ç›¸å…³ä¿¡æ¯</p><p>å¯ä»¥ä½¿ç”¨ System ç±»çš„ <code>getProperties()</code> æ–¹æ³•æ¥è®¿é—®æœ¬åœ°ç³»ç»Ÿçš„æ–‡ä»¶ç¼–ç æ ¼å¼ï¼Œæ–‡ä»¶ç¼–ç æ ¼å¼çš„å±æ€§åä¸º file.encodingã€‚</p></div><p>çŸ¥é“äº†å­—ç¬¦é›†çš„åˆ«åä¹‹åï¼Œç¨‹åºå°±å¯ä»¥è°ƒç”¨ Charset çš„ <code>forName()</code> æ–¹æ³•æ¥åˆ›å»ºå¯¹åº”çš„ Charset å¯¹è±¡ï¼Œ<code>forName()</code> æ–¹æ³•çš„å‚æ•°å°±æ˜¯ç›¸åº”å­—ç¬¦é›†çš„åˆ«åã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Charset</span> cs <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;ISO-8859-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Charset</span> csCn <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å¾—äº† <code>Charset</code> å¯¹è±¡ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è¯¥å¯¹è±¡çš„ <code>newDecoder()</code>ã€<code>newEncoder()</code> è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«è¿”å› <code>CharsetDecoder</code> å’Œ <code>CharsetEncoder</code> å¯¹è±¡ï¼Œä»£è¡¨è¯¥ <code>Charset</code> çš„è§£ç å™¨å’Œç¼–ç å™¨ã€‚è°ƒç”¨ <code>CharsetDecoder</code> çš„ <code>decode()</code> æ–¹æ³•å°±å¯ä»¥å°† <code>ByteBuffer</code> ï¼ˆå­—èŠ‚åºåˆ—ï¼‰è½¬æ¢æˆ <code>CharBuffer</code>ï¼ˆå­—ç¬¦åºåˆ—ï¼‰ï¼Œè°ƒç”¨ <code>CharsetEncoder</code> çš„ <code>encode()</code> æ–¹æ³•å°±å¯ä»¥å°† <code>CharBuffer</code> æˆ– <code>String</code> ï¼ˆå­—ç¬¦åºåˆ—ï¼‰è½¬æ¢æˆ <code>ByteBuffer</code>ï¼ˆå­—èŠ‚åºåˆ—ï¼‰ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharsetTransform</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºç®€ä½“ä¸­æ–‡å¯¹åº”çš„ Charset</span>
    <span class="token class-name">Charset</span> cn <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å– cn å¯¹è±¡å¯¹åº”çš„ç¼–ç å™¨å’Œè§£ç å™¨</span>
    <span class="token class-name">CharsetEncoder</span> cnEncoder <span class="token operator">=</span> cn<span class="token punctuation">.</span><span class="token function">newEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">CharsetDecoder</span> cnDecoder <span class="token operator">=</span> cn<span class="token punctuation">.</span><span class="token function">newDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ›å»ºä¸€ä¸ª CharBuffer å¯¹è±¡</span>
    <span class="token class-name">CharBuffer</span> cbuff <span class="token operator">=</span> <span class="token class-name">CharBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cbuff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;å­™&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cbuff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;æ‚Ÿ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cbuff<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">&#39;ç©º&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cbuff<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°† CharBuffer ä¸­çš„å­—ç¬¦åºåˆ—è½¬æ¢æˆå­—èŠ‚åºåˆ—</span>
    <span class="token class-name">ByteBuffer</span> bbuff <span class="token operator">=</span> cnEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>cbuff<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¾ªç¯è®¿é—® ByteBuffer ä¸­çš„æ¯ä¸ªå­—èŠ‚</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bbuff<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>bbuff<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å°† ByteBuffer çš„æ•°æ®è§£ç æˆå­—ç¬¦åºåˆ—</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span> <span class="token operator">+</span> cnDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>bbuff<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Charset ç±»ä¹Ÿæä¾›äº†å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>CharBuffer decode(ByteBuffer bb)</code>ï¼šå°† <code>ByteBuffer</code> ä¸­çš„å­—èŠ‚åºåˆ—è½¬æ¢æˆå­—ç¬¦åºåˆ—çš„ä¾¿æ·æ–¹æ³•ã€‚</li><li><code>ByteBuffer encode(CharBuffer cb)</code>ï¼šå°† <code>CharBuffer</code> ä¸­çš„å­—ç¬¦åºåˆ—è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„ä¾¿æ·æ–¹æ³•ã€‚</li><li><code>ByteBuffer encode(String str)</code>ï¼šå°† <code>String</code> ä¸­çš„å­—ç¬¦åºåˆ—è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„ä¾¿æ·æ–¹æ³•ã€‚</li></ol><h2 id="nio-2" tabindex="-1"><a class="header-anchor" href="#nio-2" aria-hidden="true">#</a> NIO.2</h2><p>Java 7 å¯¹åŸæœ‰çš„ NIO è¿›è¡Œäº†é‡å¤§æ”¹è¿›ï¼Œæ”¹è¿›ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹ä¸¤æ–¹é¢çš„å†…å®¹ã€‚</p><ul><li>æä¾›äº†å…¨é¢çš„æ–‡ä»¶ IO å’Œæ–‡ä»¶ç³»ç»Ÿè®¿é—®æ”¯æŒã€‚</li><li>åŸºäºå¼‚æ­¥ Channel çš„ IOã€‚</li></ul><p>ç¬¬ä¸€ä¸ªæ”¹è¿›è¡¨ç°ä¸º Java7 æ–°å¢çš„ java.nio.file åŒ…åŠå„ä¸ªå­åŒ…ï¼›ç¬¬äºŒä¸ªæ”¹è¿›è¡¨ç°ä¸º Java7 åœ¨ java.nio.channels åŒ…ä¸‹å¢åŠ äº†å¤šä¸ªä»¥ Asynchronous å¼€å¤´çš„ Channel æ¥å£å’Œç±»ã€‚</p><h3 id="pathã€paths-å’Œ-files-æ ¸å¿ƒ-api" tabindex="-1"><a class="header-anchor" href="#pathã€paths-å’Œ-files-æ ¸å¿ƒ-api" aria-hidden="true">#</a> Pathã€Paths å’Œ Files æ ¸å¿ƒ API</h3><p>æ—©æœŸçš„ Java åªæä¾›äº†ä¸€ä¸ª File ç±»æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œä½† File ç±»çš„åŠŸèƒ½æ¯”è¾ƒæœ‰é™ï¼Œå®ƒä¸èƒ½åˆ©ç”¨ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿçš„ç‰¹æ€§ï¼ŒFile æ‰€æä¾›çš„æ–¹æ³•çš„æ€§èƒ½ä¹Ÿä¸é«˜ã€‚è€Œä¸”ï¼Œå…¶å¤§å¤šæ•°æ–¹æ³•åœ¨å‡ºé”™æ—¶ä»…è¿”å›å¤±è´¥ï¼Œå¹¶ä¸ä¼šæä¾›å¼‚å¸¸ä¿¡æ¯ã€‚</p><p>NIO.2 ä¸ºäº†å¼¥è¡¥è¿™ç§ä¸è¶³ï¼Œå¼•å…¥äº†ä¸€ä¸ª Path æ¥å£ï¼ŒPath æ¥å£ä»£è¡¨ä¸€ä¸ªå¹³å°æ— å…³çš„å¹³å°è·¯å¾„ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒNIO.2 è¿˜æä¾›äº† Filesã€Paths ä¸¤ä¸ªå·¥å…·ç±»ï¼Œå…¶ä¸­ Files åŒ…å«äº†å¤§é‡é™æ€çš„å·¥å…·æ–¹æ³•æ¥æ“ä½œæ–‡ä»¶ï¼›Paths åˆ™åŒ…å«äº†ä¸¤ä¸ªè¿”å› Path çš„é™æ€å·¥å‚æ–¹æ³•ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PathTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä»¥å½“å‰è·¯å¾„æ¥åˆ›å»º Path å¯¹è±¡</span>
    <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;path é‡ŒåŒ…å«çš„è·¯å¾„æ•°é‡ï¼š&quot;</span>
        <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">getNameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;path çš„æ ¹è·¯å¾„ï¼š&quot;</span> <span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å– path å¯¹åº”çš„ç»å¯¹è·¯å¾„</span>
    <span class="token class-name">Path</span> absolutePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">toAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–ç»å¯¹è·¯å¾„çš„æ ¹è·¯å¾„</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;absolutePath çš„è·Ÿè·¯å¾„ï¼š&quot;</span>
        <span class="token operator">+</span> absolutePath<span class="token punctuation">.</span><span class="token function">getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–ç»å¯¹è·¯å¾„æ‰€åŒ…å«çš„è·¯å¾„æ•°é‡</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;absolutePath é‡ŒåŒ…å«çš„è·¯å¾„æ•°é‡ï¼š&quot;</span>
        <span class="token operator">+</span> absolutePath<span class="token punctuation">.</span><span class="token function">getNameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä»¥å¤šä¸ª String æ¥æ„å»º Path å¯¹è±¡</span>
    <span class="token class-name">Path</span> path2 <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;e:&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;publish&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;codes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Paths æä¾›äº† <code>get(String first, String... more)</code> æ–¹æ³•æ¥è·å– Path å¯¹è±¡ï¼ŒPaths ä¼šå°†ç»™å®šçš„å¤šä¸ªå­—ç¬¦ä¸²è¿ç¼€æˆè·¯å¾„ï¼Œæ¯”å¦‚ <code>Paths.get(&quot;e:&quot; ,&quot;publish&quot; , &quot;codes&quot;)</code> å°±è¿”å› <code>g:\publish\codes</code> è·¯å¾„ã€‚</p><p><code>getNameCount()</code> æ–¹æ³•ä¼šè¿”å› Path è·¯å¾„æ‰€åŒ…å«çš„è·¯å¾„åçš„æ•°é‡ï¼Œä¾‹å¦‚ <code>e:\publish\codes</code> è°ƒç”¨è¯¥æ–¹æ³•å°±ä¼šè¿”å› 3ã€‚</p><p>Files æ˜¯ä¸€ä¸ªæ“ä½œæ–‡ä»¶çš„å·¥å…·ç±»ï¼Œå®ƒæä¾›äº†å¤§é‡ä¾¿æ·çš„å·¥å…·æ–¹æ³•ï¼Œä¸‹é¢ç¨‹åºç®€å•ç¤ºèŒƒäº† Files ç±»çš„ç”¨æ³•ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilesTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¤åˆ¶æ–‡ä»¶</span>
    <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FilesTest.java&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ¤æ–­ FilesTest.java æ–‡ä»¶æ˜¯å¦ä¸ºéšè—æ–‡ä»¶</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FilesTest.java æ˜¯å¦ä¸ºéšè—æ–‡ä»¶ï¼š&quot;</span>
        <span class="token operator">+</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">isHidden</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FilesTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸€æ¬¡æ€§è¯»å– FilesTest.java æ–‡ä»¶çš„æ‰€æœ‰è¡Œ</span>
    <span class="token class-name">List</span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllLines</span><span class="token punctuation">(</span><span class="token class-name">Paths</span>
        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FilesTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ¤æ–­æŒ‡å®šæ–‡ä»¶çš„å¤§å°</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FilesTest.java çš„å¤§å°ä¸ºï¼š&quot;</span>
        <span class="token operator">+</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/FilesTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span> poem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    poem<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;æ°´æ™¶æ½­åº•é“¶é±¼è·ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    poem<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;æ¸…å¾é£ä¸­ç¢§ç«¿æ¨ª&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›´æ¥å°†å¤šä¸ªå­—ç¬¦ä¸²å†…å®¹å†™å…¥æŒ‡å®šæ–‡ä»¶ä¸­</span>
    <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;pome.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> poem
        <span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">FileStore</span> cStore <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileStore</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;C:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆ¤æ–­ C ç›˜çš„æ€»ç©ºé—´ã€å¯ç”¨ç©ºé—´</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;C: å…±æœ‰ç©ºé—´ï¼š&quot;</span> <span class="token operator">+</span> cStore<span class="token punctuation">.</span><span class="token function">getTotalSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;C: å¯ç”¨ç©ºé—´ï¼š&quot;</span> <span class="token operator">+</span> cStore<span class="token punctuation">.</span><span class="token function">getUsableSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨-filevisitor-éå†æ–‡ä»¶å’Œç›®å½•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-filevisitor-éå†æ–‡ä»¶å’Œç›®å½•" aria-hidden="true">#</a> ä½¿ç”¨ FileVisitor éå†æ–‡ä»¶å’Œç›®å½•</h3><p>Files ç±»æä¾›äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•æ¥éå†æ–‡ä»¶å’Œå­ç›®å½•ã€‚</p><ol><li><code>walkFileTree(Path start, FileVisitor&lt;? super Path&gt; visitor)</code>ï¼šéå† start è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ã€‚</li><li><code>walkFileTree(Path start, Set&lt;FileVisitOption&gt; options, int maxDepth,FileVisitor&lt;? super Path&gt;visitor)</code> ï¼šä¸ä¸Šä¸€ä¸ªæ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼ã€‚è¯¥æ–¹æ³•æœ€å¤šéå† <code>maxDepth</code> æ·±åº¦çš„æ–‡ä»¶ã€‚</li></ol><p>ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦ <code>FileVisitor</code> å‚æ•°ï¼Œ<code>FileVisitor</code> ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶è®¿é—®å™¨ï¼Œ<code>walkFileTree()</code> æ–¹æ³•ä¼šè‡ªåŠ¨éå† start è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ï¼Œéå†æ–‡ä»¶å’Œå­ç›®å½•éƒ½ä¼šâ€œè§¦å‘â€ <code>FileVisitor</code> ä¸­ç›¸åº”çš„æ–¹æ³•ã€‚<code>FileVisitor</code> ä¸­å®šä¹‰äº†å¦‚ä¸‹ 4 ä¸ªæ–¹æ³•ã€‚</p><ol><li><code>FileVisitResult postVisitDirectory(T dir, IOException exc)</code>ï¼šè®¿é—®å­ç›®å½•ä¹‹åè§¦å‘è¯¥æ–¹æ³•ã€‚</li><li><code>FileVisitResult preVisitDirectory(T dir, BasicFileAttributes attrs)</code>ï¼šè®¿é—®å­ç›®å½•ä¹‹å‰è§¦å‘è¯¥æ–¹æ³•ã€‚</li><li><code>FileVisitResult visitFile(T file, BasicFileAttributes attrs)</code>ï¼šè®¿é—® file æ–‡ä»¶æ—¶è§¦å‘è¯¥æ–¹æ³•ã€‚</li><li><code>FileVisitResult visitFileFailed(T file, IOException exc)</code>ï¼šè®¿é—® file æ–‡ä»¶å¤±è´¥æ—¶è§¦å‘è¯¥æ–¹æ³•ã€‚</li></ol><p>ä¸Šé¢ 4 ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ª <code>FileVisitResult</code> å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾ç±»ï¼Œä»£è¡¨äº†è®¿é—®ä¹‹åçš„åç»­è¡Œä¸ºã€‚<code>FileVisitResult</code> å®šä¹‰äº†å¦‚ä¸‹å‡ ç§åç»­è¡Œä¸ºã€‚</p><ol><li><code>CONTINUE</code>ï¼šä»£è¡¨â€œç»§ç»­è®¿é—®â€çš„åç»­è¡Œä¸ºã€‚</li><li><code>SKIP_SIBLINGS</code>ï¼šä»£è¡¨â€œç»§ç»­è®¿é—®â€çš„åç»­è¡Œä¸ºï¼Œä½†ä¸è®¿é—®è¯¥æ–‡ä»¶æˆ–ç›®å½•çš„å…„å¼Ÿæ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li><code>SKIP_SUBTREE</code>ï¼šä»£è¡¨â€œç»§ç»­è®¿é—®â€çš„åç»­è¡Œä¸ºï¼Œä½†ä¸è®¿é—®è¯¥æ–‡ä»¶æˆ–ç›®å½•çš„å­ç›®å½•æ ‘ã€‚</li><li><code>TERMINATE</code>ï¼šä»£è¡¨â€œä¸­æ­¢è®¿é—®â€çš„åç»­è¡Œä¸ºã€‚</li></ol><p>å®é™…ç¼–ç¨‹æ—¶æ²¡å¿…è¦ä¸º <code>FileVisitor</code> çš„ 4 ä¸ªæ–¹æ³•éƒ½æä¾›å®ç°ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿ <code>SimpleFileVisitor</code>ï¼ˆ<code>FileVisitor</code> çš„å®ç°ç±»ï¼‰æ¥å®ç°è‡ªå·±çš„â€œæ–‡ä»¶è®¿é—®å™¨â€ï¼Œè¿™æ ·å°±æ ¹æ®éœ€è¦ã€é€‰æ‹©æ€§åœ°é‡å†™æŒ‡å®šæ–¹æ³•äº†ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileVisitorTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// éå† g:\publish\codes\15 ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span>
    <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walkFileTree</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;E:&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Project&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IO æµ&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// è®¿é—®æ–‡ä»¶æ—¶è§¦å‘è¯¥æ–¹æ³•</span>
          <span class="token annotation punctuation">@Override</span>
          <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">visitFile</span><span class="token punctuation">(</span><span class="token class-name">Path</span> file
              <span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­£åœ¨è®¿é—®&quot;</span> <span class="token operator">+</span> file <span class="token operator">+</span> <span class="token string">&quot;æ–‡ä»¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ‰¾åˆ°äº† FileVisitorTest.java æ–‡ä»¶</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;FileVisitorTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--å·²ç»æ‰¾åˆ°ç›®æ ‡æ–‡ä»¶--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">TERMINATE</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token comment">// å¼€å§‹è®¿é—®ç›®å½•æ—¶è§¦å‘è¯¥æ–¹æ³•</span>
          <span class="token annotation punctuation">@Override</span>
          <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">preVisitDirectory</span><span class="token punctuation">(</span><span class="token class-name">Path</span> dir
              <span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­£åœ¨è®¿é—®ï¼š&quot;</span> <span class="token operator">+</span> dir <span class="token operator">+</span> <span class="token string">&quot; è·¯å¾„&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨-watchservice-ç›‘æ§æ–‡ä»¶å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-watchservice-ç›‘æ§æ–‡ä»¶å˜åŒ–" aria-hidden="true">#</a> ä½¿ç”¨ WatchService ç›‘æ§æ–‡ä»¶å˜åŒ–</h3><p>NIO.2 çš„ Path ç±»æä¾›äº†å¦‚ä¸‹ä¸€ä¸ªæ–¹æ³•æ¥ç›‘å¬æ–‡ä»¶ç³»ç»Ÿçš„å˜åŒ–ã€‚</p><ul><li><code>register(WatchService watcher, WatchEvent.Kind&lt;?&gt;... events)</code>ï¼šç”¨ watcher ç›‘å¬è¯¥ path ä»£è¡¨çš„ç›®å½•ä¸‹çš„æ–‡ä»¶å˜åŒ–ã€‚events å‚æ•°æŒ‡å®šè¦ç›‘å¬å“ªäº›ç±»å‹çš„äº‹ä»¶ã€‚</li></ul><p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ <code>WatchService</code> ä»£è¡¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿç›‘å¬æœåŠ¡ï¼Œå®ƒè´Ÿè´£ç›‘å¬ path ä»£è¡¨çš„ç›®å½•ä¸‹çš„æ–‡ä»¶å˜åŒ–ã€‚ä¸€æ—¦ä½¿ç”¨ <code>register()</code> æ–¹æ³•å®Œæˆæ³¨å†Œä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯è°ƒç”¨ <code>WatchService</code> çš„å¦‚ä¸‹ 3 ä¸ªæ–¹æ³•æ¥è·å–è¢«ç›‘å¬ç›®å½•çš„æ–‡ä»¶å˜åŒ–äº‹ä»¶ã€‚</p><ol><li><code>WatchKey poll()</code>ï¼šè·å–ä¸‹ä¸€ä¸ª <code>WatchKey</code>ï¼Œå¦‚æœæ²¡æœ‰ <code>WatchKey</code> å‘ç”Ÿå°±ç«‹å³è¿”å› nullã€‚</li><li><code>WatchKey poll(long timeout, TimeUnit unit)</code>ï¼šå°è¯•ç­‰å¾… timeout æ—¶é—´å»è·å–ä¸‹ä¸€ä¸ª <code>WatchKey</code>ã€‚</li><li><code>WatchKey take()</code>ï¼šè·å–ä¸‹ä¸€ä¸ª <code>WatchKey</code>ï¼Œå¦‚æœæ²¡æœ‰ <code>WatchKey</code> å‘ç”Ÿå°±ä¸€ç›´ç­‰å¾…ã€‚</li></ol><p>å¦‚æœç¨‹åºéœ€è¦ä¸€ç›´ç›‘æ§ï¼Œåˆ™åº”è¯¥é€‰æ‹©ä½¿ç”¨ <code>take()</code> æ–¹æ³•ï¼›å¦‚æœç¨‹åºåªéœ€è¦ç›‘æ§æŒ‡å®šæ—¶é—´ï¼Œåˆ™å¯è€ƒè™‘ä½¿ç”¨ <code>poll()</code> æ–¹æ³•ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WatchServiceTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–æ–‡ä»¶ç³»ç»Ÿçš„WatchServiceå¯¹è±¡</span>
    <span class="token class-name">WatchService</span> watchService <span class="token operator">=</span> <span class="token class-name">FileSystems</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">newWatchService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸ºC:ç›˜æ ¹è·¯å¾„æ³¨å†Œç›‘å¬</span>
    <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;C:/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>watchService
        <span class="token punctuation">,</span> <span class="token class-name">StandardWatchEventKinds</span><span class="token punctuation">.</span><span class="token constant">ENTRY_CREATE</span>
        <span class="token punctuation">,</span> <span class="token class-name">StandardWatchEventKinds</span><span class="token punctuation">.</span><span class="token constant">ENTRY_MODIFY</span>
        <span class="token punctuation">,</span> <span class="token class-name">StandardWatchEventKinds</span><span class="token punctuation">.</span><span class="token constant">ENTRY_DELETE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è·å–ä¸‹ä¸€ä¸ªæ–‡ä»¶å˜åŒ–äº‹ä»¶</span>
      <span class="token class-name">WatchKey</span> key <span class="token operator">=</span> watchService<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//â‘ </span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event <span class="token operator">:</span> key<span class="token punctuation">.</span><span class="token function">pollEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; æ–‡ä»¶å‘ç”Ÿäº† &quot;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span><span class="token function">kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;äº‹ä»¶ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// é‡è®¾WatchKey</span>
      <span class="token keyword">boolean</span> valid <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å¦‚æœé‡è®¾å¤±è´¥ï¼Œé€€å‡ºç›‘å¬</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¯¥ç¨‹åºï¼Œç„¶ååœ¨ C: ç›˜ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå†åˆ é™¤è¯¥æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå°†çœ‹åˆ°ç›¸åº”è¾“å‡ºã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181930406.png" alt="image-20220818193055857"></p><h3 id="è®¿é—®æ–‡ä»¶å±æ€§" tabindex="-1"><a class="header-anchor" href="#è®¿é—®æ–‡ä»¶å±æ€§" aria-hidden="true">#</a> è®¿é—®æ–‡ä»¶å±æ€§</h3><p>NIO.2 åœ¨ <code>java.nio.file.attribute</code> åŒ…ä¸‹æä¾›äº†å¤§é‡çš„å·¥å…·ç±»ï¼Œé€šè¿‡è¿™äº›å·¥å…·ç±»ï¼Œå¼€å‘è€…å¯ä»¥éå¸¸ç®€å•åœ°è¯»å–ã€ä¿®æ”¹æ–‡ä»¶å±æ€§ã€‚è¿™äº›å·¥å…·ç±»ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ã€‚</p><ol><li><code>XxxAttributeView</code>ï¼šä»£è¡¨æŸç§æ–‡ä»¶å±æ€§çš„â€œè§†å›¾â€ã€‚</li><li><code>XxxAttributes</code>ï¼šä»£è¡¨æŸç§æ–‡ä»¶å±æ€§çš„â€œé›†åˆâ€ï¼Œç¨‹åºä¸€èˆ¬é€šè¿‡ <code>XxxAttributeView</code> å¯¹è±¡æ¥è·å–<code>XxxAttributes</code> ã€‚</li></ol><p>åœ¨è¿™äº›å·¥å…·ç±»ä¸­ï¼Œ<code>FileAttributeView</code> æ˜¯å…¶ä»– <code>XxxAttributeView</code> çš„çˆ¶æ¥å£ã€‚</p><ol><li><code>AclFileAttributeView</code>ï¼šé€šè¿‡ <code>AclFileAttributeView</code>ï¼Œå¼€å‘è€…å¯ä»¥ä¸ºç‰¹å®šæ–‡ä»¶è®¾ç½® ACLï¼ˆAccess ControlListï¼‰åŠæ–‡ä»¶æ‰€æœ‰è€…å±æ€§ã€‚å®ƒçš„ <code>getAcl()</code> æ–¹æ³•è¿”å› <code>List&lt;AclEntry&gt;</code> å¯¹è±¡ï¼Œè¯¥è¿”å›å€¼ä»£è¡¨äº†è¯¥æ–‡ä»¶çš„æƒé™é›†ã€‚é€šè¿‡ <code>setAcl(List)</code>æ–¹æ³•å¯ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶çš„ ACLã€‚</li><li><code>BasicFileAttributeView</code>ï¼šå®ƒå¯ä»¥è·å–æˆ–ä¿®æ”¹æ–‡ä»¶çš„åŸºæœ¬å±æ€§ï¼ŒåŒ…æ‹¬æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€æœ€åè®¿é—®æ—¶é—´ã€åˆ›å»ºæ—¶é—´ã€å¤§å°ã€æ˜¯å¦ä¸ºç›®å½•ã€æ˜¯å¦ä¸ºç¬¦å·é“¾æ¥ç­‰ã€‚å®ƒçš„ <code>readAttributes()</code>æ–¹æ³•è¿”å›ä¸€ä¸ª <code>BasicFileAttributes</code> å¯¹è±¡ï¼Œå¯¹æ–‡ä»¶å¤¹åŸºæœ¬å±æ€§çš„ä¿®æ”¹æ˜¯é€šè¿‡ <code>BasicFileAttributes</code> å¯¹è±¡å®Œæˆçš„ã€‚</li><li><code>DosFileAttributeView</code>ï¼šå®ƒä¸»è¦ç”¨äºè·å–æˆ–ä¿®æ”¹æ–‡ä»¶ DOS ç›¸å…³å±æ€§ï¼Œæ¯”å¦‚æ–‡ä»¶æ˜¯å¦åªè¯»ã€æ˜¯å¦éšè—ã€æ˜¯å¦ä¸ºç³»ç»Ÿæ–‡ä»¶ã€æ˜¯å¦æ˜¯å­˜æ¡£æ–‡ä»¶ç­‰ã€‚å®ƒçš„ <code>readAttributes()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>DosFileAttributes</code> å¯¹è±¡ï¼Œå¯¹è¿™äº›å±æ€§çš„ä¿®æ”¹å…¶å®æ˜¯ç”± <code>DosFileAttributes</code> å¯¹è±¡æ¥å®Œæˆçš„ã€‚</li><li><code>FileOwnerAttributeView</code>ï¼šå®ƒä¸»è¦ç”¨äºè·å–æˆ–ä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚å®ƒçš„ <code>getOwner()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>UserPrincipal</code> å¯¹è±¡æ¥ä»£è¡¨æ–‡ä»¶æ‰€æœ‰è€…ï¼›ä¹Ÿå¯è°ƒç”¨ <code>setOwner(UserPrincipal owner)</code> æ–¹æ³•æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚</li><li><code>PosixFileAttributeView</code>ï¼šå®ƒä¸»è¦ç”¨äºè·å–æˆ–ä¿®æ”¹ <code>POSIXï¼ˆPortable Operating System Interface of INIXï¼‰</code> å±æ€§ï¼Œå®ƒçš„ <code>readAttributes()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>PosixFileAttributes</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ç”¨äºè·å–æˆ–ä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€ç»„æ‰€æœ‰è€…ã€è®¿é—®æƒé™ä¿¡æ¯ï¼ˆå°±æ˜¯ UNIX çš„ chmod å‘½ä»¤è´Ÿè´£å¹²çš„äº‹æƒ…ï¼‰ã€‚è¿™ä¸ª View åªåœ¨ UNIXã€Linux ç­‰ç³»ç»Ÿä¸Šæœ‰ç”¨ã€‚</li><li><code>UserDefinedFileAttributeView</code>ï¼šå®ƒå¯ä»¥è®©å¼€å‘è€…ä¸ºæ–‡ä»¶è®¾ç½®ä¸€äº›è‡ªå®šä¹‰å±æ€§ã€‚</li></ol><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ idea å†è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AttributeViewTest</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
      <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–å°†è¦æ“ä½œçš„æ–‡ä»¶</span>
    <span class="token class-name">Path</span> testPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;test/src/IO æµ/AttributeViewTest.java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è®¿é—®åŸºæœ¬å±æ€§çš„ BasicFileAttributeView</span>
    <span class="token class-name">BasicFileAttributeView</span> basicView <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileAttributeView</span><span class="token punctuation">(</span>
        testPath<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributeView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è®¿é—®åŸºæœ¬å±æ€§çš„ BasicFileAttributes</span>
    <span class="token class-name">BasicFileAttributes</span> basicAttribs <span class="token operator">=</span> basicView<span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¿é—®æ–‡ä»¶çš„åŸºæœ¬å±æ€§</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ›å»ºæ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>basicAttribs
        <span class="token punctuation">.</span><span class="token function">creationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ€åè®¿é—®æ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>basicAttribs
        <span class="token punctuation">.</span><span class="token function">lastAccessTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ€åä¿®æ”¹æ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>basicAttribs
        <span class="token punctuation">.</span><span class="token function">lastModifiedTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶å¤§å°ï¼š&quot;</span> <span class="token operator">+</span> basicAttribs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è®¿é—®æ–‡ä»¶å±ä¸»ä¿¡æ¯çš„ FileOwnerAttributeView</span>
    <span class="token class-name">FileOwnerAttributeView</span> ownerView <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileAttributeView</span><span class="token punctuation">(</span>
        testPath<span class="token punctuation">,</span> <span class="token class-name">FileOwnerAttributeView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è¯¥æ–‡ä»¶æ‰€å±çš„ç”¨æˆ·</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ownerView<span class="token punctuation">.</span><span class="token function">getOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–ç³»ç»Ÿä¸­ guest å¯¹åº”çš„ç”¨æˆ·</span>
    <span class="token class-name">UserPrincipal</span> user <span class="token operator">=</span> <span class="token class-name">FileSystems</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">getUserPrincipalLookupService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">lookupPrincipalByName</span><span class="token punctuation">(</span><span class="token string">&quot;guest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¿®æ”¹ç”¨æˆ·</span>
    ownerView<span class="token punctuation">.</span><span class="token function">setOwner</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è®¿é—®è‡ªå®šä¹‰å±æ€§çš„ FileOwnerAttributeView</span>
    <span class="token class-name">UserDefinedFileAttributeView</span> userView <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileAttributeView</span><span class="token punctuation">(</span>
        testPath<span class="token punctuation">,</span> <span class="token class-name">UserDefinedFileAttributeView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> attrNames <span class="token operator">=</span> userView<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// éå†æ‰€æœ‰çš„è‡ªå®šä¹‰å±æ€§</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> attrNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">ByteBuffer</span> buf <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span>userView<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      userView<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
      buf<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">defaultCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;---&gt;&quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§</span>
    userView<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;å‘è¡Œè€…&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">defaultCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;ç–¯ç‹‚ Java è”ç›Ÿ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–è®¿é—® DOS å±æ€§çš„ DosFileAttributeView</span>
    <span class="token class-name">DosFileAttributeView</span> dosView <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileAttributeView</span><span class="token punctuation">(</span>testPath
        <span class="token punctuation">,</span> <span class="token class-name">DosFileAttributeView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°†æ–‡ä»¶è®¾ç½®éšè—ã€åªè¯»</span>
    dosView<span class="token punctuation">.</span><span class="token function">setHidden</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dosView<span class="token punctuation">.</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181955276.png" alt="image-20220818195525742"></p><p>ç¬¬ä¸€æ¬¡è¿è¡Œå <code>AttributeViewTest.java</code> æ–‡ä»¶å˜æˆéšè—ã€åªè¯»æ–‡ä»¶ï¼Œå› æ­¤ç¬¬äºŒæ¬¡è¿è¡Œä¹‹å‰ä¸€å®šè¦å…ˆå–æ¶ˆåªè¯»å±æ€§ã€‚</p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181959948.png" alt="image-20220818195916153"></p><p><img src="https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202208181957696.png" alt="image-20220818195740640"></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/SurplusFate/SurplusFate.github.io/edit/main/docs/docs/docs/Java/17. IOæµ.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></footer><nav class="page-nav"><a href="/docs/Java/16.%20%E6%B3%A8%E8%A7%A3.html" class="nav-link prev" aria-label="16. æ³¨è§£"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="icon iconfont icon-note"></span>16. æ³¨è§£</div></a><a href="/docs/Java/18.%20%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" class="nav-link next" aria-label="18. å¤šçº¿ç¨‹"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">18. å¤šçº¿ç¨‹<span class="icon iconfont icon-note"></span></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.6cc3427f.js" defer></script>
  </body>
</html>
