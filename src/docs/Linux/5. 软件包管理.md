---
icon: note
date: 2022-10-12
order: 5
category:
  - linux
---

# 软件包管理

## RPM

### 概述

RPM(RedHat Package Manager),RedHat 软件包管理工具，类似于 windows 里面的 setup.exe，是 Linux 这系列操作系统的打包安装工具，它虽然是 RedHat 的标志，但理念是通用的。

RPM 包的名称格式

Apache-1.3.23-11.i386.rpm

“apache” 软件名称

“1.3.23-11”软件的版本号，主版本和此版本

“i386”是软件所运行的硬件平台，Intel 32 位处理器的统称

“rpm”文件扩展名，代表 RPM 包

### 查询命令

查询所安装的所有 rpm 软件包

```shell
rpm -qa
```

由于软件包比较多，一般都会才去过滤 `rpm -qa | grep 名称`

查询软件包是否安装

```shell
rpm -q 名称
```

查询软件包信息

```shell
rpm -qi 名称
```

查询软件包中的文件

```shell
rpm -ql 名称
```

查询文件所属软件包

```shell
rpm -qf 文件全路径名
```

### 卸载命令

卸载软件包

```shell
rpm -e 名称
```

卸载软件时，不检查依赖。这样的话，那些使用该软件包的软件在此之后可能就不能正常工作

```shell
rpm -e --nodeps 名称
```

卸载 firefox

```bash
rpm -e firefox
```

### 安装命令

```shell
rpm -ivh 包全名
```

| 选项     | 功能                   |
| -------- | ---------------------- |
| -i       | install 安装           |
| -v       | --verbose 显示详细信息 |
| -h       | --hase，进度条         |
| --nodeps | 安装前不检查依赖       |

安装 firefox

```bash
rpm -ivh firefox-45.0.1-1.el6.centos.x86_64.rpm
```

## 仓库配置

### YUM 概述

YUM(全称为 Yellow dog Updater, Modified)是一个在 Fedora 和 RedHat 以及 CentOS 中的 Shell 前端软件包管理。基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次 安装所有依赖的软件包，无须繁琐地一次一次下载，安装。

### YUM 的常用命令

```shell
yum [选项] [参数]
```

| 选项 | 功能                  |
| ---- | --------------------- |
| -y   | 对所有提问都回答“yes" |

| 参数         | 功能                            |
| ------------ | ------------------------------- |
| install      | 安装 rpm 软件包                 |
| update       | 更新 rpm 软件包                 |
| check-update | 检查是否有可用的更新 rpm 软件包 |
| remove       | 删除指定的 rpm 软件包           |
| list         | 显示软件包信息                  |
| clean        | 清除 yum 过期的缓存             |
| deplist      | 显示 yum 软件包的所有依赖关系   |

yum 方式安装 firefox

```shell
# 查询yum服务器是否有需要的软件
yum list | grep firefox
# 卸载老版本
yum remove firefox
# 安装
yum -y install firefox
```

### 修改网络 YUM 源

默认的系统 YUM 源(默认会自己搜索最近的)，需要连接国外 apache 网站，网速比较慢，可以修改关联的网络 YUM 源为国内镜像的网站，比如网易 163,aliyun 等

安装 wget, wget 用来从指定的 URL 下载文件

```shell
yum install wget
```

在/etc/yum.repos.d/目录下，备份默认的 repos 文件

```shell
cp CentOS-Base.repo CentOS-Base .repo.backup
```

下载网易 163 或者是 aliyun 的 repos 文件,任选其一

```shell
wget http://mirrors.aliyun.com/repo/Centos-7.repo # 阿里云
wget http://mirrors.163.com/.help/CentOS7-Base-163.repo # 网易
```

使用下载好的 repos 文件替换默认的 repos 文件 例如:用 CentOS7-Base-163.repo 替换 CentOS-Base.repo

```shell
mv CentOS7-Base-163.repo CentOS-Base.repo
```

清理旧缓存数据，缓存新数据

```shell
yum clean all
yum makecache
```

yum makecache 就是把服务器的包信息下载到本地电脑缓存起来

测试

```shell
yum list | grep firefox
yum -y install firefox
```
