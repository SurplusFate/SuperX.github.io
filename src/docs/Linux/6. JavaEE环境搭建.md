---
icon: note
date: 2022-10-12
order: 6
category:
  - linux
---



# JavaEE 环境搭建

检查当前环境是否已经安装对应的软件包

```shell
rpm -qa | grep -i 软件名
```

如 java

```shell
rpm -qa | grep -i java
```

mysql

```shell
rpm -qa | grep -i mysql
```

## 安装 JDK

原文: [Linux CentOS 7 安装 JDK 详细步骤 - 腾讯云开发者社区 - 腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1412643)

### 第一种方式：yum 命令安装

检索包含 java 的列表

```shell
[root@node-100 ~]# yum list java*
```

如果有结果类似如下：

```shell
[root@node-100 ~]# yum list java*
已加载插件：fastestmirror, langpacks
Determining fastest mirrors
* base: mirrors.nwsuaf.edu.cn
* extras: mirrors.cn99.com
* updates: mirrors.cn99.com
可安装的软件包
java-1.6.0-openjdk.x86_64                                                                   1:1.6.0.41-1.13.13.1.el7_3                                               base
java-1.6.0-openjdk-demo.x86_64                                                              1:1.6.0.41-1.13.13.1.el7_3                                               base
java-1.6.0-openjdk-devel.x86_64                                                             1:1.6.0.41-1.13.13.1.el7_3                                               base
java-1.6.0-openjdk-javadoc.x86_64                                                           1:1.6.0.41-1.13.13.1.el7_3                                               base
java-1.6.0-openjdk-src.x86_64                                                               1:1.6.0.41-1.13.13.1.el7_3                                               base
java-1.7.0-openjdk.x86_64                                                                   1:1.7.0.201-2.6.16.1.el7_6
...
```

选择需要的 JDK 版本 yum 命令安装：

```shell
yum install -y java-1.8.0-openjdk-devel.x86_64
```

检查版本：

```shell
[root@node-100 ~]# java -version
java version "1.8.0_191"
Java(TM) SE Runtime Environment (build 1.8.0_191-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)
[root@node-100 ~]#
```

### 第二种方式：下载后安装

去 Oracle 官网下载所需 JDK 版本:

<https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html>

上传至所在[服务器](https://cloud.tencent.com/product/cvm?from=10680)，进行解压后

```shell
[root@node-100 jdk1.8.0_191]# pwd
/usr/local/java/jdk1.8.0_191
[root@node-100 jdk1.8.0_191]# ls
bin  COPYRIGHT  include  javafx-src.zip  jre  lib  LICENSE  man  README.html  release  src.zip  THIRDPARTYLICENSEREADME-JAVAFX.txt  THIRDPARTYLICENSEREADME.txt
[root@node-100 jdk1.8.0_191]#
```

设置环境变量：

```shell
[root@node-100 ~]# vim /etc/profile
```

新增：

```shell
#设置jdk环境变量
export JAVA_HOME=/usr/local/java/jdk1.8.0_191  #jdk安装目录
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib:$CLASSPATH
export JAVA_PATH=${JAVA_HOME}/bin:${JRE_HOME}/bin
export PATH=$PATH:${JAVA_PATH}
```

使其生效：

```shell
[root@node-100 ~]# source /etc/profile
[root@node-100 ~]#
```

检查版本：

```shell
[root@node-100 ~]# java -version
java version "1.8.0_191"
Java(TM) SE Runtime Environment (build 1.8.0_191-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)
[root@node-100 ~]#
```

::: tip

环境变量中的 `$PATH` 一定要带上, `:` 追加, 否则会覆盖系统环境变量, 导致其他程序无法正常运行.

:::

## 安装 MySQL

原文: [Centos7 安装 Mysql5.7 最全教程 [通俗易懂\] - 全栈程序员必看 (javaforall.cn)](https://javaforall.cn/134330.html)

### 更新 yum

```shell
yum update -y
```

这里会更新好多内容，需要等待一会。

### 安装 wget 工具

我安装到了 /export/install 这里可以进入你们所想要安装的地方

```shell
cd /先进入你想安装的位置，此后全部在此文件夹进行操作。
```

```shell
sudo yum install -y wget
```

### 使用 wget 下载 mysql yum 源

```shell
wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
```

### 添加 mysql yum 源

```shell
sudo yum localinstall mysql80-community-release-el7-3.noarch.rpm -y
```

### 安装 yum 工具 yum-utils

```shell
sudo yum install -y yum-utils
```

### 查看可用的 mysql

```shell
yum repolist enabled | grep "mysql.*-community.*"
```

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112004800.png)

这里默认 mysql8.0

### 查看所有的 mysql 版本

```shell
yum repolist all | grep mysql
```

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112003206.png)

### 使用指定版本 MySQL

假如我想使用 MySQL5.7，那么我就需要先关闭 MySQL8.0 关闭 MySQL8.0

```shell
sudo yum-config-manager --disable mysql80-community
```

开启 MySQL5.7

```shell
sudo yum-config-manager --enable mysql57-community
```

### 查看当前启用的 MySQL 版本

```shell
yum repolist enabled | grep mysql
```

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112005529.png)

### 安装 MySQL

```shell
sudo yum install -y mysql-community-server
```

期间等待很长时间，等待安装完成。，如果下载速度只有几十 kb，请更换网络，或者使用手机热点进行下载。更换热点后，再次执行此命令即可。

### 有些同学会出现此问题

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112005511.png)

执行此代码块。

```shell
yum module disable mysql
sudo yum install -y mysql-community-server
```

### 启动 MySQL

```shell
sudo service mysqld start
```

### 查看 MySQL 服务状态

```shell
sudo service mysqld status
```

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112006666.png)

### 初始化 MySQL

#### 查看初始化密码

```shell
sudo grep 'temporary password' /var/log/mysqld.log
```

#### 使用初始密码进行登录

```shell
mysql -u root -p
```

#### 初始化密码

```shell
ALTER USER 'root'@'localhost' IDENTIFIED BY 'daasan7ujm^YHN';
```

### 设置 MySQL 密码策略

#### 查询 MySQL 初始的密码策略

```shell
 SHOW VARIABLES LIKE 'validate_password%';
```

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112003133.png)

#### 修改密码验证强度

```shell
set global validate_password_policy=LOW;
```

#### 修改密码长度

```shell
set global validate_password_length=6;
```

### 设置简单密码

```shell
ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
```

::: tip

密码长度最低为 4 位，设置的密码长度小于 4 时，默认改成 4.

:::

### 远程连接

```shell
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
```

**这里的密码时你自己的设置的密码.**

### 刷新权限

```shell
FLUSH PRIVILEGES;
```

### 开机启动

不在 sql 里面配置，在 Linux 命令行执行。！！！不是在 sql 里面

```shell
systemctl enable mysqld
```

MySQL 的配置文件目录位置

```shell
/etc/my.cnf
```

### 配置防火墙

#### 设置 3306 端口开放

```shell
firewall-cmd --zone=public --add-port=3306/tcp --permanent
```

看到 success 表示添加成功。

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112003991.png)

#### 重启防火墙

```shell
firewall-cmd --reload
```

看到 success 表示添加成功。

#### 验证 3306 是否开放成功

```shell
firewall-cmd --zone=public --query-port=3306/tcp
```

### 测试链接

![img](https://gcore.jsdelivr.net/gh/SurplusFate/guide_img@main/img/202210112009088.png)

## 安装 TOMCAT

本地安装

> 1. 下载, 上传, 解压
> 2. 进入解压目录 /bin, 启动 tomcat ./startup.sh
> 3. 配置环境变量
> 4. source /etc/profile 重载配置文件
> 5. 开放端口 8080
> 6. 测试

环境变量

```shell
export CATALINA_HOME=/usr/soft/tomcat9
export PATH=$PATH:$CATALINA_HOME/bin
```

::: tip

环境变量中的 `$PATH` 一定要带上, `:` 追加, 否则会覆盖系统环境变量, 导致其他程序无法正常运行.

:::

开放 8080

```shell
firewall-cmd --zone=public --add-port=8080/tcp --permanent
```

重启防火墙

```shell
firewall-cmd --reload
```

## 查看文件安装路径

由于软件安装的地方不止一个地方，所有先说查看文件安装的所有路径 (地址)。

这里以 **hbase** 为例。比如说我安装了 Oracle，但是不知道文件都安装在哪些地方、放在哪些文件夹里，可 以用下面的命令查看所有的文件路径.

在终端输入：

```shell
whereis hbase
```

回车，如果你安装好了 hbase，就会显示文件安装的地址，例如我的显示 (安装地址可能会不同)

```shell
hbase: /usr/bin/hbase /etc/hbase
```

可以看出来，hbase 安装在是个目录里。

如果你没有安装 hbase 或者 hbase 安装没成功，则不会显示文件路径出来。只提示:

```shell
hbase:
```

## 查询运行文件所在路径

如果你只要查询文件的运行文件所在地址，直接用下面的命令就可以了 (还是以 Oracle 为例)：

```shell
which oracle
```

结果会显示：

```shell
/usr/bin/oracle
```
